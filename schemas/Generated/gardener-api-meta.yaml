openapi: 3.0.0
info:
  title: Bannou Gardener Service API
  description: |
    Player experience orchestration service (L4 GameFeatures) for garden navigation,
    scenario routing, progressive discovery, and deployment phase management.
    Gardener is the player-side counterpart to Puppetmaster: where Puppetmaster
    orchestrates what NPCs experience, Gardener orchestrates what players experience.

    Primary consumer of lib-seed. Interprets seed capabilities as UX modules, uses
    seed growth phases for scenario selection, and manages seed bonds as the pair
    system described in PLAYER-VISION.md. Does NOT own seeds -- creates and grows
    them via lib-seed's API.

    **POST-Only API Pattern**: This API uses POST for all operations to support zero-copy
    WebSocket routing. Path parameters are passed in request bodies instead of URLs.
    See docs/BANNOU_DESIGN.md for architectural rationale.

    **SCHEMA MODIFICATION GATE**: STOP. Before modifying this schema, you MUST:
    1. Read docs/reference/SCHEMA-RULES.md
    2. State which section applies to your change
    3. Only then proceed with edits
    Edits without stating the applicable rule are FORBIDDEN.
  version: 1.0.0
x-service-layer: GameFeatures
servers:
- url: http://localhost:5012
  description: Bannou service endpoint (internal only)
paths:
  /gardener/garden/enter:
    post:
      summary: Enter the garden
      description: |
        Creates a garden instance for the player. Finds or creates the player's
        active guardian seed, initializes drift metrics, and returns the initial
        garden state. First tick of the garden orchestrator spawns POIs.
      operationId: enterGarden
      tags:
      - Garden Management
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnterGardenRequest'
      responses:
        '200':
          description: Garden instance created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GardenStateResponse'
        '404':
          description: No active seed found for account
        '409':
          description: Player already has an active garden instance
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/EnterGardenRequest\"\
        ,\n    \"$defs\": {\n        \"EnterGardenRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to enter the garden\",\n            \"required\": [\n                \"accountId\",\n                \"\
        sessionId\"\n            ],\n            \"properties\": {\n                \"accountId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Account
        entering the garden\"\n                },\n                \"sessionId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Current WebSocket session ID\"\
        \n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GardenStateResponse\"\
        ,\n    \"$defs\": {\n        \"GardenStateResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Current garden instance state for a player\",\n            \"required\": [\n                \"gardenInstanceId\"\
        ,\n                \"seedId\",\n                \"accountId\",\n                \"position\",\n                \"\
        activePois\"\n            ],\n            \"properties\": {\n                \"gardenInstanceId\": {\n           \
        \         \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"\
        Unique identifier for this garden instance\"\n                },\n                \"seedId\": {\n                \
        \    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Active
        seed for this garden session\"\n                },\n                \"accountId\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Account in the garden\"\
        \n                },\n                \"position\": {\n                    \"$ref\": \"#/$defs/Vec3\",\n         \
        \           \"description\": \"Current player position\"\n                },\n                \"activePois\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"$ref\": \"\
        #/$defs/PoiSummary\"\n                    },\n                    \"description\": \"Currently active POIs in this
        garden instance\"\n                }\n            }\n        },\n        \"Vec3\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Three-dimensional spatial coordinates in garden space\",\n            \"required\"\
        : [\n                \"x\",\n                \"y\",\n                \"z\"\n            ],\n            \"properties\"\
        : {\n                \"x\": {\n                    \"type\": \"number\",\n                    \"format\": \"float\"\
        ,\n                    \"description\": \"X coordinate in garden space units\"\n                },\n             \
        \   \"y\": {\n                    \"type\": \"number\",\n                    \"format\": \"float\",\n            \
        \        \"description\": \"Y coordinate in garden space units\"\n                },\n                \"z\": {\n \
        \                   \"type\": \"number\",\n                    \"format\": \"float\",\n                    \"description\"\
        : \"Z coordinate in garden space units\"\n                }\n            }\n        },\n        \"PoiSummary\": {\n\
        \            \"type\": \"object\",\n            \"description\": \"POI state summary for client display\",\n     \
        \       \"required\": [\n                \"poiId\",\n                \"position\",\n                \"poiType\",\n\
        \                \"triggerMode\",\n                \"triggerRadius\",\n                \"status\"\n            ],\n\
        \            \"properties\": {\n                \"poiId\": {\n                    \"type\": \"string\",\n        \
        \            \"format\": \"uuid\",\n                    \"description\": \"Unique identifier for this POI\"\n    \
        \            },\n                \"position\": {\n                    \"$ref\": \"#/$defs/Vec3\",\n              \
        \      \"description\": \"POI position in garden space\"\n                },\n                \"poiType\": {\n   \
        \                 \"$ref\": \"#/$defs/PoiType\",\n                    \"description\": \"Sensory presentation type\"\
        \n                },\n                \"visualHint\": {\n                    \"$ref\": \"#/$defs/ScenarioCategory\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Scenario category hint for client
        rendering\"\n                },\n                \"audioHint\": {\n                    \"type\": \"string\",\n   \
        \                 \"nullable\": true,\n                    \"description\": \"Audio hint identifier for client rendering\"\
        \n                },\n                \"intensityRamp\": {\n                    \"type\": \"number\",\n          \
        \          \"format\": \"float\",\n                    \"description\": \"Current intensity ramp value (0.0-1.0)\"\
        ,\n                    \"default\": 0.0\n                },\n                \"triggerMode\": {\n                \
        \    \"$ref\": \"#/$defs/TriggerMode\",\n                    \"description\": \"How this POI is triggered\"\n    \
        \            },\n                \"triggerRadius\": {\n                    \"type\": \"number\",\n               \
        \     \"format\": \"float\",\n                    \"description\": \"Trigger radius in garden space units\"\n    \
        \            },\n                \"scenarioTemplateId\": {\n                    \"type\": \"string\",\n          \
        \          \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Associated scenario template if this POI leads to a scenario\"\n                },\n                \"status\": {\n\
        \                    \"$ref\": \"#/$defs/PoiStatus\",\n                    \"description\": \"Current lifecycle status\"\
        \n                }\n            }\n        },\n        \"PoiType\": {\n            \"type\": \"string\",\n      \
        \      \"enum\": [\n                \"Visual\",\n                \"Auditory\",\n                \"Environmental\"\
        ,\n                \"Portal\",\n                \"Social\"\n            ],\n            \"description\": \"Sensory
        presentation type for a point of interest in the garden\"\n        },\n        \"ScenarioCategory\": {\n         \
        \   \"type\": \"string\",\n            \"enum\": [\n                \"Combat\",\n                \"Crafting\",\n \
        \               \"Social\",\n                \"Trade\",\n                \"Exploration\",\n                \"Magic\"\
        ,\n                \"Survival\",\n                \"Mixed\",\n                \"Narrative\",\n                \"Tutorial\"\
        \n            ],\n            \"description\": \"Primary gameplay category for a scenario template\"\n        },\n\
        \        \"TriggerMode\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"Proximity\"\
        ,\n                \"Interaction\",\n                \"Prompted\",\n                \"Forced\"\n            ],\n \
        \           \"description\": \"How a POI is triggered by the player\"\n        },\n        \"PoiStatus\": {\n    \
        \        \"type\": \"string\",\n            \"enum\": [\n                \"Active\",\n                \"Entered\"\
        ,\n                \"Declined\",\n                \"Expired\"\n            ],\n            \"description\": \"Current
        lifecycle status of a POI\"\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Enter the garden\",\n    \"description\": \"Creates a garden instance for
        the player. Finds or creates the player's\\nactive guardian seed, initializes drift metrics, and returns the initial\\
        ngarden state. First tick of the garden orchestrator spawns POIs.\\n\",\n    \"tags\": [\n        \"Garden Management\"\
        \n    ],\n    \"deprecated\": false,\n    \"operationId\": \"enterGarden\"\n}"
  /gardener/garden/get:
    post:
      summary: Get current garden state
      description: Returns the player's current garden instance with active POIs.
      operationId: getGardenState
      tags:
      - Garden Management
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetGardenStateRequest'
      responses:
        '200':
          description: Garden state retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GardenStateResponse'
        '404':
          description: Player is not in the garden
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetGardenStateRequest\"\
        ,\n    \"$defs\": {\n        \"GetGardenStateRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to get current garden state\",\n            \"required\": [\n                \"accountId\"\n         \
        \   ],\n            \"properties\": {\n                \"accountId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Account whose garden state to
        retrieve\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GardenStateResponse\"\
        ,\n    \"$defs\": {\n        \"GardenStateResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Current garden instance state for a player\",\n            \"required\": [\n                \"gardenInstanceId\"\
        ,\n                \"seedId\",\n                \"accountId\",\n                \"position\",\n                \"\
        activePois\"\n            ],\n            \"properties\": {\n                \"gardenInstanceId\": {\n           \
        \         \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"\
        Unique identifier for this garden instance\"\n                },\n                \"seedId\": {\n                \
        \    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Active
        seed for this garden session\"\n                },\n                \"accountId\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Account in the garden\"\
        \n                },\n                \"position\": {\n                    \"$ref\": \"#/$defs/Vec3\",\n         \
        \           \"description\": \"Current player position\"\n                },\n                \"activePois\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"$ref\": \"\
        #/$defs/PoiSummary\"\n                    },\n                    \"description\": \"Currently active POIs in this
        garden instance\"\n                }\n            }\n        },\n        \"Vec3\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Three-dimensional spatial coordinates in garden space\",\n            \"required\"\
        : [\n                \"x\",\n                \"y\",\n                \"z\"\n            ],\n            \"properties\"\
        : {\n                \"x\": {\n                    \"type\": \"number\",\n                    \"format\": \"float\"\
        ,\n                    \"description\": \"X coordinate in garden space units\"\n                },\n             \
        \   \"y\": {\n                    \"type\": \"number\",\n                    \"format\": \"float\",\n            \
        \        \"description\": \"Y coordinate in garden space units\"\n                },\n                \"z\": {\n \
        \                   \"type\": \"number\",\n                    \"format\": \"float\",\n                    \"description\"\
        : \"Z coordinate in garden space units\"\n                }\n            }\n        },\n        \"PoiSummary\": {\n\
        \            \"type\": \"object\",\n            \"description\": \"POI state summary for client display\",\n     \
        \       \"required\": [\n                \"poiId\",\n                \"position\",\n                \"poiType\",\n\
        \                \"triggerMode\",\n                \"triggerRadius\",\n                \"status\"\n            ],\n\
        \            \"properties\": {\n                \"poiId\": {\n                    \"type\": \"string\",\n        \
        \            \"format\": \"uuid\",\n                    \"description\": \"Unique identifier for this POI\"\n    \
        \            },\n                \"position\": {\n                    \"$ref\": \"#/$defs/Vec3\",\n              \
        \      \"description\": \"POI position in garden space\"\n                },\n                \"poiType\": {\n   \
        \                 \"$ref\": \"#/$defs/PoiType\",\n                    \"description\": \"Sensory presentation type\"\
        \n                },\n                \"visualHint\": {\n                    \"$ref\": \"#/$defs/ScenarioCategory\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Scenario category hint for client
        rendering\"\n                },\n                \"audioHint\": {\n                    \"type\": \"string\",\n   \
        \                 \"nullable\": true,\n                    \"description\": \"Audio hint identifier for client rendering\"\
        \n                },\n                \"intensityRamp\": {\n                    \"type\": \"number\",\n          \
        \          \"format\": \"float\",\n                    \"description\": \"Current intensity ramp value (0.0-1.0)\"\
        ,\n                    \"default\": 0.0\n                },\n                \"triggerMode\": {\n                \
        \    \"$ref\": \"#/$defs/TriggerMode\",\n                    \"description\": \"How this POI is triggered\"\n    \
        \            },\n                \"triggerRadius\": {\n                    \"type\": \"number\",\n               \
        \     \"format\": \"float\",\n                    \"description\": \"Trigger radius in garden space units\"\n    \
        \            },\n                \"scenarioTemplateId\": {\n                    \"type\": \"string\",\n          \
        \          \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Associated scenario template if this POI leads to a scenario\"\n                },\n                \"status\": {\n\
        \                    \"$ref\": \"#/$defs/PoiStatus\",\n                    \"description\": \"Current lifecycle status\"\
        \n                }\n            }\n        },\n        \"PoiType\": {\n            \"type\": \"string\",\n      \
        \      \"enum\": [\n                \"Visual\",\n                \"Auditory\",\n                \"Environmental\"\
        ,\n                \"Portal\",\n                \"Social\"\n            ],\n            \"description\": \"Sensory
        presentation type for a point of interest in the garden\"\n        },\n        \"ScenarioCategory\": {\n         \
        \   \"type\": \"string\",\n            \"enum\": [\n                \"Combat\",\n                \"Crafting\",\n \
        \               \"Social\",\n                \"Trade\",\n                \"Exploration\",\n                \"Magic\"\
        ,\n                \"Survival\",\n                \"Mixed\",\n                \"Narrative\",\n                \"Tutorial\"\
        \n            ],\n            \"description\": \"Primary gameplay category for a scenario template\"\n        },\n\
        \        \"TriggerMode\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"Proximity\"\
        ,\n                \"Interaction\",\n                \"Prompted\",\n                \"Forced\"\n            ],\n \
        \           \"description\": \"How a POI is triggered by the player\"\n        },\n        \"PoiStatus\": {\n    \
        \        \"type\": \"string\",\n            \"enum\": [\n                \"Active\",\n                \"Entered\"\
        ,\n                \"Declined\",\n                \"Expired\"\n            ],\n            \"description\": \"Current
        lifecycle status of a POI\"\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get current garden state\",\n    \"description\": \"Returns the player's
        current garden instance with active POIs.\",\n    \"tags\": [\n        \"Garden Management\"\n    ],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"getGardenState\"\n}"
  /gardener/garden/update-position:
    post:
      summary: Update player position in the garden
      description: |
        Updates the player's position and velocity in garden space. Accumulates
        drift metrics and checks proximity triggers against active POIs.
      operationId: updatePosition
      tags:
      - Garden Management
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePositionRequest'
      responses:
        '200':
          description: Position updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PositionUpdateResponse'
        '404':
          description: Player is not in the garden
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/UpdatePositionRequest\"\
        ,\n    \"$defs\": {\n        \"UpdatePositionRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to update player position in the garden\",\n            \"required\": [\n                \"accountId\"\
        ,\n                \"position\",\n                \"velocity\"\n            ],\n            \"properties\": {\n  \
        \              \"accountId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"Account whose position to update\"\n                },\n               \
        \ \"position\": {\n                    \"$ref\": \"#/$defs/Vec3\",\n                    \"description\": \"New position
        in garden space\"\n                },\n                \"velocity\": {\n                    \"$ref\": \"#/$defs/Vec3\"\
        ,\n                    \"description\": \"Current velocity vector\"\n                }\n            }\n        },\n\
        \        \"Vec3\": {\n            \"type\": \"object\",\n            \"description\": \"Three-dimensional spatial
        coordinates in garden space\",\n            \"required\": [\n                \"x\",\n                \"y\",\n    \
        \            \"z\"\n            ],\n            \"properties\": {\n                \"x\": {\n                    \"\
        type\": \"number\",\n                    \"format\": \"float\",\n                    \"description\": \"X coordinate
        in garden space units\"\n                },\n                \"y\": {\n                    \"type\": \"number\",\n\
        \                    \"format\": \"float\",\n                    \"description\": \"Y coordinate in garden space units\"\
        \n                },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"\
        format\": \"float\",\n                    \"description\": \"Z coordinate in garden space units\"\n              \
        \  }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/PositionUpdateResponse\"\
        ,\n    \"$defs\": {\n        \"PositionUpdateResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Response to a position update\",\n            \"required\": [\n                \"acknowledged\"\n            ],\n\
        \            \"properties\": {\n                \"acknowledged\": {\n                    \"type\": \"boolean\",\n\
        \                    \"description\": \"Whether the position update was processed\"\n                },\n        \
        \        \"triggeredPois\": {\n                    \"type\": \"array\",\n                    \"items\": {\n      \
        \                  \"$ref\": \"#/$defs/PoiSummary\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"POIs triggered by proximity to the new position\"\n                }\n   \
        \         }\n        },\n        \"PoiSummary\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"POI state summary for client display\",\n            \"required\": [\n                \"poiId\",\n           \
        \     \"position\",\n                \"poiType\",\n                \"triggerMode\",\n                \"triggerRadius\"\
        ,\n                \"status\"\n            ],\n            \"properties\": {\n                \"poiId\": {\n     \
        \               \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for this POI\"\n                },\n                \"position\": {\n                    \"\
        $ref\": \"#/$defs/Vec3\",\n                    \"description\": \"POI position in garden space\"\n               \
        \ },\n                \"poiType\": {\n                    \"$ref\": \"#/$defs/PoiType\",\n                    \"description\"\
        : \"Sensory presentation type\"\n                },\n                \"visualHint\": {\n                    \"$ref\"\
        : \"#/$defs/ScenarioCategory\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Scenario category hint for client rendering\"\n                },\n                \"audioHint\": {\n            \
        \        \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Audio
        hint identifier for client rendering\"\n                },\n                \"intensityRamp\": {\n               \
        \     \"type\": \"number\",\n                    \"format\": \"float\",\n                    \"description\": \"Current
        intensity ramp value (0.0-1.0)\",\n                    \"default\": 0.0\n                },\n                \"triggerMode\"\
        : {\n                    \"$ref\": \"#/$defs/TriggerMode\",\n                    \"description\": \"How this POI is
        triggered\"\n                },\n                \"triggerRadius\": {\n                    \"type\": \"number\",\n\
        \                    \"format\": \"float\",\n                    \"description\": \"Trigger radius in garden space
        units\"\n                },\n                \"scenarioTemplateId\": {\n                    \"type\": \"string\",\n\
        \                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Associated scenario template if this POI leads to a scenario\"\n                },\n                \"status\"\
        : {\n                    \"$ref\": \"#/$defs/PoiStatus\",\n                    \"description\": \"Current lifecycle
        status\"\n                }\n            }\n        },\n        \"Vec3\": {\n            \"type\": \"object\",\n \
        \           \"description\": \"Three-dimensional spatial coordinates in garden space\",\n            \"required\"\
        : [\n                \"x\",\n                \"y\",\n                \"z\"\n            ],\n            \"properties\"\
        : {\n                \"x\": {\n                    \"type\": \"number\",\n                    \"format\": \"float\"\
        ,\n                    \"description\": \"X coordinate in garden space units\"\n                },\n             \
        \   \"y\": {\n                    \"type\": \"number\",\n                    \"format\": \"float\",\n            \
        \        \"description\": \"Y coordinate in garden space units\"\n                },\n                \"z\": {\n \
        \                   \"type\": \"number\",\n                    \"format\": \"float\",\n                    \"description\"\
        : \"Z coordinate in garden space units\"\n                }\n            }\n        },\n        \"PoiType\": {\n \
        \           \"type\": \"string\",\n            \"enum\": [\n                \"Visual\",\n                \"Auditory\"\
        ,\n                \"Environmental\",\n                \"Portal\",\n                \"Social\"\n            ],\n \
        \           \"description\": \"Sensory presentation type for a point of interest in the garden\"\n        },\n   \
        \     \"ScenarioCategory\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"Combat\"\
        ,\n                \"Crafting\",\n                \"Social\",\n                \"Trade\",\n                \"Exploration\"\
        ,\n                \"Magic\",\n                \"Survival\",\n                \"Mixed\",\n                \"Narrative\"\
        ,\n                \"Tutorial\"\n            ],\n            \"description\": \"Primary gameplay category for a scenario
        template\"\n        },\n        \"TriggerMode\": {\n            \"type\": \"string\",\n            \"enum\": [\n \
        \               \"Proximity\",\n                \"Interaction\",\n                \"Prompted\",\n                \"\
        Forced\"\n            ],\n            \"description\": \"How a POI is triggered by the player\"\n        },\n    \
        \    \"PoiStatus\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"Active\",\n \
        \               \"Entered\",\n                \"Declined\",\n                \"Expired\"\n            ],\n       \
        \     \"description\": \"Current lifecycle status of a POI\"\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Update player position in the garden\",\n    \"description\": \"Updates
        the player's position and velocity in garden space. Accumulates\\ndrift metrics and checks proximity triggers against
        active POIs.\\n\",\n    \"tags\": [\n        \"Garden Management\"\n    ],\n    \"deprecated\": false,\n    \"operationId\"\
        : \"updatePosition\"\n}"
  /gardener/garden/leave:
    post:
      summary: Leave the garden
      description: |
        Cleans up the garden instance, all associated POIs, and publishes a
        garden-left event with session duration.
      operationId: leaveGarden
      tags:
      - Garden Management
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LeaveGardenRequest'
      responses:
        '200':
          description: Left the garden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LeaveGardenResponse'
        '404':
          description: Player is not in the garden
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LeaveGardenRequest\"\
        ,\n    \"$defs\": {\n        \"LeaveGardenRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to leave the garden\",\n            \"required\": [\n                \"accountId\"\n            ],\n \
        \           \"properties\": {\n                \"accountId\": {\n                    \"type\": \"string\",\n     \
        \               \"format\": \"uuid\",\n                    \"description\": \"Account leaving the garden\"\n     \
        \           }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LeaveGardenResponse\"\
        ,\n    \"$defs\": {\n        \"LeaveGardenResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Response after leaving the garden\",\n            \"required\": [\n                \"accountId\",\n          \
        \      \"sessionDurationSeconds\"\n            ],\n            \"properties\": {\n                \"accountId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Account that left the garden\"\n                },\n                \"sessionDurationSeconds\": {\n          \
        \          \"type\": \"number\",\n                    \"format\": \"float\",\n                    \"description\"\
        : \"Total duration of the garden session in seconds\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Leave the garden\",\n    \"description\": \"Cleans up the garden instance,
        all associated POIs, and publishes a\\ngarden-left event with session duration.\\n\",\n    \"tags\": [\n        \"\
        Garden Management\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"leaveGarden\"\n}"
  /gardener/poi/list:
    post:
      summary: List active POIs
      description: Returns all active POIs for the player's current garden instance.
      operationId: listPois
      tags:
      - POI Interaction
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListPoisRequest'
      responses:
        '200':
          description: POIs retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListPoisResponse'
        '404':
          description: Player is not in the garden
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListPoisRequest\"\
        ,\n    \"$defs\": {\n        \"ListPoisRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to list active POIs\",\n            \"required\": [\n                \"accountId\"\n            ],\n \
        \           \"properties\": {\n                \"accountId\": {\n                    \"type\": \"string\",\n     \
        \               \"format\": \"uuid\",\n                    \"description\": \"Account whose POIs to list\"\n     \
        \           }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListPoisResponse\"\
        ,\n    \"$defs\": {\n        \"ListPoisResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"List of active POIs in a garden instance\",\n            \"required\": [\n                \"gardenInstanceId\"\
        ,\n                \"pois\"\n            ],\n            \"properties\": {\n                \"gardenInstanceId\":
        {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Garden instance these POIs belong to\"\n                },\n                \"pois\": {\n                    \"\
        type\": \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/PoiSummary\"\n \
        \                   },\n                    \"description\": \"Active POIs\"\n                }\n            }\n \
        \       },\n        \"PoiSummary\": {\n            \"type\": \"object\",\n            \"description\": \"POI state
        summary for client display\",\n            \"required\": [\n                \"poiId\",\n                \"position\"\
        ,\n                \"poiType\",\n                \"triggerMode\",\n                \"triggerRadius\",\n          \
        \      \"status\"\n            ],\n            \"properties\": {\n                \"poiId\": {\n                 \
        \   \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Unique
        identifier for this POI\"\n                },\n                \"position\": {\n                    \"$ref\": \"#/$defs/Vec3\"\
        ,\n                    \"description\": \"POI position in garden space\"\n                },\n                \"poiType\"\
        : {\n                    \"$ref\": \"#/$defs/PoiType\",\n                    \"description\": \"Sensory presentation
        type\"\n                },\n                \"visualHint\": {\n                    \"$ref\": \"#/$defs/ScenarioCategory\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Scenario category hint for client
        rendering\"\n                },\n                \"audioHint\": {\n                    \"type\": \"string\",\n   \
        \                 \"nullable\": true,\n                    \"description\": \"Audio hint identifier for client rendering\"\
        \n                },\n                \"intensityRamp\": {\n                    \"type\": \"number\",\n          \
        \          \"format\": \"float\",\n                    \"description\": \"Current intensity ramp value (0.0-1.0)\"\
        ,\n                    \"default\": 0.0\n                },\n                \"triggerMode\": {\n                \
        \    \"$ref\": \"#/$defs/TriggerMode\",\n                    \"description\": \"How this POI is triggered\"\n    \
        \            },\n                \"triggerRadius\": {\n                    \"type\": \"number\",\n               \
        \     \"format\": \"float\",\n                    \"description\": \"Trigger radius in garden space units\"\n    \
        \            },\n                \"scenarioTemplateId\": {\n                    \"type\": \"string\",\n          \
        \          \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Associated scenario template if this POI leads to a scenario\"\n                },\n                \"status\": {\n\
        \                    \"$ref\": \"#/$defs/PoiStatus\",\n                    \"description\": \"Current lifecycle status\"\
        \n                }\n            }\n        },\n        \"Vec3\": {\n            \"type\": \"object\",\n         \
        \   \"description\": \"Three-dimensional spatial coordinates in garden space\",\n            \"required\": [\n   \
        \             \"x\",\n                \"y\",\n                \"z\"\n            ],\n            \"properties\": {\n\
        \                \"x\": {\n                    \"type\": \"number\",\n                    \"format\": \"float\",\n\
        \                    \"description\": \"X coordinate in garden space units\"\n                },\n               \
        \ \"y\": {\n                    \"type\": \"number\",\n                    \"format\": \"float\",\n              \
        \      \"description\": \"Y coordinate in garden space units\"\n                },\n                \"z\": {\n   \
        \                 \"type\": \"number\",\n                    \"format\": \"float\",\n                    \"description\"\
        : \"Z coordinate in garden space units\"\n                }\n            }\n        },\n        \"PoiType\": {\n \
        \           \"type\": \"string\",\n            \"enum\": [\n                \"Visual\",\n                \"Auditory\"\
        ,\n                \"Environmental\",\n                \"Portal\",\n                \"Social\"\n            ],\n \
        \           \"description\": \"Sensory presentation type for a point of interest in the garden\"\n        },\n   \
        \     \"ScenarioCategory\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"Combat\"\
        ,\n                \"Crafting\",\n                \"Social\",\n                \"Trade\",\n                \"Exploration\"\
        ,\n                \"Magic\",\n                \"Survival\",\n                \"Mixed\",\n                \"Narrative\"\
        ,\n                \"Tutorial\"\n            ],\n            \"description\": \"Primary gameplay category for a scenario
        template\"\n        },\n        \"TriggerMode\": {\n            \"type\": \"string\",\n            \"enum\": [\n \
        \               \"Proximity\",\n                \"Interaction\",\n                \"Prompted\",\n                \"\
        Forced\"\n            ],\n            \"description\": \"How a POI is triggered by the player\"\n        },\n    \
        \    \"PoiStatus\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"Active\",\n \
        \               \"Entered\",\n                \"Declined\",\n                \"Expired\"\n            ],\n       \
        \     \"description\": \"Current lifecycle status of a POI\"\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"List active POIs\",\n    \"description\": \"Returns all active POIs for
        the player's current garden instance.\",\n    \"tags\": [\n        \"POI Interaction\"\n    ],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"listPois\"\n}"
  /gardener/poi/interact:
    post:
      summary: Interact with a POI
      description: |
        Triggers interaction with a POI. Result depends on the POI's trigger mode:
        prompted POIs return scenario info with choices, proximity/interaction POIs
        enter the scenario directly.
      operationId: interactWithPoi
      tags:
      - POI Interaction
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InteractWithPoiRequest'
      responses:
        '200':
          description: Interaction result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PoiInteractionResponse'
        '400':
          description: POI is expired or already interacted with
        '404':
          description: POI not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/InteractWithPoiRequest\"\
        ,\n    \"$defs\": {\n        \"InteractWithPoiRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to interact with a POI\",\n            \"required\": [\n                \"accountId\",\n             \
        \   \"poiId\"\n            ],\n            \"properties\": {\n                \"accountId\": {\n                 \
        \   \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Account
        interacting with the POI\"\n                },\n                \"poiId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"POI to interact with\"\n    \
        \            }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/PoiInteractionResponse\"\
        ,\n    \"$defs\": {\n        \"PoiInteractionResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Result of interacting with a POI\",\n            \"required\": [\n                \"poiId\",\n               \
        \ \"result\"\n            ],\n            \"properties\": {\n                \"poiId\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"POI that was
        interacted with\"\n                },\n                \"result\": {\n                    \"$ref\": \"#/$defs/PoiInteractionResult\"\
        ,\n                    \"description\": \"Interaction outcome\"\n                },\n                \"scenarioTemplateId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        nullable\": true,\n                    \"description\": \"Associated template ID if result involves a scenario\"\n\
        \                },\n                \"promptText\": {\n                    \"type\": \"string\",\n              \
        \      \"nullable\": true,\n                    \"description\": \"Prompt text for prompted POIs\"\n             \
        \   },\n                \"promptChoices\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Available choices for prompted POIs\"\n                }\n            }\n\
        \        },\n        \"PoiInteractionResult\": {\n            \"type\": \"string\",\n            \"enum\": [\n   \
        \             \"ScenarioPrompt\",\n                \"ScenarioEnter\",\n                \"PoiUpdate\",\n          \
        \      \"ChainOffer\"\n            ],\n            \"description\": \"Outcome of interacting with a POI\"\n      \
        \  }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Interact with a POI\",\n    \"description\": \"Triggers interaction with
        a POI. Result depends on the POI's trigger mode:\\nprompted POIs return scenario info with choices, proximity/interaction
        POIs\\nenter the scenario directly.\\n\",\n    \"tags\": [\n        \"POI Interaction\"\n    ],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"interactWithPoi\"\n}"
  /gardener/poi/decline:
    post:
      summary: Decline a POI
      description: |
        Marks a POI as declined. The template is added to the garden instance's
        scenario history for diversity scoring.
      operationId: declinePoi
      tags:
      - POI Interaction
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeclinePoiRequest'
      responses:
        '200':
          description: POI declined
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeclinePoiResponse'
        '400':
          description: POI is not in Active status
        '404':
          description: POI not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeclinePoiRequest\"\
        ,\n    \"$defs\": {\n        \"DeclinePoiRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to decline a POI\",\n            \"required\": [\n                \"accountId\",\n                \"poiId\"\
        \n            ],\n            \"properties\": {\n                \"accountId\": {\n                    \"type\": \"\
        string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Account declining the
        POI\"\n                },\n                \"poiId\": {\n                    \"type\": \"string\",\n             \
        \       \"format\": \"uuid\",\n                    \"description\": \"POI to decline\"\n                }\n      \
        \      }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeclinePoiResponse\"\
        ,\n    \"$defs\": {\n        \"DeclinePoiResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Response after declining a POI\",\n            \"required\": [\n                \"poiId\",\n                \"\
        acknowledged\"\n            ],\n            \"properties\": {\n                \"poiId\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"POI that was
        declined\"\n                },\n                \"acknowledged\": {\n                    \"type\": \"boolean\",\n\
        \                    \"description\": \"Whether the decline was processed\"\n                }\n            }\n  \
        \      }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Decline a POI\",\n    \"description\": \"Marks a POI as declined. The template
        is added to the garden instance's\\nscenario history for diversity scoring.\\n\",\n    \"tags\": [\n        \"POI
        Interaction\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"declinePoi\"\n}"
  /gardener/scenario/enter:
    post:
      summary: Enter a scenario
      description: |
        Validates prerequisites, creates a game session, creates a scenario
        instance, destroys the garden instance (player leaves the garden), and
        publishes scenario-started events.
      operationId: enterScenario
      tags:
      - Scenario Lifecycle
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnterScenarioRequest'
      responses:
        '200':
          description: Scenario entered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScenarioStateResponse'
        '400':
          description: Prerequisites not met or invalid template
        '409':
          description: Global scenario capacity reached
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/EnterScenarioRequest\"\
        ,\n    \"$defs\": {\n        \"EnterScenarioRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to enter a scenario\",\n            \"required\": [\n                \"accountId\",\n                \"\
        scenarioTemplateId\"\n            ],\n            \"properties\": {\n                \"accountId\": {\n          \
        \          \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\":
        \"Account entering the scenario\"\n                },\n                \"scenarioTemplateId\": {\n               \
        \     \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Template
        to instantiate\"\n                },\n                \"poiId\": {\n                    \"type\": \"string\",\n  \
        \                  \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"POI that triggered this scenario entry, if any\"\n                },\n                \"promptChoice\": {\n  \
        \                  \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Selected prompt choice for prompted POIs\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ScenarioStateResponse\"\
        ,\n    \"$defs\": {\n        \"ScenarioStateResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Current state of a scenario instance\",\n            \"required\": [\n                \"scenarioInstanceId\",\n\
        \                \"scenarioTemplateId\",\n                \"gameSessionId\",\n                \"connectivityMode\"\
        ,\n                \"status\",\n                \"createdAt\",\n                \"chainDepth\"\n            ],\n \
        \           \"properties\": {\n                \"scenarioInstanceId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Unique identifier for this scenario
        instance\"\n                },\n                \"scenarioTemplateId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Template this instance was created
        from\"\n                },\n                \"gameSessionId\": {\n                    \"type\": \"string\",\n    \
        \                \"format\": \"uuid\",\n                    \"description\": \"Backing game session ID\"\n       \
        \         },\n                \"connectivityMode\": {\n                    \"$ref\": \"#/$defs/ConnectivityMode\"\
        ,\n                    \"description\": \"How this scenario connects to the game world\"\n                },\n   \
        \             \"status\": {\n                    \"$ref\": \"#/$defs/ScenarioStatus\",\n                    \"description\"\
        : \"Current lifecycle status\"\n                },\n                \"createdAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When this instance
        was created\"\n                },\n                \"chainedFrom\": {\n                    \"type\": \"string\",\n\
        \                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Previous scenario instance if this was chained\"\n                },\n                \"chainDepth\": {\n    \
        \                \"type\": \"integer\",\n                    \"default\": 0,\n                    \"description\"\
        : \"Current chain depth from the initial scenario\"\n                }\n            }\n        },\n        \"ConnectivityMode\"\
        : {\n            \"type\": \"string\",\n            \"enum\": [\n                \"Isolated\",\n                \"\
        WorldSlice\",\n                \"Persistent\"\n            ],\n            \"description\": \"How a scenario instance
        connects to the broader game world\"\n        },\n        \"ScenarioStatus\": {\n            \"type\": \"string\"\
        ,\n            \"enum\": [\n                \"Initializing\",\n                \"Active\",\n                \"Completing\"\
        ,\n                \"Completed\",\n                \"Abandoned\"\n            ],\n            \"description\": \"\
        Current lifecycle status of a scenario instance\"\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Enter a scenario\",\n    \"description\": \"Validates prerequisites, creates
        a game session, creates a scenario\\ninstance, destroys the garden instance (player leaves the garden), and\\npublishes
        scenario-started events.\\n\",\n    \"tags\": [\n        \"Scenario Lifecycle\"\n    ],\n    \"deprecated\": false,\n\
        \    \"operationId\": \"enterScenario\"\n}"
  /gardener/scenario/get:
    post:
      summary: Get current scenario state
      description: Returns the player's active scenario instance.
      operationId: getScenarioState
      tags:
      - Scenario Lifecycle
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetScenarioStateRequest'
      responses:
        '200':
          description: Scenario state retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScenarioStateResponse'
        '404':
          description: No active scenario
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetScenarioStateRequest\"\
        ,\n    \"$defs\": {\n        \"GetScenarioStateRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to get current scenario state\",\n            \"required\": [\n                \"accountId\"\n       \
        \     ],\n            \"properties\": {\n                \"accountId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Account whose scenario state
        to retrieve\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ScenarioStateResponse\"\
        ,\n    \"$defs\": {\n        \"ScenarioStateResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Current state of a scenario instance\",\n            \"required\": [\n                \"scenarioInstanceId\",\n\
        \                \"scenarioTemplateId\",\n                \"gameSessionId\",\n                \"connectivityMode\"\
        ,\n                \"status\",\n                \"createdAt\",\n                \"chainDepth\"\n            ],\n \
        \           \"properties\": {\n                \"scenarioInstanceId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Unique identifier for this scenario
        instance\"\n                },\n                \"scenarioTemplateId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Template this instance was created
        from\"\n                },\n                \"gameSessionId\": {\n                    \"type\": \"string\",\n    \
        \                \"format\": \"uuid\",\n                    \"description\": \"Backing game session ID\"\n       \
        \         },\n                \"connectivityMode\": {\n                    \"$ref\": \"#/$defs/ConnectivityMode\"\
        ,\n                    \"description\": \"How this scenario connects to the game world\"\n                },\n   \
        \             \"status\": {\n                    \"$ref\": \"#/$defs/ScenarioStatus\",\n                    \"description\"\
        : \"Current lifecycle status\"\n                },\n                \"createdAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When this instance
        was created\"\n                },\n                \"chainedFrom\": {\n                    \"type\": \"string\",\n\
        \                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Previous scenario instance if this was chained\"\n                },\n                \"chainDepth\": {\n    \
        \                \"type\": \"integer\",\n                    \"default\": 0,\n                    \"description\"\
        : \"Current chain depth from the initial scenario\"\n                }\n            }\n        },\n        \"ConnectivityMode\"\
        : {\n            \"type\": \"string\",\n            \"enum\": [\n                \"Isolated\",\n                \"\
        WorldSlice\",\n                \"Persistent\"\n            ],\n            \"description\": \"How a scenario instance
        connects to the broader game world\"\n        },\n        \"ScenarioStatus\": {\n            \"type\": \"string\"\
        ,\n            \"enum\": [\n                \"Initializing\",\n                \"Active\",\n                \"Completing\"\
        ,\n                \"Completed\",\n                \"Abandoned\"\n            ],\n            \"description\": \"\
        Current lifecycle status of a scenario instance\"\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get current scenario state\",\n    \"description\": \"Returns the player's
        active scenario instance.\",\n    \"tags\": [\n        \"Scenario Lifecycle\"\n    ],\n    \"deprecated\": false,\n\
        \    \"operationId\": \"getScenarioState\"\n}"
  /gardener/scenario/complete:
    post:
      summary: Complete a scenario
      description: |
        Calculates and awards growth per domain, closes the game session,
        writes history, and returns the player to the garden.
      operationId: completeScenario
      tags:
      - Scenario Lifecycle
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompleteScenarioRequest'
      responses:
        '200':
          description: Scenario completed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScenarioCompletionResponse'
        '404':
          description: Scenario instance not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/CompleteScenarioRequest\"\
        ,\n    \"$defs\": {\n        \"CompleteScenarioRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to complete a scenario\",\n            \"required\": [\n                \"accountId\",\n             \
        \   \"scenarioInstanceId\"\n            ],\n            \"properties\": {\n                \"accountId\": {\n    \
        \                \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Account completing the scenario\"\n                },\n                \"scenarioInstanceId\": {\n           \
        \         \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"\
        Scenario instance to complete\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ScenarioCompletionResponse\"\
        ,\n    \"$defs\": {\n        \"ScenarioCompletionResponse\": {\n            \"type\": \"object\",\n            \"\
        description\": \"Response after completing a scenario\",\n            \"required\": [\n                \"scenarioInstanceId\"\
        ,\n                \"growthAwarded\",\n                \"returnToGarden\"\n            ],\n            \"properties\"\
        : {\n                \"scenarioInstanceId\": {\n                    \"type\": \"string\",\n                    \"\
        format\": \"uuid\",\n                    \"description\": \"Completed scenario instance ID\"\n                },\n\
        \                \"growthAwarded\": {\n                    \"type\": \"object\",\n                    \"additionalProperties\"\
        : {\n                        \"type\": \"number\",\n                        \"format\": \"float\"\n              \
        \      },\n                    \"description\": \"Growth awarded per domain\"\n                },\n              \
        \  \"returnToGarden\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        the player should return to the garden\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Complete a scenario\",\n    \"description\": \"Calculates and awards growth
        per domain, closes the game session,\\nwrites history, and returns the player to the garden.\\n\",\n    \"tags\":
        [\n        \"Scenario Lifecycle\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"completeScenario\"\n\
        }"
  /gardener/scenario/abandon:
    post:
      summary: Abandon a scenario
      description: |
        Awards partial growth proportional to time spent, cleans up the
        game session, and writes history.
      operationId: abandonScenario
      tags:
      - Scenario Lifecycle
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AbandonScenarioRequest'
      responses:
        '200':
          description: Scenario abandoned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AbandonScenarioResponse'
        '404':
          description: Scenario instance not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/AbandonScenarioRequest\"\
        ,\n    \"$defs\": {\n        \"AbandonScenarioRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to abandon a scenario\",\n            \"required\": [\n                \"accountId\",\n              \
        \  \"scenarioInstanceId\"\n            ],\n            \"properties\": {\n                \"accountId\": {\n     \
        \               \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Account abandoning the scenario\"\n                },\n                \"scenarioInstanceId\": {\n           \
        \         \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"\
        Scenario instance to abandon\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/AbandonScenarioResponse\"\
        ,\n    \"$defs\": {\n        \"AbandonScenarioResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Response after abandoning a scenario\",\n            \"required\": [\n                \"scenarioInstanceId\",\n\
        \                \"partialGrowthAwarded\"\n            ],\n            \"properties\": {\n                \"scenarioInstanceId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Abandoned scenario instance ID\"\n                },\n                \"partialGrowthAwarded\": {\n\
        \                    \"type\": \"object\",\n                    \"additionalProperties\": {\n                    \
        \    \"type\": \"number\",\n                        \"format\": \"float\"\n                    },\n              \
        \      \"description\": \"Partial growth awarded based on time spent\"\n                }\n            }\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Abandon a scenario\",\n    \"description\": \"Awards partial growth proportional
        to time spent, cleans up the\\ngame session, and writes history.\\n\",\n    \"tags\": [\n        \"Scenario Lifecycle\"\
        \n    ],\n    \"deprecated\": false,\n    \"operationId\": \"abandonScenario\"\n}"
  /gardener/scenario/chain:
    post:
      summary: Chain to another scenario
      description: |
        Completes the current scenario with growth awards and immediately
        creates a new scenario instance from the target template. Validates
        chaining rules (leadsTo list, max chain depth).
      operationId: chainScenario
      tags:
      - Scenario Lifecycle
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChainScenarioRequest'
      responses:
        '200':
          description: Chained to new scenario
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScenarioStateResponse'
        '400':
          description: Chaining rules not met or max chain depth exceeded
        '404':
          description: Current scenario or target template not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChainScenarioRequest\"\
        ,\n    \"$defs\": {\n        \"ChainScenarioRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to chain from one scenario to another\",\n            \"required\": [\n                \"accountId\",\n\
        \                \"currentScenarioInstanceId\",\n                \"targetTemplateId\"\n            ],\n          \
        \  \"properties\": {\n                \"accountId\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"uuid\",\n                    \"description\": \"Account chaining scenarios\"\n              \
        \  },\n                \"currentScenarioInstanceId\": {\n                    \"type\": \"string\",\n             \
        \       \"format\": \"uuid\",\n                    \"description\": \"Currently active scenario instance\"\n     \
        \           },\n                \"targetTemplateId\": {\n                    \"type\": \"string\",\n             \
        \       \"format\": \"uuid\",\n                    \"description\": \"Template to chain into\"\n                }\n\
        \            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ScenarioStateResponse\"\
        ,\n    \"$defs\": {\n        \"ScenarioStateResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Current state of a scenario instance\",\n            \"required\": [\n                \"scenarioInstanceId\",\n\
        \                \"scenarioTemplateId\",\n                \"gameSessionId\",\n                \"connectivityMode\"\
        ,\n                \"status\",\n                \"createdAt\",\n                \"chainDepth\"\n            ],\n \
        \           \"properties\": {\n                \"scenarioInstanceId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Unique identifier for this scenario
        instance\"\n                },\n                \"scenarioTemplateId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Template this instance was created
        from\"\n                },\n                \"gameSessionId\": {\n                    \"type\": \"string\",\n    \
        \                \"format\": \"uuid\",\n                    \"description\": \"Backing game session ID\"\n       \
        \         },\n                \"connectivityMode\": {\n                    \"$ref\": \"#/$defs/ConnectivityMode\"\
        ,\n                    \"description\": \"How this scenario connects to the game world\"\n                },\n   \
        \             \"status\": {\n                    \"$ref\": \"#/$defs/ScenarioStatus\",\n                    \"description\"\
        : \"Current lifecycle status\"\n                },\n                \"createdAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When this instance
        was created\"\n                },\n                \"chainedFrom\": {\n                    \"type\": \"string\",\n\
        \                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Previous scenario instance if this was chained\"\n                },\n                \"chainDepth\": {\n    \
        \                \"type\": \"integer\",\n                    \"default\": 0,\n                    \"description\"\
        : \"Current chain depth from the initial scenario\"\n                }\n            }\n        },\n        \"ConnectivityMode\"\
        : {\n            \"type\": \"string\",\n            \"enum\": [\n                \"Isolated\",\n                \"\
        WorldSlice\",\n                \"Persistent\"\n            ],\n            \"description\": \"How a scenario instance
        connects to the broader game world\"\n        },\n        \"ScenarioStatus\": {\n            \"type\": \"string\"\
        ,\n            \"enum\": [\n                \"Initializing\",\n                \"Active\",\n                \"Completing\"\
        ,\n                \"Completed\",\n                \"Abandoned\"\n            ],\n            \"description\": \"\
        Current lifecycle status of a scenario instance\"\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Chain to another scenario\",\n    \"description\": \"Completes the current
        scenario with growth awards and immediately\\ncreates a new scenario instance from the target template. Validates\\
        nchaining rules (leadsTo list, max chain depth).\\n\",\n    \"tags\": [\n        \"Scenario Lifecycle\"\n    ],\n\
        \    \"deprecated\": false,\n    \"operationId\": \"chainScenario\"\n}"
  /gardener/template/create:
    post:
      summary: Create a scenario template
      description: Creates a new scenario template definition.
      operationId: createTemplate
      tags:
      - Template Management
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTemplateRequest'
      responses:
        '200':
          description: Template created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScenarioTemplateResponse'
        '409':
          description: Template with this code already exists
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/CreateTemplateRequest\"\
        ,\n    \"$defs\": {\n        \"CreateTemplateRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to create a scenario template\",\n            \"required\": [\n                \"code\",\n           \
        \     \"displayName\",\n                \"description\",\n                \"category\",\n                \"domainWeights\"\
        \n            ],\n            \"properties\": {\n                \"code\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Unique template code for reference\"\n                },\n             \
        \   \"displayName\": {\n                    \"type\": \"string\",\n                    \"description\": \"Human-readable
        template name\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Template description\"\n                },\n                \"category\"\
        : {\n                    \"$ref\": \"#/$defs/ScenarioCategory\",\n                    \"description\": \"Primary gameplay
        category\"\n                },\n                \"subcategory\": {\n                    \"type\": \"string\",\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Optional subcategory within the primary
        category\"\n                },\n                \"domainWeights\": {\n                    \"type\": \"array\",\n \
        \                   \"items\": {\n                        \"$ref\": \"#/$defs/DomainWeight\"\n                   \
        \ },\n                    \"description\": \"Growth domain weights awarded on completion\"\n                },\n \
        \               \"minGrowthPhase\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Minimum seed growth phase for soft-gating scenario availability\"\n\
        \                },\n                \"connectivityMode\": {\n                    \"$ref\": \"#/$defs/ConnectivityMode\"\
        ,\n                    \"description\": \"How this scenario connects to the game world\",\n                    \"\
        default\": \"Isolated\"\n                },\n                \"allowedPhases\": {\n                    \"type\": \"\
        array\",\n                    \"nullable\": true,\n                    \"items\": {\n                        \"$ref\"\
        : \"#/$defs/DeploymentPhase\"\n                    },\n                    \"description\": \"Deployment phases in
        which this template is available. Null or empty means available in all phases.\"\n                },\n           \
        \     \"maxConcurrentInstances\": {\n                    \"type\": \"integer\",\n                    \"default\":
        100,\n                    \"description\": \"Maximum concurrent active instances of this template\"\n            \
        \    },\n                \"estimatedDurationMinutes\": {\n                    \"type\": \"integer\",\n           \
        \         \"nullable\": true,\n                    \"description\": \"Estimated scenario duration in minutes\"\n \
        \               },\n                \"prerequisites\": {\n                    \"$ref\": \"#/$defs/ScenarioPrerequisites\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Requirements that must be met before
        entering\"\n                },\n                \"chaining\": {\n                    \"$ref\": \"#/$defs/ScenarioChaining\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Chaining configuration\"\n    \
        \            },\n                \"multiplayer\": {\n                    \"$ref\": \"#/$defs/ScenarioMultiplayer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Multiplayer support configuration\"\
        \n                },\n                \"content\": {\n                    \"$ref\": \"#/$defs/ScenarioContent\",\n\
        \                    \"nullable\": true,\n                    \"description\": \"Game content references\"\n     \
        \           }\n            }\n        },\n        \"ScenarioCategory\": {\n            \"type\": \"string\",\n   \
        \         \"enum\": [\n                \"Combat\",\n                \"Crafting\",\n                \"Social\",\n \
        \               \"Trade\",\n                \"Exploration\",\n                \"Magic\",\n                \"Survival\"\
        ,\n                \"Mixed\",\n                \"Narrative\",\n                \"Tutorial\"\n            ],\n    \
        \        \"description\": \"Primary gameplay category for a scenario template\"\n        },\n        \"DomainWeight\"\
        : {\n            \"type\": \"object\",\n            \"description\": \"Domain name and weight pair for scenario template
        growth weighting\",\n            \"required\": [\n                \"domain\",\n                \"weight\"\n      \
        \      ],\n            \"properties\": {\n                \"domain\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Growth domain path (e.g. combat.melee, exploration.caves)\"\n          \
        \      },\n                \"weight\": {\n                    \"type\": \"number\",\n                    \"format\"\
        : \"float\",\n                    \"description\": \"Weight applied to this domain on scenario completion\"\n    \
        \            }\n            }\n        },\n        \"ConnectivityMode\": {\n            \"type\": \"string\",\n  \
        \          \"enum\": [\n                \"Isolated\",\n                \"WorldSlice\",\n                \"Persistent\"\
        \n            ],\n            \"description\": \"How a scenario instance connects to the broader game world\"\n  \
        \      },\n        \"DeploymentPhase\": {\n            \"type\": \"string\",\n            \"enum\": [\n          \
        \      \"Alpha\",\n                \"Beta\",\n                \"Release\"\n            ],\n            \"description\"\
        : \"Current deployment phase for scenario availability gating\"\n        },\n        \"ScenarioPrerequisites\": {\n\
        \            \"type\": \"object\",\n            \"description\": \"Prerequisite requirements for entering a scenario\"\
        ,\n            \"properties\": {\n                \"requiredDomains\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": {\n                        \"type\": \"number\",\n              \
        \          \"format\": \"float\"\n                    },\n                    \"nullable\": true,\n              \
        \      \"description\": \"Minimum growth depth per domain (domain path to minimum depth)\"\n                },\n \
        \               \"requiredScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that must be completed first\"\n                },\n\
        \                \"excludedScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that disqualify the player\"\n                }\n\
        \            }\n        },\n        \"ScenarioChaining\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Chaining configuration for linking scenarios together\",\n            \"properties\": {\n                \"leadsTo\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\"\
        : \"string\"\n                    },\n                    \"nullable\": true,\n                    \"description\"\
        : \"Template codes this scenario can chain into\"\n                },\n                \"chainProbabilities\": {\n\
        \                    \"type\": \"object\",\n                    \"additionalProperties\": {\n                    \
        \    \"type\": \"number\",\n                        \"format\": \"float\"\n                    },\n              \
        \      \"nullable\": true,\n                    \"description\": \"Per-code probability weights for chain selection\"\
        \n                },\n                \"maxChainDepth\": {\n                    \"type\": \"integer\",\n         \
        \           \"default\": 3,\n                    \"description\": \"Maximum chain depth allowed from the initial scenario\"\
        \n                }\n            }\n        },\n        \"ScenarioMultiplayer\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Multiplayer configuration for group scenarios\",\n            \"required\": [\n\
        \                \"minPlayers\",\n                \"maxPlayers\"\n            ],\n            \"properties\": {\n\
        \                \"minPlayers\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Minimum number of players required\"\n                },\n                \"maxPlayers\": {\n                \
        \    \"type\": \"integer\",\n                    \"description\": \"Maximum number of players allowed\"\n        \
        \        },\n                \"matchmakingQueueCode\": {\n                    \"type\": \"string\",\n            \
        \        \"nullable\": true,\n                    \"description\": \"Matchmaking queue code for automatic grouping\"\
        \n                },\n                \"bondPreferred\": {\n                    \"type\": \"boolean\",\n         \
        \           \"default\": false,\n                    \"description\": \"Whether bonded players receive a scoring boost
        for this scenario\"\n                }\n            }\n        },\n        \"ScenarioContent\": {\n            \"\
        type\": \"object\",\n            \"description\": \"Content references linking a scenario template to game assets\"\
        ,\n            \"properties\": {\n                \"behaviorDocumentId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"ABML behavior document ID for NPC orchestration\"\n                },\n                \"sceneDocumentId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Scene document ID for environment composition\"\n                },\n\
        \                \"realmId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Realm ID where this scenario takes
        place\"\n                },\n                \"locationCode\": {\n                    \"type\": \"string\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Location code within the realm\"\n  \
        \              }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ScenarioTemplateResponse\"\
        ,\n    \"$defs\": {\n        \"ScenarioTemplateResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Full scenario template with all fields\",\n            \"required\": [\n                \"scenarioTemplateId\"\
        ,\n                \"code\",\n                \"displayName\",\n                \"description\",\n               \
        \ \"category\",\n                \"domainWeights\",\n                \"connectivityMode\",\n                \"allowedPhases\"\
        ,\n                \"maxConcurrentInstances\",\n                \"status\",\n                \"createdAt\",\n    \
        \            \"updatedAt\"\n            ],\n            \"properties\": {\n                \"scenarioTemplateId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Unique identifier for this template\"\n                },\n                \"code\": {\n        \
        \            \"type\": \"string\",\n                    \"description\": \"Unique template code\"\n              \
        \  },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Human-readable name\"\n                },\n                \"description\": {\n                    \"type\": \"\
        string\",\n                    \"description\": \"Template description\"\n                },\n                \"category\"\
        : {\n                    \"$ref\": \"#/$defs/ScenarioCategory\",\n                    \"description\": \"Primary gameplay
        category\"\n                },\n                \"subcategory\": {\n                    \"type\": \"string\",\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Subcategory within the primary category\"\
        \n                },\n                \"domainWeights\": {\n                    \"type\": \"array\",\n           \
        \         \"items\": {\n                        \"$ref\": \"#/$defs/DomainWeight\"\n                    },\n     \
        \               \"description\": \"Growth domain weights\"\n                },\n                \"minGrowthPhase\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Minimum seed growth phase\"\n                },\n                \"connectivityMode\": {\n                   \
        \ \"$ref\": \"#/$defs/ConnectivityMode\",\n                    \"description\": \"World connectivity mode\"\n    \
        \            },\n                \"allowedPhases\": {\n                    \"type\": \"array\",\n                \
        \    \"items\": {\n                        \"$ref\": \"#/$defs/DeploymentPhase\"\n                    },\n       \
        \             \"description\": \"Deployment phases where this template is available. Always contains explicit values
        (never empty).\"\n                },\n                \"maxConcurrentInstances\": {\n                    \"type\"\
        : \"integer\",\n                    \"description\": \"Maximum concurrent active instances\"\n                },\n\
        \                \"estimatedDurationMinutes\": {\n                    \"type\": \"integer\",\n                   \
        \ \"nullable\": true,\n                    \"description\": \"Estimated scenario duration in minutes\"\n         \
        \       },\n                \"prerequisites\": {\n                    \"$ref\": \"#/$defs/ScenarioPrerequisites\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Entry requirements\"\n        \
        \        },\n                \"chaining\": {\n                    \"$ref\": \"#/$defs/ScenarioChaining\",\n      \
        \              \"nullable\": true,\n                    \"description\": \"Chaining configuration\"\n            \
        \    },\n                \"multiplayer\": {\n                    \"$ref\": \"#/$defs/ScenarioMultiplayer\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Multiplayer support\"\n             \
        \   },\n                \"content\": {\n                    \"$ref\": \"#/$defs/ScenarioContent\",\n             \
        \       \"nullable\": true,\n                    \"description\": \"Content references\"\n                },\n   \
        \             \"status\": {\n                    \"$ref\": \"#/$defs/TemplateStatus\",\n                    \"description\"\
        : \"Current lifecycle status\"\n                },\n                \"createdAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When this template
        was created\"\n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"date-time\",\n                    \"description\": \"When this template was last
        updated\"\n                }\n            }\n        },\n        \"ScenarioCategory\": {\n            \"type\": \"\
        string\",\n            \"enum\": [\n                \"Combat\",\n                \"Crafting\",\n                \"\
        Social\",\n                \"Trade\",\n                \"Exploration\",\n                \"Magic\",\n            \
        \    \"Survival\",\n                \"Mixed\",\n                \"Narrative\",\n                \"Tutorial\"\n   \
        \         ],\n            \"description\": \"Primary gameplay category for a scenario template\"\n        },\n   \
        \     \"DomainWeight\": {\n            \"type\": \"object\",\n            \"description\": \"Domain name and weight
        pair for scenario template growth weighting\",\n            \"required\": [\n                \"domain\",\n       \
        \         \"weight\"\n            ],\n            \"properties\": {\n                \"domain\": {\n             \
        \       \"type\": \"string\",\n                    \"description\": \"Growth domain path (e.g. combat.melee, exploration.caves)\"\
        \n                },\n                \"weight\": {\n                    \"type\": \"number\",\n                 \
        \   \"format\": \"float\",\n                    \"description\": \"Weight applied to this domain on scenario completion\"\
        \n                }\n            }\n        },\n        \"ConnectivityMode\": {\n            \"type\": \"string\"\
        ,\n            \"enum\": [\n                \"Isolated\",\n                \"WorldSlice\",\n                \"Persistent\"\
        \n            ],\n            \"description\": \"How a scenario instance connects to the broader game world\"\n  \
        \      },\n        \"DeploymentPhase\": {\n            \"type\": \"string\",\n            \"enum\": [\n          \
        \      \"Alpha\",\n                \"Beta\",\n                \"Release\"\n            ],\n            \"description\"\
        : \"Current deployment phase for scenario availability gating\"\n        },\n        \"ScenarioPrerequisites\": {\n\
        \            \"type\": \"object\",\n            \"description\": \"Prerequisite requirements for entering a scenario\"\
        ,\n            \"properties\": {\n                \"requiredDomains\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": {\n                        \"type\": \"number\",\n              \
        \          \"format\": \"float\"\n                    },\n                    \"nullable\": true,\n              \
        \      \"description\": \"Minimum growth depth per domain (domain path to minimum depth)\"\n                },\n \
        \               \"requiredScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that must be completed first\"\n                },\n\
        \                \"excludedScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that disqualify the player\"\n                }\n\
        \            }\n        },\n        \"ScenarioChaining\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Chaining configuration for linking scenarios together\",\n            \"properties\": {\n                \"leadsTo\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\"\
        : \"string\"\n                    },\n                    \"nullable\": true,\n                    \"description\"\
        : \"Template codes this scenario can chain into\"\n                },\n                \"chainProbabilities\": {\n\
        \                    \"type\": \"object\",\n                    \"additionalProperties\": {\n                    \
        \    \"type\": \"number\",\n                        \"format\": \"float\"\n                    },\n              \
        \      \"nullable\": true,\n                    \"description\": \"Per-code probability weights for chain selection\"\
        \n                },\n                \"maxChainDepth\": {\n                    \"type\": \"integer\",\n         \
        \           \"default\": 3,\n                    \"description\": \"Maximum chain depth allowed from the initial scenario\"\
        \n                }\n            }\n        },\n        \"ScenarioMultiplayer\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Multiplayer configuration for group scenarios\",\n            \"required\": [\n\
        \                \"minPlayers\",\n                \"maxPlayers\"\n            ],\n            \"properties\": {\n\
        \                \"minPlayers\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Minimum number of players required\"\n                },\n                \"maxPlayers\": {\n                \
        \    \"type\": \"integer\",\n                    \"description\": \"Maximum number of players allowed\"\n        \
        \        },\n                \"matchmakingQueueCode\": {\n                    \"type\": \"string\",\n            \
        \        \"nullable\": true,\n                    \"description\": \"Matchmaking queue code for automatic grouping\"\
        \n                },\n                \"bondPreferred\": {\n                    \"type\": \"boolean\",\n         \
        \           \"default\": false,\n                    \"description\": \"Whether bonded players receive a scoring boost
        for this scenario\"\n                }\n            }\n        },\n        \"ScenarioContent\": {\n            \"\
        type\": \"object\",\n            \"description\": \"Content references linking a scenario template to game assets\"\
        ,\n            \"properties\": {\n                \"behaviorDocumentId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"ABML behavior document ID for NPC orchestration\"\n                },\n                \"sceneDocumentId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Scene document ID for environment composition\"\n                },\n\
        \                \"realmId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Realm ID where this scenario takes
        place\"\n                },\n                \"locationCode\": {\n                    \"type\": \"string\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Location code within the realm\"\n  \
        \              }\n            }\n        },\n        \"TemplateStatus\": {\n            \"type\": \"string\",\n  \
        \          \"enum\": [\n                \"Draft\",\n                \"Active\",\n                \"Deprecated\"\n\
        \            ],\n            \"description\": \"Current lifecycle status of a scenario template\"\n        }\n   \
        \ }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Create a scenario template\",\n    \"description\": \"Creates a new scenario
        template definition.\",\n    \"tags\": [\n        \"Template Management\"\n    ],\n    \"deprecated\": false,\n  \
        \  \"operationId\": \"createTemplate\"\n}"
  /gardener/template/get:
    post:
      summary: Get scenario template by ID
      description: Returns a scenario template by its unique identifier.
      operationId: getTemplate
      tags:
      - Template Management
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetTemplateRequest'
      responses:
        '200':
          description: Template retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScenarioTemplateResponse'
        '404':
          description: Template not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetTemplateRequest\"\
        ,\n    \"$defs\": {\n        \"GetTemplateRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to get a template by ID\",\n            \"required\": [\n                \"scenarioTemplateId\"\n    \
        \        ],\n            \"properties\": {\n                \"scenarioTemplateId\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Template ID to retrieve\"\
        \n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ScenarioTemplateResponse\"\
        ,\n    \"$defs\": {\n        \"ScenarioTemplateResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Full scenario template with all fields\",\n            \"required\": [\n                \"scenarioTemplateId\"\
        ,\n                \"code\",\n                \"displayName\",\n                \"description\",\n               \
        \ \"category\",\n                \"domainWeights\",\n                \"connectivityMode\",\n                \"allowedPhases\"\
        ,\n                \"maxConcurrentInstances\",\n                \"status\",\n                \"createdAt\",\n    \
        \            \"updatedAt\"\n            ],\n            \"properties\": {\n                \"scenarioTemplateId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Unique identifier for this template\"\n                },\n                \"code\": {\n        \
        \            \"type\": \"string\",\n                    \"description\": \"Unique template code\"\n              \
        \  },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Human-readable name\"\n                },\n                \"description\": {\n                    \"type\": \"\
        string\",\n                    \"description\": \"Template description\"\n                },\n                \"category\"\
        : {\n                    \"$ref\": \"#/$defs/ScenarioCategory\",\n                    \"description\": \"Primary gameplay
        category\"\n                },\n                \"subcategory\": {\n                    \"type\": \"string\",\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Subcategory within the primary category\"\
        \n                },\n                \"domainWeights\": {\n                    \"type\": \"array\",\n           \
        \         \"items\": {\n                        \"$ref\": \"#/$defs/DomainWeight\"\n                    },\n     \
        \               \"description\": \"Growth domain weights\"\n                },\n                \"minGrowthPhase\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Minimum seed growth phase\"\n                },\n                \"connectivityMode\": {\n                   \
        \ \"$ref\": \"#/$defs/ConnectivityMode\",\n                    \"description\": \"World connectivity mode\"\n    \
        \            },\n                \"allowedPhases\": {\n                    \"type\": \"array\",\n                \
        \    \"items\": {\n                        \"$ref\": \"#/$defs/DeploymentPhase\"\n                    },\n       \
        \             \"description\": \"Deployment phases where this template is available. Always contains explicit values
        (never empty).\"\n                },\n                \"maxConcurrentInstances\": {\n                    \"type\"\
        : \"integer\",\n                    \"description\": \"Maximum concurrent active instances\"\n                },\n\
        \                \"estimatedDurationMinutes\": {\n                    \"type\": \"integer\",\n                   \
        \ \"nullable\": true,\n                    \"description\": \"Estimated scenario duration in minutes\"\n         \
        \       },\n                \"prerequisites\": {\n                    \"$ref\": \"#/$defs/ScenarioPrerequisites\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Entry requirements\"\n        \
        \        },\n                \"chaining\": {\n                    \"$ref\": \"#/$defs/ScenarioChaining\",\n      \
        \              \"nullable\": true,\n                    \"description\": \"Chaining configuration\"\n            \
        \    },\n                \"multiplayer\": {\n                    \"$ref\": \"#/$defs/ScenarioMultiplayer\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Multiplayer support\"\n             \
        \   },\n                \"content\": {\n                    \"$ref\": \"#/$defs/ScenarioContent\",\n             \
        \       \"nullable\": true,\n                    \"description\": \"Content references\"\n                },\n   \
        \             \"status\": {\n                    \"$ref\": \"#/$defs/TemplateStatus\",\n                    \"description\"\
        : \"Current lifecycle status\"\n                },\n                \"createdAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When this template
        was created\"\n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"date-time\",\n                    \"description\": \"When this template was last
        updated\"\n                }\n            }\n        },\n        \"ScenarioCategory\": {\n            \"type\": \"\
        string\",\n            \"enum\": [\n                \"Combat\",\n                \"Crafting\",\n                \"\
        Social\",\n                \"Trade\",\n                \"Exploration\",\n                \"Magic\",\n            \
        \    \"Survival\",\n                \"Mixed\",\n                \"Narrative\",\n                \"Tutorial\"\n   \
        \         ],\n            \"description\": \"Primary gameplay category for a scenario template\"\n        },\n   \
        \     \"DomainWeight\": {\n            \"type\": \"object\",\n            \"description\": \"Domain name and weight
        pair for scenario template growth weighting\",\n            \"required\": [\n                \"domain\",\n       \
        \         \"weight\"\n            ],\n            \"properties\": {\n                \"domain\": {\n             \
        \       \"type\": \"string\",\n                    \"description\": \"Growth domain path (e.g. combat.melee, exploration.caves)\"\
        \n                },\n                \"weight\": {\n                    \"type\": \"number\",\n                 \
        \   \"format\": \"float\",\n                    \"description\": \"Weight applied to this domain on scenario completion\"\
        \n                }\n            }\n        },\n        \"ConnectivityMode\": {\n            \"type\": \"string\"\
        ,\n            \"enum\": [\n                \"Isolated\",\n                \"WorldSlice\",\n                \"Persistent\"\
        \n            ],\n            \"description\": \"How a scenario instance connects to the broader game world\"\n  \
        \      },\n        \"DeploymentPhase\": {\n            \"type\": \"string\",\n            \"enum\": [\n          \
        \      \"Alpha\",\n                \"Beta\",\n                \"Release\"\n            ],\n            \"description\"\
        : \"Current deployment phase for scenario availability gating\"\n        },\n        \"ScenarioPrerequisites\": {\n\
        \            \"type\": \"object\",\n            \"description\": \"Prerequisite requirements for entering a scenario\"\
        ,\n            \"properties\": {\n                \"requiredDomains\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": {\n                        \"type\": \"number\",\n              \
        \          \"format\": \"float\"\n                    },\n                    \"nullable\": true,\n              \
        \      \"description\": \"Minimum growth depth per domain (domain path to minimum depth)\"\n                },\n \
        \               \"requiredScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that must be completed first\"\n                },\n\
        \                \"excludedScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that disqualify the player\"\n                }\n\
        \            }\n        },\n        \"ScenarioChaining\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Chaining configuration for linking scenarios together\",\n            \"properties\": {\n                \"leadsTo\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\"\
        : \"string\"\n                    },\n                    \"nullable\": true,\n                    \"description\"\
        : \"Template codes this scenario can chain into\"\n                },\n                \"chainProbabilities\": {\n\
        \                    \"type\": \"object\",\n                    \"additionalProperties\": {\n                    \
        \    \"type\": \"number\",\n                        \"format\": \"float\"\n                    },\n              \
        \      \"nullable\": true,\n                    \"description\": \"Per-code probability weights for chain selection\"\
        \n                },\n                \"maxChainDepth\": {\n                    \"type\": \"integer\",\n         \
        \           \"default\": 3,\n                    \"description\": \"Maximum chain depth allowed from the initial scenario\"\
        \n                }\n            }\n        },\n        \"ScenarioMultiplayer\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Multiplayer configuration for group scenarios\",\n            \"required\": [\n\
        \                \"minPlayers\",\n                \"maxPlayers\"\n            ],\n            \"properties\": {\n\
        \                \"minPlayers\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Minimum number of players required\"\n                },\n                \"maxPlayers\": {\n                \
        \    \"type\": \"integer\",\n                    \"description\": \"Maximum number of players allowed\"\n        \
        \        },\n                \"matchmakingQueueCode\": {\n                    \"type\": \"string\",\n            \
        \        \"nullable\": true,\n                    \"description\": \"Matchmaking queue code for automatic grouping\"\
        \n                },\n                \"bondPreferred\": {\n                    \"type\": \"boolean\",\n         \
        \           \"default\": false,\n                    \"description\": \"Whether bonded players receive a scoring boost
        for this scenario\"\n                }\n            }\n        },\n        \"ScenarioContent\": {\n            \"\
        type\": \"object\",\n            \"description\": \"Content references linking a scenario template to game assets\"\
        ,\n            \"properties\": {\n                \"behaviorDocumentId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"ABML behavior document ID for NPC orchestration\"\n                },\n                \"sceneDocumentId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Scene document ID for environment composition\"\n                },\n\
        \                \"realmId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Realm ID where this scenario takes
        place\"\n                },\n                \"locationCode\": {\n                    \"type\": \"string\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Location code within the realm\"\n  \
        \              }\n            }\n        },\n        \"TemplateStatus\": {\n            \"type\": \"string\",\n  \
        \          \"enum\": [\n                \"Draft\",\n                \"Active\",\n                \"Deprecated\"\n\
        \            ],\n            \"description\": \"Current lifecycle status of a scenario template\"\n        }\n   \
        \ }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get scenario template by ID\",\n    \"description\": \"Returns a scenario
        template by its unique identifier.\",\n    \"tags\": [\n        \"Template Management\"\n    ],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"getTemplate\"\n}"
  /gardener/template/get-by-code:
    post:
      summary: Get scenario template by code
      description: Returns a scenario template by its unique code string.
      operationId: getTemplateByCode
      tags:
      - Template Management
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetTemplateByCodeRequest'
      responses:
        '200':
          description: Template retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScenarioTemplateResponse'
        '404':
          description: Template not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetTemplateByCodeRequest\"\
        ,\n    \"$defs\": {\n        \"GetTemplateByCodeRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to get a template by code\",\n            \"required\": [\n                \"code\"\n            ],\n\
        \            \"properties\": {\n                \"code\": {\n                    \"type\": \"string\",\n         \
        \           \"description\": \"Template code to look up\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ScenarioTemplateResponse\"\
        ,\n    \"$defs\": {\n        \"ScenarioTemplateResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Full scenario template with all fields\",\n            \"required\": [\n                \"scenarioTemplateId\"\
        ,\n                \"code\",\n                \"displayName\",\n                \"description\",\n               \
        \ \"category\",\n                \"domainWeights\",\n                \"connectivityMode\",\n                \"allowedPhases\"\
        ,\n                \"maxConcurrentInstances\",\n                \"status\",\n                \"createdAt\",\n    \
        \            \"updatedAt\"\n            ],\n            \"properties\": {\n                \"scenarioTemplateId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Unique identifier for this template\"\n                },\n                \"code\": {\n        \
        \            \"type\": \"string\",\n                    \"description\": \"Unique template code\"\n              \
        \  },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Human-readable name\"\n                },\n                \"description\": {\n                    \"type\": \"\
        string\",\n                    \"description\": \"Template description\"\n                },\n                \"category\"\
        : {\n                    \"$ref\": \"#/$defs/ScenarioCategory\",\n                    \"description\": \"Primary gameplay
        category\"\n                },\n                \"subcategory\": {\n                    \"type\": \"string\",\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Subcategory within the primary category\"\
        \n                },\n                \"domainWeights\": {\n                    \"type\": \"array\",\n           \
        \         \"items\": {\n                        \"$ref\": \"#/$defs/DomainWeight\"\n                    },\n     \
        \               \"description\": \"Growth domain weights\"\n                },\n                \"minGrowthPhase\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Minimum seed growth phase\"\n                },\n                \"connectivityMode\": {\n                   \
        \ \"$ref\": \"#/$defs/ConnectivityMode\",\n                    \"description\": \"World connectivity mode\"\n    \
        \            },\n                \"allowedPhases\": {\n                    \"type\": \"array\",\n                \
        \    \"items\": {\n                        \"$ref\": \"#/$defs/DeploymentPhase\"\n                    },\n       \
        \             \"description\": \"Deployment phases where this template is available. Always contains explicit values
        (never empty).\"\n                },\n                \"maxConcurrentInstances\": {\n                    \"type\"\
        : \"integer\",\n                    \"description\": \"Maximum concurrent active instances\"\n                },\n\
        \                \"estimatedDurationMinutes\": {\n                    \"type\": \"integer\",\n                   \
        \ \"nullable\": true,\n                    \"description\": \"Estimated scenario duration in minutes\"\n         \
        \       },\n                \"prerequisites\": {\n                    \"$ref\": \"#/$defs/ScenarioPrerequisites\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Entry requirements\"\n        \
        \        },\n                \"chaining\": {\n                    \"$ref\": \"#/$defs/ScenarioChaining\",\n      \
        \              \"nullable\": true,\n                    \"description\": \"Chaining configuration\"\n            \
        \    },\n                \"multiplayer\": {\n                    \"$ref\": \"#/$defs/ScenarioMultiplayer\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Multiplayer support\"\n             \
        \   },\n                \"content\": {\n                    \"$ref\": \"#/$defs/ScenarioContent\",\n             \
        \       \"nullable\": true,\n                    \"description\": \"Content references\"\n                },\n   \
        \             \"status\": {\n                    \"$ref\": \"#/$defs/TemplateStatus\",\n                    \"description\"\
        : \"Current lifecycle status\"\n                },\n                \"createdAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When this template
        was created\"\n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"date-time\",\n                    \"description\": \"When this template was last
        updated\"\n                }\n            }\n        },\n        \"ScenarioCategory\": {\n            \"type\": \"\
        string\",\n            \"enum\": [\n                \"Combat\",\n                \"Crafting\",\n                \"\
        Social\",\n                \"Trade\",\n                \"Exploration\",\n                \"Magic\",\n            \
        \    \"Survival\",\n                \"Mixed\",\n                \"Narrative\",\n                \"Tutorial\"\n   \
        \         ],\n            \"description\": \"Primary gameplay category for a scenario template\"\n        },\n   \
        \     \"DomainWeight\": {\n            \"type\": \"object\",\n            \"description\": \"Domain name and weight
        pair for scenario template growth weighting\",\n            \"required\": [\n                \"domain\",\n       \
        \         \"weight\"\n            ],\n            \"properties\": {\n                \"domain\": {\n             \
        \       \"type\": \"string\",\n                    \"description\": \"Growth domain path (e.g. combat.melee, exploration.caves)\"\
        \n                },\n                \"weight\": {\n                    \"type\": \"number\",\n                 \
        \   \"format\": \"float\",\n                    \"description\": \"Weight applied to this domain on scenario completion\"\
        \n                }\n            }\n        },\n        \"ConnectivityMode\": {\n            \"type\": \"string\"\
        ,\n            \"enum\": [\n                \"Isolated\",\n                \"WorldSlice\",\n                \"Persistent\"\
        \n            ],\n            \"description\": \"How a scenario instance connects to the broader game world\"\n  \
        \      },\n        \"DeploymentPhase\": {\n            \"type\": \"string\",\n            \"enum\": [\n          \
        \      \"Alpha\",\n                \"Beta\",\n                \"Release\"\n            ],\n            \"description\"\
        : \"Current deployment phase for scenario availability gating\"\n        },\n        \"ScenarioPrerequisites\": {\n\
        \            \"type\": \"object\",\n            \"description\": \"Prerequisite requirements for entering a scenario\"\
        ,\n            \"properties\": {\n                \"requiredDomains\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": {\n                        \"type\": \"number\",\n              \
        \          \"format\": \"float\"\n                    },\n                    \"nullable\": true,\n              \
        \      \"description\": \"Minimum growth depth per domain (domain path to minimum depth)\"\n                },\n \
        \               \"requiredScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that must be completed first\"\n                },\n\
        \                \"excludedScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that disqualify the player\"\n                }\n\
        \            }\n        },\n        \"ScenarioChaining\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Chaining configuration for linking scenarios together\",\n            \"properties\": {\n                \"leadsTo\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\"\
        : \"string\"\n                    },\n                    \"nullable\": true,\n                    \"description\"\
        : \"Template codes this scenario can chain into\"\n                },\n                \"chainProbabilities\": {\n\
        \                    \"type\": \"object\",\n                    \"additionalProperties\": {\n                    \
        \    \"type\": \"number\",\n                        \"format\": \"float\"\n                    },\n              \
        \      \"nullable\": true,\n                    \"description\": \"Per-code probability weights for chain selection\"\
        \n                },\n                \"maxChainDepth\": {\n                    \"type\": \"integer\",\n         \
        \           \"default\": 3,\n                    \"description\": \"Maximum chain depth allowed from the initial scenario\"\
        \n                }\n            }\n        },\n        \"ScenarioMultiplayer\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Multiplayer configuration for group scenarios\",\n            \"required\": [\n\
        \                \"minPlayers\",\n                \"maxPlayers\"\n            ],\n            \"properties\": {\n\
        \                \"minPlayers\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Minimum number of players required\"\n                },\n                \"maxPlayers\": {\n                \
        \    \"type\": \"integer\",\n                    \"description\": \"Maximum number of players allowed\"\n        \
        \        },\n                \"matchmakingQueueCode\": {\n                    \"type\": \"string\",\n            \
        \        \"nullable\": true,\n                    \"description\": \"Matchmaking queue code for automatic grouping\"\
        \n                },\n                \"bondPreferred\": {\n                    \"type\": \"boolean\",\n         \
        \           \"default\": false,\n                    \"description\": \"Whether bonded players receive a scoring boost
        for this scenario\"\n                }\n            }\n        },\n        \"ScenarioContent\": {\n            \"\
        type\": \"object\",\n            \"description\": \"Content references linking a scenario template to game assets\"\
        ,\n            \"properties\": {\n                \"behaviorDocumentId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"ABML behavior document ID for NPC orchestration\"\n                },\n                \"sceneDocumentId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Scene document ID for environment composition\"\n                },\n\
        \                \"realmId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Realm ID where this scenario takes
        place\"\n                },\n                \"locationCode\": {\n                    \"type\": \"string\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Location code within the realm\"\n  \
        \              }\n            }\n        },\n        \"TemplateStatus\": {\n            \"type\": \"string\",\n  \
        \          \"enum\": [\n                \"Draft\",\n                \"Active\",\n                \"Deprecated\"\n\
        \            ],\n            \"description\": \"Current lifecycle status of a scenario template\"\n        }\n   \
        \ }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get scenario template by code\",\n    \"description\": \"Returns a scenario
        template by its unique code string.\",\n    \"tags\": [\n        \"Template Management\"\n    ],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"getTemplateByCode\"\n}"
  /gardener/template/list:
    post:
      summary: List scenario templates
      description: Returns paginated scenario templates with optional filters.
      operationId: listTemplates
      tags:
      - Template Management
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListTemplatesRequest'
      responses:
        '200':
          description: Templates listed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListTemplatesResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListTemplatesRequest\"\
        ,\n    \"$defs\": {\n        \"ListTemplatesRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to list templates with optional filters\",\n            \"properties\": {\n                \"category\"\
        : {\n                    \"$ref\": \"#/$defs/ScenarioCategory\",\n                    \"nullable\": true,\n      \
        \              \"description\": \"Filter by category\"\n                },\n                \"connectivityMode\":
        {\n                    \"$ref\": \"#/$defs/ConnectivityMode\",\n                    \"nullable\": true,\n        \
        \            \"description\": \"Filter by connectivity mode\"\n                },\n                \"deploymentPhase\"\
        : {\n                    \"$ref\": \"#/$defs/DeploymentPhase\",\n                    \"nullable\": true,\n       \
        \             \"description\": \"Filter by deployment phase availability\"\n                },\n                \"\
        status\": {\n                    \"$ref\": \"#/$defs/TemplateStatus\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Filter by template status\"\n                },\n                \"page\"\
        : {\n                    \"type\": \"integer\",\n                    \"default\": 1,\n                    \"description\"\
        : \"Page number (1-based)\"\n                },\n                \"pageSize\": {\n                    \"type\": \"\
        integer\",\n                    \"default\": 50,\n                    \"description\": \"Items per page\"\n      \
        \          }\n            }\n        },\n        \"ScenarioCategory\": {\n            \"type\": \"string\",\n    \
        \        \"enum\": [\n                \"Combat\",\n                \"Crafting\",\n                \"Social\",\n  \
        \              \"Trade\",\n                \"Exploration\",\n                \"Magic\",\n                \"Survival\"\
        ,\n                \"Mixed\",\n                \"Narrative\",\n                \"Tutorial\"\n            ],\n    \
        \        \"description\": \"Primary gameplay category for a scenario template\"\n        },\n        \"ConnectivityMode\"\
        : {\n            \"type\": \"string\",\n            \"enum\": [\n                \"Isolated\",\n                \"\
        WorldSlice\",\n                \"Persistent\"\n            ],\n            \"description\": \"How a scenario instance
        connects to the broader game world\"\n        },\n        \"DeploymentPhase\": {\n            \"type\": \"string\"\
        ,\n            \"enum\": [\n                \"Alpha\",\n                \"Beta\",\n                \"Release\"\n \
        \           ],\n            \"description\": \"Current deployment phase for scenario availability gating\"\n     \
        \   },\n        \"TemplateStatus\": {\n            \"type\": \"string\",\n            \"enum\": [\n              \
        \  \"Draft\",\n                \"Active\",\n                \"Deprecated\"\n            ],\n            \"description\"\
        : \"Current lifecycle status of a scenario template\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListTemplatesResponse\"\
        ,\n    \"$defs\": {\n        \"ListTemplatesResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Paginated list of scenario templates\",\n            \"required\": [\n                \"templates\",\n       \
        \         \"totalCount\",\n                \"page\",\n                \"pageSize\"\n            ],\n            \"\
        properties\": {\n                \"templates\": {\n                    \"type\": \"array\",\n                    \"\
        items\": {\n                        \"$ref\": \"#/$defs/ScenarioTemplateResponse\"\n                    },\n     \
        \               \"description\": \"Templates on this page\"\n                },\n                \"totalCount\": {\n\
        \                    \"type\": \"integer\",\n                    \"description\": \"Total number of matching templates\"\
        \n                },\n                \"page\": {\n                    \"type\": \"integer\",\n                  \
        \  \"description\": \"Current page number\"\n                },\n                \"pageSize\": {\n               \
        \     \"type\": \"integer\",\n                    \"description\": \"Items per page\"\n                }\n       \
        \     }\n        },\n        \"ScenarioTemplateResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Full scenario template with all fields\",\n            \"required\": [\n                \"scenarioTemplateId\"\
        ,\n                \"code\",\n                \"displayName\",\n                \"description\",\n               \
        \ \"category\",\n                \"domainWeights\",\n                \"connectivityMode\",\n                \"allowedPhases\"\
        ,\n                \"maxConcurrentInstances\",\n                \"status\",\n                \"createdAt\",\n    \
        \            \"updatedAt\"\n            ],\n            \"properties\": {\n                \"scenarioTemplateId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Unique identifier for this template\"\n                },\n                \"code\": {\n        \
        \            \"type\": \"string\",\n                    \"description\": \"Unique template code\"\n              \
        \  },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Human-readable name\"\n                },\n                \"description\": {\n                    \"type\": \"\
        string\",\n                    \"description\": \"Template description\"\n                },\n                \"category\"\
        : {\n                    \"$ref\": \"#/$defs/ScenarioCategory\",\n                    \"description\": \"Primary gameplay
        category\"\n                },\n                \"subcategory\": {\n                    \"type\": \"string\",\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Subcategory within the primary category\"\
        \n                },\n                \"domainWeights\": {\n                    \"type\": \"array\",\n           \
        \         \"items\": {\n                        \"$ref\": \"#/$defs/DomainWeight\"\n                    },\n     \
        \               \"description\": \"Growth domain weights\"\n                },\n                \"minGrowthPhase\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Minimum seed growth phase\"\n                },\n                \"connectivityMode\": {\n                   \
        \ \"$ref\": \"#/$defs/ConnectivityMode\",\n                    \"description\": \"World connectivity mode\"\n    \
        \            },\n                \"allowedPhases\": {\n                    \"type\": \"array\",\n                \
        \    \"items\": {\n                        \"$ref\": \"#/$defs/DeploymentPhase\"\n                    },\n       \
        \             \"description\": \"Deployment phases where this template is available. Always contains explicit values
        (never empty).\"\n                },\n                \"maxConcurrentInstances\": {\n                    \"type\"\
        : \"integer\",\n                    \"description\": \"Maximum concurrent active instances\"\n                },\n\
        \                \"estimatedDurationMinutes\": {\n                    \"type\": \"integer\",\n                   \
        \ \"nullable\": true,\n                    \"description\": \"Estimated scenario duration in minutes\"\n         \
        \       },\n                \"prerequisites\": {\n                    \"$ref\": \"#/$defs/ScenarioPrerequisites\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Entry requirements\"\n        \
        \        },\n                \"chaining\": {\n                    \"$ref\": \"#/$defs/ScenarioChaining\",\n      \
        \              \"nullable\": true,\n                    \"description\": \"Chaining configuration\"\n            \
        \    },\n                \"multiplayer\": {\n                    \"$ref\": \"#/$defs/ScenarioMultiplayer\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Multiplayer support\"\n             \
        \   },\n                \"content\": {\n                    \"$ref\": \"#/$defs/ScenarioContent\",\n             \
        \       \"nullable\": true,\n                    \"description\": \"Content references\"\n                },\n   \
        \             \"status\": {\n                    \"$ref\": \"#/$defs/TemplateStatus\",\n                    \"description\"\
        : \"Current lifecycle status\"\n                },\n                \"createdAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When this template
        was created\"\n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"date-time\",\n                    \"description\": \"When this template was last
        updated\"\n                }\n            }\n        },\n        \"ScenarioCategory\": {\n            \"type\": \"\
        string\",\n            \"enum\": [\n                \"Combat\",\n                \"Crafting\",\n                \"\
        Social\",\n                \"Trade\",\n                \"Exploration\",\n                \"Magic\",\n            \
        \    \"Survival\",\n                \"Mixed\",\n                \"Narrative\",\n                \"Tutorial\"\n   \
        \         ],\n            \"description\": \"Primary gameplay category for a scenario template\"\n        },\n   \
        \     \"DomainWeight\": {\n            \"type\": \"object\",\n            \"description\": \"Domain name and weight
        pair for scenario template growth weighting\",\n            \"required\": [\n                \"domain\",\n       \
        \         \"weight\"\n            ],\n            \"properties\": {\n                \"domain\": {\n             \
        \       \"type\": \"string\",\n                    \"description\": \"Growth domain path (e.g. combat.melee, exploration.caves)\"\
        \n                },\n                \"weight\": {\n                    \"type\": \"number\",\n                 \
        \   \"format\": \"float\",\n                    \"description\": \"Weight applied to this domain on scenario completion\"\
        \n                }\n            }\n        },\n        \"ConnectivityMode\": {\n            \"type\": \"string\"\
        ,\n            \"enum\": [\n                \"Isolated\",\n                \"WorldSlice\",\n                \"Persistent\"\
        \n            ],\n            \"description\": \"How a scenario instance connects to the broader game world\"\n  \
        \      },\n        \"DeploymentPhase\": {\n            \"type\": \"string\",\n            \"enum\": [\n          \
        \      \"Alpha\",\n                \"Beta\",\n                \"Release\"\n            ],\n            \"description\"\
        : \"Current deployment phase for scenario availability gating\"\n        },\n        \"ScenarioPrerequisites\": {\n\
        \            \"type\": \"object\",\n            \"description\": \"Prerequisite requirements for entering a scenario\"\
        ,\n            \"properties\": {\n                \"requiredDomains\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": {\n                        \"type\": \"number\",\n              \
        \          \"format\": \"float\"\n                    },\n                    \"nullable\": true,\n              \
        \      \"description\": \"Minimum growth depth per domain (domain path to minimum depth)\"\n                },\n \
        \               \"requiredScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that must be completed first\"\n                },\n\
        \                \"excludedScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that disqualify the player\"\n                }\n\
        \            }\n        },\n        \"ScenarioChaining\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Chaining configuration for linking scenarios together\",\n            \"properties\": {\n                \"leadsTo\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\"\
        : \"string\"\n                    },\n                    \"nullable\": true,\n                    \"description\"\
        : \"Template codes this scenario can chain into\"\n                },\n                \"chainProbabilities\": {\n\
        \                    \"type\": \"object\",\n                    \"additionalProperties\": {\n                    \
        \    \"type\": \"number\",\n                        \"format\": \"float\"\n                    },\n              \
        \      \"nullable\": true,\n                    \"description\": \"Per-code probability weights for chain selection\"\
        \n                },\n                \"maxChainDepth\": {\n                    \"type\": \"integer\",\n         \
        \           \"default\": 3,\n                    \"description\": \"Maximum chain depth allowed from the initial scenario\"\
        \n                }\n            }\n        },\n        \"ScenarioMultiplayer\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Multiplayer configuration for group scenarios\",\n            \"required\": [\n\
        \                \"minPlayers\",\n                \"maxPlayers\"\n            ],\n            \"properties\": {\n\
        \                \"minPlayers\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Minimum number of players required\"\n                },\n                \"maxPlayers\": {\n                \
        \    \"type\": \"integer\",\n                    \"description\": \"Maximum number of players allowed\"\n        \
        \        },\n                \"matchmakingQueueCode\": {\n                    \"type\": \"string\",\n            \
        \        \"nullable\": true,\n                    \"description\": \"Matchmaking queue code for automatic grouping\"\
        \n                },\n                \"bondPreferred\": {\n                    \"type\": \"boolean\",\n         \
        \           \"default\": false,\n                    \"description\": \"Whether bonded players receive a scoring boost
        for this scenario\"\n                }\n            }\n        },\n        \"ScenarioContent\": {\n            \"\
        type\": \"object\",\n            \"description\": \"Content references linking a scenario template to game assets\"\
        ,\n            \"properties\": {\n                \"behaviorDocumentId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"ABML behavior document ID for NPC orchestration\"\n                },\n                \"sceneDocumentId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Scene document ID for environment composition\"\n                },\n\
        \                \"realmId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Realm ID where this scenario takes
        place\"\n                },\n                \"locationCode\": {\n                    \"type\": \"string\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Location code within the realm\"\n  \
        \              }\n            }\n        },\n        \"TemplateStatus\": {\n            \"type\": \"string\",\n  \
        \          \"enum\": [\n                \"Draft\",\n                \"Active\",\n                \"Deprecated\"\n\
        \            ],\n            \"description\": \"Current lifecycle status of a scenario template\"\n        }\n   \
        \ }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"List scenario templates\",\n    \"description\": \"Returns paginated scenario
        templates with optional filters.\",\n    \"tags\": [\n        \"Template Management\"\n    ],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"listTemplates\"\n}"
  /gardener/template/update:
    post:
      summary: Update scenario template
      description: Updates non-null fields of an existing template.
      operationId: updateTemplate
      tags:
      - Template Management
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTemplateRequest'
      responses:
        '200':
          description: Template updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScenarioTemplateResponse'
        '404':
          description: Template not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/UpdateTemplateRequest\"\
        ,\n    \"$defs\": {\n        \"UpdateTemplateRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to update a template (non-null fields are applied)\",\n            \"required\": [\n                \"\
        scenarioTemplateId\"\n            ],\n            \"properties\": {\n                \"scenarioTemplateId\": {\n \
        \                   \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Template ID to update\"\n                },\n                \"displayName\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Updated display name\"\
        \n                },\n                \"description\": {\n                    \"type\": \"string\",\n            \
        \        \"nullable\": true,\n                    \"description\": \"Updated description\"\n                },\n \
        \               \"domainWeights\": {\n                    \"type\": \"array\",\n                    \"items\": {\n\
        \                        \"$ref\": \"#/$defs/DomainWeight\"\n                    },\n                    \"nullable\"\
        : true,\n                    \"description\": \"Updated domain weights\"\n                },\n                \"maxConcurrentInstances\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Updated max concurrent instances\"\n                },\n                \"prerequisites\": {\n               \
        \     \"$ref\": \"#/$defs/ScenarioPrerequisites\",\n                    \"nullable\": true,\n                    \"\
        description\": \"Updated prerequisites\"\n                },\n                \"chaining\": {\n                  \
        \  \"$ref\": \"#/$defs/ScenarioChaining\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Updated chaining configuration\"\n                },\n                \"multiplayer\": {\n                   \
        \ \"$ref\": \"#/$defs/ScenarioMultiplayer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Updated multiplayer configuration\"\n                },\n                \"content\": {\n                    \"\
        $ref\": \"#/$defs/ScenarioContent\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Updated content references\"\n                }\n            }\n        },\n        \"DomainWeight\": {\n    \
        \        \"type\": \"object\",\n            \"description\": \"Domain name and weight pair for scenario template growth
        weighting\",\n            \"required\": [\n                \"domain\",\n                \"weight\"\n            ],\n\
        \            \"properties\": {\n                \"domain\": {\n                    \"type\": \"string\",\n       \
        \             \"description\": \"Growth domain path (e.g. combat.melee, exploration.caves)\"\n                },\n\
        \                \"weight\": {\n                    \"type\": \"number\",\n                    \"format\": \"float\"\
        ,\n                    \"description\": \"Weight applied to this domain on scenario completion\"\n               \
        \ }\n            }\n        },\n        \"ScenarioPrerequisites\": {\n            \"type\": \"object\",\n        \
        \    \"description\": \"Prerequisite requirements for entering a scenario\",\n            \"properties\": {\n    \
        \            \"requiredDomains\": {\n                    \"type\": \"object\",\n                    \"additionalProperties\"\
        : {\n                        \"type\": \"number\",\n                        \"format\": \"float\"\n              \
        \      },\n                    \"nullable\": true,\n                    \"description\": \"Minimum growth depth per
        domain (domain path to minimum depth)\"\n                },\n                \"requiredScenarios\": {\n          \
        \          \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\n\
        \                    },\n                    \"nullable\": true,\n                    \"description\": \"Scenario
        template codes that must be completed first\"\n                },\n                \"excludedScenarios\": {\n    \
        \                \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\
        \n                    },\n                    \"nullable\": true,\n                    \"description\": \"Scenario
        template codes that disqualify the player\"\n                }\n            }\n        },\n        \"ScenarioChaining\"\
        : {\n            \"type\": \"object\",\n            \"description\": \"Chaining configuration for linking scenarios
        together\",\n            \"properties\": {\n                \"leadsTo\": {\n                    \"type\": \"array\"\
        ,\n                    \"items\": {\n                        \"type\": \"string\"\n                    },\n      \
        \              \"nullable\": true,\n                    \"description\": \"Template codes this scenario can chain
        into\"\n                },\n                \"chainProbabilities\": {\n                    \"type\": \"object\",\n\
        \                    \"additionalProperties\": {\n                        \"type\": \"number\",\n                \
        \        \"format\": \"float\"\n                    },\n                    \"nullable\": true,\n                \
        \    \"description\": \"Per-code probability weights for chain selection\"\n                },\n                \"\
        maxChainDepth\": {\n                    \"type\": \"integer\",\n                    \"default\": 3,\n            \
        \        \"description\": \"Maximum chain depth allowed from the initial scenario\"\n                }\n         \
        \   }\n        },\n        \"ScenarioMultiplayer\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Multiplayer configuration for group scenarios\",\n            \"required\": [\n                \"minPlayers\"\
        ,\n                \"maxPlayers\"\n            ],\n            \"properties\": {\n                \"minPlayers\":
        {\n                    \"type\": \"integer\",\n                    \"description\": \"Minimum number of players required\"\
        \n                },\n                \"maxPlayers\": {\n                    \"type\": \"integer\",\n            \
        \        \"description\": \"Maximum number of players allowed\"\n                },\n                \"matchmakingQueueCode\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Matchmaking queue code for automatic grouping\"\n                },\n                \"bondPreferred\": {\n  \
        \                  \"type\": \"boolean\",\n                    \"default\": false,\n                    \"description\"\
        : \"Whether bonded players receive a scoring boost for this scenario\"\n                }\n            }\n       \
        \ },\n        \"ScenarioContent\": {\n            \"type\": \"object\",\n            \"description\": \"Content references
        linking a scenario template to game assets\",\n            \"properties\": {\n                \"behaviorDocumentId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        nullable\": true,\n                    \"description\": \"ABML behavior document ID for NPC orchestration\"\n    \
        \            },\n                \"sceneDocumentId\": {\n                    \"type\": \"string\",\n             \
        \       \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Scene
        document ID for environment composition\"\n                },\n                \"realmId\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Realm ID where this scenario takes place\"\n                },\n            \
        \    \"locationCode\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Location code within the realm\"\n                }\n            }\n        }\n\
        \    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ScenarioTemplateResponse\"\
        ,\n    \"$defs\": {\n        \"ScenarioTemplateResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Full scenario template with all fields\",\n            \"required\": [\n                \"scenarioTemplateId\"\
        ,\n                \"code\",\n                \"displayName\",\n                \"description\",\n               \
        \ \"category\",\n                \"domainWeights\",\n                \"connectivityMode\",\n                \"allowedPhases\"\
        ,\n                \"maxConcurrentInstances\",\n                \"status\",\n                \"createdAt\",\n    \
        \            \"updatedAt\"\n            ],\n            \"properties\": {\n                \"scenarioTemplateId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Unique identifier for this template\"\n                },\n                \"code\": {\n        \
        \            \"type\": \"string\",\n                    \"description\": \"Unique template code\"\n              \
        \  },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Human-readable name\"\n                },\n                \"description\": {\n                    \"type\": \"\
        string\",\n                    \"description\": \"Template description\"\n                },\n                \"category\"\
        : {\n                    \"$ref\": \"#/$defs/ScenarioCategory\",\n                    \"description\": \"Primary gameplay
        category\"\n                },\n                \"subcategory\": {\n                    \"type\": \"string\",\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Subcategory within the primary category\"\
        \n                },\n                \"domainWeights\": {\n                    \"type\": \"array\",\n           \
        \         \"items\": {\n                        \"$ref\": \"#/$defs/DomainWeight\"\n                    },\n     \
        \               \"description\": \"Growth domain weights\"\n                },\n                \"minGrowthPhase\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Minimum seed growth phase\"\n                },\n                \"connectivityMode\": {\n                   \
        \ \"$ref\": \"#/$defs/ConnectivityMode\",\n                    \"description\": \"World connectivity mode\"\n    \
        \            },\n                \"allowedPhases\": {\n                    \"type\": \"array\",\n                \
        \    \"items\": {\n                        \"$ref\": \"#/$defs/DeploymentPhase\"\n                    },\n       \
        \             \"description\": \"Deployment phases where this template is available. Always contains explicit values
        (never empty).\"\n                },\n                \"maxConcurrentInstances\": {\n                    \"type\"\
        : \"integer\",\n                    \"description\": \"Maximum concurrent active instances\"\n                },\n\
        \                \"estimatedDurationMinutes\": {\n                    \"type\": \"integer\",\n                   \
        \ \"nullable\": true,\n                    \"description\": \"Estimated scenario duration in minutes\"\n         \
        \       },\n                \"prerequisites\": {\n                    \"$ref\": \"#/$defs/ScenarioPrerequisites\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Entry requirements\"\n        \
        \        },\n                \"chaining\": {\n                    \"$ref\": \"#/$defs/ScenarioChaining\",\n      \
        \              \"nullable\": true,\n                    \"description\": \"Chaining configuration\"\n            \
        \    },\n                \"multiplayer\": {\n                    \"$ref\": \"#/$defs/ScenarioMultiplayer\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Multiplayer support\"\n             \
        \   },\n                \"content\": {\n                    \"$ref\": \"#/$defs/ScenarioContent\",\n             \
        \       \"nullable\": true,\n                    \"description\": \"Content references\"\n                },\n   \
        \             \"status\": {\n                    \"$ref\": \"#/$defs/TemplateStatus\",\n                    \"description\"\
        : \"Current lifecycle status\"\n                },\n                \"createdAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When this template
        was created\"\n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"date-time\",\n                    \"description\": \"When this template was last
        updated\"\n                }\n            }\n        },\n        \"ScenarioCategory\": {\n            \"type\": \"\
        string\",\n            \"enum\": [\n                \"Combat\",\n                \"Crafting\",\n                \"\
        Social\",\n                \"Trade\",\n                \"Exploration\",\n                \"Magic\",\n            \
        \    \"Survival\",\n                \"Mixed\",\n                \"Narrative\",\n                \"Tutorial\"\n   \
        \         ],\n            \"description\": \"Primary gameplay category for a scenario template\"\n        },\n   \
        \     \"DomainWeight\": {\n            \"type\": \"object\",\n            \"description\": \"Domain name and weight
        pair for scenario template growth weighting\",\n            \"required\": [\n                \"domain\",\n       \
        \         \"weight\"\n            ],\n            \"properties\": {\n                \"domain\": {\n             \
        \       \"type\": \"string\",\n                    \"description\": \"Growth domain path (e.g. combat.melee, exploration.caves)\"\
        \n                },\n                \"weight\": {\n                    \"type\": \"number\",\n                 \
        \   \"format\": \"float\",\n                    \"description\": \"Weight applied to this domain on scenario completion\"\
        \n                }\n            }\n        },\n        \"ConnectivityMode\": {\n            \"type\": \"string\"\
        ,\n            \"enum\": [\n                \"Isolated\",\n                \"WorldSlice\",\n                \"Persistent\"\
        \n            ],\n            \"description\": \"How a scenario instance connects to the broader game world\"\n  \
        \      },\n        \"DeploymentPhase\": {\n            \"type\": \"string\",\n            \"enum\": [\n          \
        \      \"Alpha\",\n                \"Beta\",\n                \"Release\"\n            ],\n            \"description\"\
        : \"Current deployment phase for scenario availability gating\"\n        },\n        \"ScenarioPrerequisites\": {\n\
        \            \"type\": \"object\",\n            \"description\": \"Prerequisite requirements for entering a scenario\"\
        ,\n            \"properties\": {\n                \"requiredDomains\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": {\n                        \"type\": \"number\",\n              \
        \          \"format\": \"float\"\n                    },\n                    \"nullable\": true,\n              \
        \      \"description\": \"Minimum growth depth per domain (domain path to minimum depth)\"\n                },\n \
        \               \"requiredScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that must be completed first\"\n                },\n\
        \                \"excludedScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that disqualify the player\"\n                }\n\
        \            }\n        },\n        \"ScenarioChaining\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Chaining configuration for linking scenarios together\",\n            \"properties\": {\n                \"leadsTo\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\"\
        : \"string\"\n                    },\n                    \"nullable\": true,\n                    \"description\"\
        : \"Template codes this scenario can chain into\"\n                },\n                \"chainProbabilities\": {\n\
        \                    \"type\": \"object\",\n                    \"additionalProperties\": {\n                    \
        \    \"type\": \"number\",\n                        \"format\": \"float\"\n                    },\n              \
        \      \"nullable\": true,\n                    \"description\": \"Per-code probability weights for chain selection\"\
        \n                },\n                \"maxChainDepth\": {\n                    \"type\": \"integer\",\n         \
        \           \"default\": 3,\n                    \"description\": \"Maximum chain depth allowed from the initial scenario\"\
        \n                }\n            }\n        },\n        \"ScenarioMultiplayer\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Multiplayer configuration for group scenarios\",\n            \"required\": [\n\
        \                \"minPlayers\",\n                \"maxPlayers\"\n            ],\n            \"properties\": {\n\
        \                \"minPlayers\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Minimum number of players required\"\n                },\n                \"maxPlayers\": {\n                \
        \    \"type\": \"integer\",\n                    \"description\": \"Maximum number of players allowed\"\n        \
        \        },\n                \"matchmakingQueueCode\": {\n                    \"type\": \"string\",\n            \
        \        \"nullable\": true,\n                    \"description\": \"Matchmaking queue code for automatic grouping\"\
        \n                },\n                \"bondPreferred\": {\n                    \"type\": \"boolean\",\n         \
        \           \"default\": false,\n                    \"description\": \"Whether bonded players receive a scoring boost
        for this scenario\"\n                }\n            }\n        },\n        \"ScenarioContent\": {\n            \"\
        type\": \"object\",\n            \"description\": \"Content references linking a scenario template to game assets\"\
        ,\n            \"properties\": {\n                \"behaviorDocumentId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"ABML behavior document ID for NPC orchestration\"\n                },\n                \"sceneDocumentId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Scene document ID for environment composition\"\n                },\n\
        \                \"realmId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Realm ID where this scenario takes
        place\"\n                },\n                \"locationCode\": {\n                    \"type\": \"string\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Location code within the realm\"\n  \
        \              }\n            }\n        },\n        \"TemplateStatus\": {\n            \"type\": \"string\",\n  \
        \          \"enum\": [\n                \"Draft\",\n                \"Active\",\n                \"Deprecated\"\n\
        \            ],\n            \"description\": \"Current lifecycle status of a scenario template\"\n        }\n   \
        \ }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Update scenario template\",\n    \"description\": \"Updates non-null fields
        of an existing template.\",\n    \"tags\": [\n        \"Template Management\"\n    ],\n    \"deprecated\": false,\n\
        \    \"operationId\": \"updateTemplate\"\n}"
  /gardener/template/deprecate:
    post:
      summary: Deprecate scenario template
      description: Sets the template status to Deprecated, preventing new instances.
      operationId: deprecateTemplate
      tags:
      - Template Management
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeprecateTemplateRequest'
      responses:
        '200':
          description: Template deprecated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScenarioTemplateResponse'
        '404':
          description: Template not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeprecateTemplateRequest\"\
        ,\n    \"$defs\": {\n        \"DeprecateTemplateRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to deprecate a template\",\n            \"required\": [\n                \"scenarioTemplateId\"\n    \
        \        ],\n            \"properties\": {\n                \"scenarioTemplateId\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Template ID to deprecate\"\
        \n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ScenarioTemplateResponse\"\
        ,\n    \"$defs\": {\n        \"ScenarioTemplateResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Full scenario template with all fields\",\n            \"required\": [\n                \"scenarioTemplateId\"\
        ,\n                \"code\",\n                \"displayName\",\n                \"description\",\n               \
        \ \"category\",\n                \"domainWeights\",\n                \"connectivityMode\",\n                \"allowedPhases\"\
        ,\n                \"maxConcurrentInstances\",\n                \"status\",\n                \"createdAt\",\n    \
        \            \"updatedAt\"\n            ],\n            \"properties\": {\n                \"scenarioTemplateId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Unique identifier for this template\"\n                },\n                \"code\": {\n        \
        \            \"type\": \"string\",\n                    \"description\": \"Unique template code\"\n              \
        \  },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Human-readable name\"\n                },\n                \"description\": {\n                    \"type\": \"\
        string\",\n                    \"description\": \"Template description\"\n                },\n                \"category\"\
        : {\n                    \"$ref\": \"#/$defs/ScenarioCategory\",\n                    \"description\": \"Primary gameplay
        category\"\n                },\n                \"subcategory\": {\n                    \"type\": \"string\",\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Subcategory within the primary category\"\
        \n                },\n                \"domainWeights\": {\n                    \"type\": \"array\",\n           \
        \         \"items\": {\n                        \"$ref\": \"#/$defs/DomainWeight\"\n                    },\n     \
        \               \"description\": \"Growth domain weights\"\n                },\n                \"minGrowthPhase\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Minimum seed growth phase\"\n                },\n                \"connectivityMode\": {\n                   \
        \ \"$ref\": \"#/$defs/ConnectivityMode\",\n                    \"description\": \"World connectivity mode\"\n    \
        \            },\n                \"allowedPhases\": {\n                    \"type\": \"array\",\n                \
        \    \"items\": {\n                        \"$ref\": \"#/$defs/DeploymentPhase\"\n                    },\n       \
        \             \"description\": \"Deployment phases where this template is available. Always contains explicit values
        (never empty).\"\n                },\n                \"maxConcurrentInstances\": {\n                    \"type\"\
        : \"integer\",\n                    \"description\": \"Maximum concurrent active instances\"\n                },\n\
        \                \"estimatedDurationMinutes\": {\n                    \"type\": \"integer\",\n                   \
        \ \"nullable\": true,\n                    \"description\": \"Estimated scenario duration in minutes\"\n         \
        \       },\n                \"prerequisites\": {\n                    \"$ref\": \"#/$defs/ScenarioPrerequisites\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Entry requirements\"\n        \
        \        },\n                \"chaining\": {\n                    \"$ref\": \"#/$defs/ScenarioChaining\",\n      \
        \              \"nullable\": true,\n                    \"description\": \"Chaining configuration\"\n            \
        \    },\n                \"multiplayer\": {\n                    \"$ref\": \"#/$defs/ScenarioMultiplayer\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Multiplayer support\"\n             \
        \   },\n                \"content\": {\n                    \"$ref\": \"#/$defs/ScenarioContent\",\n             \
        \       \"nullable\": true,\n                    \"description\": \"Content references\"\n                },\n   \
        \             \"status\": {\n                    \"$ref\": \"#/$defs/TemplateStatus\",\n                    \"description\"\
        : \"Current lifecycle status\"\n                },\n                \"createdAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When this template
        was created\"\n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"date-time\",\n                    \"description\": \"When this template was last
        updated\"\n                }\n            }\n        },\n        \"ScenarioCategory\": {\n            \"type\": \"\
        string\",\n            \"enum\": [\n                \"Combat\",\n                \"Crafting\",\n                \"\
        Social\",\n                \"Trade\",\n                \"Exploration\",\n                \"Magic\",\n            \
        \    \"Survival\",\n                \"Mixed\",\n                \"Narrative\",\n                \"Tutorial\"\n   \
        \         ],\n            \"description\": \"Primary gameplay category for a scenario template\"\n        },\n   \
        \     \"DomainWeight\": {\n            \"type\": \"object\",\n            \"description\": \"Domain name and weight
        pair for scenario template growth weighting\",\n            \"required\": [\n                \"domain\",\n       \
        \         \"weight\"\n            ],\n            \"properties\": {\n                \"domain\": {\n             \
        \       \"type\": \"string\",\n                    \"description\": \"Growth domain path (e.g. combat.melee, exploration.caves)\"\
        \n                },\n                \"weight\": {\n                    \"type\": \"number\",\n                 \
        \   \"format\": \"float\",\n                    \"description\": \"Weight applied to this domain on scenario completion\"\
        \n                }\n            }\n        },\n        \"ConnectivityMode\": {\n            \"type\": \"string\"\
        ,\n            \"enum\": [\n                \"Isolated\",\n                \"WorldSlice\",\n                \"Persistent\"\
        \n            ],\n            \"description\": \"How a scenario instance connects to the broader game world\"\n  \
        \      },\n        \"DeploymentPhase\": {\n            \"type\": \"string\",\n            \"enum\": [\n          \
        \      \"Alpha\",\n                \"Beta\",\n                \"Release\"\n            ],\n            \"description\"\
        : \"Current deployment phase for scenario availability gating\"\n        },\n        \"ScenarioPrerequisites\": {\n\
        \            \"type\": \"object\",\n            \"description\": \"Prerequisite requirements for entering a scenario\"\
        ,\n            \"properties\": {\n                \"requiredDomains\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": {\n                        \"type\": \"number\",\n              \
        \          \"format\": \"float\"\n                    },\n                    \"nullable\": true,\n              \
        \      \"description\": \"Minimum growth depth per domain (domain path to minimum depth)\"\n                },\n \
        \               \"requiredScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that must be completed first\"\n                },\n\
        \                \"excludedScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that disqualify the player\"\n                }\n\
        \            }\n        },\n        \"ScenarioChaining\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Chaining configuration for linking scenarios together\",\n            \"properties\": {\n                \"leadsTo\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\"\
        : \"string\"\n                    },\n                    \"nullable\": true,\n                    \"description\"\
        : \"Template codes this scenario can chain into\"\n                },\n                \"chainProbabilities\": {\n\
        \                    \"type\": \"object\",\n                    \"additionalProperties\": {\n                    \
        \    \"type\": \"number\",\n                        \"format\": \"float\"\n                    },\n              \
        \      \"nullable\": true,\n                    \"description\": \"Per-code probability weights for chain selection\"\
        \n                },\n                \"maxChainDepth\": {\n                    \"type\": \"integer\",\n         \
        \           \"default\": 3,\n                    \"description\": \"Maximum chain depth allowed from the initial scenario\"\
        \n                }\n            }\n        },\n        \"ScenarioMultiplayer\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Multiplayer configuration for group scenarios\",\n            \"required\": [\n\
        \                \"minPlayers\",\n                \"maxPlayers\"\n            ],\n            \"properties\": {\n\
        \                \"minPlayers\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Minimum number of players required\"\n                },\n                \"maxPlayers\": {\n                \
        \    \"type\": \"integer\",\n                    \"description\": \"Maximum number of players allowed\"\n        \
        \        },\n                \"matchmakingQueueCode\": {\n                    \"type\": \"string\",\n            \
        \        \"nullable\": true,\n                    \"description\": \"Matchmaking queue code for automatic grouping\"\
        \n                },\n                \"bondPreferred\": {\n                    \"type\": \"boolean\",\n         \
        \           \"default\": false,\n                    \"description\": \"Whether bonded players receive a scoring boost
        for this scenario\"\n                }\n            }\n        },\n        \"ScenarioContent\": {\n            \"\
        type\": \"object\",\n            \"description\": \"Content references linking a scenario template to game assets\"\
        ,\n            \"properties\": {\n                \"behaviorDocumentId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"ABML behavior document ID for NPC orchestration\"\n                },\n                \"sceneDocumentId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Scene document ID for environment composition\"\n                },\n\
        \                \"realmId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Realm ID where this scenario takes
        place\"\n                },\n                \"locationCode\": {\n                    \"type\": \"string\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Location code within the realm\"\n  \
        \              }\n            }\n        },\n        \"TemplateStatus\": {\n            \"type\": \"string\",\n  \
        \          \"enum\": [\n                \"Draft\",\n                \"Active\",\n                \"Deprecated\"\n\
        \            ],\n            \"description\": \"Current lifecycle status of a scenario template\"\n        }\n   \
        \ }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Deprecate scenario template\",\n    \"description\": \"Sets the template
        status to Deprecated, preventing new instances.\",\n    \"tags\": [\n        \"Template Management\"\n    ],\n   \
        \ \"deprecated\": false,\n    \"operationId\": \"deprecateTemplate\"\n}"
  /gardener/template/delete:
    post:
      summary: Delete scenario template
      description: >-
        Permanently deletes a scenario template. Template must be in Deprecated
        status before deletion. Publishes a scenario-template.deleted lifecycle event.
      operationId: deleteTemplate
      tags:
      - Template Management
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteTemplateRequest'
      responses:
        '200':
          description: Template deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScenarioTemplateResponse'
        '404':
          description: Template not found
        '409':
          description: Template is not in Deprecated status
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeleteTemplateRequest\"\
        ,\n    \"$defs\": {\n        \"DeleteTemplateRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to permanently delete a deprecated template\",\n            \"required\": [\n                \"scenarioTemplateId\"\
        \n            ],\n            \"properties\": {\n                \"scenarioTemplateId\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Template ID
        to delete\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ScenarioTemplateResponse\"\
        ,\n    \"$defs\": {\n        \"ScenarioTemplateResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Full scenario template with all fields\",\n            \"required\": [\n                \"scenarioTemplateId\"\
        ,\n                \"code\",\n                \"displayName\",\n                \"description\",\n               \
        \ \"category\",\n                \"domainWeights\",\n                \"connectivityMode\",\n                \"allowedPhases\"\
        ,\n                \"maxConcurrentInstances\",\n                \"status\",\n                \"createdAt\",\n    \
        \            \"updatedAt\"\n            ],\n            \"properties\": {\n                \"scenarioTemplateId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Unique identifier for this template\"\n                },\n                \"code\": {\n        \
        \            \"type\": \"string\",\n                    \"description\": \"Unique template code\"\n              \
        \  },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Human-readable name\"\n                },\n                \"description\": {\n                    \"type\": \"\
        string\",\n                    \"description\": \"Template description\"\n                },\n                \"category\"\
        : {\n                    \"$ref\": \"#/$defs/ScenarioCategory\",\n                    \"description\": \"Primary gameplay
        category\"\n                },\n                \"subcategory\": {\n                    \"type\": \"string\",\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Subcategory within the primary category\"\
        \n                },\n                \"domainWeights\": {\n                    \"type\": \"array\",\n           \
        \         \"items\": {\n                        \"$ref\": \"#/$defs/DomainWeight\"\n                    },\n     \
        \               \"description\": \"Growth domain weights\"\n                },\n                \"minGrowthPhase\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Minimum seed growth phase\"\n                },\n                \"connectivityMode\": {\n                   \
        \ \"$ref\": \"#/$defs/ConnectivityMode\",\n                    \"description\": \"World connectivity mode\"\n    \
        \            },\n                \"allowedPhases\": {\n                    \"type\": \"array\",\n                \
        \    \"items\": {\n                        \"$ref\": \"#/$defs/DeploymentPhase\"\n                    },\n       \
        \             \"description\": \"Deployment phases where this template is available. Always contains explicit values
        (never empty).\"\n                },\n                \"maxConcurrentInstances\": {\n                    \"type\"\
        : \"integer\",\n                    \"description\": \"Maximum concurrent active instances\"\n                },\n\
        \                \"estimatedDurationMinutes\": {\n                    \"type\": \"integer\",\n                   \
        \ \"nullable\": true,\n                    \"description\": \"Estimated scenario duration in minutes\"\n         \
        \       },\n                \"prerequisites\": {\n                    \"$ref\": \"#/$defs/ScenarioPrerequisites\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Entry requirements\"\n        \
        \        },\n                \"chaining\": {\n                    \"$ref\": \"#/$defs/ScenarioChaining\",\n      \
        \              \"nullable\": true,\n                    \"description\": \"Chaining configuration\"\n            \
        \    },\n                \"multiplayer\": {\n                    \"$ref\": \"#/$defs/ScenarioMultiplayer\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Multiplayer support\"\n             \
        \   },\n                \"content\": {\n                    \"$ref\": \"#/$defs/ScenarioContent\",\n             \
        \       \"nullable\": true,\n                    \"description\": \"Content references\"\n                },\n   \
        \             \"status\": {\n                    \"$ref\": \"#/$defs/TemplateStatus\",\n                    \"description\"\
        : \"Current lifecycle status\"\n                },\n                \"createdAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When this template
        was created\"\n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"date-time\",\n                    \"description\": \"When this template was last
        updated\"\n                }\n            }\n        },\n        \"ScenarioCategory\": {\n            \"type\": \"\
        string\",\n            \"enum\": [\n                \"Combat\",\n                \"Crafting\",\n                \"\
        Social\",\n                \"Trade\",\n                \"Exploration\",\n                \"Magic\",\n            \
        \    \"Survival\",\n                \"Mixed\",\n                \"Narrative\",\n                \"Tutorial\"\n   \
        \         ],\n            \"description\": \"Primary gameplay category for a scenario template\"\n        },\n   \
        \     \"DomainWeight\": {\n            \"type\": \"object\",\n            \"description\": \"Domain name and weight
        pair for scenario template growth weighting\",\n            \"required\": [\n                \"domain\",\n       \
        \         \"weight\"\n            ],\n            \"properties\": {\n                \"domain\": {\n             \
        \       \"type\": \"string\",\n                    \"description\": \"Growth domain path (e.g. combat.melee, exploration.caves)\"\
        \n                },\n                \"weight\": {\n                    \"type\": \"number\",\n                 \
        \   \"format\": \"float\",\n                    \"description\": \"Weight applied to this domain on scenario completion\"\
        \n                }\n            }\n        },\n        \"ConnectivityMode\": {\n            \"type\": \"string\"\
        ,\n            \"enum\": [\n                \"Isolated\",\n                \"WorldSlice\",\n                \"Persistent\"\
        \n            ],\n            \"description\": \"How a scenario instance connects to the broader game world\"\n  \
        \      },\n        \"DeploymentPhase\": {\n            \"type\": \"string\",\n            \"enum\": [\n          \
        \      \"Alpha\",\n                \"Beta\",\n                \"Release\"\n            ],\n            \"description\"\
        : \"Current deployment phase for scenario availability gating\"\n        },\n        \"ScenarioPrerequisites\": {\n\
        \            \"type\": \"object\",\n            \"description\": \"Prerequisite requirements for entering a scenario\"\
        ,\n            \"properties\": {\n                \"requiredDomains\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": {\n                        \"type\": \"number\",\n              \
        \          \"format\": \"float\"\n                    },\n                    \"nullable\": true,\n              \
        \      \"description\": \"Minimum growth depth per domain (domain path to minimum depth)\"\n                },\n \
        \               \"requiredScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that must be completed first\"\n                },\n\
        \                \"excludedScenarios\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scenario template codes that disqualify the player\"\n                }\n\
        \            }\n        },\n        \"ScenarioChaining\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Chaining configuration for linking scenarios together\",\n            \"properties\": {\n                \"leadsTo\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\"\
        : \"string\"\n                    },\n                    \"nullable\": true,\n                    \"description\"\
        : \"Template codes this scenario can chain into\"\n                },\n                \"chainProbabilities\": {\n\
        \                    \"type\": \"object\",\n                    \"additionalProperties\": {\n                    \
        \    \"type\": \"number\",\n                        \"format\": \"float\"\n                    },\n              \
        \      \"nullable\": true,\n                    \"description\": \"Per-code probability weights for chain selection\"\
        \n                },\n                \"maxChainDepth\": {\n                    \"type\": \"integer\",\n         \
        \           \"default\": 3,\n                    \"description\": \"Maximum chain depth allowed from the initial scenario\"\
        \n                }\n            }\n        },\n        \"ScenarioMultiplayer\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Multiplayer configuration for group scenarios\",\n            \"required\": [\n\
        \                \"minPlayers\",\n                \"maxPlayers\"\n            ],\n            \"properties\": {\n\
        \                \"minPlayers\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Minimum number of players required\"\n                },\n                \"maxPlayers\": {\n                \
        \    \"type\": \"integer\",\n                    \"description\": \"Maximum number of players allowed\"\n        \
        \        },\n                \"matchmakingQueueCode\": {\n                    \"type\": \"string\",\n            \
        \        \"nullable\": true,\n                    \"description\": \"Matchmaking queue code for automatic grouping\"\
        \n                },\n                \"bondPreferred\": {\n                    \"type\": \"boolean\",\n         \
        \           \"default\": false,\n                    \"description\": \"Whether bonded players receive a scoring boost
        for this scenario\"\n                }\n            }\n        },\n        \"ScenarioContent\": {\n            \"\
        type\": \"object\",\n            \"description\": \"Content references linking a scenario template to game assets\"\
        ,\n            \"properties\": {\n                \"behaviorDocumentId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"ABML behavior document ID for NPC orchestration\"\n                },\n                \"sceneDocumentId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Scene document ID for environment composition\"\n                },\n\
        \                \"realmId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Realm ID where this scenario takes
        place\"\n                },\n                \"locationCode\": {\n                    \"type\": \"string\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Location code within the realm\"\n  \
        \              }\n            }\n        },\n        \"TemplateStatus\": {\n            \"type\": \"string\",\n  \
        \          \"enum\": [\n                \"Draft\",\n                \"Active\",\n                \"Deprecated\"\n\
        \            ],\n            \"description\": \"Current lifecycle status of a scenario template\"\n        }\n   \
        \ }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Delete scenario template\",\n    \"description\": \"Permanently deletes
        a scenario template. Template must be in Deprecated status before deletion. Publishes a scenario-template.deleted
        lifecycle event.\",\n    \"tags\": [\n        \"Template Management\"\n    ],\n    \"deprecated\": false,\n    \"\
        operationId\": \"deleteTemplate\"\n}"
  /gardener/phase/get:
    post:
      summary: Get deployment phase configuration
      description: Returns the current deployment phase configuration. Creates defaults if none exists.
      operationId: getPhaseConfig
      tags:
      - Deployment Phase
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetPhaseConfigRequest'
      responses:
        '200':
          description: Phase config retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PhaseConfigResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetPhaseConfigRequest\"\
        ,\n    \"$defs\": {\n        \"GetPhaseConfigRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to get deployment phase configuration\",\n            \"properties\": {}\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/PhaseConfigResponse\"\
        ,\n    \"$defs\": {\n        \"PhaseConfigResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Current deployment phase configuration\",\n            \"required\": [\n                \"currentPhase\",\n  \
        \              \"maxConcurrentScenariosGlobal\",\n                \"persistentEntryEnabled\",\n                \"\
        gardenMinigamesEnabled\"\n            ],\n            \"properties\": {\n                \"currentPhase\": {\n   \
        \                 \"$ref\": \"#/$defs/DeploymentPhase\",\n                    \"description\": \"Current deployment
        phase\"\n                },\n                \"maxConcurrentScenariosGlobal\": {\n                    \"type\": \"\
        integer\",\n                    \"description\": \"Maximum total active scenario instances\"\n                },\n\
        \                \"persistentEntryEnabled\": {\n                    \"type\": \"boolean\",\n                    \"\
        description\": \"Whether persistent world entry is enabled\"\n                },\n                \"gardenMinigamesEnabled\"\
        : {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether garden minigames are
        enabled\"\n                }\n            }\n        },\n        \"DeploymentPhase\": {\n            \"type\": \"\
        string\",\n            \"enum\": [\n                \"Alpha\",\n                \"Beta\",\n                \"Release\"\
        \n            ],\n            \"description\": \"Current deployment phase for scenario availability gating\"\n   \
        \     }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get deployment phase configuration\",\n    \"description\": \"Returns the
        current deployment phase configuration. Creates defaults if none exists.\",\n    \"tags\": [\n        \"Deployment
        Phase\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"getPhaseConfig\"\n}"
  /gardener/phase/update:
    post:
      summary: Update deployment phase configuration
      description: Updates non-null fields of the phase configuration. Publishes phase-changed event if phase changes.
      operationId: updatePhaseConfig
      tags:
      - Deployment Phase
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePhaseConfigRequest'
      responses:
        '200':
          description: Phase config updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PhaseConfigResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/UpdatePhaseConfigRequest\"\
        ,\n    \"$defs\": {\n        \"UpdatePhaseConfigRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to update deployment phase configuration (non-null fields applied)\",\n            \"properties\": {\n\
        \                \"currentPhase\": {\n                    \"$ref\": \"#/$defs/DeploymentPhase\",\n               \
        \     \"nullable\": true,\n                    \"description\": \"New deployment phase\"\n                },\n   \
        \             \"maxConcurrentScenariosGlobal\": {\n                    \"type\": \"integer\",\n                  \
        \  \"nullable\": true,\n                    \"description\": \"Updated global scenario capacity\"\n              \
        \  },\n                \"persistentEntryEnabled\": {\n                    \"type\": \"boolean\",\n               \
        \     \"nullable\": true,\n                    \"description\": \"Whether persistent world entry is enabled\"\n  \
        \              },\n                \"gardenMinigamesEnabled\": {\n                    \"type\": \"boolean\",\n   \
        \                 \"nullable\": true,\n                    \"description\": \"Whether garden minigames are enabled\"\
        \n                }\n            }\n        },\n        \"DeploymentPhase\": {\n            \"type\": \"string\",\n\
        \            \"enum\": [\n                \"Alpha\",\n                \"Beta\",\n                \"Release\"\n   \
        \         ],\n            \"description\": \"Current deployment phase for scenario availability gating\"\n       \
        \ }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/PhaseConfigResponse\"\
        ,\n    \"$defs\": {\n        \"PhaseConfigResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Current deployment phase configuration\",\n            \"required\": [\n                \"currentPhase\",\n  \
        \              \"maxConcurrentScenariosGlobal\",\n                \"persistentEntryEnabled\",\n                \"\
        gardenMinigamesEnabled\"\n            ],\n            \"properties\": {\n                \"currentPhase\": {\n   \
        \                 \"$ref\": \"#/$defs/DeploymentPhase\",\n                    \"description\": \"Current deployment
        phase\"\n                },\n                \"maxConcurrentScenariosGlobal\": {\n                    \"type\": \"\
        integer\",\n                    \"description\": \"Maximum total active scenario instances\"\n                },\n\
        \                \"persistentEntryEnabled\": {\n                    \"type\": \"boolean\",\n                    \"\
        description\": \"Whether persistent world entry is enabled\"\n                },\n                \"gardenMinigamesEnabled\"\
        : {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether garden minigames are
        enabled\"\n                }\n            }\n        },\n        \"DeploymentPhase\": {\n            \"type\": \"\
        string\",\n            \"enum\": [\n                \"Alpha\",\n                \"Beta\",\n                \"Release\"\
        \n            ],\n            \"description\": \"Current deployment phase for scenario availability gating\"\n   \
        \     }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Update deployment phase configuration\",\n    \"description\": \"Updates
        non-null fields of the phase configuration. Publishes phase-changed event if phase changes.\",\n    \"tags\": [\n\
        \        \"Deployment Phase\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"updatePhaseConfig\"\n}"
  /gardener/phase/get-metrics:
    post:
      summary: Get deployment phase metrics
      description: Returns current counts of active garden instances, scenario instances, and capacity utilization.
      operationId: getPhaseMetrics
      tags:
      - Deployment Phase
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetPhaseMetricsRequest'
      responses:
        '200':
          description: Phase metrics retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PhaseMetricsResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetPhaseMetricsRequest\"\
        ,\n    \"$defs\": {\n        \"GetPhaseMetricsRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to get phase metrics\",\n            \"properties\": {}\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/PhaseMetricsResponse\"\
        ,\n    \"$defs\": {\n        \"PhaseMetricsResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Current deployment phase metrics\",\n            \"required\": [\n                \"currentPhase\",\n        \
        \        \"activeGardenInstances\",\n                \"activeScenarioInstances\",\n                \"scenarioCapacityUtilization\"\
        \n            ],\n            \"properties\": {\n                \"currentPhase\": {\n                    \"$ref\"\
        : \"#/$defs/DeploymentPhase\",\n                    \"description\": \"Current deployment phase\"\n              \
        \  },\n                \"activeGardenInstances\": {\n                    \"type\": \"integer\",\n                \
        \    \"description\": \"Number of currently active garden instances\"\n                },\n                \"activeScenarioInstances\"\
        : {\n                    \"type\": \"integer\",\n                    \"description\": \"Number of currently active
        scenario instances\"\n                },\n                \"scenarioCapacityUtilization\": {\n                   \
        \ \"type\": \"number\",\n                    \"format\": \"float\",\n                    \"description\": \"Ratio
        of active scenarios to global capacity (0.0-1.0)\"\n                }\n            }\n        },\n        \"DeploymentPhase\"\
        : {\n            \"type\": \"string\",\n            \"enum\": [\n                \"Alpha\",\n                \"Beta\"\
        ,\n                \"Release\"\n            ],\n            \"description\": \"Current deployment phase for scenario
        availability gating\"\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get deployment phase metrics\",\n    \"description\": \"Returns current
        counts of active garden instances, scenario instances, and capacity utilization.\",\n    \"tags\": [\n        \"Deployment
        Phase\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"getPhaseMetrics\"\n}"
  /gardener/bond/enter-together:
    post:
      summary: Enter a scenario together with a bonded player
      description: |
        Both bonded players enter a shared scenario instance. Validates bond state,
        both participants' garden instances, and template multiplayer support.
      operationId: enterScenarioTogether
      tags:
      - Bond Scenarios
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnterTogetherRequest'
      responses:
        '200':
          description: Both players entered shared scenario
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScenarioStateResponse'
        '400':
          description: One or both participants not in garden, or template does not support multiplayer
        '404':
          description: Bond not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/EnterTogetherRequest\"\
        ,\n    \"$defs\": {\n        \"EnterTogetherRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request for bonded players to enter a scenario together\",\n            \"required\": [\n                \"bondId\"\
        ,\n                \"scenarioTemplateId\"\n            ],\n            \"properties\": {\n                \"bondId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Bond ID linking the participants\"\n                },\n                \"scenarioTemplateId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Template to instantiate for the bond\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ScenarioStateResponse\"\
        ,\n    \"$defs\": {\n        \"ScenarioStateResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Current state of a scenario instance\",\n            \"required\": [\n                \"scenarioInstanceId\",\n\
        \                \"scenarioTemplateId\",\n                \"gameSessionId\",\n                \"connectivityMode\"\
        ,\n                \"status\",\n                \"createdAt\",\n                \"chainDepth\"\n            ],\n \
        \           \"properties\": {\n                \"scenarioInstanceId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Unique identifier for this scenario
        instance\"\n                },\n                \"scenarioTemplateId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Template this instance was created
        from\"\n                },\n                \"gameSessionId\": {\n                    \"type\": \"string\",\n    \
        \                \"format\": \"uuid\",\n                    \"description\": \"Backing game session ID\"\n       \
        \         },\n                \"connectivityMode\": {\n                    \"$ref\": \"#/$defs/ConnectivityMode\"\
        ,\n                    \"description\": \"How this scenario connects to the game world\"\n                },\n   \
        \             \"status\": {\n                    \"$ref\": \"#/$defs/ScenarioStatus\",\n                    \"description\"\
        : \"Current lifecycle status\"\n                },\n                \"createdAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When this instance
        was created\"\n                },\n                \"chainedFrom\": {\n                    \"type\": \"string\",\n\
        \                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Previous scenario instance if this was chained\"\n                },\n                \"chainDepth\": {\n    \
        \                \"type\": \"integer\",\n                    \"default\": 0,\n                    \"description\"\
        : \"Current chain depth from the initial scenario\"\n                }\n            }\n        },\n        \"ConnectivityMode\"\
        : {\n            \"type\": \"string\",\n            \"enum\": [\n                \"Isolated\",\n                \"\
        WorldSlice\",\n                \"Persistent\"\n            ],\n            \"description\": \"How a scenario instance
        connects to the broader game world\"\n        },\n        \"ScenarioStatus\": {\n            \"type\": \"string\"\
        ,\n            \"enum\": [\n                \"Initializing\",\n                \"Active\",\n                \"Completing\"\
        ,\n                \"Completed\",\n                \"Abandoned\"\n            ],\n            \"description\": \"\
        Current lifecycle status of a scenario instance\"\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Enter a scenario together with a bonded player\",\n    \"description\"\
        : \"Both bonded players enter a shared scenario instance. Validates bond state,\\nboth participants' garden instances,
        and template multiplayer support.\\n\",\n    \"tags\": [\n        \"Bond Scenarios\"\n    ],\n    \"deprecated\":
        false,\n    \"operationId\": \"enterScenarioTogether\"\n}"
  /gardener/bond/get-shared-garden:
    post:
      summary: Get shared garden state for bonded players
      description: Returns the merged garden state for both bond participants including shared POIs.
      operationId: getSharedGardenState
      tags:
      - Bond Scenarios
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetSharedGardenRequest'
      responses:
        '200':
          description: Shared garden state retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SharedGardenStateResponse'
        '404':
          description: Bond not found or participants not in garden
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetSharedGardenRequest\"\
        ,\n    \"$defs\": {\n        \"GetSharedGardenRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to get shared garden state for bonded players\",\n            \"required\": [\n                \"bondId\"\
        \n            ],\n            \"properties\": {\n                \"bondId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Bond ID to look up shared garden
        state\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SharedGardenStateResponse\"\
        ,\n    \"$defs\": {\n        \"SharedGardenStateResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Shared garden state for bonded players\",\n            \"required\": [\n                \"bondId\",\n        \
        \        \"participants\",\n                \"sharedPois\"\n            ],\n            \"properties\": {\n      \
        \          \"bondId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n \
        \                   \"description\": \"Bond linking the participants\"\n                },\n                \"participants\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"$ref\"\
        : \"#/$defs/BondedPlayerGardenState\"\n                    },\n                    \"description\": \"Per-player garden
        state\"\n                },\n                \"sharedPois\": {\n                    \"type\": \"array\",\n       \
        \             \"items\": {\n                        \"$ref\": \"#/$defs/PoiSummary\"\n                    },\n   \
        \                 \"description\": \"POIs visible to all bond participants\"\n                }\n            }\n \
        \       },\n        \"BondedPlayerGardenState\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Per-player garden state within a shared bond garden\",\n            \"required\": [\n                \"seedId\"\
        ,\n                \"accountId\",\n                \"position\"\n            ],\n            \"properties\": {\n \
        \               \"seedId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"Seed ID of the bonded player\"\n                },\n                \"accountId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Account ID of the bonded player\"\n                },\n                \"position\": {\n        \
        \            \"$ref\": \"#/$defs/Vec3\",\n                    \"description\": \"Player position in shared garden
        space\"\n                }\n            }\n        },\n        \"Vec3\": {\n            \"type\": \"object\",\n  \
        \          \"description\": \"Three-dimensional spatial coordinates in garden space\",\n            \"required\":
        [\n                \"x\",\n                \"y\",\n                \"z\"\n            ],\n            \"properties\"\
        : {\n                \"x\": {\n                    \"type\": \"number\",\n                    \"format\": \"float\"\
        ,\n                    \"description\": \"X coordinate in garden space units\"\n                },\n             \
        \   \"y\": {\n                    \"type\": \"number\",\n                    \"format\": \"float\",\n            \
        \        \"description\": \"Y coordinate in garden space units\"\n                },\n                \"z\": {\n \
        \                   \"type\": \"number\",\n                    \"format\": \"float\",\n                    \"description\"\
        : \"Z coordinate in garden space units\"\n                }\n            }\n        },\n        \"PoiSummary\": {\n\
        \            \"type\": \"object\",\n            \"description\": \"POI state summary for client display\",\n     \
        \       \"required\": [\n                \"poiId\",\n                \"position\",\n                \"poiType\",\n\
        \                \"triggerMode\",\n                \"triggerRadius\",\n                \"status\"\n            ],\n\
        \            \"properties\": {\n                \"poiId\": {\n                    \"type\": \"string\",\n        \
        \            \"format\": \"uuid\",\n                    \"description\": \"Unique identifier for this POI\"\n    \
        \            },\n                \"position\": {\n                    \"$ref\": \"#/$defs/Vec3\",\n              \
        \      \"description\": \"POI position in garden space\"\n                },\n                \"poiType\": {\n   \
        \                 \"$ref\": \"#/$defs/PoiType\",\n                    \"description\": \"Sensory presentation type\"\
        \n                },\n                \"visualHint\": {\n                    \"$ref\": \"#/$defs/ScenarioCategory\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Scenario category hint for client
        rendering\"\n                },\n                \"audioHint\": {\n                    \"type\": \"string\",\n   \
        \                 \"nullable\": true,\n                    \"description\": \"Audio hint identifier for client rendering\"\
        \n                },\n                \"intensityRamp\": {\n                    \"type\": \"number\",\n          \
        \          \"format\": \"float\",\n                    \"description\": \"Current intensity ramp value (0.0-1.0)\"\
        ,\n                    \"default\": 0.0\n                },\n                \"triggerMode\": {\n                \
        \    \"$ref\": \"#/$defs/TriggerMode\",\n                    \"description\": \"How this POI is triggered\"\n    \
        \            },\n                \"triggerRadius\": {\n                    \"type\": \"number\",\n               \
        \     \"format\": \"float\",\n                    \"description\": \"Trigger radius in garden space units\"\n    \
        \            },\n                \"scenarioTemplateId\": {\n                    \"type\": \"string\",\n          \
        \          \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Associated scenario template if this POI leads to a scenario\"\n                },\n                \"status\": {\n\
        \                    \"$ref\": \"#/$defs/PoiStatus\",\n                    \"description\": \"Current lifecycle status\"\
        \n                }\n            }\n        },\n        \"PoiType\": {\n            \"type\": \"string\",\n      \
        \      \"enum\": [\n                \"Visual\",\n                \"Auditory\",\n                \"Environmental\"\
        ,\n                \"Portal\",\n                \"Social\"\n            ],\n            \"description\": \"Sensory
        presentation type for a point of interest in the garden\"\n        },\n        \"ScenarioCategory\": {\n         \
        \   \"type\": \"string\",\n            \"enum\": [\n                \"Combat\",\n                \"Crafting\",\n \
        \               \"Social\",\n                \"Trade\",\n                \"Exploration\",\n                \"Magic\"\
        ,\n                \"Survival\",\n                \"Mixed\",\n                \"Narrative\",\n                \"Tutorial\"\
        \n            ],\n            \"description\": \"Primary gameplay category for a scenario template\"\n        },\n\
        \        \"TriggerMode\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"Proximity\"\
        ,\n                \"Interaction\",\n                \"Prompted\",\n                \"Forced\"\n            ],\n \
        \           \"description\": \"How a POI is triggered by the player\"\n        },\n        \"PoiStatus\": {\n    \
        \        \"type\": \"string\",\n            \"enum\": [\n                \"Active\",\n                \"Entered\"\
        ,\n                \"Declined\",\n                \"Expired\"\n            ],\n            \"description\": \"Current
        lifecycle status of a POI\"\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get shared garden state for bonded players\",\n    \"description\": \"\
        Returns the merged garden state for both bond participants including shared POIs.\",\n    \"tags\": [\n        \"\
        Bond Scenarios\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"getSharedGardenState\"\n}"
components:
  schemas:
    DeploymentPhase:
      type: string
      enum:
      - Alpha
      - Beta
      - Release
      description: Current deployment phase for scenario availability gating
    ConnectivityMode:
      type: string
      enum:
      - Isolated
      - WorldSlice
      - Persistent
      description: How a scenario instance connects to the broader game world
    ScenarioCategory:
      type: string
      enum:
      - Combat
      - Crafting
      - Social
      - Trade
      - Exploration
      - Magic
      - Survival
      - Mixed
      - Narrative
      - Tutorial
      description: Primary gameplay category for a scenario template
    PoiType:
      type: string
      enum:
      - Visual
      - Auditory
      - Environmental
      - Portal
      - Social
      description: Sensory presentation type for a point of interest in the garden
    TriggerMode:
      type: string
      enum:
      - Proximity
      - Interaction
      - Prompted
      - Forced
      description: How a POI is triggered by the player
    PoiStatus:
      type: string
      enum:
      - Active
      - Entered
      - Declined
      - Expired
      description: Current lifecycle status of a POI
    ScenarioStatus:
      type: string
      enum:
      - Initializing
      - Active
      - Completing
      - Completed
      - Abandoned
      description: Current lifecycle status of a scenario instance
    TemplateStatus:
      type: string
      enum:
      - Draft
      - Active
      - Deprecated
      description: Current lifecycle status of a scenario template
    PoiInteractionResult:
      type: string
      enum:
      - ScenarioPrompt
      - ScenarioEnter
      - PoiUpdate
      - ChainOffer
      description: Outcome of interacting with a POI
    ScenarioParticipantRole:
      type: string
      enum:
      - Primary
      - Partner
      description: Role of a participant within a scenario instance
    Vec3:
      type: object
      description: Three-dimensional spatial coordinates in garden space
      required:
      - x
      - y
      - z
      properties:
        x:
          type: number
          format: float
          description: X coordinate in garden space units
        y:
          type: number
          format: float
          description: Y coordinate in garden space units
        z:
          type: number
          format: float
          description: Z coordinate in garden space units
    PoiSummary:
      type: object
      description: POI state summary for client display
      required:
      - poiId
      - position
      - poiType
      - triggerMode
      - triggerRadius
      - status
      properties:
        poiId:
          type: string
          format: uuid
          description: Unique identifier for this POI
        position:
          $ref: '#/components/schemas/Vec3'
          description: POI position in garden space
        poiType:
          $ref: '#/components/schemas/PoiType'
          description: Sensory presentation type
        visualHint:
          $ref: '#/components/schemas/ScenarioCategory'
          nullable: true
          description: Scenario category hint for client rendering
        audioHint:
          type: string
          nullable: true
          description: Audio hint identifier for client rendering
        intensityRamp:
          type: number
          format: float
          description: Current intensity ramp value (0.0-1.0)
          default: 0.0
        triggerMode:
          $ref: '#/components/schemas/TriggerMode'
          description: How this POI is triggered
        triggerRadius:
          type: number
          format: float
          description: Trigger radius in garden space units
        scenarioTemplateId:
          type: string
          format: uuid
          nullable: true
          description: Associated scenario template if this POI leads to a scenario
        status:
          $ref: '#/components/schemas/PoiStatus'
          description: Current lifecycle status
    DomainWeight:
      type: object
      description: Domain name and weight pair for scenario template growth weighting
      required:
      - domain
      - weight
      properties:
        domain:
          type: string
          description: Growth domain path (e.g. combat.melee, exploration.caves)
        weight:
          type: number
          format: float
          description: Weight applied to this domain on scenario completion
    ScenarioPrerequisites:
      type: object
      description: Prerequisite requirements for entering a scenario
      properties:
        requiredDomains:
          type: object
          additionalProperties:
            type: number
            format: float
          nullable: true
          description: Minimum growth depth per domain (domain path to minimum depth)
        requiredScenarios:
          type: array
          items:
            type: string
          nullable: true
          description: Scenario template codes that must be completed first
        excludedScenarios:
          type: array
          items:
            type: string
          nullable: true
          description: Scenario template codes that disqualify the player
    ScenarioChaining:
      type: object
      description: Chaining configuration for linking scenarios together
      properties:
        leadsTo:
          type: array
          items:
            type: string
          nullable: true
          description: Template codes this scenario can chain into
        chainProbabilities:
          type: object
          additionalProperties:
            type: number
            format: float
          nullable: true
          description: Per-code probability weights for chain selection
        maxChainDepth:
          type: integer
          default: 3
          description: Maximum chain depth allowed from the initial scenario
    ScenarioMultiplayer:
      type: object
      description: Multiplayer configuration for group scenarios
      required:
      - minPlayers
      - maxPlayers
      properties:
        minPlayers:
          type: integer
          description: Minimum number of players required
        maxPlayers:
          type: integer
          description: Maximum number of players allowed
        matchmakingQueueCode:
          type: string
          nullable: true
          description: Matchmaking queue code for automatic grouping
        bondPreferred:
          type: boolean
          default: false
          description: Whether bonded players receive a scoring boost for this scenario
    ScenarioContent:
      type: object
      description: Content references linking a scenario template to game assets
      properties:
        behaviorDocumentId:
          type: string
          format: uuid
          nullable: true
          description: ABML behavior document ID for NPC orchestration
        sceneDocumentId:
          type: string
          format: uuid
          nullable: true
          description: Scene document ID for environment composition
        realmId:
          type: string
          format: uuid
          nullable: true
          description: Realm ID where this scenario takes place
        locationCode:
          type: string
          nullable: true
          description: Location code within the realm
    BondedPlayerGardenState:
      type: object
      description: Per-player garden state within a shared bond garden
      required:
      - seedId
      - accountId
      - position
      properties:
        seedId:
          type: string
          format: uuid
          description: Seed ID of the bonded player
        accountId:
          type: string
          format: uuid
          description: Account ID of the bonded player
        position:
          $ref: '#/components/schemas/Vec3'
          description: Player position in shared garden space
    EnterGardenRequest:
      type: object
      description: Request to enter the garden
      required:
      - accountId
      - sessionId
      properties:
        accountId:
          type: string
          format: uuid
          description: Account entering the garden
        sessionId:
          type: string
          format: uuid
          description: Current WebSocket session ID
    GetGardenStateRequest:
      type: object
      description: Request to get current garden state
      required:
      - accountId
      properties:
        accountId:
          type: string
          format: uuid
          description: Account whose garden state to retrieve
    UpdatePositionRequest:
      type: object
      description: Request to update player position in the garden
      required:
      - accountId
      - position
      - velocity
      properties:
        accountId:
          type: string
          format: uuid
          description: Account whose position to update
        position:
          $ref: '#/components/schemas/Vec3'
          description: New position in garden space
        velocity:
          $ref: '#/components/schemas/Vec3'
          description: Current velocity vector
    LeaveGardenRequest:
      type: object
      description: Request to leave the garden
      required:
      - accountId
      properties:
        accountId:
          type: string
          format: uuid
          description: Account leaving the garden
    ListPoisRequest:
      type: object
      description: Request to list active POIs
      required:
      - accountId
      properties:
        accountId:
          type: string
          format: uuid
          description: Account whose POIs to list
    InteractWithPoiRequest:
      type: object
      description: Request to interact with a POI
      required:
      - accountId
      - poiId
      properties:
        accountId:
          type: string
          format: uuid
          description: Account interacting with the POI
        poiId:
          type: string
          format: uuid
          description: POI to interact with
    DeclinePoiRequest:
      type: object
      description: Request to decline a POI
      required:
      - accountId
      - poiId
      properties:
        accountId:
          type: string
          format: uuid
          description: Account declining the POI
        poiId:
          type: string
          format: uuid
          description: POI to decline
    EnterScenarioRequest:
      type: object
      description: Request to enter a scenario
      required:
      - accountId
      - scenarioTemplateId
      properties:
        accountId:
          type: string
          format: uuid
          description: Account entering the scenario
        scenarioTemplateId:
          type: string
          format: uuid
          description: Template to instantiate
        poiId:
          type: string
          format: uuid
          nullable: true
          description: POI that triggered this scenario entry, if any
        promptChoice:
          type: string
          nullable: true
          description: Selected prompt choice for prompted POIs
    GetScenarioStateRequest:
      type: object
      description: Request to get current scenario state
      required:
      - accountId
      properties:
        accountId:
          type: string
          format: uuid
          description: Account whose scenario state to retrieve
    CompleteScenarioRequest:
      type: object
      description: Request to complete a scenario
      required:
      - accountId
      - scenarioInstanceId
      properties:
        accountId:
          type: string
          format: uuid
          description: Account completing the scenario
        scenarioInstanceId:
          type: string
          format: uuid
          description: Scenario instance to complete
    AbandonScenarioRequest:
      type: object
      description: Request to abandon a scenario
      required:
      - accountId
      - scenarioInstanceId
      properties:
        accountId:
          type: string
          format: uuid
          description: Account abandoning the scenario
        scenarioInstanceId:
          type: string
          format: uuid
          description: Scenario instance to abandon
    ChainScenarioRequest:
      type: object
      description: Request to chain from one scenario to another
      required:
      - accountId
      - currentScenarioInstanceId
      - targetTemplateId
      properties:
        accountId:
          type: string
          format: uuid
          description: Account chaining scenarios
        currentScenarioInstanceId:
          type: string
          format: uuid
          description: Currently active scenario instance
        targetTemplateId:
          type: string
          format: uuid
          description: Template to chain into
    CreateTemplateRequest:
      type: object
      description: Request to create a scenario template
      required:
      - code
      - displayName
      - description
      - category
      - domainWeights
      properties:
        code:
          type: string
          description: Unique template code for reference
        displayName:
          type: string
          description: Human-readable template name
        description:
          type: string
          description: Template description
        category:
          $ref: '#/components/schemas/ScenarioCategory'
          description: Primary gameplay category
        subcategory:
          type: string
          nullable: true
          description: Optional subcategory within the primary category
        domainWeights:
          type: array
          items:
            $ref: '#/components/schemas/DomainWeight'
          description: Growth domain weights awarded on completion
        minGrowthPhase:
          type: string
          nullable: true
          description: Minimum seed growth phase for soft-gating scenario availability
        connectivityMode:
          $ref: '#/components/schemas/ConnectivityMode'
          description: How this scenario connects to the game world
          default: Isolated
        allowedPhases:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/DeploymentPhase'
          description: >-
            Deployment phases in which this template is available.
            Null or empty means available in all phases.
        maxConcurrentInstances:
          type: integer
          default: 100
          description: Maximum concurrent active instances of this template
        estimatedDurationMinutes:
          type: integer
          nullable: true
          description: Estimated scenario duration in minutes
        prerequisites:
          $ref: '#/components/schemas/ScenarioPrerequisites'
          nullable: true
          description: Requirements that must be met before entering
        chaining:
          $ref: '#/components/schemas/ScenarioChaining'
          nullable: true
          description: Chaining configuration
        multiplayer:
          $ref: '#/components/schemas/ScenarioMultiplayer'
          nullable: true
          description: Multiplayer support configuration
        content:
          $ref: '#/components/schemas/ScenarioContent'
          nullable: true
          description: Game content references
    GetTemplateRequest:
      type: object
      description: Request to get a template by ID
      required:
      - scenarioTemplateId
      properties:
        scenarioTemplateId:
          type: string
          format: uuid
          description: Template ID to retrieve
    GetTemplateByCodeRequest:
      type: object
      description: Request to get a template by code
      required:
      - code
      properties:
        code:
          type: string
          description: Template code to look up
    ListTemplatesRequest:
      type: object
      description: Request to list templates with optional filters
      properties:
        category:
          $ref: '#/components/schemas/ScenarioCategory'
          nullable: true
          description: Filter by category
        connectivityMode:
          $ref: '#/components/schemas/ConnectivityMode'
          nullable: true
          description: Filter by connectivity mode
        deploymentPhase:
          $ref: '#/components/schemas/DeploymentPhase'
          nullable: true
          description: Filter by deployment phase availability
        status:
          $ref: '#/components/schemas/TemplateStatus'
          nullable: true
          description: Filter by template status
        page:
          type: integer
          default: 1
          description: Page number (1-based)
        pageSize:
          type: integer
          default: 50
          description: Items per page
    UpdateTemplateRequest:
      type: object
      description: Request to update a template (non-null fields are applied)
      required:
      - scenarioTemplateId
      properties:
        scenarioTemplateId:
          type: string
          format: uuid
          description: Template ID to update
        displayName:
          type: string
          nullable: true
          description: Updated display name
        description:
          type: string
          nullable: true
          description: Updated description
        domainWeights:
          type: array
          items:
            $ref: '#/components/schemas/DomainWeight'
          nullable: true
          description: Updated domain weights
        maxConcurrentInstances:
          type: integer
          nullable: true
          description: Updated max concurrent instances
        prerequisites:
          $ref: '#/components/schemas/ScenarioPrerequisites'
          nullable: true
          description: Updated prerequisites
        chaining:
          $ref: '#/components/schemas/ScenarioChaining'
          nullable: true
          description: Updated chaining configuration
        multiplayer:
          $ref: '#/components/schemas/ScenarioMultiplayer'
          nullable: true
          description: Updated multiplayer configuration
        content:
          $ref: '#/components/schemas/ScenarioContent'
          nullable: true
          description: Updated content references
    DeprecateTemplateRequest:
      type: object
      description: Request to deprecate a template
      required:
      - scenarioTemplateId
      properties:
        scenarioTemplateId:
          type: string
          format: uuid
          description: Template ID to deprecate
    DeleteTemplateRequest:
      type: object
      description: Request to permanently delete a deprecated template
      required:
      - scenarioTemplateId
      properties:
        scenarioTemplateId:
          type: string
          format: uuid
          description: Template ID to delete
    GetPhaseConfigRequest:
      type: object
      description: Request to get deployment phase configuration
      properties: {}
    UpdatePhaseConfigRequest:
      type: object
      description: Request to update deployment phase configuration (non-null fields applied)
      properties:
        currentPhase:
          $ref: '#/components/schemas/DeploymentPhase'
          nullable: true
          description: New deployment phase
        maxConcurrentScenariosGlobal:
          type: integer
          nullable: true
          description: Updated global scenario capacity
        persistentEntryEnabled:
          type: boolean
          nullable: true
          description: Whether persistent world entry is enabled
        gardenMinigamesEnabled:
          type: boolean
          nullable: true
          description: Whether garden minigames are enabled
    GetPhaseMetricsRequest:
      type: object
      description: Request to get phase metrics
      properties: {}
    EnterTogetherRequest:
      type: object
      description: Request for bonded players to enter a scenario together
      required:
      - bondId
      - scenarioTemplateId
      properties:
        bondId:
          type: string
          format: uuid
          description: Bond ID linking the participants
        scenarioTemplateId:
          type: string
          format: uuid
          description: Template to instantiate for the bond
    GetSharedGardenRequest:
      type: object
      description: Request to get shared garden state for bonded players
      required:
      - bondId
      properties:
        bondId:
          type: string
          format: uuid
          description: Bond ID to look up shared garden state
    GardenStateResponse:
      type: object
      description: Current garden instance state for a player
      required:
      - gardenInstanceId
      - seedId
      - accountId
      - position
      - activePois
      properties:
        gardenInstanceId:
          type: string
          format: uuid
          description: Unique identifier for this garden instance
        seedId:
          type: string
          format: uuid
          description: Active seed for this garden session
        accountId:
          type: string
          format: uuid
          description: Account in the garden
        position:
          $ref: '#/components/schemas/Vec3'
          description: Current player position
        activePois:
          type: array
          items:
            $ref: '#/components/schemas/PoiSummary'
          description: Currently active POIs in this garden instance
    PositionUpdateResponse:
      type: object
      description: Response to a position update
      required:
      - acknowledged
      properties:
        acknowledged:
          type: boolean
          description: Whether the position update was processed
        triggeredPois:
          type: array
          items:
            $ref: '#/components/schemas/PoiSummary'
          nullable: true
          description: POIs triggered by proximity to the new position
    LeaveGardenResponse:
      type: object
      description: Response after leaving the garden
      required:
      - accountId
      - sessionDurationSeconds
      properties:
        accountId:
          type: string
          format: uuid
          description: Account that left the garden
        sessionDurationSeconds:
          type: number
          format: float
          description: Total duration of the garden session in seconds
    ListPoisResponse:
      type: object
      description: List of active POIs in a garden instance
      required:
      - gardenInstanceId
      - pois
      properties:
        gardenInstanceId:
          type: string
          format: uuid
          description: Garden instance these POIs belong to
        pois:
          type: array
          items:
            $ref: '#/components/schemas/PoiSummary'
          description: Active POIs
    PoiInteractionResponse:
      type: object
      description: Result of interacting with a POI
      required:
      - poiId
      - result
      properties:
        poiId:
          type: string
          format: uuid
          description: POI that was interacted with
        result:
          $ref: '#/components/schemas/PoiInteractionResult'
          description: Interaction outcome
        scenarioTemplateId:
          type: string
          format: uuid
          nullable: true
          description: Associated template ID if result involves a scenario
        promptText:
          type: string
          nullable: true
          description: Prompt text for prompted POIs
        promptChoices:
          type: array
          items:
            type: string
          nullable: true
          description: Available choices for prompted POIs
    DeclinePoiResponse:
      type: object
      description: Response after declining a POI
      required:
      - poiId
      - acknowledged
      properties:
        poiId:
          type: string
          format: uuid
          description: POI that was declined
        acknowledged:
          type: boolean
          description: Whether the decline was processed
    ScenarioStateResponse:
      type: object
      description: Current state of a scenario instance
      required:
      - scenarioInstanceId
      - scenarioTemplateId
      - gameSessionId
      - connectivityMode
      - status
      - createdAt
      - chainDepth
      properties:
        scenarioInstanceId:
          type: string
          format: uuid
          description: Unique identifier for this scenario instance
        scenarioTemplateId:
          type: string
          format: uuid
          description: Template this instance was created from
        gameSessionId:
          type: string
          format: uuid
          description: Backing game session ID
        connectivityMode:
          $ref: '#/components/schemas/ConnectivityMode'
          description: How this scenario connects to the game world
        status:
          $ref: '#/components/schemas/ScenarioStatus'
          description: Current lifecycle status
        createdAt:
          type: string
          format: date-time
          description: When this instance was created
        chainedFrom:
          type: string
          format: uuid
          nullable: true
          description: Previous scenario instance if this was chained
        chainDepth:
          type: integer
          default: 0
          description: Current chain depth from the initial scenario
    ScenarioCompletionResponse:
      type: object
      description: Response after completing a scenario
      required:
      - scenarioInstanceId
      - growthAwarded
      - returnToGarden
      properties:
        scenarioInstanceId:
          type: string
          format: uuid
          description: Completed scenario instance ID
        growthAwarded:
          type: object
          additionalProperties:
            type: number
            format: float
          description: Growth awarded per domain
        returnToGarden:
          type: boolean
          description: Whether the player should return to the garden
    AbandonScenarioResponse:
      type: object
      description: Response after abandoning a scenario
      required:
      - scenarioInstanceId
      - partialGrowthAwarded
      properties:
        scenarioInstanceId:
          type: string
          format: uuid
          description: Abandoned scenario instance ID
        partialGrowthAwarded:
          type: object
          additionalProperties:
            type: number
            format: float
          description: Partial growth awarded based on time spent
    ScenarioTemplateResponse:
      type: object
      description: Full scenario template with all fields
      required:
      - scenarioTemplateId
      - code
      - displayName
      - description
      - category
      - domainWeights
      - connectivityMode
      - allowedPhases
      - maxConcurrentInstances
      - status
      - createdAt
      - updatedAt
      properties:
        scenarioTemplateId:
          type: string
          format: uuid
          description: Unique identifier for this template
        code:
          type: string
          description: Unique template code
        displayName:
          type: string
          description: Human-readable name
        description:
          type: string
          description: Template description
        category:
          $ref: '#/components/schemas/ScenarioCategory'
          description: Primary gameplay category
        subcategory:
          type: string
          nullable: true
          description: Subcategory within the primary category
        domainWeights:
          type: array
          items:
            $ref: '#/components/schemas/DomainWeight'
          description: Growth domain weights
        minGrowthPhase:
          type: string
          nullable: true
          description: Minimum seed growth phase
        connectivityMode:
          $ref: '#/components/schemas/ConnectivityMode'
          description: World connectivity mode
        allowedPhases:
          type: array
          items:
            $ref: '#/components/schemas/DeploymentPhase'
          description: Deployment phases where this template is available. Always contains explicit values (never 
            empty).
        maxConcurrentInstances:
          type: integer
          description: Maximum concurrent active instances
        estimatedDurationMinutes:
          type: integer
          nullable: true
          description: Estimated scenario duration in minutes
        prerequisites:
          $ref: '#/components/schemas/ScenarioPrerequisites'
          nullable: true
          description: Entry requirements
        chaining:
          $ref: '#/components/schemas/ScenarioChaining'
          nullable: true
          description: Chaining configuration
        multiplayer:
          $ref: '#/components/schemas/ScenarioMultiplayer'
          nullable: true
          description: Multiplayer support
        content:
          $ref: '#/components/schemas/ScenarioContent'
          nullable: true
          description: Content references
        status:
          $ref: '#/components/schemas/TemplateStatus'
          description: Current lifecycle status
        createdAt:
          type: string
          format: date-time
          description: When this template was created
        updatedAt:
          type: string
          format: date-time
          description: When this template was last updated
    ListTemplatesResponse:
      type: object
      description: Paginated list of scenario templates
      required:
      - templates
      - totalCount
      - page
      - pageSize
      properties:
        templates:
          type: array
          items:
            $ref: '#/components/schemas/ScenarioTemplateResponse'
          description: Templates on this page
        totalCount:
          type: integer
          description: Total number of matching templates
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Items per page
    PhaseConfigResponse:
      type: object
      description: Current deployment phase configuration
      required:
      - currentPhase
      - maxConcurrentScenariosGlobal
      - persistentEntryEnabled
      - gardenMinigamesEnabled
      properties:
        currentPhase:
          $ref: '#/components/schemas/DeploymentPhase'
          description: Current deployment phase
        maxConcurrentScenariosGlobal:
          type: integer
          description: Maximum total active scenario instances
        persistentEntryEnabled:
          type: boolean
          description: Whether persistent world entry is enabled
        gardenMinigamesEnabled:
          type: boolean
          description: Whether garden minigames are enabled
    PhaseMetricsResponse:
      type: object
      description: Current deployment phase metrics
      required:
      - currentPhase
      - activeGardenInstances
      - activeScenarioInstances
      - scenarioCapacityUtilization
      properties:
        currentPhase:
          $ref: '#/components/schemas/DeploymentPhase'
          description: Current deployment phase
        activeGardenInstances:
          type: integer
          description: Number of currently active garden instances
        activeScenarioInstances:
          type: integer
          description: Number of currently active scenario instances
        scenarioCapacityUtilization:
          type: number
          format: float
          description: Ratio of active scenarios to global capacity (0.0-1.0)
    SharedGardenStateResponse:
      type: object
      description: Shared garden state for bonded players
      required:
      - bondId
      - participants
      - sharedPois
      properties:
        bondId:
          type: string
          format: uuid
          description: Bond linking the participants
        participants:
          type: array
          items:
            $ref: '#/components/schemas/BondedPlayerGardenState'
          description: Per-player garden state
        sharedPois:
          type: array
          items:
            $ref: '#/components/schemas/PoiSummary'
          description: POIs visible to all bond participants
