openapi: 3.0.3
info:
  title: Relationship Service Events Lifecycle Events
  description: "Auto-generated lifecycle event schemas for relationship service.\nDO NOT EDIT - This file is completely overwritten
    by generate-lifecycle-events.py.\nSource of truth: relationship-events.yaml x-lifecycle section."
  version: 1.0.0
paths: {}
components:
  schemas:
    RelationshipCreatedEvent:
      allOf:
      - $ref: ../common-events.yaml#/components/schemas/BaseServiceEvent
      type: object
      additionalProperties: false
      description: Published to relationship.created when a relationship is created
      required:
      - eventName
      - eventId
      - timestamp
      - relationshipId
      - entity1Id
      - entity1Type
      - entity2Id
      - entity2Type
      - relationshipTypeId
      - startedAt
      - createdAt
      properties:
        eventName:
          type: string
          default: relationship.created
          description: 'Event type identifier: relationship.created'
        relationshipId: &id001
          type: string
          format: uuid
          description: "Unique identifier for the relationship"
        entity1Id: &id002
          type: string
          format: uuid
          description: "Unique identifier of the first entity in the relationship"
        entity1Type: &id003
          $ref: ../common-api.yaml#/components/schemas/EntityType
          description: "Type classification of the first entity"
        entity2Id: &id004
          type: string
          format: uuid
          description: "Unique identifier of the second entity in the relationship"
        entity2Type: &id005
          $ref: ../common-api.yaml#/components/schemas/EntityType
          description: "Type classification of the second entity"
        relationshipTypeId: &id006
          type: string
          format: uuid
          description: "Reference to the relationship type definition"
        startedAt: &id007
          type: string
          format: date-time
          description: "Timestamp when the relationship began"
        endedAt: &id008
          type: string
          format: date-time
          nullable: true
          description: "Timestamp when the relationship ended, if applicable"
        metadata: &id009
          type: object
          additionalProperties: true
          nullable: true
          description: "Client-provided relationship data. No Bannou plugin reads specific keys from this field by convention."
        createdAt: &id010
          type: string
          format: date-time
          description: "Timestamp when the relationship record was created"
        updatedAt: &id011
          type: string
          format: date-time
          nullable: true
          description: "Timestamp when the relationship record was last updated, null if never updated"
    RelationshipUpdatedEvent:
      allOf:
      - $ref: ../common-events.yaml#/components/schemas/BaseServiceEvent
      type: object
      additionalProperties: false
      description: Published to relationship.updated when a relationship is updated
      required:
      - eventName
      - eventId
      - timestamp
      - relationshipId
      - entity1Id
      - entity1Type
      - entity2Id
      - entity2Type
      - relationshipTypeId
      - startedAt
      - createdAt
      - changedFields
      properties:
        eventName:
          type: string
          default: relationship.updated
          description: 'Event type identifier: relationship.updated'
        relationshipId: *id001
        entity1Id: *id002
        entity1Type: *id003
        entity2Id: *id004
        entity2Type: *id005
        relationshipTypeId: *id006
        startedAt: *id007
        endedAt: *id008
        metadata: *id009
        createdAt: *id010
        updatedAt: *id011
        changedFields:
          type: array
          items:
            type: string
          description: List of field names that were modified
    RelationshipDeletedEvent:
      allOf:
      - $ref: ../common-events.yaml#/components/schemas/BaseServiceEvent
      type: object
      additionalProperties: false
      description: Published to relationship.deleted when a relationship is deleted
      required:
      - eventName
      - eventId
      - timestamp
      - relationshipId
      - entity1Id
      - entity1Type
      - entity2Id
      - entity2Type
      - relationshipTypeId
      - startedAt
      - createdAt
      properties:
        eventName:
          type: string
          default: relationship.deleted
          description: 'Event type identifier: relationship.deleted'
        relationshipId: *id001
        entity1Id: *id002
        entity1Type: *id003
        entity2Id: *id004
        entity2Type: *id005
        relationshipTypeId: *id006
        startedAt: *id007
        endedAt: *id008
        metadata: *id009
        createdAt: *id010
        updatedAt: *id011
        deletedReason:
          type: string
          nullable: true
          description: Optional reason for deletion (e.g., "Merged into {targetId}")
    RelationshipTypeCreatedEvent:
      allOf:
      - $ref: ../common-events.yaml#/components/schemas/BaseServiceEvent
      type: object
      additionalProperties: false
      description: Published to relationship.type.created when a relationshiptype is created
      required:
      - eventName
      - eventId
      - timestamp
      - relationshipTypeId
      - code
      - name
      - isBidirectional
      - isDeprecated
      - depth
      - createdAt
      - updatedAt
      properties:
        eventName:
          type: string
          default: relationship.type.created
          description: 'Event type identifier: relationship.type.created'
        relationshipTypeId: &id012
          type: string
          format: uuid
          description: "Unique identifier for the relationship type"
        code: &id013
          type: string
          description: "Machine-readable code for the relationship type"
        name: &id014
          type: string
          description: "Human-readable display name for the relationship type"
        description: &id015
          type: string
          nullable: true
          description: "Detailed description of the relationship type"
        category: &id016
          type: string
          nullable: true
          description: "Category grouping for the relationship type"
        parentTypeId: &id017
          type: string
          format: uuid
          nullable: true
          description: "ID of the parent relationship type for hierarchical relationships"
        parentTypeCode: &id018
          type: string
          nullable: true
          description: "Code of the parent relationship type"
        inverseTypeId: &id019
          type: string
          format: uuid
          nullable: true
          description: "ID of the inverse relationship type for asymmetric relationships"
        inverseTypeCode: &id020
          type: string
          nullable: true
          description: "Code of the inverse relationship type"
        isBidirectional: &id021
          type: boolean
          description: "Whether the relationship applies equally in both directions"
        isDeprecated: &id022
          type: boolean
          description: "Whether this relationship type is deprecated and should not be used for new relationships"
        deprecatedAt: &id023
          type: string
          format: date-time
          nullable: true
          description: "Timestamp when the relationship type was deprecated"
        deprecationReason: &id024
          type: string
          nullable: true
          description: "Explanation for why the relationship type was deprecated"
        depth: &id025
          type: integer
          description: "Hierarchy depth level from the root relationship type"
        metadata: &id026
          type: object
          additionalProperties: true
          nullable: true
          description: "Client-provided relationship type metadata. No Bannou plugin reads specific keys from this field by
            convention."
        createdAt: &id027
          type: string
          format: date-time
          description: "Timestamp when the relationship type was created"
        updatedAt: &id028
          type: string
          format: date-time
          description: "Timestamp when the relationship type was last updated"
    RelationshipTypeUpdatedEvent:
      allOf:
      - $ref: ../common-events.yaml#/components/schemas/BaseServiceEvent
      type: object
      additionalProperties: false
      description: Published to relationship.type.updated when a relationshiptype is updated
      required:
      - eventName
      - eventId
      - timestamp
      - relationshipTypeId
      - code
      - name
      - isBidirectional
      - isDeprecated
      - depth
      - createdAt
      - updatedAt
      - changedFields
      properties:
        eventName:
          type: string
          default: relationship.type.updated
          description: 'Event type identifier: relationship.type.updated'
        relationshipTypeId: *id012
        code: *id013
        name: *id014
        description: *id015
        category: *id016
        parentTypeId: *id017
        parentTypeCode: *id018
        inverseTypeId: *id019
        inverseTypeCode: *id020
        isBidirectional: *id021
        isDeprecated: *id022
        deprecatedAt: *id023
        deprecationReason: *id024
        depth: *id025
        metadata: *id026
        createdAt: *id027
        updatedAt: *id028
        changedFields:
          type: array
          items:
            type: string
          description: List of field names that were modified
    RelationshipTypeDeletedEvent:
      allOf:
      - $ref: ../common-events.yaml#/components/schemas/BaseServiceEvent
      type: object
      additionalProperties: false
      description: Published to relationship.type.deleted when a relationshiptype is deleted
      required:
      - eventName
      - eventId
      - timestamp
      - relationshipTypeId
      - code
      - name
      - isBidirectional
      - isDeprecated
      - depth
      - createdAt
      - updatedAt
      properties:
        eventName:
          type: string
          default: relationship.type.deleted
          description: 'Event type identifier: relationship.type.deleted'
        relationshipTypeId: *id012
        code: *id013
        name: *id014
        description: *id015
        category: *id016
        parentTypeId: *id017
        parentTypeCode: *id018
        inverseTypeId: *id019
        inverseTypeCode: *id020
        isBidirectional: *id021
        isDeprecated: *id022
        deprecatedAt: *id023
        deprecationReason: *id024
        depth: *id025
        metadata: *id026
        createdAt: *id027
        updatedAt: *id028
        deletedReason:
          type: string
          nullable: true
          description: Optional reason for deletion (e.g., "Merged into {targetId}")
