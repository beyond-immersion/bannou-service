openapi: 3.0.3
info:
  title: Mapping Service Events Lifecycle Events
  description: "Auto-generated lifecycle event schemas for mapping service.\nDO NOT EDIT - This file is completely overwritten
    by generate-lifecycle-events.py.\nSource of truth: mapping-events.yaml x-lifecycle section."
  version: 1.0.0
paths: {}
components:
  schemas:
    MappingChannelCreatedEvent:
      allOf:
      - $ref: ../common-events.yaml#/components/schemas/BaseServiceEvent
      type: object
      additionalProperties: false
      description: Published to mapping-channel.created when a mappingchannel is created
      required:
      - eventName
      - eventId
      - timestamp
      - channelId
      - regionId
      - kind
      - nonAuthorityHandling
      - version
      - createdAt
      - updatedAt
      properties:
        eventName:
          type: string
          default: mapping-channel.created
          description: 'Event type identifier: mapping-channel.created'
        channelId: &id001
          type: string
          format: uuid
          description: "Unique identifier for the channel (region+kind)"
        regionId: &id002
          type: string
          format: uuid
          description: "Region this channel serves"
        kind: &id003
          type: string
          description: "Map kind (terrain, static_geometry, etc.)"
        authorityAppId: &id004
          type: string
          nullable: true
          description: "App ID of current authority (null if unassigned)"
        authorityToken: &id005
          type: string
          nullable: true
          description: "Current authority token (null if unassigned)"
        authorityExpiresAt: &id006
          type: string
          format: date-time
          nullable: true
          description: "When current authority expires"
        nonAuthorityHandling: &id007
          $ref: ../mapping-api.yaml#/components/schemas/NonAuthorityHandlingMode
          description: "How to handle non-authority publishes"
        version: &id008
          type: integer
          format: int64
          description: "Current version number"
        createdAt: &id009
          type: string
          format: date-time
          description: "When the channel was created"
        updatedAt: &id010
          type: string
          format: date-time
          description: "When the channel was last updated"
    MappingChannelUpdatedEvent:
      allOf:
      - $ref: ../common-events.yaml#/components/schemas/BaseServiceEvent
      type: object
      additionalProperties: false
      description: Published to mapping-channel.updated when a mappingchannel is updated
      required:
      - eventName
      - eventId
      - timestamp
      - channelId
      - regionId
      - kind
      - nonAuthorityHandling
      - version
      - createdAt
      - updatedAt
      - changedFields
      properties:
        eventName:
          type: string
          default: mapping-channel.updated
          description: 'Event type identifier: mapping-channel.updated'
        channelId: *id001
        regionId: *id002
        kind: *id003
        authorityAppId: *id004
        authorityToken: *id005
        authorityExpiresAt: *id006
        nonAuthorityHandling: *id007
        version: *id008
        createdAt: *id009
        updatedAt: *id010
        changedFields:
          type: array
          items:
            type: string
          description: List of field names that were modified
    MappingChannelDeletedEvent:
      allOf:
      - $ref: ../common-events.yaml#/components/schemas/BaseServiceEvent
      type: object
      additionalProperties: false
      description: Published to mapping-channel.deleted when a mappingchannel is deleted
      required:
      - eventName
      - eventId
      - timestamp
      - channelId
      - regionId
      - kind
      - nonAuthorityHandling
      - version
      - createdAt
      - updatedAt
      properties:
        eventName:
          type: string
          default: mapping-channel.deleted
          description: 'Event type identifier: mapping-channel.deleted'
        channelId: *id001
        regionId: *id002
        kind: *id003
        authorityAppId: *id004
        authorityToken: *id005
        authorityExpiresAt: *id006
        nonAuthorityHandling: *id007
        version: *id008
        createdAt: *id009
        updatedAt: *id010
        deletedReason:
          type: string
          nullable: true
          description: Optional reason for deletion (e.g., "Merged into {targetId}")
