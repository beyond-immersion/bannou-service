openapi: 3.0.0
info:
  title: Bannou Scene Service API
  description: |
    Hierarchical composition storage for game worlds.

    **POST-Only API Pattern**: This API uses POST for all operations to support zero-copy
    WebSocket routing. See docs/BANNOU_DESIGN.md for architectural rationale.

    The Scene service stores and retrieves hierarchical scene documents with nodes
    representing meshes, markers, volumes, emitters, and references to other scenes.

    **Core Responsibility**: Store and retrieve hierarchical scene documents.

    **Not Responsible For**:
    - Computing world transforms (consumers apply transforms themselves)
    - Determining affordances (runtime geometry concern)
    - Pushing data to other services (event-driven decoupling)
    - Interpreting node behavior (consumers decide what nodes mean)

    **NRT Compliance**: AI agents MUST review docs/NRT-SCHEMA-RULES.md before modifying
    this schema. Optional reference types require `nullable: true`.
  version: 1.0.0
servers:
- url: http://localhost:5012
  description: Bannou service endpoint (internal only)
paths:
  /scene/create:
    post:
      summary: Create a new scene document
      description: |
        Creates a new scene document and stores it in lib-asset.
        Publishes scene.created event on success.
        Returns Conflict if a scene with the same sceneId already exists.
      operationId: createScene
      tags:
      - Scene
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSceneRequest'
      responses:
        '200':
          description: Scene created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SceneResponse'
        '400':
          description: Invalid scene structure (validation failed)
        '409':
          description: Scene with this sceneId already exists
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/CreateSceneRequest\"\
        ,\n    \"$defs\": {\n        \"CreateSceneRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to create a new scene\",\n            \"required\": [\n                \"scene\"\n            ],\n   \
        \         \"properties\": {\n                \"scene\": {\n                    \"$ref\": \"#/$defs/Scene\",\n    \
        \                \"description\": \"The scene document to create\"\n                }\n            }\n        },\n\
        \        \"Scene\": {\n            \"type\": \"object\",\n            \"description\": \"A complete scene document
        with hierarchical node structure\",\n            \"required\": [\n                \"sceneId\",\n                \"\
        gameId\",\n                \"sceneType\",\n                \"name\",\n                \"version\",\n             \
        \   \"root\"\n            ],\n            \"properties\": {\n                \"schema\": {\n                    \"\
        type\": \"string\",\n                    \"description\": \"Schema identifier for validation\",\n                \
        \    \"default\": \"bannou://schemas/scene/v1\"\n                },\n                \"sceneId\": {\n            \
        \        \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"\
        Unique scene identifier\"\n                },\n                \"gameId\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Game service identifier for partitioning. Treated as opaque string.\\nDefault
        is the nil UUID for unpartitioned scenes.\\n\",\n                    \"default\": \"00000000-0000-0000-0000-000000000000\"\
        \n                },\n                \"sceneType\": {\n                    \"$ref\": \"#/$defs/SceneType\",\n   \
        \                 \"description\": \"Scene classification for querying and validation\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Human-readable
        scene name\"\n                },\n                \"description\": {\n                    \"type\": \"string\",\n\
        \                    \"nullable\": true,\n                    \"description\": \"Optional scene description\"\n  \
        \              },\n                \"version\": {\n                    \"type\": \"string\",\n                   \
        \ \"pattern\": \"^\\\\d+\\\\.\\\\d+\\\\.\\\\d+$\",\n                    \"description\": \"Semantic version (MAJOR.MINOR.PATCH)\"\
        \n                },\n                \"root\": {\n                    \"$ref\": \"#/$defs/SceneNode\",\n        \
        \            \"description\": \"Root node of the scene hierarchy\"\n                },\n                \"tags\":
        {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Searchable tags for filtering scenes\"\n\
        \                },\n                \"metadata\": {\n                    \"type\": \"object\",\n                \
        \    \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Scene-level metadata. Not interpreted by Scene service.\\nExamples: author, thumbnail, editor preferences, generator
        config.\\n\"\n                },\n                \"createdAt\": {\n                    \"type\": \"string\",\n  \
        \                  \"format\": \"date-time\",\n                    \"description\": \"When the scene was first created\"\
        \n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"date-time\",\n                    \"description\": \"When the scene was last modified\"\n   \
        \             }\n            }\n        },\n        \"SceneType\": {\n            \"type\": \"string\",\n        \
        \    \"description\": \"Scene classification for querying and validation rule lookup.\\nDifferent types may have different
        validation requirements per game.\\n\",\n            \"enum\": [\n                \"unknown\",\n                \"\
        region\",\n                \"city\",\n                \"district\",\n                \"lot\",\n                \"\
        building\",\n                \"room\",\n                \"dungeon\",\n                \"arena\",\n               \
        \ \"vehicle\",\n                \"prefab\",\n                \"cutscene\",\n                \"other\"\n          \
        \  ]\n        },\n        \"SceneNode\": {\n            \"type\": \"object\",\n            \"description\": \"A node
        in the scene hierarchy. Nodes can contain children to form\\na tree structure. Each node has a local transform relative
        to its parent.\\n\",\n            \"required\": [\n                \"nodeId\",\n                \"refId\",\n     \
        \           \"name\",\n                \"nodeType\",\n                \"localTransform\"\n            ],\n       \
        \     \"properties\": {\n                \"nodeId\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"uuid\",\n                    \"description\": \"Globally unique node identifier\"\n         \
        \       },\n                \"refId\": {\n                    \"type\": \"string\",\n                    \"pattern\"\
        : \"^[a-z][a-z0-9_]*$\",\n                    \"description\": \"Scene-local reference identifier. Must be unique
        within the scene.\\nUsed for scripting and cross-referencing. Examples: main_door, npc_spawn_1\\n\"\n            \
        \    },\n                \"parentNodeId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Parent node ID. Null
        for the root node only.\"\n                },\n                \"name\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Human-readable display name for the node\"\n                },\n       \
        \         \"nodeType\": {\n                    \"$ref\": \"#/$defs/NodeType\",\n                    \"description\"\
        : \"The structural type of this node\"\n                },\n                \"localTransform\": {\n              \
        \      \"$ref\": \"#/$defs/Transform\",\n                    \"description\": \"Transform relative to parent node\"\
        \n                },\n                \"asset\": {\n                    \"$ref\": \"#/$defs/AssetReference\",\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Optional asset binding (mesh, sound,
        particle effect)\"\n                },\n                \"children\": {\n                    \"type\": \"array\",\n\
        \                    \"items\": {\n                        \"$ref\": \"#/$defs/SceneNode\"\n                    },\n\
        \                    \"description\": \"Child nodes in the hierarchy\"\n                },\n                \"enabled\"\
        : {\n                    \"type\": \"boolean\",\n                    \"default\": true,\n                    \"description\"\
        : \"Whether this node is active in the scene definition\"\n                },\n                \"sortOrder\": {\n\
        \                    \"type\": \"integer\",\n                    \"default\": 0,\n                    \"description\"\
        : \"Ordering among siblings for deterministic iteration\"\n                },\n                \"tags\": {\n     \
        \               \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\
        \n                    },\n                    \"description\": \"Arbitrary tags for consumer filtering (e.g., entrance,
        spawn, interactive)\"\n                },\n                \"annotations\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                \
        \    \"description\": \"Consumer-specific data stored without interpretation.\\nUse namespaced keys (e.g., render.castShadows,
        game.interactionType).\\n\"\n                },\n                \"attachmentPoints\": {\n                    \"type\"\
        : \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/AttachmentPoint\"\n  \
        \                  },\n                    \"description\": \"Predefined locations for attaching child objects.\\\
        nUsed by Scene Composer for furniture decoration, wall accessories, etc.\\n\"\n                },\n              \
        \  \"affordances\": {\n                    \"type\": \"array\",\n                    \"items\": {\n              \
        \          \"$ref\": \"#/$defs/Affordance\"\n                    },\n                    \"description\": \"Interaction
        capabilities of this node.\\nUsed by AI navigation and character controllers.\\n\"\n                },\n         \
        \       \"assetSlot\": {\n                    \"$ref\": \"#/$defs/AssetSlot\",\n                    \"nullable\":
        true,\n                    \"description\": \"Procedural asset swapping configuration.\\nDefines which assets can
        substitute for this node's asset.\\n\"\n                },\n                \"markerType\": {\n                  \
        \  \"$ref\": \"#/$defs/MarkerType\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type of marker for marker nodes.\\nOnly relevant when nodeType is 'marker'.\\n\"\n                },\n       \
        \         \"volumeShape\": {\n                    \"$ref\": \"#/$defs/VolumeShape\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Shape of volume for volume nodes.\\nOnly relevant when nodeType is
        'volume'.\\n\"\n                },\n                \"volumeSize\": {\n                    \"$ref\": \"#/$defs/Vector3\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Size/extents of the volume (interpretation
        depends on volumeShape).\\nFor box: full dimensions. For sphere: x=radius. For capsule: x=radius, y=height.\\n\"\n\
        \                },\n                \"referenceSceneId\": {\n                    \"type\": \"string\",\n        \
        \            \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\":
        \"Scene ID to embed for reference nodes.\\nOnly relevant when nodeType is 'reference'.\\n\"\n                }\n \
        \           }\n        },\n        \"NodeType\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Structural node type. Indicates what kind of data the node contains,\\nnot how it will be used at runtime. Consumers
        interpret nodes according\\nto their own needs via tags and annotations.\\n\",\n            \"enum\": [\n        \
        \        \"group\",\n                \"mesh\",\n                \"marker\",\n                \"volume\",\n       \
        \         \"emitter\",\n                \"reference\",\n                \"custom\"\n            ]\n        },\n  \
        \      \"Transform\": {\n            \"type\": \"object\",\n            \"description\": \"Position, rotation, and
        scale in 3D space\",\n            \"required\": [\n                \"position\",\n                \"rotation\",\n\
        \                \"scale\"\n            ],\n            \"properties\": {\n                \"position\": {\n     \
        \               \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Position relative to parent\"\
        \n                },\n                \"rotation\": {\n                    \"$ref\": \"#/$defs/Quaternion\",\n   \
        \                 \"description\": \"Rotation relative to parent\"\n                },\n                \"scale\"\
        : {\n                    \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Scale relative to
        parent\"\n                }\n            }\n        },\n        \"Vector3\": {\n            \"type\": \"object\",\n\
        \            \"description\": \"A point or direction in 3D space\",\n            \"required\": [\n               \
        \ \"x\",\n                \"y\",\n                \"z\"\n            ],\n            \"properties\": {\n         \
        \       \"x\": {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n       \
        \             \"description\": \"X coordinate\"\n                },\n                \"y\": {\n                  \
        \  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\": \"Y coordinate\"\
        \n                },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"\
        format\": \"double\",\n                    \"description\": \"Z coordinate\"\n                }\n            }\n \
        \       },\n        \"Quaternion\": {\n            \"type\": \"object\",\n            \"description\": \"Rotation
        represented as a quaternion\",\n            \"required\": [\n                \"x\",\n                \"y\",\n    \
        \            \"z\",\n                \"w\"\n            ],\n            \"properties\": {\n                \"x\":
        {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"\
        description\": \"X component\"\n                },\n                \"y\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"double\",\n                    \"description\": \"Y component\"\n           \
        \     },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"format\": \"\
        double\",\n                    \"description\": \"Z component\"\n                },\n                \"w\": {\n  \
        \                  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\"\
        : \"W component (scalar)\"\n                }\n            }\n        },\n        \"AssetReference\": {\n        \
        \    \"type\": \"object\",\n            \"description\": \"Reference to an asset in lib-asset\",\n            \"required\"\
        : [\n                \"assetId\"\n            ],\n            \"properties\": {\n                \"bundleId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional bundle containing the asset\"\n                },\n     \
        \           \"assetId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n\
        \                    \"description\": \"Asset identifier in lib-asset\"\n                },\n                \"variantId\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Variant identifier (consumer interprets meaning)\"\n                }\n            }\n        },\n        \"AttachmentPoint\"\
        : {\n            \"type\": \"object\",\n            \"description\": \"A predefined location where child objects can
        be attached.\\nUsed for decorating furniture, walls, and other objects with accessories.\\nExample: A wall may have
        attachment points for paintings, shelves, or light fixtures.\\n\",\n            \"required\": [\n                \"\
        name\",\n                \"localTransform\"\n            ],\n            \"properties\": {\n                \"name\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Unique name for this attachment
        point within the node.\\nExamples: wall_hook_left, shelf_1, lamp_socket\\n\"\n                },\n               \
        \ \"localTransform\": {\n                    \"$ref\": \"#/$defs/Transform\",\n                    \"description\"\
        : \"Position and orientation relative to the owning node\"\n                },\n                \"acceptsTags\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Tags of assets that can attach here.\\nExamples:
        wall_decoration, picture_frame, plant\\n\"\n                },\n                \"defaultAsset\": {\n            \
        \        \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Default asset to display if no specific attachment is specified\"\n                },\n                \"attachedNodeId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        nullable\": true,\n                    \"description\": \"ID of the node currently attached at this point (runtime
        state)\"\n                }\n            }\n        },\n        \"Affordance\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Describes a capability or interaction mode for a node.\\nUsed by AI systems to understand
        what actions are possible and by\\ncharacter controllers for contextual animations.\\n\",\n            \"required\"\
        : [\n                \"type\"\n            ],\n            \"properties\": {\n                \"type\": {\n      \
        \              \"$ref\": \"#/$defs/AffordanceType\",\n                    \"description\": \"The type of affordance\"\
        \n                },\n                \"parameters\": {\n                    \"type\": \"object\",\n             \
        \       \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type-specific parameters. Examples:\\n- sittable: { height: 0.5, facing: [0,0,1] }\\n- door: { openAngle: 90,
        locked: false }\\n- container: { capacity: 10, itemTypes: [\\\"weapon\\\", \\\"consumable\\\"] }\\n\"\n          \
        \      }\n            }\n        },\n        \"AffordanceType\": {\n            \"type\": \"string\",\n          \
        \  \"description\": \"Types of affordances describing what an object can do or how it can be interacted with.\\nUsed
        by AI navigation, character controllers, and procedural content systems.\\n\",\n            \"enum\": [\n        \
        \        \"walkable\",\n                \"climbable\",\n                \"sittable\",\n                \"interactive\"\
        ,\n                \"collectible\",\n                \"destructible\",\n                \"container\",\n         \
        \       \"door\",\n                \"teleport\"\n            ]\n        },\n        \"AssetSlot\": {\n           \
        \ \"type\": \"object\",\n            \"description\": \"Defines acceptable asset types for procedural swapping at
        this node.\\nUsed by procedural generation systems to substitute assets while\\nmaintaining scene coherence.\\n\"\
        ,\n            \"required\": [\n                \"slotType\"\n            ],\n            \"properties\": {\n    \
        \            \"slotType\": {\n                    \"type\": \"string\",\n                    \"description\": \"Category
        of acceptable assets.\\nExamples: chair, table, wall_art, floor_lamp\\n\"\n                },\n                \"\
        acceptsTags\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                   \
        \     \"type\": \"string\"\n                    },\n                    \"description\": \"Tags that acceptable assets
        must have.\\nUsed for filtering when selecting random variations.\\n\"\n                },\n                \"defaultAsset\"\
        : {\n                    \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n        \
        \            \"description\": \"Default asset if no specific asset is bound\"\n                },\n              \
        \  \"variations\": {\n                    \"type\": \"array\",\n                    \"items\": {\n               \
        \         \"$ref\": \"#/$defs/AssetReference\"\n                    },\n                    \"description\": \"Pre-approved
        asset variations for random selection.\\nProcedural systems pick from this list rather than searching all assets.\\\
        n\"\n                }\n            }\n        },\n        \"MarkerType\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Types of marker nodes for spawn points, waypoints, and other positional markers.\"\
        ,\n            \"enum\": [\n                \"generic\",\n                \"spawn_point\",\n                \"npc_spawn\"\
        ,\n                \"waypoint\",\n                \"camera_point\",\n                \"light_point\",\n          \
        \      \"audio_point\",\n                \"trigger_point\"\n            ]\n        },\n        \"VolumeShape\": {\n\
        \            \"type\": \"string\",\n            \"description\": \"Shape of a volume node for spatial bounds\",\n\
        \            \"enum\": [\n                \"box\",\n                \"sphere\",\n                \"capsule\",\n  \
        \              \"cylinder\"\n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SceneResponse\"\
        ,\n    \"$defs\": {\n        \"SceneResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Standard response containing a scene\",\n            \"required\": [\n                \"scene\"\n            ],\n\
        \            \"properties\": {\n                \"scene\": {\n                    \"$ref\": \"#/$defs/Scene\",\n \
        \                   \"description\": \"The scene document\"\n                }\n            }\n        },\n      \
        \  \"Scene\": {\n            \"type\": \"object\",\n            \"description\": \"A complete scene document with
        hierarchical node structure\",\n            \"required\": [\n                \"sceneId\",\n                \"gameId\"\
        ,\n                \"sceneType\",\n                \"name\",\n                \"version\",\n                \"root\"\
        \n            ],\n            \"properties\": {\n                \"schema\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Schema identifier for validation\",\n                    \"default\": \"\
        bannou://schemas/scene/v1\"\n                },\n                \"sceneId\": {\n                    \"type\": \"\
        string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Unique scene identifier\"\
        \n                },\n                \"gameId\": {\n                    \"type\": \"string\",\n                 \
        \   \"description\": \"Game service identifier for partitioning. Treated as opaque string.\\nDefault is the nil UUID
        for unpartitioned scenes.\\n\",\n                    \"default\": \"00000000-0000-0000-0000-000000000000\"\n     \
        \           },\n                \"sceneType\": {\n                    \"$ref\": \"#/$defs/SceneType\",\n         \
        \           \"description\": \"Scene classification for querying and validation\"\n                },\n          \
        \      \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Human-readable
        scene name\"\n                },\n                \"description\": {\n                    \"type\": \"string\",\n\
        \                    \"nullable\": true,\n                    \"description\": \"Optional scene description\"\n  \
        \              },\n                \"version\": {\n                    \"type\": \"string\",\n                   \
        \ \"pattern\": \"^\\\\d+\\\\.\\\\d+\\\\.\\\\d+$\",\n                    \"description\": \"Semantic version (MAJOR.MINOR.PATCH)\"\
        \n                },\n                \"root\": {\n                    \"$ref\": \"#/$defs/SceneNode\",\n        \
        \            \"description\": \"Root node of the scene hierarchy\"\n                },\n                \"tags\":
        {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Searchable tags for filtering scenes\"\n\
        \                },\n                \"metadata\": {\n                    \"type\": \"object\",\n                \
        \    \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Scene-level metadata. Not interpreted by Scene service.\\nExamples: author, thumbnail, editor preferences, generator
        config.\\n\"\n                },\n                \"createdAt\": {\n                    \"type\": \"string\",\n  \
        \                  \"format\": \"date-time\",\n                    \"description\": \"When the scene was first created\"\
        \n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"date-time\",\n                    \"description\": \"When the scene was last modified\"\n   \
        \             }\n            }\n        },\n        \"SceneType\": {\n            \"type\": \"string\",\n        \
        \    \"description\": \"Scene classification for querying and validation rule lookup.\\nDifferent types may have different
        validation requirements per game.\\n\",\n            \"enum\": [\n                \"unknown\",\n                \"\
        region\",\n                \"city\",\n                \"district\",\n                \"lot\",\n                \"\
        building\",\n                \"room\",\n                \"dungeon\",\n                \"arena\",\n               \
        \ \"vehicle\",\n                \"prefab\",\n                \"cutscene\",\n                \"other\"\n          \
        \  ]\n        },\n        \"SceneNode\": {\n            \"type\": \"object\",\n            \"description\": \"A node
        in the scene hierarchy. Nodes can contain children to form\\na tree structure. Each node has a local transform relative
        to its parent.\\n\",\n            \"required\": [\n                \"nodeId\",\n                \"refId\",\n     \
        \           \"name\",\n                \"nodeType\",\n                \"localTransform\"\n            ],\n       \
        \     \"properties\": {\n                \"nodeId\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"uuid\",\n                    \"description\": \"Globally unique node identifier\"\n         \
        \       },\n                \"refId\": {\n                    \"type\": \"string\",\n                    \"pattern\"\
        : \"^[a-z][a-z0-9_]*$\",\n                    \"description\": \"Scene-local reference identifier. Must be unique
        within the scene.\\nUsed for scripting and cross-referencing. Examples: main_door, npc_spawn_1\\n\"\n            \
        \    },\n                \"parentNodeId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Parent node ID. Null
        for the root node only.\"\n                },\n                \"name\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Human-readable display name for the node\"\n                },\n       \
        \         \"nodeType\": {\n                    \"$ref\": \"#/$defs/NodeType\",\n                    \"description\"\
        : \"The structural type of this node\"\n                },\n                \"localTransform\": {\n              \
        \      \"$ref\": \"#/$defs/Transform\",\n                    \"description\": \"Transform relative to parent node\"\
        \n                },\n                \"asset\": {\n                    \"$ref\": \"#/$defs/AssetReference\",\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Optional asset binding (mesh, sound,
        particle effect)\"\n                },\n                \"children\": {\n                    \"type\": \"array\",\n\
        \                    \"items\": {\n                        \"$ref\": \"#/$defs/SceneNode\"\n                    },\n\
        \                    \"description\": \"Child nodes in the hierarchy\"\n                },\n                \"enabled\"\
        : {\n                    \"type\": \"boolean\",\n                    \"default\": true,\n                    \"description\"\
        : \"Whether this node is active in the scene definition\"\n                },\n                \"sortOrder\": {\n\
        \                    \"type\": \"integer\",\n                    \"default\": 0,\n                    \"description\"\
        : \"Ordering among siblings for deterministic iteration\"\n                },\n                \"tags\": {\n     \
        \               \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\
        \n                    },\n                    \"description\": \"Arbitrary tags for consumer filtering (e.g., entrance,
        spawn, interactive)\"\n                },\n                \"annotations\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                \
        \    \"description\": \"Consumer-specific data stored without interpretation.\\nUse namespaced keys (e.g., render.castShadows,
        game.interactionType).\\n\"\n                },\n                \"attachmentPoints\": {\n                    \"type\"\
        : \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/AttachmentPoint\"\n  \
        \                  },\n                    \"description\": \"Predefined locations for attaching child objects.\\\
        nUsed by Scene Composer for furniture decoration, wall accessories, etc.\\n\"\n                },\n              \
        \  \"affordances\": {\n                    \"type\": \"array\",\n                    \"items\": {\n              \
        \          \"$ref\": \"#/$defs/Affordance\"\n                    },\n                    \"description\": \"Interaction
        capabilities of this node.\\nUsed by AI navigation and character controllers.\\n\"\n                },\n         \
        \       \"assetSlot\": {\n                    \"$ref\": \"#/$defs/AssetSlot\",\n                    \"nullable\":
        true,\n                    \"description\": \"Procedural asset swapping configuration.\\nDefines which assets can
        substitute for this node's asset.\\n\"\n                },\n                \"markerType\": {\n                  \
        \  \"$ref\": \"#/$defs/MarkerType\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type of marker for marker nodes.\\nOnly relevant when nodeType is 'marker'.\\n\"\n                },\n       \
        \         \"volumeShape\": {\n                    \"$ref\": \"#/$defs/VolumeShape\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Shape of volume for volume nodes.\\nOnly relevant when nodeType is
        'volume'.\\n\"\n                },\n                \"volumeSize\": {\n                    \"$ref\": \"#/$defs/Vector3\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Size/extents of the volume (interpretation
        depends on volumeShape).\\nFor box: full dimensions. For sphere: x=radius. For capsule: x=radius, y=height.\\n\"\n\
        \                },\n                \"referenceSceneId\": {\n                    \"type\": \"string\",\n        \
        \            \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\":
        \"Scene ID to embed for reference nodes.\\nOnly relevant when nodeType is 'reference'.\\n\"\n                }\n \
        \           }\n        },\n        \"NodeType\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Structural node type. Indicates what kind of data the node contains,\\nnot how it will be used at runtime. Consumers
        interpret nodes according\\nto their own needs via tags and annotations.\\n\",\n            \"enum\": [\n        \
        \        \"group\",\n                \"mesh\",\n                \"marker\",\n                \"volume\",\n       \
        \         \"emitter\",\n                \"reference\",\n                \"custom\"\n            ]\n        },\n  \
        \      \"Transform\": {\n            \"type\": \"object\",\n            \"description\": \"Position, rotation, and
        scale in 3D space\",\n            \"required\": [\n                \"position\",\n                \"rotation\",\n\
        \                \"scale\"\n            ],\n            \"properties\": {\n                \"position\": {\n     \
        \               \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Position relative to parent\"\
        \n                },\n                \"rotation\": {\n                    \"$ref\": \"#/$defs/Quaternion\",\n   \
        \                 \"description\": \"Rotation relative to parent\"\n                },\n                \"scale\"\
        : {\n                    \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Scale relative to
        parent\"\n                }\n            }\n        },\n        \"Vector3\": {\n            \"type\": \"object\",\n\
        \            \"description\": \"A point or direction in 3D space\",\n            \"required\": [\n               \
        \ \"x\",\n                \"y\",\n                \"z\"\n            ],\n            \"properties\": {\n         \
        \       \"x\": {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n       \
        \             \"description\": \"X coordinate\"\n                },\n                \"y\": {\n                  \
        \  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\": \"Y coordinate\"\
        \n                },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"\
        format\": \"double\",\n                    \"description\": \"Z coordinate\"\n                }\n            }\n \
        \       },\n        \"Quaternion\": {\n            \"type\": \"object\",\n            \"description\": \"Rotation
        represented as a quaternion\",\n            \"required\": [\n                \"x\",\n                \"y\",\n    \
        \            \"z\",\n                \"w\"\n            ],\n            \"properties\": {\n                \"x\":
        {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"\
        description\": \"X component\"\n                },\n                \"y\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"double\",\n                    \"description\": \"Y component\"\n           \
        \     },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"format\": \"\
        double\",\n                    \"description\": \"Z component\"\n                },\n                \"w\": {\n  \
        \                  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\"\
        : \"W component (scalar)\"\n                }\n            }\n        },\n        \"AssetReference\": {\n        \
        \    \"type\": \"object\",\n            \"description\": \"Reference to an asset in lib-asset\",\n            \"required\"\
        : [\n                \"assetId\"\n            ],\n            \"properties\": {\n                \"bundleId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional bundle containing the asset\"\n                },\n     \
        \           \"assetId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n\
        \                    \"description\": \"Asset identifier in lib-asset\"\n                },\n                \"variantId\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Variant identifier (consumer interprets meaning)\"\n                }\n            }\n        },\n        \"AttachmentPoint\"\
        : {\n            \"type\": \"object\",\n            \"description\": \"A predefined location where child objects can
        be attached.\\nUsed for decorating furniture, walls, and other objects with accessories.\\nExample: A wall may have
        attachment points for paintings, shelves, or light fixtures.\\n\",\n            \"required\": [\n                \"\
        name\",\n                \"localTransform\"\n            ],\n            \"properties\": {\n                \"name\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Unique name for this attachment
        point within the node.\\nExamples: wall_hook_left, shelf_1, lamp_socket\\n\"\n                },\n               \
        \ \"localTransform\": {\n                    \"$ref\": \"#/$defs/Transform\",\n                    \"description\"\
        : \"Position and orientation relative to the owning node\"\n                },\n                \"acceptsTags\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Tags of assets that can attach here.\\nExamples:
        wall_decoration, picture_frame, plant\\n\"\n                },\n                \"defaultAsset\": {\n            \
        \        \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Default asset to display if no specific attachment is specified\"\n                },\n                \"attachedNodeId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        nullable\": true,\n                    \"description\": \"ID of the node currently attached at this point (runtime
        state)\"\n                }\n            }\n        },\n        \"Affordance\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Describes a capability or interaction mode for a node.\\nUsed by AI systems to understand
        what actions are possible and by\\ncharacter controllers for contextual animations.\\n\",\n            \"required\"\
        : [\n                \"type\"\n            ],\n            \"properties\": {\n                \"type\": {\n      \
        \              \"$ref\": \"#/$defs/AffordanceType\",\n                    \"description\": \"The type of affordance\"\
        \n                },\n                \"parameters\": {\n                    \"type\": \"object\",\n             \
        \       \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type-specific parameters. Examples:\\n- sittable: { height: 0.5, facing: [0,0,1] }\\n- door: { openAngle: 90,
        locked: false }\\n- container: { capacity: 10, itemTypes: [\\\"weapon\\\", \\\"consumable\\\"] }\\n\"\n          \
        \      }\n            }\n        },\n        \"AffordanceType\": {\n            \"type\": \"string\",\n          \
        \  \"description\": \"Types of affordances describing what an object can do or how it can be interacted with.\\nUsed
        by AI navigation, character controllers, and procedural content systems.\\n\",\n            \"enum\": [\n        \
        \        \"walkable\",\n                \"climbable\",\n                \"sittable\",\n                \"interactive\"\
        ,\n                \"collectible\",\n                \"destructible\",\n                \"container\",\n         \
        \       \"door\",\n                \"teleport\"\n            ]\n        },\n        \"AssetSlot\": {\n           \
        \ \"type\": \"object\",\n            \"description\": \"Defines acceptable asset types for procedural swapping at
        this node.\\nUsed by procedural generation systems to substitute assets while\\nmaintaining scene coherence.\\n\"\
        ,\n            \"required\": [\n                \"slotType\"\n            ],\n            \"properties\": {\n    \
        \            \"slotType\": {\n                    \"type\": \"string\",\n                    \"description\": \"Category
        of acceptable assets.\\nExamples: chair, table, wall_art, floor_lamp\\n\"\n                },\n                \"\
        acceptsTags\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                   \
        \     \"type\": \"string\"\n                    },\n                    \"description\": \"Tags that acceptable assets
        must have.\\nUsed for filtering when selecting random variations.\\n\"\n                },\n                \"defaultAsset\"\
        : {\n                    \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n        \
        \            \"description\": \"Default asset if no specific asset is bound\"\n                },\n              \
        \  \"variations\": {\n                    \"type\": \"array\",\n                    \"items\": {\n               \
        \         \"$ref\": \"#/$defs/AssetReference\"\n                    },\n                    \"description\": \"Pre-approved
        asset variations for random selection.\\nProcedural systems pick from this list rather than searching all assets.\\\
        n\"\n                }\n            }\n        },\n        \"MarkerType\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Types of marker nodes for spawn points, waypoints, and other positional markers.\"\
        ,\n            \"enum\": [\n                \"generic\",\n                \"spawn_point\",\n                \"npc_spawn\"\
        ,\n                \"waypoint\",\n                \"camera_point\",\n                \"light_point\",\n          \
        \      \"audio_point\",\n                \"trigger_point\"\n            ]\n        },\n        \"VolumeShape\": {\n\
        \            \"type\": \"string\",\n            \"description\": \"Shape of a volume node for spatial bounds\",\n\
        \            \"enum\": [\n                \"box\",\n                \"sphere\",\n                \"capsule\",\n  \
        \              \"cylinder\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Create a new scene document\",\n    \"description\": \"Creates a new scene
        document and stores it in lib-asset.\\nPublishes scene.created event on success.\\nReturns Conflict if a scene with
        the same sceneId already exists.\\n\",\n    \"tags\": [\n        \"Scene\"\n    ],\n    \"deprecated\": false,\n \
        \   \"operationId\": \"createScene\"\n}"
  /scene/get:
    post:
      summary: Retrieve a scene by ID
      description: |
        Retrieves a scene document. Optionally resolves nested scene references
        up to a configurable depth.
      operationId: getScene
      tags:
      - Scene
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetSceneRequest'
      responses:
        '200':
          description: Scene retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetSceneResponse'
        '404':
          description: Scene not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetSceneRequest\"\
        ,\n    \"$defs\": {\n        \"GetSceneRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to retrieve a scene\",\n            \"required\": [\n                \"sceneId\"\n            ],\n   \
        \         \"properties\": {\n                \"sceneId\": {\n                    \"type\": \"string\",\n         \
        \           \"format\": \"uuid\",\n                    \"description\": \"ID of the scene to retrieve\"\n        \
        \        },\n                \"version\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Specific version to retrieve (null = latest)\"\n                },\n\
        \                \"resolveReferences\": {\n                    \"type\": \"boolean\",\n                    \"default\"\
        : false,\n                    \"description\": \"Whether to resolve and embed referenced scenes\"\n              \
        \  },\n                \"maxReferenceDepth\": {\n                    \"type\": \"integer\",\n                    \"\
        default\": 3,\n                    \"minimum\": 1,\n                    \"maximum\": 10,\n                    \"description\"\
        : \"Maximum depth for reference resolution (prevents infinite recursion)\"\n                }\n            }\n   \
        \     }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetSceneResponse\"\
        ,\n    \"$defs\": {\n        \"GetSceneResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Response containing a scene and resolution metadata\",\n            \"required\": [\n                \"scene\"\
        \n            ],\n            \"properties\": {\n                \"scene\": {\n                    \"$ref\": \"#/$defs/Scene\"\
        ,\n                    \"description\": \"The retrieved scene\"\n                },\n                \"resolvedReferences\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"$ref\"\
        : \"#/$defs/ResolvedReference\"\n                    },\n                    \"nullable\": true,\n               \
        \     \"description\": \"List of resolved references (if resolveReferences was true)\"\n                },\n     \
        \           \"unresolvedReferences\": {\n                    \"type\": \"array\",\n                    \"items\":
        {\n                        \"$ref\": \"#/$defs/UnresolvedReference\"\n                    },\n                   \
        \ \"nullable\": true,\n                    \"description\": \"References that could not be resolved (circular, missing,
        depth exceeded)\"\n                },\n                \"resolutionErrors\": {\n                    \"type\": \"array\"\
        ,\n                    \"items\": {\n                        \"type\": \"string\"\n                    },\n      \
        \              \"nullable\": true,\n                    \"description\": \"Error messages for reference resolution
        issues\"\n                }\n            }\n        },\n        \"Scene\": {\n            \"type\": \"object\",\n\
        \            \"description\": \"A complete scene document with hierarchical node structure\",\n            \"required\"\
        : [\n                \"sceneId\",\n                \"gameId\",\n                \"sceneType\",\n                \"\
        name\",\n                \"version\",\n                \"root\"\n            ],\n            \"properties\": {\n \
        \               \"schema\": {\n                    \"type\": \"string\",\n                    \"description\": \"\
        Schema identifier for validation\",\n                    \"default\": \"bannou://schemas/scene/v1\"\n            \
        \    },\n                \"sceneId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"description\": \"Unique scene identifier\"\n                },\n              \
        \  \"gameId\": {\n                    \"type\": \"string\",\n                    \"description\": \"Game service identifier
        for partitioning. Treated as opaque string.\\nDefault is the nil UUID for unpartitioned scenes.\\n\",\n          \
        \          \"default\": \"00000000-0000-0000-0000-000000000000\"\n                },\n                \"sceneType\"\
        : {\n                    \"$ref\": \"#/$defs/SceneType\",\n                    \"description\": \"Scene classification
        for querying and validation\"\n                },\n                \"name\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Human-readable scene name\"\n                },\n                \"description\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Optional scene description\"\n                },\n                \"version\": {\n                    \"type\"\
        : \"string\",\n                    \"pattern\": \"^\\\\d+\\\\.\\\\d+\\\\.\\\\d+$\",\n                    \"description\"\
        : \"Semantic version (MAJOR.MINOR.PATCH)\"\n                },\n                \"root\": {\n                    \"\
        $ref\": \"#/$defs/SceneNode\",\n                    \"description\": \"Root node of the scene hierarchy\"\n      \
        \          },\n                \"tags\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"description\": \"\
        Searchable tags for filtering scenes\"\n                },\n                \"metadata\": {\n                    \"\
        type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scene-level metadata. Not interpreted by Scene service.\\nExamples: author,
        thumbnail, editor preferences, generator config.\\n\"\n                },\n                \"createdAt\": {\n    \
        \                \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\"\
        : \"When the scene was first created\"\n                },\n                \"updatedAt\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When
        the scene was last modified\"\n                }\n            }\n        },\n        \"SceneType\": {\n          \
        \  \"type\": \"string\",\n            \"description\": \"Scene classification for querying and validation rule lookup.\\
        nDifferent types may have different validation requirements per game.\\n\",\n            \"enum\": [\n           \
        \     \"unknown\",\n                \"region\",\n                \"city\",\n                \"district\",\n      \
        \          \"lot\",\n                \"building\",\n                \"room\",\n                \"dungeon\",\n    \
        \            \"arena\",\n                \"vehicle\",\n                \"prefab\",\n                \"cutscene\",\n\
        \                \"other\"\n            ]\n        },\n        \"SceneNode\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"A node in the scene hierarchy. Nodes can contain children to form\\na tree structure.
        Each node has a local transform relative to its parent.\\n\",\n            \"required\": [\n                \"nodeId\"\
        ,\n                \"refId\",\n                \"name\",\n                \"nodeType\",\n                \"localTransform\"\
        \n            ],\n            \"properties\": {\n                \"nodeId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Globally unique node identifier\"\
        \n                },\n                \"refId\": {\n                    \"type\": \"string\",\n                  \
        \  \"pattern\": \"^[a-z][a-z0-9_]*$\",\n                    \"description\": \"Scene-local reference identifier. Must
        be unique within the scene.\\nUsed for scripting and cross-referencing. Examples: main_door, npc_spawn_1\\n\"\n  \
        \              },\n                \"parentNodeId\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Parent
        node ID. Null for the root node only.\"\n                },\n                \"name\": {\n                    \"type\"\
        : \"string\",\n                    \"description\": \"Human-readable display name for the node\"\n               \
        \ },\n                \"nodeType\": {\n                    \"$ref\": \"#/$defs/NodeType\",\n                    \"\
        description\": \"The structural type of this node\"\n                },\n                \"localTransform\": {\n \
        \                   \"$ref\": \"#/$defs/Transform\",\n                    \"description\": \"Transform relative to
        parent node\"\n                },\n                \"asset\": {\n                    \"$ref\": \"#/$defs/AssetReference\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional asset binding (mesh, sound,
        particle effect)\"\n                },\n                \"children\": {\n                    \"type\": \"array\",\n\
        \                    \"items\": {\n                        \"$ref\": \"#/$defs/SceneNode\"\n                    },\n\
        \                    \"description\": \"Child nodes in the hierarchy\"\n                },\n                \"enabled\"\
        : {\n                    \"type\": \"boolean\",\n                    \"default\": true,\n                    \"description\"\
        : \"Whether this node is active in the scene definition\"\n                },\n                \"sortOrder\": {\n\
        \                    \"type\": \"integer\",\n                    \"default\": 0,\n                    \"description\"\
        : \"Ordering among siblings for deterministic iteration\"\n                },\n                \"tags\": {\n     \
        \               \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\
        \n                    },\n                    \"description\": \"Arbitrary tags for consumer filtering (e.g., entrance,
        spawn, interactive)\"\n                },\n                \"annotations\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                \
        \    \"description\": \"Consumer-specific data stored without interpretation.\\nUse namespaced keys (e.g., render.castShadows,
        game.interactionType).\\n\"\n                },\n                \"attachmentPoints\": {\n                    \"type\"\
        : \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/AttachmentPoint\"\n  \
        \                  },\n                    \"description\": \"Predefined locations for attaching child objects.\\\
        nUsed by Scene Composer for furniture decoration, wall accessories, etc.\\n\"\n                },\n              \
        \  \"affordances\": {\n                    \"type\": \"array\",\n                    \"items\": {\n              \
        \          \"$ref\": \"#/$defs/Affordance\"\n                    },\n                    \"description\": \"Interaction
        capabilities of this node.\\nUsed by AI navigation and character controllers.\\n\"\n                },\n         \
        \       \"assetSlot\": {\n                    \"$ref\": \"#/$defs/AssetSlot\",\n                    \"nullable\":
        true,\n                    \"description\": \"Procedural asset swapping configuration.\\nDefines which assets can
        substitute for this node's asset.\\n\"\n                },\n                \"markerType\": {\n                  \
        \  \"$ref\": \"#/$defs/MarkerType\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type of marker for marker nodes.\\nOnly relevant when nodeType is 'marker'.\\n\"\n                },\n       \
        \         \"volumeShape\": {\n                    \"$ref\": \"#/$defs/VolumeShape\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Shape of volume for volume nodes.\\nOnly relevant when nodeType is
        'volume'.\\n\"\n                },\n                \"volumeSize\": {\n                    \"$ref\": \"#/$defs/Vector3\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Size/extents of the volume (interpretation
        depends on volumeShape).\\nFor box: full dimensions. For sphere: x=radius. For capsule: x=radius, y=height.\\n\"\n\
        \                },\n                \"referenceSceneId\": {\n                    \"type\": \"string\",\n        \
        \            \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\":
        \"Scene ID to embed for reference nodes.\\nOnly relevant when nodeType is 'reference'.\\n\"\n                }\n \
        \           }\n        },\n        \"NodeType\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Structural node type. Indicates what kind of data the node contains,\\nnot how it will be used at runtime. Consumers
        interpret nodes according\\nto their own needs via tags and annotations.\\n\",\n            \"enum\": [\n        \
        \        \"group\",\n                \"mesh\",\n                \"marker\",\n                \"volume\",\n       \
        \         \"emitter\",\n                \"reference\",\n                \"custom\"\n            ]\n        },\n  \
        \      \"Transform\": {\n            \"type\": \"object\",\n            \"description\": \"Position, rotation, and
        scale in 3D space\",\n            \"required\": [\n                \"position\",\n                \"rotation\",\n\
        \                \"scale\"\n            ],\n            \"properties\": {\n                \"position\": {\n     \
        \               \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Position relative to parent\"\
        \n                },\n                \"rotation\": {\n                    \"$ref\": \"#/$defs/Quaternion\",\n   \
        \                 \"description\": \"Rotation relative to parent\"\n                },\n                \"scale\"\
        : {\n                    \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Scale relative to
        parent\"\n                }\n            }\n        },\n        \"Vector3\": {\n            \"type\": \"object\",\n\
        \            \"description\": \"A point or direction in 3D space\",\n            \"required\": [\n               \
        \ \"x\",\n                \"y\",\n                \"z\"\n            ],\n            \"properties\": {\n         \
        \       \"x\": {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n       \
        \             \"description\": \"X coordinate\"\n                },\n                \"y\": {\n                  \
        \  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\": \"Y coordinate\"\
        \n                },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"\
        format\": \"double\",\n                    \"description\": \"Z coordinate\"\n                }\n            }\n \
        \       },\n        \"Quaternion\": {\n            \"type\": \"object\",\n            \"description\": \"Rotation
        represented as a quaternion\",\n            \"required\": [\n                \"x\",\n                \"y\",\n    \
        \            \"z\",\n                \"w\"\n            ],\n            \"properties\": {\n                \"x\":
        {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"\
        description\": \"X component\"\n                },\n                \"y\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"double\",\n                    \"description\": \"Y component\"\n           \
        \     },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"format\": \"\
        double\",\n                    \"description\": \"Z component\"\n                },\n                \"w\": {\n  \
        \                  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\"\
        : \"W component (scalar)\"\n                }\n            }\n        },\n        \"AssetReference\": {\n        \
        \    \"type\": \"object\",\n            \"description\": \"Reference to an asset in lib-asset\",\n            \"required\"\
        : [\n                \"assetId\"\n            ],\n            \"properties\": {\n                \"bundleId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional bundle containing the asset\"\n                },\n     \
        \           \"assetId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n\
        \                    \"description\": \"Asset identifier in lib-asset\"\n                },\n                \"variantId\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Variant identifier (consumer interprets meaning)\"\n                }\n            }\n        },\n        \"AttachmentPoint\"\
        : {\n            \"type\": \"object\",\n            \"description\": \"A predefined location where child objects can
        be attached.\\nUsed for decorating furniture, walls, and other objects with accessories.\\nExample: A wall may have
        attachment points for paintings, shelves, or light fixtures.\\n\",\n            \"required\": [\n                \"\
        name\",\n                \"localTransform\"\n            ],\n            \"properties\": {\n                \"name\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Unique name for this attachment
        point within the node.\\nExamples: wall_hook_left, shelf_1, lamp_socket\\n\"\n                },\n               \
        \ \"localTransform\": {\n                    \"$ref\": \"#/$defs/Transform\",\n                    \"description\"\
        : \"Position and orientation relative to the owning node\"\n                },\n                \"acceptsTags\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Tags of assets that can attach here.\\nExamples:
        wall_decoration, picture_frame, plant\\n\"\n                },\n                \"defaultAsset\": {\n            \
        \        \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Default asset to display if no specific attachment is specified\"\n                },\n                \"attachedNodeId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        nullable\": true,\n                    \"description\": \"ID of the node currently attached at this point (runtime
        state)\"\n                }\n            }\n        },\n        \"Affordance\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Describes a capability or interaction mode for a node.\\nUsed by AI systems to understand
        what actions are possible and by\\ncharacter controllers for contextual animations.\\n\",\n            \"required\"\
        : [\n                \"type\"\n            ],\n            \"properties\": {\n                \"type\": {\n      \
        \              \"$ref\": \"#/$defs/AffordanceType\",\n                    \"description\": \"The type of affordance\"\
        \n                },\n                \"parameters\": {\n                    \"type\": \"object\",\n             \
        \       \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type-specific parameters. Examples:\\n- sittable: { height: 0.5, facing: [0,0,1] }\\n- door: { openAngle: 90,
        locked: false }\\n- container: { capacity: 10, itemTypes: [\\\"weapon\\\", \\\"consumable\\\"] }\\n\"\n          \
        \      }\n            }\n        },\n        \"AffordanceType\": {\n            \"type\": \"string\",\n          \
        \  \"description\": \"Types of affordances describing what an object can do or how it can be interacted with.\\nUsed
        by AI navigation, character controllers, and procedural content systems.\\n\",\n            \"enum\": [\n        \
        \        \"walkable\",\n                \"climbable\",\n                \"sittable\",\n                \"interactive\"\
        ,\n                \"collectible\",\n                \"destructible\",\n                \"container\",\n         \
        \       \"door\",\n                \"teleport\"\n            ]\n        },\n        \"AssetSlot\": {\n           \
        \ \"type\": \"object\",\n            \"description\": \"Defines acceptable asset types for procedural swapping at
        this node.\\nUsed by procedural generation systems to substitute assets while\\nmaintaining scene coherence.\\n\"\
        ,\n            \"required\": [\n                \"slotType\"\n            ],\n            \"properties\": {\n    \
        \            \"slotType\": {\n                    \"type\": \"string\",\n                    \"description\": \"Category
        of acceptable assets.\\nExamples: chair, table, wall_art, floor_lamp\\n\"\n                },\n                \"\
        acceptsTags\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                   \
        \     \"type\": \"string\"\n                    },\n                    \"description\": \"Tags that acceptable assets
        must have.\\nUsed for filtering when selecting random variations.\\n\"\n                },\n                \"defaultAsset\"\
        : {\n                    \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n        \
        \            \"description\": \"Default asset if no specific asset is bound\"\n                },\n              \
        \  \"variations\": {\n                    \"type\": \"array\",\n                    \"items\": {\n               \
        \         \"$ref\": \"#/$defs/AssetReference\"\n                    },\n                    \"description\": \"Pre-approved
        asset variations for random selection.\\nProcedural systems pick from this list rather than searching all assets.\\\
        n\"\n                }\n            }\n        },\n        \"MarkerType\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Types of marker nodes for spawn points, waypoints, and other positional markers.\"\
        ,\n            \"enum\": [\n                \"generic\",\n                \"spawn_point\",\n                \"npc_spawn\"\
        ,\n                \"waypoint\",\n                \"camera_point\",\n                \"light_point\",\n          \
        \      \"audio_point\",\n                \"trigger_point\"\n            ]\n        },\n        \"VolumeShape\": {\n\
        \            \"type\": \"string\",\n            \"description\": \"Shape of a volume node for spatial bounds\",\n\
        \            \"enum\": [\n                \"box\",\n                \"sphere\",\n                \"capsule\",\n  \
        \              \"cylinder\"\n            ]\n        },\n        \"ResolvedReference\": {\n            \"type\": \"\
        object\",\n            \"description\": \"A successfully resolved scene reference\",\n            \"required\": [\n\
        \                \"nodeId\",\n                \"refId\",\n                \"referencedSceneId\",\n               \
        \ \"scene\"\n            ],\n            \"properties\": {\n                \"nodeId\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Node ID containing
        the reference\"\n                },\n                \"refId\": {\n                    \"type\": \"string\",\n   \
        \                 \"description\": \"refId of the referencing node\"\n                },\n                \"referencedSceneId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"ID of the referenced scene\"\n                },\n                \"referencedVersion\": {\n    \
        \                \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Version that was resolved\"\n                },\n                \"scene\": {\n                    \"$ref\": \"\
        #/$defs/Scene\",\n                    \"description\": \"The resolved scene content\"\n                },\n      \
        \          \"depth\": {\n                    \"type\": \"integer\",\n                    \"description\": \"Depth
        level of this reference\"\n                }\n            }\n        },\n        \"UnresolvedReference\": {\n    \
        \        \"type\": \"object\",\n            \"description\": \"A scene reference that could not be resolved\",\n \
        \           \"required\": [\n                \"nodeId\",\n                \"refId\",\n                \"referencedSceneId\"\
        ,\n                \"reason\"\n            ],\n            \"properties\": {\n                \"nodeId\": {\n    \
        \                \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Node ID containing the reference\"\n                },\n                \"refId\": {\n                    \"type\"\
        : \"string\",\n                    \"description\": \"refId of the referencing node\"\n                },\n      \
        \          \"referencedSceneId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"description\": \"ID of the scene that could not be resolved\"\n                },\n\
        \                \"reason\": {\n                    \"$ref\": \"#/$defs/UnresolvedReferenceReason\",\n           \
        \         \"description\": \"Why the reference could not be resolved\"\n                },\n                \"cyclePath\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\"\
        : \"string\",\n                        \"format\": \"uuid\"\n                    },\n                    \"nullable\"\
        : true,\n                    \"description\": \"For circular references, the cycle path (sceneId chain)\"\n      \
        \          }\n            }\n        },\n        \"UnresolvedReferenceReason\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"Reason why a scene reference could not be resolved\",\n            \"enum\": [\n\
        \                \"not_found\",\n                \"circular_reference\",\n                \"depth_exceeded\",\n  \
        \              \"access_denied\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Retrieve a scene by ID\",\n    \"description\": \"Retrieves a scene document.
        Optionally resolves nested scene references\\nup to a configurable depth.\\n\",\n    \"tags\": [\n        \"Scene\"\
        \n    ],\n    \"deprecated\": false,\n    \"operationId\": \"getScene\"\n}"
  /scene/list:
    post:
      summary: List scenes with filtering
      description: |
        Lists scenes matching the provided filters. Supports pagination.
        Results are ordered by updatedAt descending (most recent first).
      operationId: listScenes
      tags:
      - Scene
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListScenesRequest'
      responses:
        '200':
          description: Scenes listed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListScenesResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListScenesRequest\"\
        ,\n    \"$defs\": {\n        \"ListScenesRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to list scenes with optional filters\",\n            \"properties\": {\n                \"gameId\": {\n\
        \                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Filter by game ID\"\n                },\n                \"sceneType\": {\n                    \"$ref\": \"#/$defs/SceneType\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Filter by single scene type\"\n\
        \                },\n                \"sceneTypes\": {\n                    \"type\": \"array\",\n               \
        \     \"items\": {\n                        \"$ref\": \"#/$defs/SceneType\"\n                    },\n            \
        \        \"nullable\": true,\n                    \"description\": \"Filter by multiple scene types (OR)\"\n     \
        \           },\n                \"tags\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"nullable\": true,\n\
        \                    \"description\": \"Filter by tags (scenes must have ALL specified tags)\"\n                },\n\
        \                \"nameContains\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Filter by name containing this substring (case-insensitive)\"\n  \
        \              },\n                \"offset\": {\n                    \"type\": \"integer\",\n                   \
        \ \"default\": 0,\n                    \"minimum\": 0,\n                    \"description\": \"Pagination offset\"\
        \n                },\n                \"limit\": {\n                    \"type\": \"integer\",\n                 \
        \   \"default\": 50,\n                    \"minimum\": 1,\n                    \"maximum\": 200,\n               \
        \     \"description\": \"Maximum results to return\"\n                }\n            }\n        },\n        \"SceneType\"\
        : {\n            \"type\": \"string\",\n            \"description\": \"Scene classification for querying and validation
        rule lookup.\\nDifferent types may have different validation requirements per game.\\n\",\n            \"enum\": [\n\
        \                \"unknown\",\n                \"region\",\n                \"city\",\n                \"district\"\
        ,\n                \"lot\",\n                \"building\",\n                \"room\",\n                \"dungeon\"\
        ,\n                \"arena\",\n                \"vehicle\",\n                \"prefab\",\n                \"cutscene\"\
        ,\n                \"other\"\n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListScenesResponse\"\
        ,\n    \"$defs\": {\n        \"ListScenesResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Response containing scene list and pagination info\",\n            \"required\": [\n                \"scenes\"\
        ,\n                \"total\"\n            ],\n            \"properties\": {\n                \"scenes\": {\n     \
        \               \"type\": \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/SceneSummary\"\
        \n                    },\n                    \"description\": \"List of scene summaries (not full documents)\"\n\
        \                },\n                \"total\": {\n                    \"type\": \"integer\",\n                  \
        \  \"description\": \"Total number of matching scenes\"\n                },\n                \"offset\": {\n     \
        \               \"type\": \"integer\",\n                    \"description\": \"Current offset\"\n                },\n\
        \                \"limit\": {\n                    \"type\": \"integer\",\n                    \"description\": \"\
        Applied limit\"\n                }\n            }\n        },\n        \"SceneSummary\": {\n            \"type\":
        \"object\",\n            \"description\": \"Summary of a scene for list results (excludes full node tree)\",\n   \
        \         \"required\": [\n                \"sceneId\",\n                \"gameId\",\n                \"sceneType\"\
        ,\n                \"name\",\n                \"version\"\n            ],\n            \"properties\": {\n       \
        \         \"sceneId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n \
        \                   \"description\": \"Unique scene identifier\"\n                },\n                \"gameId\":
        {\n                    \"type\": \"string\",\n                    \"description\": \"Game service identifier\"\n \
        \               },\n                \"sceneType\": {\n                    \"$ref\": \"#/$defs/SceneType\",\n     \
        \               \"description\": \"Scene classification\"\n                },\n                \"name\": {\n     \
        \               \"type\": \"string\",\n                    \"description\": \"Scene name\"\n                },\n \
        \               \"description\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Scene description\"\n                },\n                \"version\": {\n\
        \                    \"type\": \"string\",\n                    \"description\": \"Current version\"\n           \
        \     },\n                \"tags\": {\n                    \"type\": \"array\",\n                    \"items\": {\n\
        \                        \"type\": \"string\"\n                    },\n                    \"description\": \"Scene
        tags\"\n                },\n                \"nodeCount\": {\n                    \"type\": \"integer\",\n       \
        \             \"description\": \"Total number of nodes in scene\"\n                },\n                \"createdAt\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\",\n                 \
        \   \"description\": \"Creation timestamp\"\n                },\n                \"updatedAt\": {\n              \
        \      \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\"\
        : \"Last update timestamp\"\n                },\n                \"isCheckedOut\": {\n                    \"type\"\
        : \"boolean\",\n                    \"description\": \"Whether scene is currently checked out\"\n                }\n\
        \            }\n        },\n        \"SceneType\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Scene classification for querying and validation rule lookup.\\nDifferent types may have different validation
        requirements per game.\\n\",\n            \"enum\": [\n                \"unknown\",\n                \"region\",\n\
        \                \"city\",\n                \"district\",\n                \"lot\",\n                \"building\"\
        ,\n                \"room\",\n                \"dungeon\",\n                \"arena\",\n                \"vehicle\"\
        ,\n                \"prefab\",\n                \"cutscene\",\n                \"other\"\n            ]\n        }\n\
        \    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"List scenes with filtering\",\n    \"description\": \"Lists scenes matching
        the provided filters. Supports pagination.\\nResults are ordered by updatedAt descending (most recent first).\\n\"\
        ,\n    \"tags\": [\n        \"Scene\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"listScenes\"\n}"
  /scene/update:
    post:
      summary: Update a scene document
      description: |
        Updates an existing scene document. Scene must not be checked out by
        another user. Increments the PATCH version automatically.
        Publishes scene.updated event on success.
      operationId: updateScene
      tags:
      - Scene
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSceneRequest'
      responses:
        '200':
          description: Scene updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SceneResponse'
        '404':
          description: Scene not found
        '409':
          description: Scene is checked out by another user
        '400':
          description: Invalid scene structure
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/UpdateSceneRequest\"\
        ,\n    \"$defs\": {\n        \"UpdateSceneRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to update an existing scene\",\n            \"required\": [\n                \"scene\"\n            ],\n\
        \            \"properties\": {\n                \"scene\": {\n                    \"$ref\": \"#/$defs/Scene\",\n \
        \                   \"description\": \"The updated scene document (sceneId must match existing)\"\n              \
        \  },\n                \"checkoutToken\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Checkout token if updating via checkout workflow\"\n             \
        \   }\n            }\n        },\n        \"Scene\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"A complete scene document with hierarchical node structure\",\n            \"required\": [\n                \"\
        sceneId\",\n                \"gameId\",\n                \"sceneType\",\n                \"name\",\n             \
        \   \"version\",\n                \"root\"\n            ],\n            \"properties\": {\n                \"schema\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Schema identifier for validation\"\
        ,\n                    \"default\": \"bannou://schemas/scene/v1\"\n                },\n                \"sceneId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Unique scene identifier\"\n                },\n                \"gameId\": {\n                  \
        \  \"type\": \"string\",\n                    \"description\": \"Game service identifier for partitioning. Treated
        as opaque string.\\nDefault is the nil UUID for unpartitioned scenes.\\n\",\n                    \"default\": \"00000000-0000-0000-0000-000000000000\"\
        \n                },\n                \"sceneType\": {\n                    \"$ref\": \"#/$defs/SceneType\",\n   \
        \                 \"description\": \"Scene classification for querying and validation\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Human-readable
        scene name\"\n                },\n                \"description\": {\n                    \"type\": \"string\",\n\
        \                    \"nullable\": true,\n                    \"description\": \"Optional scene description\"\n  \
        \              },\n                \"version\": {\n                    \"type\": \"string\",\n                   \
        \ \"pattern\": \"^\\\\d+\\\\.\\\\d+\\\\.\\\\d+$\",\n                    \"description\": \"Semantic version (MAJOR.MINOR.PATCH)\"\
        \n                },\n                \"root\": {\n                    \"$ref\": \"#/$defs/SceneNode\",\n        \
        \            \"description\": \"Root node of the scene hierarchy\"\n                },\n                \"tags\":
        {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Searchable tags for filtering scenes\"\n\
        \                },\n                \"metadata\": {\n                    \"type\": \"object\",\n                \
        \    \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Scene-level metadata. Not interpreted by Scene service.\\nExamples: author, thumbnail, editor preferences, generator
        config.\\n\"\n                },\n                \"createdAt\": {\n                    \"type\": \"string\",\n  \
        \                  \"format\": \"date-time\",\n                    \"description\": \"When the scene was first created\"\
        \n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"date-time\",\n                    \"description\": \"When the scene was last modified\"\n   \
        \             }\n            }\n        },\n        \"SceneType\": {\n            \"type\": \"string\",\n        \
        \    \"description\": \"Scene classification for querying and validation rule lookup.\\nDifferent types may have different
        validation requirements per game.\\n\",\n            \"enum\": [\n                \"unknown\",\n                \"\
        region\",\n                \"city\",\n                \"district\",\n                \"lot\",\n                \"\
        building\",\n                \"room\",\n                \"dungeon\",\n                \"arena\",\n               \
        \ \"vehicle\",\n                \"prefab\",\n                \"cutscene\",\n                \"other\"\n          \
        \  ]\n        },\n        \"SceneNode\": {\n            \"type\": \"object\",\n            \"description\": \"A node
        in the scene hierarchy. Nodes can contain children to form\\na tree structure. Each node has a local transform relative
        to its parent.\\n\",\n            \"required\": [\n                \"nodeId\",\n                \"refId\",\n     \
        \           \"name\",\n                \"nodeType\",\n                \"localTransform\"\n            ],\n       \
        \     \"properties\": {\n                \"nodeId\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"uuid\",\n                    \"description\": \"Globally unique node identifier\"\n         \
        \       },\n                \"refId\": {\n                    \"type\": \"string\",\n                    \"pattern\"\
        : \"^[a-z][a-z0-9_]*$\",\n                    \"description\": \"Scene-local reference identifier. Must be unique
        within the scene.\\nUsed for scripting and cross-referencing. Examples: main_door, npc_spawn_1\\n\"\n            \
        \    },\n                \"parentNodeId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Parent node ID. Null
        for the root node only.\"\n                },\n                \"name\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Human-readable display name for the node\"\n                },\n       \
        \         \"nodeType\": {\n                    \"$ref\": \"#/$defs/NodeType\",\n                    \"description\"\
        : \"The structural type of this node\"\n                },\n                \"localTransform\": {\n              \
        \      \"$ref\": \"#/$defs/Transform\",\n                    \"description\": \"Transform relative to parent node\"\
        \n                },\n                \"asset\": {\n                    \"$ref\": \"#/$defs/AssetReference\",\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Optional asset binding (mesh, sound,
        particle effect)\"\n                },\n                \"children\": {\n                    \"type\": \"array\",\n\
        \                    \"items\": {\n                        \"$ref\": \"#/$defs/SceneNode\"\n                    },\n\
        \                    \"description\": \"Child nodes in the hierarchy\"\n                },\n                \"enabled\"\
        : {\n                    \"type\": \"boolean\",\n                    \"default\": true,\n                    \"description\"\
        : \"Whether this node is active in the scene definition\"\n                },\n                \"sortOrder\": {\n\
        \                    \"type\": \"integer\",\n                    \"default\": 0,\n                    \"description\"\
        : \"Ordering among siblings for deterministic iteration\"\n                },\n                \"tags\": {\n     \
        \               \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\
        \n                    },\n                    \"description\": \"Arbitrary tags for consumer filtering (e.g., entrance,
        spawn, interactive)\"\n                },\n                \"annotations\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                \
        \    \"description\": \"Consumer-specific data stored without interpretation.\\nUse namespaced keys (e.g., render.castShadows,
        game.interactionType).\\n\"\n                },\n                \"attachmentPoints\": {\n                    \"type\"\
        : \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/AttachmentPoint\"\n  \
        \                  },\n                    \"description\": \"Predefined locations for attaching child objects.\\\
        nUsed by Scene Composer for furniture decoration, wall accessories, etc.\\n\"\n                },\n              \
        \  \"affordances\": {\n                    \"type\": \"array\",\n                    \"items\": {\n              \
        \          \"$ref\": \"#/$defs/Affordance\"\n                    },\n                    \"description\": \"Interaction
        capabilities of this node.\\nUsed by AI navigation and character controllers.\\n\"\n                },\n         \
        \       \"assetSlot\": {\n                    \"$ref\": \"#/$defs/AssetSlot\",\n                    \"nullable\":
        true,\n                    \"description\": \"Procedural asset swapping configuration.\\nDefines which assets can
        substitute for this node's asset.\\n\"\n                },\n                \"markerType\": {\n                  \
        \  \"$ref\": \"#/$defs/MarkerType\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type of marker for marker nodes.\\nOnly relevant when nodeType is 'marker'.\\n\"\n                },\n       \
        \         \"volumeShape\": {\n                    \"$ref\": \"#/$defs/VolumeShape\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Shape of volume for volume nodes.\\nOnly relevant when nodeType is
        'volume'.\\n\"\n                },\n                \"volumeSize\": {\n                    \"$ref\": \"#/$defs/Vector3\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Size/extents of the volume (interpretation
        depends on volumeShape).\\nFor box: full dimensions. For sphere: x=radius. For capsule: x=radius, y=height.\\n\"\n\
        \                },\n                \"referenceSceneId\": {\n                    \"type\": \"string\",\n        \
        \            \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\":
        \"Scene ID to embed for reference nodes.\\nOnly relevant when nodeType is 'reference'.\\n\"\n                }\n \
        \           }\n        },\n        \"NodeType\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Structural node type. Indicates what kind of data the node contains,\\nnot how it will be used at runtime. Consumers
        interpret nodes according\\nto their own needs via tags and annotations.\\n\",\n            \"enum\": [\n        \
        \        \"group\",\n                \"mesh\",\n                \"marker\",\n                \"volume\",\n       \
        \         \"emitter\",\n                \"reference\",\n                \"custom\"\n            ]\n        },\n  \
        \      \"Transform\": {\n            \"type\": \"object\",\n            \"description\": \"Position, rotation, and
        scale in 3D space\",\n            \"required\": [\n                \"position\",\n                \"rotation\",\n\
        \                \"scale\"\n            ],\n            \"properties\": {\n                \"position\": {\n     \
        \               \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Position relative to parent\"\
        \n                },\n                \"rotation\": {\n                    \"$ref\": \"#/$defs/Quaternion\",\n   \
        \                 \"description\": \"Rotation relative to parent\"\n                },\n                \"scale\"\
        : {\n                    \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Scale relative to
        parent\"\n                }\n            }\n        },\n        \"Vector3\": {\n            \"type\": \"object\",\n\
        \            \"description\": \"A point or direction in 3D space\",\n            \"required\": [\n               \
        \ \"x\",\n                \"y\",\n                \"z\"\n            ],\n            \"properties\": {\n         \
        \       \"x\": {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n       \
        \             \"description\": \"X coordinate\"\n                },\n                \"y\": {\n                  \
        \  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\": \"Y coordinate\"\
        \n                },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"\
        format\": \"double\",\n                    \"description\": \"Z coordinate\"\n                }\n            }\n \
        \       },\n        \"Quaternion\": {\n            \"type\": \"object\",\n            \"description\": \"Rotation
        represented as a quaternion\",\n            \"required\": [\n                \"x\",\n                \"y\",\n    \
        \            \"z\",\n                \"w\"\n            ],\n            \"properties\": {\n                \"x\":
        {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"\
        description\": \"X component\"\n                },\n                \"y\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"double\",\n                    \"description\": \"Y component\"\n           \
        \     },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"format\": \"\
        double\",\n                    \"description\": \"Z component\"\n                },\n                \"w\": {\n  \
        \                  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\"\
        : \"W component (scalar)\"\n                }\n            }\n        },\n        \"AssetReference\": {\n        \
        \    \"type\": \"object\",\n            \"description\": \"Reference to an asset in lib-asset\",\n            \"required\"\
        : [\n                \"assetId\"\n            ],\n            \"properties\": {\n                \"bundleId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional bundle containing the asset\"\n                },\n     \
        \           \"assetId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n\
        \                    \"description\": \"Asset identifier in lib-asset\"\n                },\n                \"variantId\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Variant identifier (consumer interprets meaning)\"\n                }\n            }\n        },\n        \"AttachmentPoint\"\
        : {\n            \"type\": \"object\",\n            \"description\": \"A predefined location where child objects can
        be attached.\\nUsed for decorating furniture, walls, and other objects with accessories.\\nExample: A wall may have
        attachment points for paintings, shelves, or light fixtures.\\n\",\n            \"required\": [\n                \"\
        name\",\n                \"localTransform\"\n            ],\n            \"properties\": {\n                \"name\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Unique name for this attachment
        point within the node.\\nExamples: wall_hook_left, shelf_1, lamp_socket\\n\"\n                },\n               \
        \ \"localTransform\": {\n                    \"$ref\": \"#/$defs/Transform\",\n                    \"description\"\
        : \"Position and orientation relative to the owning node\"\n                },\n                \"acceptsTags\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Tags of assets that can attach here.\\nExamples:
        wall_decoration, picture_frame, plant\\n\"\n                },\n                \"defaultAsset\": {\n            \
        \        \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Default asset to display if no specific attachment is specified\"\n                },\n                \"attachedNodeId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        nullable\": true,\n                    \"description\": \"ID of the node currently attached at this point (runtime
        state)\"\n                }\n            }\n        },\n        \"Affordance\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Describes a capability or interaction mode for a node.\\nUsed by AI systems to understand
        what actions are possible and by\\ncharacter controllers for contextual animations.\\n\",\n            \"required\"\
        : [\n                \"type\"\n            ],\n            \"properties\": {\n                \"type\": {\n      \
        \              \"$ref\": \"#/$defs/AffordanceType\",\n                    \"description\": \"The type of affordance\"\
        \n                },\n                \"parameters\": {\n                    \"type\": \"object\",\n             \
        \       \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type-specific parameters. Examples:\\n- sittable: { height: 0.5, facing: [0,0,1] }\\n- door: { openAngle: 90,
        locked: false }\\n- container: { capacity: 10, itemTypes: [\\\"weapon\\\", \\\"consumable\\\"] }\\n\"\n          \
        \      }\n            }\n        },\n        \"AffordanceType\": {\n            \"type\": \"string\",\n          \
        \  \"description\": \"Types of affordances describing what an object can do or how it can be interacted with.\\nUsed
        by AI navigation, character controllers, and procedural content systems.\\n\",\n            \"enum\": [\n        \
        \        \"walkable\",\n                \"climbable\",\n                \"sittable\",\n                \"interactive\"\
        ,\n                \"collectible\",\n                \"destructible\",\n                \"container\",\n         \
        \       \"door\",\n                \"teleport\"\n            ]\n        },\n        \"AssetSlot\": {\n           \
        \ \"type\": \"object\",\n            \"description\": \"Defines acceptable asset types for procedural swapping at
        this node.\\nUsed by procedural generation systems to substitute assets while\\nmaintaining scene coherence.\\n\"\
        ,\n            \"required\": [\n                \"slotType\"\n            ],\n            \"properties\": {\n    \
        \            \"slotType\": {\n                    \"type\": \"string\",\n                    \"description\": \"Category
        of acceptable assets.\\nExamples: chair, table, wall_art, floor_lamp\\n\"\n                },\n                \"\
        acceptsTags\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                   \
        \     \"type\": \"string\"\n                    },\n                    \"description\": \"Tags that acceptable assets
        must have.\\nUsed for filtering when selecting random variations.\\n\"\n                },\n                \"defaultAsset\"\
        : {\n                    \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n        \
        \            \"description\": \"Default asset if no specific asset is bound\"\n                },\n              \
        \  \"variations\": {\n                    \"type\": \"array\",\n                    \"items\": {\n               \
        \         \"$ref\": \"#/$defs/AssetReference\"\n                    },\n                    \"description\": \"Pre-approved
        asset variations for random selection.\\nProcedural systems pick from this list rather than searching all assets.\\\
        n\"\n                }\n            }\n        },\n        \"MarkerType\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Types of marker nodes for spawn points, waypoints, and other positional markers.\"\
        ,\n            \"enum\": [\n                \"generic\",\n                \"spawn_point\",\n                \"npc_spawn\"\
        ,\n                \"waypoint\",\n                \"camera_point\",\n                \"light_point\",\n          \
        \      \"audio_point\",\n                \"trigger_point\"\n            ]\n        },\n        \"VolumeShape\": {\n\
        \            \"type\": \"string\",\n            \"description\": \"Shape of a volume node for spatial bounds\",\n\
        \            \"enum\": [\n                \"box\",\n                \"sphere\",\n                \"capsule\",\n  \
        \              \"cylinder\"\n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SceneResponse\"\
        ,\n    \"$defs\": {\n        \"SceneResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Standard response containing a scene\",\n            \"required\": [\n                \"scene\"\n            ],\n\
        \            \"properties\": {\n                \"scene\": {\n                    \"$ref\": \"#/$defs/Scene\",\n \
        \                   \"description\": \"The scene document\"\n                }\n            }\n        },\n      \
        \  \"Scene\": {\n            \"type\": \"object\",\n            \"description\": \"A complete scene document with
        hierarchical node structure\",\n            \"required\": [\n                \"sceneId\",\n                \"gameId\"\
        ,\n                \"sceneType\",\n                \"name\",\n                \"version\",\n                \"root\"\
        \n            ],\n            \"properties\": {\n                \"schema\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Schema identifier for validation\",\n                    \"default\": \"\
        bannou://schemas/scene/v1\"\n                },\n                \"sceneId\": {\n                    \"type\": \"\
        string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Unique scene identifier\"\
        \n                },\n                \"gameId\": {\n                    \"type\": \"string\",\n                 \
        \   \"description\": \"Game service identifier for partitioning. Treated as opaque string.\\nDefault is the nil UUID
        for unpartitioned scenes.\\n\",\n                    \"default\": \"00000000-0000-0000-0000-000000000000\"\n     \
        \           },\n                \"sceneType\": {\n                    \"$ref\": \"#/$defs/SceneType\",\n         \
        \           \"description\": \"Scene classification for querying and validation\"\n                },\n          \
        \      \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Human-readable
        scene name\"\n                },\n                \"description\": {\n                    \"type\": \"string\",\n\
        \                    \"nullable\": true,\n                    \"description\": \"Optional scene description\"\n  \
        \              },\n                \"version\": {\n                    \"type\": \"string\",\n                   \
        \ \"pattern\": \"^\\\\d+\\\\.\\\\d+\\\\.\\\\d+$\",\n                    \"description\": \"Semantic version (MAJOR.MINOR.PATCH)\"\
        \n                },\n                \"root\": {\n                    \"$ref\": \"#/$defs/SceneNode\",\n        \
        \            \"description\": \"Root node of the scene hierarchy\"\n                },\n                \"tags\":
        {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Searchable tags for filtering scenes\"\n\
        \                },\n                \"metadata\": {\n                    \"type\": \"object\",\n                \
        \    \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Scene-level metadata. Not interpreted by Scene service.\\nExamples: author, thumbnail, editor preferences, generator
        config.\\n\"\n                },\n                \"createdAt\": {\n                    \"type\": \"string\",\n  \
        \                  \"format\": \"date-time\",\n                    \"description\": \"When the scene was first created\"\
        \n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"date-time\",\n                    \"description\": \"When the scene was last modified\"\n   \
        \             }\n            }\n        },\n        \"SceneType\": {\n            \"type\": \"string\",\n        \
        \    \"description\": \"Scene classification for querying and validation rule lookup.\\nDifferent types may have different
        validation requirements per game.\\n\",\n            \"enum\": [\n                \"unknown\",\n                \"\
        region\",\n                \"city\",\n                \"district\",\n                \"lot\",\n                \"\
        building\",\n                \"room\",\n                \"dungeon\",\n                \"arena\",\n               \
        \ \"vehicle\",\n                \"prefab\",\n                \"cutscene\",\n                \"other\"\n          \
        \  ]\n        },\n        \"SceneNode\": {\n            \"type\": \"object\",\n            \"description\": \"A node
        in the scene hierarchy. Nodes can contain children to form\\na tree structure. Each node has a local transform relative
        to its parent.\\n\",\n            \"required\": [\n                \"nodeId\",\n                \"refId\",\n     \
        \           \"name\",\n                \"nodeType\",\n                \"localTransform\"\n            ],\n       \
        \     \"properties\": {\n                \"nodeId\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"uuid\",\n                    \"description\": \"Globally unique node identifier\"\n         \
        \       },\n                \"refId\": {\n                    \"type\": \"string\",\n                    \"pattern\"\
        : \"^[a-z][a-z0-9_]*$\",\n                    \"description\": \"Scene-local reference identifier. Must be unique
        within the scene.\\nUsed for scripting and cross-referencing. Examples: main_door, npc_spawn_1\\n\"\n            \
        \    },\n                \"parentNodeId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Parent node ID. Null
        for the root node only.\"\n                },\n                \"name\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Human-readable display name for the node\"\n                },\n       \
        \         \"nodeType\": {\n                    \"$ref\": \"#/$defs/NodeType\",\n                    \"description\"\
        : \"The structural type of this node\"\n                },\n                \"localTransform\": {\n              \
        \      \"$ref\": \"#/$defs/Transform\",\n                    \"description\": \"Transform relative to parent node\"\
        \n                },\n                \"asset\": {\n                    \"$ref\": \"#/$defs/AssetReference\",\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Optional asset binding (mesh, sound,
        particle effect)\"\n                },\n                \"children\": {\n                    \"type\": \"array\",\n\
        \                    \"items\": {\n                        \"$ref\": \"#/$defs/SceneNode\"\n                    },\n\
        \                    \"description\": \"Child nodes in the hierarchy\"\n                },\n                \"enabled\"\
        : {\n                    \"type\": \"boolean\",\n                    \"default\": true,\n                    \"description\"\
        : \"Whether this node is active in the scene definition\"\n                },\n                \"sortOrder\": {\n\
        \                    \"type\": \"integer\",\n                    \"default\": 0,\n                    \"description\"\
        : \"Ordering among siblings for deterministic iteration\"\n                },\n                \"tags\": {\n     \
        \               \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\
        \n                    },\n                    \"description\": \"Arbitrary tags for consumer filtering (e.g., entrance,
        spawn, interactive)\"\n                },\n                \"annotations\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                \
        \    \"description\": \"Consumer-specific data stored without interpretation.\\nUse namespaced keys (e.g., render.castShadows,
        game.interactionType).\\n\"\n                },\n                \"attachmentPoints\": {\n                    \"type\"\
        : \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/AttachmentPoint\"\n  \
        \                  },\n                    \"description\": \"Predefined locations for attaching child objects.\\\
        nUsed by Scene Composer for furniture decoration, wall accessories, etc.\\n\"\n                },\n              \
        \  \"affordances\": {\n                    \"type\": \"array\",\n                    \"items\": {\n              \
        \          \"$ref\": \"#/$defs/Affordance\"\n                    },\n                    \"description\": \"Interaction
        capabilities of this node.\\nUsed by AI navigation and character controllers.\\n\"\n                },\n         \
        \       \"assetSlot\": {\n                    \"$ref\": \"#/$defs/AssetSlot\",\n                    \"nullable\":
        true,\n                    \"description\": \"Procedural asset swapping configuration.\\nDefines which assets can
        substitute for this node's asset.\\n\"\n                },\n                \"markerType\": {\n                  \
        \  \"$ref\": \"#/$defs/MarkerType\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type of marker for marker nodes.\\nOnly relevant when nodeType is 'marker'.\\n\"\n                },\n       \
        \         \"volumeShape\": {\n                    \"$ref\": \"#/$defs/VolumeShape\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Shape of volume for volume nodes.\\nOnly relevant when nodeType is
        'volume'.\\n\"\n                },\n                \"volumeSize\": {\n                    \"$ref\": \"#/$defs/Vector3\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Size/extents of the volume (interpretation
        depends on volumeShape).\\nFor box: full dimensions. For sphere: x=radius. For capsule: x=radius, y=height.\\n\"\n\
        \                },\n                \"referenceSceneId\": {\n                    \"type\": \"string\",\n        \
        \            \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\":
        \"Scene ID to embed for reference nodes.\\nOnly relevant when nodeType is 'reference'.\\n\"\n                }\n \
        \           }\n        },\n        \"NodeType\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Structural node type. Indicates what kind of data the node contains,\\nnot how it will be used at runtime. Consumers
        interpret nodes according\\nto their own needs via tags and annotations.\\n\",\n            \"enum\": [\n        \
        \        \"group\",\n                \"mesh\",\n                \"marker\",\n                \"volume\",\n       \
        \         \"emitter\",\n                \"reference\",\n                \"custom\"\n            ]\n        },\n  \
        \      \"Transform\": {\n            \"type\": \"object\",\n            \"description\": \"Position, rotation, and
        scale in 3D space\",\n            \"required\": [\n                \"position\",\n                \"rotation\",\n\
        \                \"scale\"\n            ],\n            \"properties\": {\n                \"position\": {\n     \
        \               \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Position relative to parent\"\
        \n                },\n                \"rotation\": {\n                    \"$ref\": \"#/$defs/Quaternion\",\n   \
        \                 \"description\": \"Rotation relative to parent\"\n                },\n                \"scale\"\
        : {\n                    \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Scale relative to
        parent\"\n                }\n            }\n        },\n        \"Vector3\": {\n            \"type\": \"object\",\n\
        \            \"description\": \"A point or direction in 3D space\",\n            \"required\": [\n               \
        \ \"x\",\n                \"y\",\n                \"z\"\n            ],\n            \"properties\": {\n         \
        \       \"x\": {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n       \
        \             \"description\": \"X coordinate\"\n                },\n                \"y\": {\n                  \
        \  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\": \"Y coordinate\"\
        \n                },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"\
        format\": \"double\",\n                    \"description\": \"Z coordinate\"\n                }\n            }\n \
        \       },\n        \"Quaternion\": {\n            \"type\": \"object\",\n            \"description\": \"Rotation
        represented as a quaternion\",\n            \"required\": [\n                \"x\",\n                \"y\",\n    \
        \            \"z\",\n                \"w\"\n            ],\n            \"properties\": {\n                \"x\":
        {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"\
        description\": \"X component\"\n                },\n                \"y\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"double\",\n                    \"description\": \"Y component\"\n           \
        \     },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"format\": \"\
        double\",\n                    \"description\": \"Z component\"\n                },\n                \"w\": {\n  \
        \                  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\"\
        : \"W component (scalar)\"\n                }\n            }\n        },\n        \"AssetReference\": {\n        \
        \    \"type\": \"object\",\n            \"description\": \"Reference to an asset in lib-asset\",\n            \"required\"\
        : [\n                \"assetId\"\n            ],\n            \"properties\": {\n                \"bundleId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional bundle containing the asset\"\n                },\n     \
        \           \"assetId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n\
        \                    \"description\": \"Asset identifier in lib-asset\"\n                },\n                \"variantId\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Variant identifier (consumer interprets meaning)\"\n                }\n            }\n        },\n        \"AttachmentPoint\"\
        : {\n            \"type\": \"object\",\n            \"description\": \"A predefined location where child objects can
        be attached.\\nUsed for decorating furniture, walls, and other objects with accessories.\\nExample: A wall may have
        attachment points for paintings, shelves, or light fixtures.\\n\",\n            \"required\": [\n                \"\
        name\",\n                \"localTransform\"\n            ],\n            \"properties\": {\n                \"name\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Unique name for this attachment
        point within the node.\\nExamples: wall_hook_left, shelf_1, lamp_socket\\n\"\n                },\n               \
        \ \"localTransform\": {\n                    \"$ref\": \"#/$defs/Transform\",\n                    \"description\"\
        : \"Position and orientation relative to the owning node\"\n                },\n                \"acceptsTags\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Tags of assets that can attach here.\\nExamples:
        wall_decoration, picture_frame, plant\\n\"\n                },\n                \"defaultAsset\": {\n            \
        \        \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Default asset to display if no specific attachment is specified\"\n                },\n                \"attachedNodeId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        nullable\": true,\n                    \"description\": \"ID of the node currently attached at this point (runtime
        state)\"\n                }\n            }\n        },\n        \"Affordance\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Describes a capability or interaction mode for a node.\\nUsed by AI systems to understand
        what actions are possible and by\\ncharacter controllers for contextual animations.\\n\",\n            \"required\"\
        : [\n                \"type\"\n            ],\n            \"properties\": {\n                \"type\": {\n      \
        \              \"$ref\": \"#/$defs/AffordanceType\",\n                    \"description\": \"The type of affordance\"\
        \n                },\n                \"parameters\": {\n                    \"type\": \"object\",\n             \
        \       \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type-specific parameters. Examples:\\n- sittable: { height: 0.5, facing: [0,0,1] }\\n- door: { openAngle: 90,
        locked: false }\\n- container: { capacity: 10, itemTypes: [\\\"weapon\\\", \\\"consumable\\\"] }\\n\"\n          \
        \      }\n            }\n        },\n        \"AffordanceType\": {\n            \"type\": \"string\",\n          \
        \  \"description\": \"Types of affordances describing what an object can do or how it can be interacted with.\\nUsed
        by AI navigation, character controllers, and procedural content systems.\\n\",\n            \"enum\": [\n        \
        \        \"walkable\",\n                \"climbable\",\n                \"sittable\",\n                \"interactive\"\
        ,\n                \"collectible\",\n                \"destructible\",\n                \"container\",\n         \
        \       \"door\",\n                \"teleport\"\n            ]\n        },\n        \"AssetSlot\": {\n           \
        \ \"type\": \"object\",\n            \"description\": \"Defines acceptable asset types for procedural swapping at
        this node.\\nUsed by procedural generation systems to substitute assets while\\nmaintaining scene coherence.\\n\"\
        ,\n            \"required\": [\n                \"slotType\"\n            ],\n            \"properties\": {\n    \
        \            \"slotType\": {\n                    \"type\": \"string\",\n                    \"description\": \"Category
        of acceptable assets.\\nExamples: chair, table, wall_art, floor_lamp\\n\"\n                },\n                \"\
        acceptsTags\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                   \
        \     \"type\": \"string\"\n                    },\n                    \"description\": \"Tags that acceptable assets
        must have.\\nUsed for filtering when selecting random variations.\\n\"\n                },\n                \"defaultAsset\"\
        : {\n                    \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n        \
        \            \"description\": \"Default asset if no specific asset is bound\"\n                },\n              \
        \  \"variations\": {\n                    \"type\": \"array\",\n                    \"items\": {\n               \
        \         \"$ref\": \"#/$defs/AssetReference\"\n                    },\n                    \"description\": \"Pre-approved
        asset variations for random selection.\\nProcedural systems pick from this list rather than searching all assets.\\\
        n\"\n                }\n            }\n        },\n        \"MarkerType\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Types of marker nodes for spawn points, waypoints, and other positional markers.\"\
        ,\n            \"enum\": [\n                \"generic\",\n                \"spawn_point\",\n                \"npc_spawn\"\
        ,\n                \"waypoint\",\n                \"camera_point\",\n                \"light_point\",\n          \
        \      \"audio_point\",\n                \"trigger_point\"\n            ]\n        },\n        \"VolumeShape\": {\n\
        \            \"type\": \"string\",\n            \"description\": \"Shape of a volume node for spatial bounds\",\n\
        \            \"enum\": [\n                \"box\",\n                \"sphere\",\n                \"capsule\",\n  \
        \              \"cylinder\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Update a scene document\",\n    \"description\": \"Updates an existing
        scene document. Scene must not be checked out by\\nanother user. Increments the PATCH version automatically.\\nPublishes
        scene.updated event on success.\\n\",\n    \"tags\": [\n        \"Scene\"\n    ],\n    \"deprecated\": false,\n  \
        \  \"operationId\": \"updateScene\"\n}"
  /scene/delete:
    post:
      summary: Delete a scene
      description: |
        Soft-deletes a scene. The scene data remains recoverable via lib-asset
        for approximately 30 days. Cannot delete if other scenes reference this one.
        Publishes scene.deleted event on success.
      operationId: deleteScene
      tags:
      - Scene
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteSceneRequest'
      responses:
        '200':
          description: Scene deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteSceneResponse'
        '404':
          description: Scene not found
        '409':
          description: Cannot delete - other scenes reference this scene
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeleteSceneRequest\"\
        ,\n    \"$defs\": {\n        \"DeleteSceneRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to delete a scene\",\n            \"required\": [\n                \"sceneId\"\n            ],\n     \
        \       \"properties\": {\n                \"sceneId\": {\n                    \"type\": \"string\",\n           \
        \         \"format\": \"uuid\",\n                    \"description\": \"ID of the scene to delete\"\n            \
        \    },\n                \"reason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deletion (included in event)\"\n             \
        \   }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeleteSceneResponse\"\
        ,\n    \"$defs\": {\n        \"DeleteSceneResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Response confirming scene deletion\",\n            \"required\": [\n                \"deleted\"\n            ],\n\
        \            \"properties\": {\n                \"deleted\": {\n                    \"type\": \"boolean\",\n     \
        \               \"description\": \"Whether the scene was successfully deleted\"\n                },\n            \
        \    \"sceneId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n      \
        \              \"description\": \"ID of the deleted scene\"\n                },\n                \"referencingScenes\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\"\
        : \"string\",\n                        \"format\": \"uuid\"\n                    },\n                    \"nullable\"\
        : true,\n                    \"description\": \"If deletion failed, IDs of scenes that reference this one\"\n    \
        \            }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Delete a scene\",\n    \"description\": \"Soft-deletes a scene. The scene
        data remains recoverable via lib-asset\\nfor approximately 30 days. Cannot delete if other scenes reference this one.\\
        nPublishes scene.deleted event on success.\\n\",\n    \"tags\": [\n        \"Scene\"\n    ],\n    \"deprecated\":
        false,\n    \"operationId\": \"deleteScene\"\n}"
  /scene/validate:
    post:
      summary: Validate a scene structure
      description: |
        Validates a scene document without saving it. Checks structural validity
        and optionally applies game-specific validation rules.
      operationId: validateScene
      tags:
      - Scene
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ValidateSceneRequest'
      responses:
        '200':
          description: Validation result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationResult'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ValidateSceneRequest\"\
        ,\n    \"$defs\": {\n        \"ValidateSceneRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to validate a scene structure\",\n            \"required\": [\n                \"scene\"\n           \
        \ ],\n            \"properties\": {\n                \"scene\": {\n                    \"$ref\": \"#/$defs/Scene\"\
        ,\n                    \"description\": \"The scene to validate\"\n                },\n                \"applyGameRules\"\
        : {\n                    \"type\": \"boolean\",\n                    \"default\": true,\n                    \"description\"\
        : \"Whether to apply registered game-specific validation rules\"\n                }\n            }\n        },\n \
        \       \"Scene\": {\n            \"type\": \"object\",\n            \"description\": \"A complete scene document
        with hierarchical node structure\",\n            \"required\": [\n                \"sceneId\",\n                \"\
        gameId\",\n                \"sceneType\",\n                \"name\",\n                \"version\",\n             \
        \   \"root\"\n            ],\n            \"properties\": {\n                \"schema\": {\n                    \"\
        type\": \"string\",\n                    \"description\": \"Schema identifier for validation\",\n                \
        \    \"default\": \"bannou://schemas/scene/v1\"\n                },\n                \"sceneId\": {\n            \
        \        \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"\
        Unique scene identifier\"\n                },\n                \"gameId\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Game service identifier for partitioning. Treated as opaque string.\\nDefault
        is the nil UUID for unpartitioned scenes.\\n\",\n                    \"default\": \"00000000-0000-0000-0000-000000000000\"\
        \n                },\n                \"sceneType\": {\n                    \"$ref\": \"#/$defs/SceneType\",\n   \
        \                 \"description\": \"Scene classification for querying and validation\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Human-readable
        scene name\"\n                },\n                \"description\": {\n                    \"type\": \"string\",\n\
        \                    \"nullable\": true,\n                    \"description\": \"Optional scene description\"\n  \
        \              },\n                \"version\": {\n                    \"type\": \"string\",\n                   \
        \ \"pattern\": \"^\\\\d+\\\\.\\\\d+\\\\.\\\\d+$\",\n                    \"description\": \"Semantic version (MAJOR.MINOR.PATCH)\"\
        \n                },\n                \"root\": {\n                    \"$ref\": \"#/$defs/SceneNode\",\n        \
        \            \"description\": \"Root node of the scene hierarchy\"\n                },\n                \"tags\":
        {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Searchable tags for filtering scenes\"\n\
        \                },\n                \"metadata\": {\n                    \"type\": \"object\",\n                \
        \    \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Scene-level metadata. Not interpreted by Scene service.\\nExamples: author, thumbnail, editor preferences, generator
        config.\\n\"\n                },\n                \"createdAt\": {\n                    \"type\": \"string\",\n  \
        \                  \"format\": \"date-time\",\n                    \"description\": \"When the scene was first created\"\
        \n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"date-time\",\n                    \"description\": \"When the scene was last modified\"\n   \
        \             }\n            }\n        },\n        \"SceneType\": {\n            \"type\": \"string\",\n        \
        \    \"description\": \"Scene classification for querying and validation rule lookup.\\nDifferent types may have different
        validation requirements per game.\\n\",\n            \"enum\": [\n                \"unknown\",\n                \"\
        region\",\n                \"city\",\n                \"district\",\n                \"lot\",\n                \"\
        building\",\n                \"room\",\n                \"dungeon\",\n                \"arena\",\n               \
        \ \"vehicle\",\n                \"prefab\",\n                \"cutscene\",\n                \"other\"\n          \
        \  ]\n        },\n        \"SceneNode\": {\n            \"type\": \"object\",\n            \"description\": \"A node
        in the scene hierarchy. Nodes can contain children to form\\na tree structure. Each node has a local transform relative
        to its parent.\\n\",\n            \"required\": [\n                \"nodeId\",\n                \"refId\",\n     \
        \           \"name\",\n                \"nodeType\",\n                \"localTransform\"\n            ],\n       \
        \     \"properties\": {\n                \"nodeId\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"uuid\",\n                    \"description\": \"Globally unique node identifier\"\n         \
        \       },\n                \"refId\": {\n                    \"type\": \"string\",\n                    \"pattern\"\
        : \"^[a-z][a-z0-9_]*$\",\n                    \"description\": \"Scene-local reference identifier. Must be unique
        within the scene.\\nUsed for scripting and cross-referencing. Examples: main_door, npc_spawn_1\\n\"\n            \
        \    },\n                \"parentNodeId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Parent node ID. Null
        for the root node only.\"\n                },\n                \"name\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Human-readable display name for the node\"\n                },\n       \
        \         \"nodeType\": {\n                    \"$ref\": \"#/$defs/NodeType\",\n                    \"description\"\
        : \"The structural type of this node\"\n                },\n                \"localTransform\": {\n              \
        \      \"$ref\": \"#/$defs/Transform\",\n                    \"description\": \"Transform relative to parent node\"\
        \n                },\n                \"asset\": {\n                    \"$ref\": \"#/$defs/AssetReference\",\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Optional asset binding (mesh, sound,
        particle effect)\"\n                },\n                \"children\": {\n                    \"type\": \"array\",\n\
        \                    \"items\": {\n                        \"$ref\": \"#/$defs/SceneNode\"\n                    },\n\
        \                    \"description\": \"Child nodes in the hierarchy\"\n                },\n                \"enabled\"\
        : {\n                    \"type\": \"boolean\",\n                    \"default\": true,\n                    \"description\"\
        : \"Whether this node is active in the scene definition\"\n                },\n                \"sortOrder\": {\n\
        \                    \"type\": \"integer\",\n                    \"default\": 0,\n                    \"description\"\
        : \"Ordering among siblings for deterministic iteration\"\n                },\n                \"tags\": {\n     \
        \               \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\
        \n                    },\n                    \"description\": \"Arbitrary tags for consumer filtering (e.g., entrance,
        spawn, interactive)\"\n                },\n                \"annotations\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                \
        \    \"description\": \"Consumer-specific data stored without interpretation.\\nUse namespaced keys (e.g., render.castShadows,
        game.interactionType).\\n\"\n                },\n                \"attachmentPoints\": {\n                    \"type\"\
        : \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/AttachmentPoint\"\n  \
        \                  },\n                    \"description\": \"Predefined locations for attaching child objects.\\\
        nUsed by Scene Composer for furniture decoration, wall accessories, etc.\\n\"\n                },\n              \
        \  \"affordances\": {\n                    \"type\": \"array\",\n                    \"items\": {\n              \
        \          \"$ref\": \"#/$defs/Affordance\"\n                    },\n                    \"description\": \"Interaction
        capabilities of this node.\\nUsed by AI navigation and character controllers.\\n\"\n                },\n         \
        \       \"assetSlot\": {\n                    \"$ref\": \"#/$defs/AssetSlot\",\n                    \"nullable\":
        true,\n                    \"description\": \"Procedural asset swapping configuration.\\nDefines which assets can
        substitute for this node's asset.\\n\"\n                },\n                \"markerType\": {\n                  \
        \  \"$ref\": \"#/$defs/MarkerType\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type of marker for marker nodes.\\nOnly relevant when nodeType is 'marker'.\\n\"\n                },\n       \
        \         \"volumeShape\": {\n                    \"$ref\": \"#/$defs/VolumeShape\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Shape of volume for volume nodes.\\nOnly relevant when nodeType is
        'volume'.\\n\"\n                },\n                \"volumeSize\": {\n                    \"$ref\": \"#/$defs/Vector3\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Size/extents of the volume (interpretation
        depends on volumeShape).\\nFor box: full dimensions. For sphere: x=radius. For capsule: x=radius, y=height.\\n\"\n\
        \                },\n                \"referenceSceneId\": {\n                    \"type\": \"string\",\n        \
        \            \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\":
        \"Scene ID to embed for reference nodes.\\nOnly relevant when nodeType is 'reference'.\\n\"\n                }\n \
        \           }\n        },\n        \"NodeType\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Structural node type. Indicates what kind of data the node contains,\\nnot how it will be used at runtime. Consumers
        interpret nodes according\\nto their own needs via tags and annotations.\\n\",\n            \"enum\": [\n        \
        \        \"group\",\n                \"mesh\",\n                \"marker\",\n                \"volume\",\n       \
        \         \"emitter\",\n                \"reference\",\n                \"custom\"\n            ]\n        },\n  \
        \      \"Transform\": {\n            \"type\": \"object\",\n            \"description\": \"Position, rotation, and
        scale in 3D space\",\n            \"required\": [\n                \"position\",\n                \"rotation\",\n\
        \                \"scale\"\n            ],\n            \"properties\": {\n                \"position\": {\n     \
        \               \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Position relative to parent\"\
        \n                },\n                \"rotation\": {\n                    \"$ref\": \"#/$defs/Quaternion\",\n   \
        \                 \"description\": \"Rotation relative to parent\"\n                },\n                \"scale\"\
        : {\n                    \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Scale relative to
        parent\"\n                }\n            }\n        },\n        \"Vector3\": {\n            \"type\": \"object\",\n\
        \            \"description\": \"A point or direction in 3D space\",\n            \"required\": [\n               \
        \ \"x\",\n                \"y\",\n                \"z\"\n            ],\n            \"properties\": {\n         \
        \       \"x\": {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n       \
        \             \"description\": \"X coordinate\"\n                },\n                \"y\": {\n                  \
        \  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\": \"Y coordinate\"\
        \n                },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"\
        format\": \"double\",\n                    \"description\": \"Z coordinate\"\n                }\n            }\n \
        \       },\n        \"Quaternion\": {\n            \"type\": \"object\",\n            \"description\": \"Rotation
        represented as a quaternion\",\n            \"required\": [\n                \"x\",\n                \"y\",\n    \
        \            \"z\",\n                \"w\"\n            ],\n            \"properties\": {\n                \"x\":
        {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"\
        description\": \"X component\"\n                },\n                \"y\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"double\",\n                    \"description\": \"Y component\"\n           \
        \     },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"format\": \"\
        double\",\n                    \"description\": \"Z component\"\n                },\n                \"w\": {\n  \
        \                  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\"\
        : \"W component (scalar)\"\n                }\n            }\n        },\n        \"AssetReference\": {\n        \
        \    \"type\": \"object\",\n            \"description\": \"Reference to an asset in lib-asset\",\n            \"required\"\
        : [\n                \"assetId\"\n            ],\n            \"properties\": {\n                \"bundleId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional bundle containing the asset\"\n                },\n     \
        \           \"assetId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n\
        \                    \"description\": \"Asset identifier in lib-asset\"\n                },\n                \"variantId\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Variant identifier (consumer interprets meaning)\"\n                }\n            }\n        },\n        \"AttachmentPoint\"\
        : {\n            \"type\": \"object\",\n            \"description\": \"A predefined location where child objects can
        be attached.\\nUsed for decorating furniture, walls, and other objects with accessories.\\nExample: A wall may have
        attachment points for paintings, shelves, or light fixtures.\\n\",\n            \"required\": [\n                \"\
        name\",\n                \"localTransform\"\n            ],\n            \"properties\": {\n                \"name\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Unique name for this attachment
        point within the node.\\nExamples: wall_hook_left, shelf_1, lamp_socket\\n\"\n                },\n               \
        \ \"localTransform\": {\n                    \"$ref\": \"#/$defs/Transform\",\n                    \"description\"\
        : \"Position and orientation relative to the owning node\"\n                },\n                \"acceptsTags\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Tags of assets that can attach here.\\nExamples:
        wall_decoration, picture_frame, plant\\n\"\n                },\n                \"defaultAsset\": {\n            \
        \        \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Default asset to display if no specific attachment is specified\"\n                },\n                \"attachedNodeId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        nullable\": true,\n                    \"description\": \"ID of the node currently attached at this point (runtime
        state)\"\n                }\n            }\n        },\n        \"Affordance\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Describes a capability or interaction mode for a node.\\nUsed by AI systems to understand
        what actions are possible and by\\ncharacter controllers for contextual animations.\\n\",\n            \"required\"\
        : [\n                \"type\"\n            ],\n            \"properties\": {\n                \"type\": {\n      \
        \              \"$ref\": \"#/$defs/AffordanceType\",\n                    \"description\": \"The type of affordance\"\
        \n                },\n                \"parameters\": {\n                    \"type\": \"object\",\n             \
        \       \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type-specific parameters. Examples:\\n- sittable: { height: 0.5, facing: [0,0,1] }\\n- door: { openAngle: 90,
        locked: false }\\n- container: { capacity: 10, itemTypes: [\\\"weapon\\\", \\\"consumable\\\"] }\\n\"\n          \
        \      }\n            }\n        },\n        \"AffordanceType\": {\n            \"type\": \"string\",\n          \
        \  \"description\": \"Types of affordances describing what an object can do or how it can be interacted with.\\nUsed
        by AI navigation, character controllers, and procedural content systems.\\n\",\n            \"enum\": [\n        \
        \        \"walkable\",\n                \"climbable\",\n                \"sittable\",\n                \"interactive\"\
        ,\n                \"collectible\",\n                \"destructible\",\n                \"container\",\n         \
        \       \"door\",\n                \"teleport\"\n            ]\n        },\n        \"AssetSlot\": {\n           \
        \ \"type\": \"object\",\n            \"description\": \"Defines acceptable asset types for procedural swapping at
        this node.\\nUsed by procedural generation systems to substitute assets while\\nmaintaining scene coherence.\\n\"\
        ,\n            \"required\": [\n                \"slotType\"\n            ],\n            \"properties\": {\n    \
        \            \"slotType\": {\n                    \"type\": \"string\",\n                    \"description\": \"Category
        of acceptable assets.\\nExamples: chair, table, wall_art, floor_lamp\\n\"\n                },\n                \"\
        acceptsTags\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                   \
        \     \"type\": \"string\"\n                    },\n                    \"description\": \"Tags that acceptable assets
        must have.\\nUsed for filtering when selecting random variations.\\n\"\n                },\n                \"defaultAsset\"\
        : {\n                    \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n        \
        \            \"description\": \"Default asset if no specific asset is bound\"\n                },\n              \
        \  \"variations\": {\n                    \"type\": \"array\",\n                    \"items\": {\n               \
        \         \"$ref\": \"#/$defs/AssetReference\"\n                    },\n                    \"description\": \"Pre-approved
        asset variations for random selection.\\nProcedural systems pick from this list rather than searching all assets.\\\
        n\"\n                }\n            }\n        },\n        \"MarkerType\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Types of marker nodes for spawn points, waypoints, and other positional markers.\"\
        ,\n            \"enum\": [\n                \"generic\",\n                \"spawn_point\",\n                \"npc_spawn\"\
        ,\n                \"waypoint\",\n                \"camera_point\",\n                \"light_point\",\n          \
        \      \"audio_point\",\n                \"trigger_point\"\n            ]\n        },\n        \"VolumeShape\": {\n\
        \            \"type\": \"string\",\n            \"description\": \"Shape of a volume node for spatial bounds\",\n\
        \            \"enum\": [\n                \"box\",\n                \"sphere\",\n                \"capsule\",\n  \
        \              \"cylinder\"\n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ValidationResult\"\
        ,\n    \"$defs\": {\n        \"ValidationResult\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Result of scene validation\",\n            \"required\": [\n                \"valid\"\n            ],\n      \
        \      \"properties\": {\n                \"valid\": {\n                    \"type\": \"boolean\",\n             \
        \       \"description\": \"Whether the scene passed all validation checks\"\n                },\n                \"\
        errors\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"\
        $ref\": \"#/$defs/ValidationError\"\n                    },\n                    \"nullable\": true,\n           \
        \         \"description\": \"Validation errors (severity = error)\"\n                },\n                \"warnings\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"$ref\"\
        : \"#/$defs/ValidationError\"\n                    },\n                    \"nullable\": true,\n                 \
        \   \"description\": \"Validation warnings (severity = warning)\"\n                }\n            }\n        },\n\
        \        \"ValidationError\": {\n            \"type\": \"object\",\n            \"description\": \"A single validation
        error or warning\",\n            \"required\": [\n                \"ruleId\",\n                \"message\",\n    \
        \            \"severity\"\n            ],\n            \"properties\": {\n                \"ruleId\": {\n        \
        \            \"type\": \"string\",\n                    \"description\": \"Identifier of the validation rule that
        triggered this\"\n                },\n                \"message\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Human-readable error message\"\n                },\n                \"severity\"\
        : {\n                    \"$ref\": \"#/$defs/ValidationSeverity\",\n                    \"description\": \"Severity
        level\"\n                },\n                \"nodePath\": {\n                    \"type\": \"string\",\n        \
        \            \"nullable\": true,\n                    \"description\": \"Path to the problematic node (e.g., root.children[0].children[2])\"\
        \n                },\n                \"nodeId\": {\n                    \"type\": \"string\",\n                 \
        \   \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"ID of the
        problematic node\"\n                },\n                \"context\": {\n                    \"type\": \"object\",\n\
        \                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Additional context for the error\"\n                }\n            }\n        },\n        \"\
        ValidationSeverity\": {\n            \"type\": \"string\",\n            \"description\": \"Severity level of a validation
        issue\",\n            \"enum\": [\n                \"error\",\n                \"warning\"\n            ]\n      \
        \  }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Validate a scene structure\",\n    \"description\": \"Validates a scene
        document without saving it. Checks structural validity\\nand optionally applies game-specific validation rules.\\\
        n\",\n    \"tags\": [\n        \"Scene\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"validateScene\"\
        \n}"
  /scene/instantiate:
    post:
      summary: Declare that a scene was instantiated in the game world
      description: |
        Records a scene instantiation and publishes an event. This is a
        NOTIFICATION endpoint - the caller has already instantiated the scene.

        1. Validates scene exists and is accessible
        2. Publishes scene.instantiated event

        Consumers (Mapping, Actor, etc.) react to the event independently.
      operationId: instantiateScene
      tags:
      - Instance
      x-permissions: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InstantiateSceneRequest'
      responses:
        '200':
          description: Instantiation recorded and event published
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InstantiateSceneResponse'
        '404':
          description: Scene not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/InstantiateSceneRequest\"\
        ,\n    \"$defs\": {\n        \"InstantiateSceneRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to record a scene instantiation\",\n            \"required\": [\n                \"sceneAssetId\",\n \
        \               \"instanceId\",\n                \"regionId\",\n                \"worldTransform\"\n            ],\n\
        \            \"properties\": {\n                \"sceneAssetId\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"uuid\",\n                    \"description\": \"Scene asset ID that was instantiated\"\
        \n                },\n                \"version\": {\n                    \"type\": \"string\",\n                \
        \    \"nullable\": true,\n                    \"description\": \"Specific version (null = validates latest exists)\"\
        \n                },\n                \"instanceId\": {\n                    \"type\": \"string\",\n             \
        \       \"format\": \"uuid\",\n                    \"description\": \"Caller-provided unique instance ID\"\n     \
        \           },\n                \"regionId\": {\n                    \"type\": \"string\",\n                    \"\
        format\": \"uuid\",\n                    \"description\": \"Region where scene was placed\"\n                },\n\
        \                \"worldTransform\": {\n                    \"$ref\": \"#/$defs/Transform\",\n                   \
        \ \"description\": \"World-space transform for scene origin\"\n                },\n                \"metadata\": {\n\
        \                    \"type\": \"object\",\n                    \"additionalProperties\": true,\n                \
        \    \"nullable\": true,\n                    \"description\": \"Caller-provided metadata passed to event\"\n    \
        \            }\n            }\n        },\n        \"Transform\": {\n            \"type\": \"object\",\n         \
        \   \"description\": \"Position, rotation, and scale in 3D space\",\n            \"required\": [\n               \
        \ \"position\",\n                \"rotation\",\n                \"scale\"\n            ],\n            \"properties\"\
        : {\n                \"position\": {\n                    \"$ref\": \"#/$defs/Vector3\",\n                    \"description\"\
        : \"Position relative to parent\"\n                },\n                \"rotation\": {\n                    \"$ref\"\
        : \"#/$defs/Quaternion\",\n                    \"description\": \"Rotation relative to parent\"\n                },\n\
        \                \"scale\": {\n                    \"$ref\": \"#/$defs/Vector3\",\n                    \"description\"\
        : \"Scale relative to parent\"\n                }\n            }\n        },\n        \"Vector3\": {\n           \
        \ \"type\": \"object\",\n            \"description\": \"A point or direction in 3D space\",\n            \"required\"\
        : [\n                \"x\",\n                \"y\",\n                \"z\"\n            ],\n            \"properties\"\
        : {\n                \"x\": {\n                    \"type\": \"number\",\n                    \"format\": \"double\"\
        ,\n                    \"description\": \"X coordinate\"\n                },\n                \"y\": {\n         \
        \           \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\"\
        : \"Y coordinate\"\n                },\n                \"z\": {\n                    \"type\": \"number\",\n    \
        \                \"format\": \"double\",\n                    \"description\": \"Z coordinate\"\n                }\n\
        \            }\n        },\n        \"Quaternion\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Rotation represented as a quaternion\",\n            \"required\": [\n                \"x\",\n               \
        \ \"y\",\n                \"z\",\n                \"w\"\n            ],\n            \"properties\": {\n         \
        \       \"x\": {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n       \
        \             \"description\": \"X component\"\n                },\n                \"y\": {\n                   \
        \ \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\": \"Y component\"\
        \n                },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"\
        format\": \"double\",\n                    \"description\": \"Z component\"\n                },\n                \"\
        w\": {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n                 \
        \   \"description\": \"W component (scalar)\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/InstantiateSceneResponse\"\
        ,\n    \"$defs\": {\n        \"InstantiateSceneResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Response confirming instantiation\",\n            \"required\": [\n                \"instanceId\",\n         \
        \       \"sceneVersion\"\n            ],\n            \"properties\": {\n                \"instanceId\": {\n     \
        \               \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"The instance ID\"\n                },\n                \"sceneVersion\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Version that was instantiated\"\n                },\n                \"\
        eventPublished\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether the
        event was successfully published\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Declare that a scene was instantiated in the game world\",\n    \"description\"\
        : \"Records a scene instantiation and publishes an event. This is a\\nNOTIFICATION endpoint - the caller has already
        instantiated the scene.\\n\\n1. Validates scene exists and is accessible\\n2. Publishes scene.instantiated event\\
        n\\nConsumers (Mapping, Actor, etc.) react to the event independently.\\n\",\n    \"tags\": [\n        \"Instance\"\
        \n    ],\n    \"deprecated\": false,\n    \"operationId\": \"instantiateScene\"\n}"
  /scene/destroy-instance:
    post:
      summary: Declare that a scene instance was removed
      description: |
        Records instance destruction and publishes an event.
        Consumers react to clean up spatial data, despawn NPCs, etc.
      operationId: destroyInstance
      tags:
      - Instance
      x-permissions: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DestroyInstanceRequest'
      responses:
        '200':
          description: Destruction recorded and event published
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DestroyInstanceResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DestroyInstanceRequest\"\
        ,\n    \"$defs\": {\n        \"DestroyInstanceRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to record instance destruction\",\n            \"required\": [\n                \"instanceId\"\n     \
        \       ],\n            \"properties\": {\n                \"instanceId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Instance ID to destroy\"\n  \
        \              },\n                \"regionId\": {\n                    \"type\": \"string\",\n                  \
        \  \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Region where
        instance was (for event metadata)\"\n                },\n                \"sceneAssetId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n    \
        \                \"description\": \"Scene asset ID (for event metadata)\"\n                },\n                \"\
        metadata\": {\n                    \"type\": \"object\",\n                    \"additionalProperties\": true,\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Caller-provided metadata\"\n      \
        \          }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DestroyInstanceResponse\"\
        ,\n    \"$defs\": {\n        \"DestroyInstanceResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Response confirming destruction\",\n            \"required\": [\n                \"destroyed\"\n            ],\n\
        \            \"properties\": {\n                \"destroyed\": {\n                    \"type\": \"boolean\",\n   \
        \                 \"description\": \"Whether destruction was recorded\"\n                },\n                \"eventPublished\"\
        : {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether the event was successfully
        published\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Declare that a scene instance was removed\",\n    \"description\": \"Records
        instance destruction and publishes an event.\\nConsumers react to clean up spatial data, despawn NPCs, etc.\\n\",\n\
        \    \"tags\": [\n        \"Instance\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"destroyInstance\"\
        \n}"
  /scene/checkout:
    post:
      summary: Lock a scene for editing
      description: |
        Acquires an exclusive lock on the scene for editing.
        Returns a checkout token required for commit.
        Lock expires after TTL if not extended via heartbeat.
      operationId: checkoutScene
      tags:
      - Versioning
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CheckoutRequest'
      responses:
        '200':
          description: Checkout successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CheckoutResponse'
        '404':
          description: Scene not found
        '409':
          description: Scene already checked out by another user
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/CheckoutRequest\"\
        ,\n    \"$defs\": {\n        \"CheckoutRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to checkout a scene for editing\",\n            \"required\": [\n                \"sceneId\"\n       \
        \     ],\n            \"properties\": {\n                \"sceneId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Scene to checkout\"\n       \
        \         },\n                \"editorId\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional editor identifier (defaults to caller identity)\"\n     \
        \           },\n                \"ttlMinutes\": {\n                    \"type\": \"integer\",\n                  \
        \  \"nullable\": true,\n                    \"description\": \"Custom lock TTL (uses default if not specified)\"\n\
        \                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/CheckoutResponse\"\
        ,\n    \"$defs\": {\n        \"CheckoutResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Response containing checkout token and scene\",\n            \"required\": [\n                \"checkoutToken\"\
        ,\n                \"scene\",\n                \"expiresAt\"\n            ],\n            \"properties\": {\n    \
        \            \"checkoutToken\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Token required for commit/discard/heartbeat\"\n                },\n                \"scene\": {\n            \
        \        \"$ref\": \"#/$defs/Scene\",\n                    \"description\": \"Current scene document\"\n         \
        \       },\n                \"expiresAt\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"date-time\",\n                    \"description\": \"When the checkout lock expires\"\n                }\n   \
        \         }\n        },\n        \"Scene\": {\n            \"type\": \"object\",\n            \"description\": \"\
        A complete scene document with hierarchical node structure\",\n            \"required\": [\n                \"sceneId\"\
        ,\n                \"gameId\",\n                \"sceneType\",\n                \"name\",\n                \"version\"\
        ,\n                \"root\"\n            ],\n            \"properties\": {\n                \"schema\": {\n      \
        \              \"type\": \"string\",\n                    \"description\": \"Schema identifier for validation\",\n\
        \                    \"default\": \"bannou://schemas/scene/v1\"\n                },\n                \"sceneId\":
        {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique scene identifier\"\n                },\n                \"gameId\": {\n                    \"type\": \"\
        string\",\n                    \"description\": \"Game service identifier for partitioning. Treated as opaque string.\\
        nDefault is the nil UUID for unpartitioned scenes.\\n\",\n                    \"default\": \"00000000-0000-0000-0000-000000000000\"\
        \n                },\n                \"sceneType\": {\n                    \"$ref\": \"#/$defs/SceneType\",\n   \
        \                 \"description\": \"Scene classification for querying and validation\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Human-readable
        scene name\"\n                },\n                \"description\": {\n                    \"type\": \"string\",\n\
        \                    \"nullable\": true,\n                    \"description\": \"Optional scene description\"\n  \
        \              },\n                \"version\": {\n                    \"type\": \"string\",\n                   \
        \ \"pattern\": \"^\\\\d+\\\\.\\\\d+\\\\.\\\\d+$\",\n                    \"description\": \"Semantic version (MAJOR.MINOR.PATCH)\"\
        \n                },\n                \"root\": {\n                    \"$ref\": \"#/$defs/SceneNode\",\n        \
        \            \"description\": \"Root node of the scene hierarchy\"\n                },\n                \"tags\":
        {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Searchable tags for filtering scenes\"\n\
        \                },\n                \"metadata\": {\n                    \"type\": \"object\",\n                \
        \    \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Scene-level metadata. Not interpreted by Scene service.\\nExamples: author, thumbnail, editor preferences, generator
        config.\\n\"\n                },\n                \"createdAt\": {\n                    \"type\": \"string\",\n  \
        \                  \"format\": \"date-time\",\n                    \"description\": \"When the scene was first created\"\
        \n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"date-time\",\n                    \"description\": \"When the scene was last modified\"\n   \
        \             }\n            }\n        },\n        \"SceneType\": {\n            \"type\": \"string\",\n        \
        \    \"description\": \"Scene classification for querying and validation rule lookup.\\nDifferent types may have different
        validation requirements per game.\\n\",\n            \"enum\": [\n                \"unknown\",\n                \"\
        region\",\n                \"city\",\n                \"district\",\n                \"lot\",\n                \"\
        building\",\n                \"room\",\n                \"dungeon\",\n                \"arena\",\n               \
        \ \"vehicle\",\n                \"prefab\",\n                \"cutscene\",\n                \"other\"\n          \
        \  ]\n        },\n        \"SceneNode\": {\n            \"type\": \"object\",\n            \"description\": \"A node
        in the scene hierarchy. Nodes can contain children to form\\na tree structure. Each node has a local transform relative
        to its parent.\\n\",\n            \"required\": [\n                \"nodeId\",\n                \"refId\",\n     \
        \           \"name\",\n                \"nodeType\",\n                \"localTransform\"\n            ],\n       \
        \     \"properties\": {\n                \"nodeId\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"uuid\",\n                    \"description\": \"Globally unique node identifier\"\n         \
        \       },\n                \"refId\": {\n                    \"type\": \"string\",\n                    \"pattern\"\
        : \"^[a-z][a-z0-9_]*$\",\n                    \"description\": \"Scene-local reference identifier. Must be unique
        within the scene.\\nUsed for scripting and cross-referencing. Examples: main_door, npc_spawn_1\\n\"\n            \
        \    },\n                \"parentNodeId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Parent node ID. Null
        for the root node only.\"\n                },\n                \"name\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Human-readable display name for the node\"\n                },\n       \
        \         \"nodeType\": {\n                    \"$ref\": \"#/$defs/NodeType\",\n                    \"description\"\
        : \"The structural type of this node\"\n                },\n                \"localTransform\": {\n              \
        \      \"$ref\": \"#/$defs/Transform\",\n                    \"description\": \"Transform relative to parent node\"\
        \n                },\n                \"asset\": {\n                    \"$ref\": \"#/$defs/AssetReference\",\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Optional asset binding (mesh, sound,
        particle effect)\"\n                },\n                \"children\": {\n                    \"type\": \"array\",\n\
        \                    \"items\": {\n                        \"$ref\": \"#/$defs/SceneNode\"\n                    },\n\
        \                    \"description\": \"Child nodes in the hierarchy\"\n                },\n                \"enabled\"\
        : {\n                    \"type\": \"boolean\",\n                    \"default\": true,\n                    \"description\"\
        : \"Whether this node is active in the scene definition\"\n                },\n                \"sortOrder\": {\n\
        \                    \"type\": \"integer\",\n                    \"default\": 0,\n                    \"description\"\
        : \"Ordering among siblings for deterministic iteration\"\n                },\n                \"tags\": {\n     \
        \               \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\
        \n                    },\n                    \"description\": \"Arbitrary tags for consumer filtering (e.g., entrance,
        spawn, interactive)\"\n                },\n                \"annotations\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                \
        \    \"description\": \"Consumer-specific data stored without interpretation.\\nUse namespaced keys (e.g., render.castShadows,
        game.interactionType).\\n\"\n                },\n                \"attachmentPoints\": {\n                    \"type\"\
        : \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/AttachmentPoint\"\n  \
        \                  },\n                    \"description\": \"Predefined locations for attaching child objects.\\\
        nUsed by Scene Composer for furniture decoration, wall accessories, etc.\\n\"\n                },\n              \
        \  \"affordances\": {\n                    \"type\": \"array\",\n                    \"items\": {\n              \
        \          \"$ref\": \"#/$defs/Affordance\"\n                    },\n                    \"description\": \"Interaction
        capabilities of this node.\\nUsed by AI navigation and character controllers.\\n\"\n                },\n         \
        \       \"assetSlot\": {\n                    \"$ref\": \"#/$defs/AssetSlot\",\n                    \"nullable\":
        true,\n                    \"description\": \"Procedural asset swapping configuration.\\nDefines which assets can
        substitute for this node's asset.\\n\"\n                },\n                \"markerType\": {\n                  \
        \  \"$ref\": \"#/$defs/MarkerType\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type of marker for marker nodes.\\nOnly relevant when nodeType is 'marker'.\\n\"\n                },\n       \
        \         \"volumeShape\": {\n                    \"$ref\": \"#/$defs/VolumeShape\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Shape of volume for volume nodes.\\nOnly relevant when nodeType is
        'volume'.\\n\"\n                },\n                \"volumeSize\": {\n                    \"$ref\": \"#/$defs/Vector3\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Size/extents of the volume (interpretation
        depends on volumeShape).\\nFor box: full dimensions. For sphere: x=radius. For capsule: x=radius, y=height.\\n\"\n\
        \                },\n                \"referenceSceneId\": {\n                    \"type\": \"string\",\n        \
        \            \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\":
        \"Scene ID to embed for reference nodes.\\nOnly relevant when nodeType is 'reference'.\\n\"\n                }\n \
        \           }\n        },\n        \"NodeType\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Structural node type. Indicates what kind of data the node contains,\\nnot how it will be used at runtime. Consumers
        interpret nodes according\\nto their own needs via tags and annotations.\\n\",\n            \"enum\": [\n        \
        \        \"group\",\n                \"mesh\",\n                \"marker\",\n                \"volume\",\n       \
        \         \"emitter\",\n                \"reference\",\n                \"custom\"\n            ]\n        },\n  \
        \      \"Transform\": {\n            \"type\": \"object\",\n            \"description\": \"Position, rotation, and
        scale in 3D space\",\n            \"required\": [\n                \"position\",\n                \"rotation\",\n\
        \                \"scale\"\n            ],\n            \"properties\": {\n                \"position\": {\n     \
        \               \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Position relative to parent\"\
        \n                },\n                \"rotation\": {\n                    \"$ref\": \"#/$defs/Quaternion\",\n   \
        \                 \"description\": \"Rotation relative to parent\"\n                },\n                \"scale\"\
        : {\n                    \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Scale relative to
        parent\"\n                }\n            }\n        },\n        \"Vector3\": {\n            \"type\": \"object\",\n\
        \            \"description\": \"A point or direction in 3D space\",\n            \"required\": [\n               \
        \ \"x\",\n                \"y\",\n                \"z\"\n            ],\n            \"properties\": {\n         \
        \       \"x\": {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n       \
        \             \"description\": \"X coordinate\"\n                },\n                \"y\": {\n                  \
        \  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\": \"Y coordinate\"\
        \n                },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"\
        format\": \"double\",\n                    \"description\": \"Z coordinate\"\n                }\n            }\n \
        \       },\n        \"Quaternion\": {\n            \"type\": \"object\",\n            \"description\": \"Rotation
        represented as a quaternion\",\n            \"required\": [\n                \"x\",\n                \"y\",\n    \
        \            \"z\",\n                \"w\"\n            ],\n            \"properties\": {\n                \"x\":
        {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"\
        description\": \"X component\"\n                },\n                \"y\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"double\",\n                    \"description\": \"Y component\"\n           \
        \     },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"format\": \"\
        double\",\n                    \"description\": \"Z component\"\n                },\n                \"w\": {\n  \
        \                  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\"\
        : \"W component (scalar)\"\n                }\n            }\n        },\n        \"AssetReference\": {\n        \
        \    \"type\": \"object\",\n            \"description\": \"Reference to an asset in lib-asset\",\n            \"required\"\
        : [\n                \"assetId\"\n            ],\n            \"properties\": {\n                \"bundleId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional bundle containing the asset\"\n                },\n     \
        \           \"assetId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n\
        \                    \"description\": \"Asset identifier in lib-asset\"\n                },\n                \"variantId\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Variant identifier (consumer interprets meaning)\"\n                }\n            }\n        },\n        \"AttachmentPoint\"\
        : {\n            \"type\": \"object\",\n            \"description\": \"A predefined location where child objects can
        be attached.\\nUsed for decorating furniture, walls, and other objects with accessories.\\nExample: A wall may have
        attachment points for paintings, shelves, or light fixtures.\\n\",\n            \"required\": [\n                \"\
        name\",\n                \"localTransform\"\n            ],\n            \"properties\": {\n                \"name\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Unique name for this attachment
        point within the node.\\nExamples: wall_hook_left, shelf_1, lamp_socket\\n\"\n                },\n               \
        \ \"localTransform\": {\n                    \"$ref\": \"#/$defs/Transform\",\n                    \"description\"\
        : \"Position and orientation relative to the owning node\"\n                },\n                \"acceptsTags\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Tags of assets that can attach here.\\nExamples:
        wall_decoration, picture_frame, plant\\n\"\n                },\n                \"defaultAsset\": {\n            \
        \        \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Default asset to display if no specific attachment is specified\"\n                },\n                \"attachedNodeId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        nullable\": true,\n                    \"description\": \"ID of the node currently attached at this point (runtime
        state)\"\n                }\n            }\n        },\n        \"Affordance\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Describes a capability or interaction mode for a node.\\nUsed by AI systems to understand
        what actions are possible and by\\ncharacter controllers for contextual animations.\\n\",\n            \"required\"\
        : [\n                \"type\"\n            ],\n            \"properties\": {\n                \"type\": {\n      \
        \              \"$ref\": \"#/$defs/AffordanceType\",\n                    \"description\": \"The type of affordance\"\
        \n                },\n                \"parameters\": {\n                    \"type\": \"object\",\n             \
        \       \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type-specific parameters. Examples:\\n- sittable: { height: 0.5, facing: [0,0,1] }\\n- door: { openAngle: 90,
        locked: false }\\n- container: { capacity: 10, itemTypes: [\\\"weapon\\\", \\\"consumable\\\"] }\\n\"\n          \
        \      }\n            }\n        },\n        \"AffordanceType\": {\n            \"type\": \"string\",\n          \
        \  \"description\": \"Types of affordances describing what an object can do or how it can be interacted with.\\nUsed
        by AI navigation, character controllers, and procedural content systems.\\n\",\n            \"enum\": [\n        \
        \        \"walkable\",\n                \"climbable\",\n                \"sittable\",\n                \"interactive\"\
        ,\n                \"collectible\",\n                \"destructible\",\n                \"container\",\n         \
        \       \"door\",\n                \"teleport\"\n            ]\n        },\n        \"AssetSlot\": {\n           \
        \ \"type\": \"object\",\n            \"description\": \"Defines acceptable asset types for procedural swapping at
        this node.\\nUsed by procedural generation systems to substitute assets while\\nmaintaining scene coherence.\\n\"\
        ,\n            \"required\": [\n                \"slotType\"\n            ],\n            \"properties\": {\n    \
        \            \"slotType\": {\n                    \"type\": \"string\",\n                    \"description\": \"Category
        of acceptable assets.\\nExamples: chair, table, wall_art, floor_lamp\\n\"\n                },\n                \"\
        acceptsTags\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                   \
        \     \"type\": \"string\"\n                    },\n                    \"description\": \"Tags that acceptable assets
        must have.\\nUsed for filtering when selecting random variations.\\n\"\n                },\n                \"defaultAsset\"\
        : {\n                    \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n        \
        \            \"description\": \"Default asset if no specific asset is bound\"\n                },\n              \
        \  \"variations\": {\n                    \"type\": \"array\",\n                    \"items\": {\n               \
        \         \"$ref\": \"#/$defs/AssetReference\"\n                    },\n                    \"description\": \"Pre-approved
        asset variations for random selection.\\nProcedural systems pick from this list rather than searching all assets.\\\
        n\"\n                }\n            }\n        },\n        \"MarkerType\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Types of marker nodes for spawn points, waypoints, and other positional markers.\"\
        ,\n            \"enum\": [\n                \"generic\",\n                \"spawn_point\",\n                \"npc_spawn\"\
        ,\n                \"waypoint\",\n                \"camera_point\",\n                \"light_point\",\n          \
        \      \"audio_point\",\n                \"trigger_point\"\n            ]\n        },\n        \"VolumeShape\": {\n\
        \            \"type\": \"string\",\n            \"description\": \"Shape of a volume node for spatial bounds\",\n\
        \            \"enum\": [\n                \"box\",\n                \"sphere\",\n                \"capsule\",\n  \
        \              \"cylinder\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Lock a scene for editing\",\n    \"description\": \"Acquires an exclusive
        lock on the scene for editing.\\nReturns a checkout token required for commit.\\nLock expires after TTL if not extended
        via heartbeat.\\n\",\n    \"tags\": [\n        \"Versioning\"\n    ],\n    \"deprecated\": false,\n    \"operationId\"\
        : \"checkoutScene\"\n}"
  /scene/commit:
    post:
      summary: Save changes and release lock
      description: |
        Commits the changes made during checkout, increments version,
        and releases the lock. Publishes scene.committed event.
      operationId: commitScene
      tags:
      - Versioning
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommitRequest'
      responses:
        '200':
          description: Commit successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommitResponse'
        '403':
          description: Invalid checkout token
        '409':
          description: Checkout expired
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/CommitRequest\"\
        ,\n    \"$defs\": {\n        \"CommitRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to commit checkout changes\",\n            \"required\": [\n                \"sceneId\",\n           \
        \     \"checkoutToken\",\n                \"scene\"\n            ],\n            \"properties\": {\n             \
        \   \"sceneId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n       \
        \             \"description\": \"Scene being committed\"\n                },\n                \"checkoutToken\": {\n\
        \                    \"type\": \"string\",\n                    \"description\": \"Checkout token from checkout response\"\
        \n                },\n                \"scene\": {\n                    \"$ref\": \"#/$defs/Scene\",\n           \
        \         \"description\": \"Updated scene document\"\n                },\n                \"changesSummary\": {\n\
        \                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Optional summary of changes for audit\"\n                }\n            }\n        },\n        \"Scene\": {\n\
        \            \"type\": \"object\",\n            \"description\": \"A complete scene document with hierarchical node
        structure\",\n            \"required\": [\n                \"sceneId\",\n                \"gameId\",\n           \
        \     \"sceneType\",\n                \"name\",\n                \"version\",\n                \"root\"\n        \
        \    ],\n            \"properties\": {\n                \"schema\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Schema identifier for validation\",\n                    \"default\": \"bannou://schemas/scene/v1\"\
        \n                },\n                \"sceneId\": {\n                    \"type\": \"string\",\n                \
        \    \"format\": \"uuid\",\n                    \"description\": \"Unique scene identifier\"\n                },\n\
        \                \"gameId\": {\n                    \"type\": \"string\",\n                    \"description\": \"\
        Game service identifier for partitioning. Treated as opaque string.\\nDefault is the nil UUID for unpartitioned scenes.\\\
        n\",\n                    \"default\": \"00000000-0000-0000-0000-000000000000\"\n                },\n            \
        \    \"sceneType\": {\n                    \"$ref\": \"#/$defs/SceneType\",\n                    \"description\":
        \"Scene classification for querying and validation\"\n                },\n                \"name\": {\n          \
        \          \"type\": \"string\",\n                    \"description\": \"Human-readable scene name\"\n           \
        \     },\n                \"description\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional scene description\"\n                },\n               \
        \ \"version\": {\n                    \"type\": \"string\",\n                    \"pattern\": \"^\\\\d+\\\\.\\\\d+\\\
        \\.\\\\d+$\",\n                    \"description\": \"Semantic version (MAJOR.MINOR.PATCH)\"\n                },\n\
        \                \"root\": {\n                    \"$ref\": \"#/$defs/SceneNode\",\n                    \"description\"\
        : \"Root node of the scene hierarchy\"\n                },\n                \"tags\": {\n                    \"type\"\
        : \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\n                   \
        \ },\n                    \"description\": \"Searchable tags for filtering scenes\"\n                },\n        \
        \        \"metadata\": {\n                    \"type\": \"object\",\n                    \"additionalProperties\"\
        : true,\n                    \"nullable\": true,\n                    \"description\": \"Scene-level metadata. Not
        interpreted by Scene service.\\nExamples: author, thumbnail, editor preferences, generator config.\\n\"\n        \
        \        },\n                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"date-time\",\n                    \"description\": \"When the scene was first created\"\n                },\n\
        \                \"updatedAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"When the scene was last modified\"\n                }\n            }\n \
        \       },\n        \"SceneType\": {\n            \"type\": \"string\",\n            \"description\": \"Scene classification
        for querying and validation rule lookup.\\nDifferent types may have different validation requirements per game.\\\
        n\",\n            \"enum\": [\n                \"unknown\",\n                \"region\",\n                \"city\"\
        ,\n                \"district\",\n                \"lot\",\n                \"building\",\n                \"room\"\
        ,\n                \"dungeon\",\n                \"arena\",\n                \"vehicle\",\n                \"prefab\"\
        ,\n                \"cutscene\",\n                \"other\"\n            ]\n        },\n        \"SceneNode\": {\n\
        \            \"type\": \"object\",\n            \"description\": \"A node in the scene hierarchy. Nodes can contain
        children to form\\na tree structure. Each node has a local transform relative to its parent.\\n\",\n            \"\
        required\": [\n                \"nodeId\",\n                \"refId\",\n                \"name\",\n              \
        \  \"nodeType\",\n                \"localTransform\"\n            ],\n            \"properties\": {\n            \
        \    \"nodeId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n       \
        \             \"description\": \"Globally unique node identifier\"\n                },\n                \"refId\"\
        : {\n                    \"type\": \"string\",\n                    \"pattern\": \"^[a-z][a-z0-9_]*$\",\n        \
        \            \"description\": \"Scene-local reference identifier. Must be unique within the scene.\\nUsed for scripting
        and cross-referencing. Examples: main_door, npc_spawn_1\\n\"\n                },\n                \"parentNodeId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        nullable\": true,\n                    \"description\": \"Parent node ID. Null for the root node only.\"\n       \
        \         },\n                \"name\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Human-readable display name for the node\"\n                },\n                \"nodeType\": {\n            \
        \        \"$ref\": \"#/$defs/NodeType\",\n                    \"description\": \"The structural type of this node\"\
        \n                },\n                \"localTransform\": {\n                    \"$ref\": \"#/$defs/Transform\",\n\
        \                    \"description\": \"Transform relative to parent node\"\n                },\n                \"\
        asset\": {\n                    \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional asset binding (mesh, sound, particle effect)\"\n                },\n\
        \                \"children\": {\n                    \"type\": \"array\",\n                    \"items\": {\n   \
        \                     \"$ref\": \"#/$defs/SceneNode\"\n                    },\n                    \"description\"\
        : \"Child nodes in the hierarchy\"\n                },\n                \"enabled\": {\n                    \"type\"\
        : \"boolean\",\n                    \"default\": true,\n                    \"description\": \"Whether this node is
        active in the scene definition\"\n                },\n                \"sortOrder\": {\n                    \"type\"\
        : \"integer\",\n                    \"default\": 0,\n                    \"description\": \"Ordering among siblings
        for deterministic iteration\"\n                },\n                \"tags\": {\n                    \"type\": \"array\"\
        ,\n                    \"items\": {\n                        \"type\": \"string\"\n                    },\n      \
        \              \"description\": \"Arbitrary tags for consumer filtering (e.g., entrance, spawn, interactive)\"\n \
        \               },\n                \"annotations\": {\n                    \"type\": \"object\",\n              \
        \      \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Consumer-specific data stored without interpretation.\\nUse namespaced keys (e.g., render.castShadows, game.interactionType).\\\
        n\"\n                },\n                \"attachmentPoints\": {\n                    \"type\": \"array\",\n     \
        \               \"items\": {\n                        \"$ref\": \"#/$defs/AttachmentPoint\"\n                    },\n\
        \                    \"description\": \"Predefined locations for attaching child objects.\\nUsed by Scene Composer
        for furniture decoration, wall accessories, etc.\\n\"\n                },\n                \"affordances\": {\n  \
        \                  \"type\": \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/Affordance\"\
        \n                    },\n                    \"description\": \"Interaction capabilities of this node.\\nUsed by
        AI navigation and character controllers.\\n\"\n                },\n                \"assetSlot\": {\n            \
        \        \"$ref\": \"#/$defs/AssetSlot\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Procedural asset swapping configuration.\\nDefines which assets can substitute for this node's asset.\\n\"\n \
        \               },\n                \"markerType\": {\n                    \"$ref\": \"#/$defs/MarkerType\",\n   \
        \                 \"nullable\": true,\n                    \"description\": \"Type of marker for marker nodes.\\nOnly
        relevant when nodeType is 'marker'.\\n\"\n                },\n                \"volumeShape\": {\n               \
        \     \"$ref\": \"#/$defs/VolumeShape\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Shape of volume for volume nodes.\\nOnly relevant when nodeType is 'volume'.\\n\"\n                },\n      \
        \          \"volumeSize\": {\n                    \"$ref\": \"#/$defs/Vector3\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Size/extents of the volume (interpretation depends on volumeShape).\\
        nFor box: full dimensions. For sphere: x=radius. For capsule: x=radius, y=height.\\n\"\n                },\n     \
        \           \"referenceSceneId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Scene ID to embed for reference
        nodes.\\nOnly relevant when nodeType is 'reference'.\\n\"\n                }\n            }\n        },\n        \"\
        NodeType\": {\n            \"type\": \"string\",\n            \"description\": \"Structural node type. Indicates what
        kind of data the node contains,\\nnot how it will be used at runtime. Consumers interpret nodes according\\nto their
        own needs via tags and annotations.\\n\",\n            \"enum\": [\n                \"group\",\n                \"\
        mesh\",\n                \"marker\",\n                \"volume\",\n                \"emitter\",\n                \"\
        reference\",\n                \"custom\"\n            ]\n        },\n        \"Transform\": {\n            \"type\"\
        : \"object\",\n            \"description\": \"Position, rotation, and scale in 3D space\",\n            \"required\"\
        : [\n                \"position\",\n                \"rotation\",\n                \"scale\"\n            ],\n   \
        \         \"properties\": {\n                \"position\": {\n                    \"$ref\": \"#/$defs/Vector3\",\n\
        \                    \"description\": \"Position relative to parent\"\n                },\n                \"rotation\"\
        : {\n                    \"$ref\": \"#/$defs/Quaternion\",\n                    \"description\": \"Rotation relative
        to parent\"\n                },\n                \"scale\": {\n                    \"$ref\": \"#/$defs/Vector3\",\n\
        \                    \"description\": \"Scale relative to parent\"\n                }\n            }\n        },\n\
        \        \"Vector3\": {\n            \"type\": \"object\",\n            \"description\": \"A point or direction in
        3D space\",\n            \"required\": [\n                \"x\",\n                \"y\",\n                \"z\"\n\
        \            ],\n            \"properties\": {\n                \"x\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"double\",\n                    \"description\": \"X coordinate\"\n          \
        \      },\n                \"y\": {\n                    \"type\": \"number\",\n                    \"format\": \"\
        double\",\n                    \"description\": \"Y coordinate\"\n                },\n                \"z\": {\n \
        \                   \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\"\
        : \"Z coordinate\"\n                }\n            }\n        },\n        \"Quaternion\": {\n            \"type\"\
        : \"object\",\n            \"description\": \"Rotation represented as a quaternion\",\n            \"required\": [\n\
        \                \"x\",\n                \"y\",\n                \"z\",\n                \"w\"\n            ],\n \
        \           \"properties\": {\n                \"x\": {\n                    \"type\": \"number\",\n             \
        \       \"format\": \"double\",\n                    \"description\": \"X component\"\n                },\n      \
        \          \"y\": {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n    \
        \                \"description\": \"Y component\"\n                },\n                \"z\": {\n                \
        \    \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\": \"Z
        component\"\n                },\n                \"w\": {\n                    \"type\": \"number\",\n           \
        \         \"format\": \"double\",\n                    \"description\": \"W component (scalar)\"\n               \
        \ }\n            }\n        },\n        \"AssetReference\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Reference to an asset in lib-asset\",\n            \"required\": [\n                \"assetId\"\n            ],\n\
        \            \"properties\": {\n                \"bundleId\": {\n                    \"type\": \"string\",\n     \
        \               \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Optional bundle containing the asset\"\n                },\n                \"assetId\": {\n                 \
        \   \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Asset
        identifier in lib-asset\"\n                },\n                \"variantId\": {\n                    \"type\": \"\
        string\",\n                    \"nullable\": true,\n                    \"description\": \"Variant identifier (consumer
        interprets meaning)\"\n                }\n            }\n        },\n        \"AttachmentPoint\": {\n            \"\
        type\": \"object\",\n            \"description\": \"A predefined location where child objects can be attached.\\nUsed
        for decorating furniture, walls, and other objects with accessories.\\nExample: A wall may have attachment points
        for paintings, shelves, or light fixtures.\\n\",\n            \"required\": [\n                \"name\",\n       \
        \         \"localTransform\"\n            ],\n            \"properties\": {\n                \"name\": {\n       \
        \             \"type\": \"string\",\n                    \"description\": \"Unique name for this attachment point
        within the node.\\nExamples: wall_hook_left, shelf_1, lamp_socket\\n\"\n                },\n                \"localTransform\"\
        : {\n                    \"$ref\": \"#/$defs/Transform\",\n                    \"description\": \"Position and orientation
        relative to the owning node\"\n                },\n                \"acceptsTags\": {\n                    \"type\"\
        : \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\n                   \
        \ },\n                    \"description\": \"Tags of assets that can attach here.\\nExamples: wall_decoration, picture_frame,
        plant\\n\"\n                },\n                \"defaultAsset\": {\n                    \"$ref\": \"#/$defs/AssetReference\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Default asset to display if no
        specific attachment is specified\"\n                },\n                \"attachedNodeId\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"ID of the node currently attached at this point (runtime state)\"\n         \
        \       }\n            }\n        },\n        \"Affordance\": {\n            \"type\": \"object\",\n            \"\
        description\": \"Describes a capability or interaction mode for a node.\\nUsed by AI systems to understand what actions
        are possible and by\\ncharacter controllers for contextual animations.\\n\",\n            \"required\": [\n      \
        \          \"type\"\n            ],\n            \"properties\": {\n                \"type\": {\n                \
        \    \"$ref\": \"#/$defs/AffordanceType\",\n                    \"description\": \"The type of affordance\"\n    \
        \            },\n                \"parameters\": {\n                    \"type\": \"object\",\n                  \
        \  \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\":
        \"Type-specific parameters. Examples:\\n- sittable: { height: 0.5, facing: [0,0,1] }\\n- door: { openAngle: 90, locked:
        false }\\n- container: { capacity: 10, itemTypes: [\\\"weapon\\\", \\\"consumable\\\"] }\\n\"\n                }\n\
        \            }\n        },\n        \"AffordanceType\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Types of affordances describing what an object can do or how it can be interacted with.\\nUsed by AI navigation,
        character controllers, and procedural content systems.\\n\",\n            \"enum\": [\n                \"walkable\"\
        ,\n                \"climbable\",\n                \"sittable\",\n                \"interactive\",\n             \
        \   \"collectible\",\n                \"destructible\",\n                \"container\",\n                \"door\"\
        ,\n                \"teleport\"\n            ]\n        },\n        \"AssetSlot\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Defines acceptable asset types for procedural swapping at this node.\\nUsed by procedural
        generation systems to substitute assets while\\nmaintaining scene coherence.\\n\",\n            \"required\": [\n\
        \                \"slotType\"\n            ],\n            \"properties\": {\n                \"slotType\": {\n  \
        \                  \"type\": \"string\",\n                    \"description\": \"Category of acceptable assets.\\\
        nExamples: chair, table, wall_art, floor_lamp\\n\"\n                },\n                \"acceptsTags\": {\n     \
        \               \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\
        \n                    },\n                    \"description\": \"Tags that acceptable assets must have.\\nUsed for
        filtering when selecting random variations.\\n\"\n                },\n                \"defaultAsset\": {\n      \
        \              \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Default asset if no specific asset is bound\"\n                },\n                \"variations\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"$ref\"\
        : \"#/$defs/AssetReference\"\n                    },\n                    \"description\": \"Pre-approved asset variations
        for random selection.\\nProcedural systems pick from this list rather than searching all assets.\\n\"\n          \
        \      }\n            }\n        },\n        \"MarkerType\": {\n            \"type\": \"string\",\n            \"\
        description\": \"Types of marker nodes for spawn points, waypoints, and other positional markers.\",\n           \
        \ \"enum\": [\n                \"generic\",\n                \"spawn_point\",\n                \"npc_spawn\",\n  \
        \              \"waypoint\",\n                \"camera_point\",\n                \"light_point\",\n              \
        \  \"audio_point\",\n                \"trigger_point\"\n            ]\n        },\n        \"VolumeShape\": {\n  \
        \          \"type\": \"string\",\n            \"description\": \"Shape of a volume node for spatial bounds\",\n  \
        \          \"enum\": [\n                \"box\",\n                \"sphere\",\n                \"capsule\",\n    \
        \            \"cylinder\"\n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/CommitResponse\"\
        ,\n    \"$defs\": {\n        \"CommitResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Response confirming commit\",\n            \"required\": [\n                \"committed\",\n                \"\
        newVersion\"\n            ],\n            \"properties\": {\n                \"committed\": {\n                  \
        \  \"type\": \"boolean\",\n                    \"description\": \"Whether commit was successful\"\n              \
        \  },\n                \"newVersion\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"New version after commit\"\n                },\n                \"scene\": {\n                    \"$ref\": \"\
        #/$defs/Scene\",\n                    \"nullable\": true,\n                    \"description\": \"Committed scene
        with updated metadata\"\n                }\n            }\n        },\n        \"Scene\": {\n            \"type\"\
        : \"object\",\n            \"description\": \"A complete scene document with hierarchical node structure\",\n    \
        \        \"required\": [\n                \"sceneId\",\n                \"gameId\",\n                \"sceneType\"\
        ,\n                \"name\",\n                \"version\",\n                \"root\"\n            ],\n           \
        \ \"properties\": {\n                \"schema\": {\n                    \"type\": \"string\",\n                  \
        \  \"description\": \"Schema identifier for validation\",\n                    \"default\": \"bannou://schemas/scene/v1\"\
        \n                },\n                \"sceneId\": {\n                    \"type\": \"string\",\n                \
        \    \"format\": \"uuid\",\n                    \"description\": \"Unique scene identifier\"\n                },\n\
        \                \"gameId\": {\n                    \"type\": \"string\",\n                    \"description\": \"\
        Game service identifier for partitioning. Treated as opaque string.\\nDefault is the nil UUID for unpartitioned scenes.\\\
        n\",\n                    \"default\": \"00000000-0000-0000-0000-000000000000\"\n                },\n            \
        \    \"sceneType\": {\n                    \"$ref\": \"#/$defs/SceneType\",\n                    \"description\":
        \"Scene classification for querying and validation\"\n                },\n                \"name\": {\n          \
        \          \"type\": \"string\",\n                    \"description\": \"Human-readable scene name\"\n           \
        \     },\n                \"description\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional scene description\"\n                },\n               \
        \ \"version\": {\n                    \"type\": \"string\",\n                    \"pattern\": \"^\\\\d+\\\\.\\\\d+\\\
        \\.\\\\d+$\",\n                    \"description\": \"Semantic version (MAJOR.MINOR.PATCH)\"\n                },\n\
        \                \"root\": {\n                    \"$ref\": \"#/$defs/SceneNode\",\n                    \"description\"\
        : \"Root node of the scene hierarchy\"\n                },\n                \"tags\": {\n                    \"type\"\
        : \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\n                   \
        \ },\n                    \"description\": \"Searchable tags for filtering scenes\"\n                },\n        \
        \        \"metadata\": {\n                    \"type\": \"object\",\n                    \"additionalProperties\"\
        : true,\n                    \"nullable\": true,\n                    \"description\": \"Scene-level metadata. Not
        interpreted by Scene service.\\nExamples: author, thumbnail, editor preferences, generator config.\\n\"\n        \
        \        },\n                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"date-time\",\n                    \"description\": \"When the scene was first created\"\n                },\n\
        \                \"updatedAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"When the scene was last modified\"\n                }\n            }\n \
        \       },\n        \"SceneType\": {\n            \"type\": \"string\",\n            \"description\": \"Scene classification
        for querying and validation rule lookup.\\nDifferent types may have different validation requirements per game.\\\
        n\",\n            \"enum\": [\n                \"unknown\",\n                \"region\",\n                \"city\"\
        ,\n                \"district\",\n                \"lot\",\n                \"building\",\n                \"room\"\
        ,\n                \"dungeon\",\n                \"arena\",\n                \"vehicle\",\n                \"prefab\"\
        ,\n                \"cutscene\",\n                \"other\"\n            ]\n        },\n        \"SceneNode\": {\n\
        \            \"type\": \"object\",\n            \"description\": \"A node in the scene hierarchy. Nodes can contain
        children to form\\na tree structure. Each node has a local transform relative to its parent.\\n\",\n            \"\
        required\": [\n                \"nodeId\",\n                \"refId\",\n                \"name\",\n              \
        \  \"nodeType\",\n                \"localTransform\"\n            ],\n            \"properties\": {\n            \
        \    \"nodeId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n       \
        \             \"description\": \"Globally unique node identifier\"\n                },\n                \"refId\"\
        : {\n                    \"type\": \"string\",\n                    \"pattern\": \"^[a-z][a-z0-9_]*$\",\n        \
        \            \"description\": \"Scene-local reference identifier. Must be unique within the scene.\\nUsed for scripting
        and cross-referencing. Examples: main_door, npc_spawn_1\\n\"\n                },\n                \"parentNodeId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        nullable\": true,\n                    \"description\": \"Parent node ID. Null for the root node only.\"\n       \
        \         },\n                \"name\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Human-readable display name for the node\"\n                },\n                \"nodeType\": {\n            \
        \        \"$ref\": \"#/$defs/NodeType\",\n                    \"description\": \"The structural type of this node\"\
        \n                },\n                \"localTransform\": {\n                    \"$ref\": \"#/$defs/Transform\",\n\
        \                    \"description\": \"Transform relative to parent node\"\n                },\n                \"\
        asset\": {\n                    \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional asset binding (mesh, sound, particle effect)\"\n                },\n\
        \                \"children\": {\n                    \"type\": \"array\",\n                    \"items\": {\n   \
        \                     \"$ref\": \"#/$defs/SceneNode\"\n                    },\n                    \"description\"\
        : \"Child nodes in the hierarchy\"\n                },\n                \"enabled\": {\n                    \"type\"\
        : \"boolean\",\n                    \"default\": true,\n                    \"description\": \"Whether this node is
        active in the scene definition\"\n                },\n                \"sortOrder\": {\n                    \"type\"\
        : \"integer\",\n                    \"default\": 0,\n                    \"description\": \"Ordering among siblings
        for deterministic iteration\"\n                },\n                \"tags\": {\n                    \"type\": \"array\"\
        ,\n                    \"items\": {\n                        \"type\": \"string\"\n                    },\n      \
        \              \"description\": \"Arbitrary tags for consumer filtering (e.g., entrance, spawn, interactive)\"\n \
        \               },\n                \"annotations\": {\n                    \"type\": \"object\",\n              \
        \      \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Consumer-specific data stored without interpretation.\\nUse namespaced keys (e.g., render.castShadows, game.interactionType).\\\
        n\"\n                },\n                \"attachmentPoints\": {\n                    \"type\": \"array\",\n     \
        \               \"items\": {\n                        \"$ref\": \"#/$defs/AttachmentPoint\"\n                    },\n\
        \                    \"description\": \"Predefined locations for attaching child objects.\\nUsed by Scene Composer
        for furniture decoration, wall accessories, etc.\\n\"\n                },\n                \"affordances\": {\n  \
        \                  \"type\": \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/Affordance\"\
        \n                    },\n                    \"description\": \"Interaction capabilities of this node.\\nUsed by
        AI navigation and character controllers.\\n\"\n                },\n                \"assetSlot\": {\n            \
        \        \"$ref\": \"#/$defs/AssetSlot\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Procedural asset swapping configuration.\\nDefines which assets can substitute for this node's asset.\\n\"\n \
        \               },\n                \"markerType\": {\n                    \"$ref\": \"#/$defs/MarkerType\",\n   \
        \                 \"nullable\": true,\n                    \"description\": \"Type of marker for marker nodes.\\nOnly
        relevant when nodeType is 'marker'.\\n\"\n                },\n                \"volumeShape\": {\n               \
        \     \"$ref\": \"#/$defs/VolumeShape\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Shape of volume for volume nodes.\\nOnly relevant when nodeType is 'volume'.\\n\"\n                },\n      \
        \          \"volumeSize\": {\n                    \"$ref\": \"#/$defs/Vector3\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Size/extents of the volume (interpretation depends on volumeShape).\\
        nFor box: full dimensions. For sphere: x=radius. For capsule: x=radius, y=height.\\n\"\n                },\n     \
        \           \"referenceSceneId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Scene ID to embed for reference
        nodes.\\nOnly relevant when nodeType is 'reference'.\\n\"\n                }\n            }\n        },\n        \"\
        NodeType\": {\n            \"type\": \"string\",\n            \"description\": \"Structural node type. Indicates what
        kind of data the node contains,\\nnot how it will be used at runtime. Consumers interpret nodes according\\nto their
        own needs via tags and annotations.\\n\",\n            \"enum\": [\n                \"group\",\n                \"\
        mesh\",\n                \"marker\",\n                \"volume\",\n                \"emitter\",\n                \"\
        reference\",\n                \"custom\"\n            ]\n        },\n        \"Transform\": {\n            \"type\"\
        : \"object\",\n            \"description\": \"Position, rotation, and scale in 3D space\",\n            \"required\"\
        : [\n                \"position\",\n                \"rotation\",\n                \"scale\"\n            ],\n   \
        \         \"properties\": {\n                \"position\": {\n                    \"$ref\": \"#/$defs/Vector3\",\n\
        \                    \"description\": \"Position relative to parent\"\n                },\n                \"rotation\"\
        : {\n                    \"$ref\": \"#/$defs/Quaternion\",\n                    \"description\": \"Rotation relative
        to parent\"\n                },\n                \"scale\": {\n                    \"$ref\": \"#/$defs/Vector3\",\n\
        \                    \"description\": \"Scale relative to parent\"\n                }\n            }\n        },\n\
        \        \"Vector3\": {\n            \"type\": \"object\",\n            \"description\": \"A point or direction in
        3D space\",\n            \"required\": [\n                \"x\",\n                \"y\",\n                \"z\"\n\
        \            ],\n            \"properties\": {\n                \"x\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"double\",\n                    \"description\": \"X coordinate\"\n          \
        \      },\n                \"y\": {\n                    \"type\": \"number\",\n                    \"format\": \"\
        double\",\n                    \"description\": \"Y coordinate\"\n                },\n                \"z\": {\n \
        \                   \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\"\
        : \"Z coordinate\"\n                }\n            }\n        },\n        \"Quaternion\": {\n            \"type\"\
        : \"object\",\n            \"description\": \"Rotation represented as a quaternion\",\n            \"required\": [\n\
        \                \"x\",\n                \"y\",\n                \"z\",\n                \"w\"\n            ],\n \
        \           \"properties\": {\n                \"x\": {\n                    \"type\": \"number\",\n             \
        \       \"format\": \"double\",\n                    \"description\": \"X component\"\n                },\n      \
        \          \"y\": {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n    \
        \                \"description\": \"Y component\"\n                },\n                \"z\": {\n                \
        \    \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\": \"Z
        component\"\n                },\n                \"w\": {\n                    \"type\": \"number\",\n           \
        \         \"format\": \"double\",\n                    \"description\": \"W component (scalar)\"\n               \
        \ }\n            }\n        },\n        \"AssetReference\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Reference to an asset in lib-asset\",\n            \"required\": [\n                \"assetId\"\n            ],\n\
        \            \"properties\": {\n                \"bundleId\": {\n                    \"type\": \"string\",\n     \
        \               \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Optional bundle containing the asset\"\n                },\n                \"assetId\": {\n                 \
        \   \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Asset
        identifier in lib-asset\"\n                },\n                \"variantId\": {\n                    \"type\": \"\
        string\",\n                    \"nullable\": true,\n                    \"description\": \"Variant identifier (consumer
        interprets meaning)\"\n                }\n            }\n        },\n        \"AttachmentPoint\": {\n            \"\
        type\": \"object\",\n            \"description\": \"A predefined location where child objects can be attached.\\nUsed
        for decorating furniture, walls, and other objects with accessories.\\nExample: A wall may have attachment points
        for paintings, shelves, or light fixtures.\\n\",\n            \"required\": [\n                \"name\",\n       \
        \         \"localTransform\"\n            ],\n            \"properties\": {\n                \"name\": {\n       \
        \             \"type\": \"string\",\n                    \"description\": \"Unique name for this attachment point
        within the node.\\nExamples: wall_hook_left, shelf_1, lamp_socket\\n\"\n                },\n                \"localTransform\"\
        : {\n                    \"$ref\": \"#/$defs/Transform\",\n                    \"description\": \"Position and orientation
        relative to the owning node\"\n                },\n                \"acceptsTags\": {\n                    \"type\"\
        : \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\n                   \
        \ },\n                    \"description\": \"Tags of assets that can attach here.\\nExamples: wall_decoration, picture_frame,
        plant\\n\"\n                },\n                \"defaultAsset\": {\n                    \"$ref\": \"#/$defs/AssetReference\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Default asset to display if no
        specific attachment is specified\"\n                },\n                \"attachedNodeId\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"ID of the node currently attached at this point (runtime state)\"\n         \
        \       }\n            }\n        },\n        \"Affordance\": {\n            \"type\": \"object\",\n            \"\
        description\": \"Describes a capability or interaction mode for a node.\\nUsed by AI systems to understand what actions
        are possible and by\\ncharacter controllers for contextual animations.\\n\",\n            \"required\": [\n      \
        \          \"type\"\n            ],\n            \"properties\": {\n                \"type\": {\n                \
        \    \"$ref\": \"#/$defs/AffordanceType\",\n                    \"description\": \"The type of affordance\"\n    \
        \            },\n                \"parameters\": {\n                    \"type\": \"object\",\n                  \
        \  \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\":
        \"Type-specific parameters. Examples:\\n- sittable: { height: 0.5, facing: [0,0,1] }\\n- door: { openAngle: 90, locked:
        false }\\n- container: { capacity: 10, itemTypes: [\\\"weapon\\\", \\\"consumable\\\"] }\\n\"\n                }\n\
        \            }\n        },\n        \"AffordanceType\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Types of affordances describing what an object can do or how it can be interacted with.\\nUsed by AI navigation,
        character controllers, and procedural content systems.\\n\",\n            \"enum\": [\n                \"walkable\"\
        ,\n                \"climbable\",\n                \"sittable\",\n                \"interactive\",\n             \
        \   \"collectible\",\n                \"destructible\",\n                \"container\",\n                \"door\"\
        ,\n                \"teleport\"\n            ]\n        },\n        \"AssetSlot\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Defines acceptable asset types for procedural swapping at this node.\\nUsed by procedural
        generation systems to substitute assets while\\nmaintaining scene coherence.\\n\",\n            \"required\": [\n\
        \                \"slotType\"\n            ],\n            \"properties\": {\n                \"slotType\": {\n  \
        \                  \"type\": \"string\",\n                    \"description\": \"Category of acceptable assets.\\\
        nExamples: chair, table, wall_art, floor_lamp\\n\"\n                },\n                \"acceptsTags\": {\n     \
        \               \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\
        \n                    },\n                    \"description\": \"Tags that acceptable assets must have.\\nUsed for
        filtering when selecting random variations.\\n\"\n                },\n                \"defaultAsset\": {\n      \
        \              \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Default asset if no specific asset is bound\"\n                },\n                \"variations\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"$ref\"\
        : \"#/$defs/AssetReference\"\n                    },\n                    \"description\": \"Pre-approved asset variations
        for random selection.\\nProcedural systems pick from this list rather than searching all assets.\\n\"\n          \
        \      }\n            }\n        },\n        \"MarkerType\": {\n            \"type\": \"string\",\n            \"\
        description\": \"Types of marker nodes for spawn points, waypoints, and other positional markers.\",\n           \
        \ \"enum\": [\n                \"generic\",\n                \"spawn_point\",\n                \"npc_spawn\",\n  \
        \              \"waypoint\",\n                \"camera_point\",\n                \"light_point\",\n              \
        \  \"audio_point\",\n                \"trigger_point\"\n            ]\n        },\n        \"VolumeShape\": {\n  \
        \          \"type\": \"string\",\n            \"description\": \"Shape of a volume node for spatial bounds\",\n  \
        \          \"enum\": [\n                \"box\",\n                \"sphere\",\n                \"capsule\",\n    \
        \            \"cylinder\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Save changes and release lock\",\n    \"description\": \"Commits the changes
        made during checkout, increments version,\\nand releases the lock. Publishes scene.committed event.\\n\",\n    \"\
        tags\": [\n        \"Versioning\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"commitScene\"\n}"
  /scene/discard:
    post:
      summary: Release lock without saving changes
      description: |
        Discards any changes and releases the checkout lock.
        Scene remains at its pre-checkout version.
      operationId: discardCheckout
      tags:
      - Versioning
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DiscardRequest'
      responses:
        '200':
          description: Discard successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DiscardResponse'
        '403':
          description: Invalid checkout token
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DiscardRequest\"\
        ,\n    \"$defs\": {\n        \"DiscardRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to discard checkout\",\n            \"required\": [\n                \"sceneId\",\n                \"\
        checkoutToken\"\n            ],\n            \"properties\": {\n                \"sceneId\": {\n                 \
        \   \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Scene
        to discard changes for\"\n                },\n                \"checkoutToken\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"Checkout token\"\n                }\n            }\n        }\n\
        \    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DiscardResponse\"\
        ,\n    \"$defs\": {\n        \"DiscardResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Response confirming discard\",\n            \"required\": [\n                \"discarded\"\n            ],\n \
        \           \"properties\": {\n                \"discarded\": {\n                    \"type\": \"boolean\",\n    \
        \                \"description\": \"Whether discard was successful\"\n                }\n            }\n        }\n\
        \    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Release lock without saving changes\",\n    \"description\": \"Discards
        any changes and releases the checkout lock.\\nScene remains at its pre-checkout version.\\n\",\n    \"tags\": [\n\
        \        \"Versioning\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"discardCheckout\"\n}"
  /scene/heartbeat:
    post:
      summary: Extend checkout lock TTL
      description: |
        Extends the checkout lock TTL. Should be called periodically
        during editing to prevent lock expiration.
      operationId: heartbeatCheckout
      tags:
      - Versioning
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HeartbeatRequest'
      responses:
        '200':
          description: Lock extended
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HeartbeatResponse'
        '403':
          description: Invalid checkout token
        '409':
          description: Checkout expired
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/HeartbeatRequest\"\
        ,\n    \"$defs\": {\n        \"HeartbeatRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to extend checkout lock\",\n            \"required\": [\n                \"sceneId\",\n              \
        \  \"checkoutToken\"\n            ],\n            \"properties\": {\n                \"sceneId\": {\n            \
        \        \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"\
        Scene being edited\"\n                },\n                \"checkoutToken\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Checkout token\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/HeartbeatResponse\"\
        ,\n    \"$defs\": {\n        \"HeartbeatResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Response confirming lock extension\",\n            \"required\": [\n                \"extended\",\n          \
        \      \"newExpiresAt\"\n            ],\n            \"properties\": {\n                \"extended\": {\n        \
        \            \"type\": \"boolean\",\n                    \"description\": \"Whether extension was successful\"\n \
        \               },\n                \"newExpiresAt\": {\n                    \"type\": \"string\",\n             \
        \       \"format\": \"date-time\",\n                    \"description\": \"New expiration time\"\n               \
        \ },\n                \"extensionsRemaining\": {\n                    \"type\": \"integer\",\n                   \
        \ \"description\": \"Number of extensions remaining\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Extend checkout lock TTL\",\n    \"description\": \"Extends the checkout
        lock TTL. Should be called periodically\\nduring editing to prevent lock expiration.\\n\",\n    \"tags\": [\n    \
        \    \"Versioning\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"heartbeatCheckout\"\n}"
  /scene/history:
    post:
      summary: Get version history for a scene
      description: |
        Returns the version history for a scene, up to the configured
        retention limit per gameId.
      operationId: getSceneHistory
      tags:
      - Versioning
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HistoryRequest'
      responses:
        '200':
          description: History retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HistoryResponse'
        '404':
          description: Scene not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/HistoryRequest\"\
        ,\n    \"$defs\": {\n        \"HistoryRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request for scene version history\",\n            \"required\": [\n                \"sceneId\"\n            ],\n\
        \            \"properties\": {\n                \"sceneId\": {\n                    \"type\": \"string\",\n      \
        \              \"format\": \"uuid\",\n                    \"description\": \"Scene to get history for\"\n        \
        \        },\n                \"limit\": {\n                    \"type\": \"integer\",\n                    \"default\"\
        : 10,\n                    \"description\": \"Maximum versions to return\"\n                }\n            }\n   \
        \     }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/HistoryResponse\"\
        ,\n    \"$defs\": {\n        \"HistoryResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Scene version history\",\n            \"required\": [\n                \"sceneId\",\n                \"versions\"\
        \n            ],\n            \"properties\": {\n                \"sceneId\": {\n                    \"type\": \"\
        string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Scene ID\"\n        \
        \        },\n                \"currentVersion\": {\n                    \"type\": \"string\",\n                  \
        \  \"description\": \"Current active version\"\n                },\n                \"versions\": {\n            \
        \        \"type\": \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/VersionInfo\"\
        \n                    },\n                    \"description\": \"Version history entries\"\n                }\n  \
        \          }\n        },\n        \"VersionInfo\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Information about a specific version\",\n            \"required\": [\n                \"version\",\n         \
        \       \"createdAt\"\n            ],\n            \"properties\": {\n                \"version\": {\n           \
        \         \"type\": \"string\",\n                    \"description\": \"Version string\"\n                },\n   \
        \             \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"When this version was created\"\n                },\n                \"\
        createdBy\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n             \
        \       \"description\": \"Who created this version\"\n                },\n                \"changesSummary\": {\n\
        \                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Summary of changes\"\n                },\n                \"nodeCount\": {\n                    \"type\": \"integer\"\
        ,\n                    \"description\": \"Node count at this version\"\n                }\n            }\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get version history for a scene\",\n    \"description\": \"Returns the
        version history for a scene, up to the configured\\nretention limit per gameId.\\n\",\n    \"tags\": [\n        \"\
        Versioning\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"getSceneHistory\"\n}"
  /scene/register-validation-rules:
    post:
      summary: Register validation rules for a gameId+sceneType
      description: |
        Registers game-specific validation rules. Replaces any existing
        rules for the gameId+sceneType combination.
      operationId: registerValidationRules
      tags:
      - Validation
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterValidationRulesRequest'
      responses:
        '200':
          description: Rules registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegisterValidationRulesResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/RegisterValidationRulesRequest\"\
        ,\n    \"$defs\": {\n        \"RegisterValidationRulesRequest\": {\n            \"type\": \"object\",\n          \
        \  \"description\": \"Request to register validation rules\",\n            \"required\": [\n                \"gameId\"\
        ,\n                \"sceneType\",\n                \"rules\"\n            ],\n            \"properties\": {\n    \
        \            \"gameId\": {\n                    \"type\": \"string\",\n                    \"description\": \"Game
        ID for these rules\"\n                },\n                \"sceneType\": {\n                    \"$ref\": \"#/$defs/SceneType\"\
        ,\n                    \"description\": \"Scene type for these rules\"\n                },\n                \"rules\"\
        : {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"$ref\"\
        : \"#/$defs/ValidationRule\"\n                    },\n                    \"description\": \"Validation rules to register\"\
        \n                }\n            }\n        },\n        \"SceneType\": {\n            \"type\": \"string\",\n    \
        \        \"description\": \"Scene classification for querying and validation rule lookup.\\nDifferent types may have
        different validation requirements per game.\\n\",\n            \"enum\": [\n                \"unknown\",\n       \
        \         \"region\",\n                \"city\",\n                \"district\",\n                \"lot\",\n      \
        \          \"building\",\n                \"room\",\n                \"dungeon\",\n                \"arena\",\n  \
        \              \"vehicle\",\n                \"prefab\",\n                \"cutscene\",\n                \"other\"\
        \n            ]\n        },\n        \"ValidationRule\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"A validation rule definition\",\n            \"required\": [\n                \"ruleId\",\n                \"\
        description\",\n                \"severity\",\n                \"ruleType\"\n            ],\n            \"properties\"\
        : {\n                \"ruleId\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Unique rule identifier within the gameId+sceneType\"\n                },\n                \"description\": {\n\
        \                    \"type\": \"string\",\n                    \"description\": \"Human-readable description of the
        rule\"\n                },\n                \"severity\": {\n                    \"$ref\": \"#/$defs/ValidationSeverity\"\
        ,\n                    \"description\": \"Whether violation is an error or warning\"\n                },\n       \
        \         \"ruleType\": {\n                    \"$ref\": \"#/$defs/ValidationRuleType\",\n                    \"description\"\
        : \"Type of validation check\"\n                },\n                \"config\": {\n                    \"$ref\": \"\
        #/$defs/ValidationRuleConfig\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Rule-specific configuration\"\n                }\n            }\n        },\n        \"ValidationSeverity\": {\n \
        \           \"type\": \"string\",\n            \"description\": \"Severity level of a validation issue\",\n      \
        \      \"enum\": [\n                \"error\",\n                \"warning\"\n            ]\n        },\n        \"\
        ValidationRuleType\": {\n            \"type\": \"string\",\n            \"description\": \"Type of validation check
        to perform\",\n            \"enum\": [\n                \"require_tag\",\n                \"require_node_type\",\n\
        \                \"forbid_tag\",\n                \"require_annotation\",\n                \"custom_expression\"\n\
        \            ]\n        },\n        \"ValidationRuleConfig\": {\n            \"type\": \"object\",\n            \"\
        description\": \"Configuration for a validation rule\",\n            \"properties\": {\n                \"nodeType\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Filter to nodes of this type (for require_tag)\"\n                },\n                \"tag\": {\n           \
        \         \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Tag to check for\"\n                },\n                \"minCount\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Minimum occurrences required\"\n\
        \                },\n                \"maxCount\": {\n                    \"type\": \"integer\",\n               \
        \     \"nullable\": true,\n                    \"description\": \"Maximum occurrences allowed\"\n                },\n\
        \                \"annotationPath\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"JSONPath to required annotation field (for require_annotation)\"\n\
        \                },\n                \"expression\": {\n                    \"type\": \"string\",\n              \
        \      \"nullable\": true,\n                    \"description\": \"Custom validation expression (for custom_expression)\"\
        \n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/RegisterValidationRulesResponse\"\
        ,\n    \"$defs\": {\n        \"RegisterValidationRulesResponse\": {\n            \"type\": \"object\",\n         \
        \   \"description\": \"Response confirming rule registration\",\n            \"required\": [\n                \"registered\"\
        ,\n                \"ruleCount\"\n            ],\n            \"properties\": {\n                \"registered\": {\n\
        \                    \"type\": \"boolean\",\n                    \"description\": \"Whether registration was successful\"\
        \n                },\n                \"ruleCount\": {\n                    \"type\": \"integer\",\n             \
        \       \"description\": \"Number of rules registered\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Register validation rules for a gameId+sceneType\",\n    \"description\"\
        : \"Registers game-specific validation rules. Replaces any existing\\nrules for the gameId+sceneType combination.\\\
        n\",\n    \"tags\": [\n        \"Validation\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"registerValidationRules\"\
        \n}"
  /scene/get-validation-rules:
    post:
      summary: Get validation rules for a gameId+sceneType
      description: |
        Retrieves the registered validation rules for a specific
        gameId and sceneType combination.
      operationId: getValidationRules
      tags:
      - Validation
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetValidationRulesRequest'
      responses:
        '200':
          description: Rules retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetValidationRulesResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetValidationRulesRequest\"\
        ,\n    \"$defs\": {\n        \"GetValidationRulesRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to get validation rules\",\n            \"required\": [\n                \"gameId\",\n               \
        \ \"sceneType\"\n            ],\n            \"properties\": {\n                \"gameId\": {\n                  \
        \  \"type\": \"string\",\n                    \"description\": \"Game ID\"\n                },\n                \"\
        sceneType\": {\n                    \"$ref\": \"#/$defs/SceneType\",\n                    \"description\": \"Scene
        type\"\n                }\n            }\n        },\n        \"SceneType\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Scene classification for querying and validation rule lookup.\\nDifferent types may
        have different validation requirements per game.\\n\",\n            \"enum\": [\n                \"unknown\",\n  \
        \              \"region\",\n                \"city\",\n                \"district\",\n                \"lot\",\n \
        \               \"building\",\n                \"room\",\n                \"dungeon\",\n                \"arena\"\
        ,\n                \"vehicle\",\n                \"prefab\",\n                \"cutscene\",\n                \"other\"\
        \n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetValidationRulesResponse\"\
        ,\n    \"$defs\": {\n        \"GetValidationRulesResponse\": {\n            \"type\": \"object\",\n            \"\
        description\": \"Response containing validation rules\",\n            \"required\": [\n                \"gameId\"\
        ,\n                \"sceneType\"\n            ],\n            \"properties\": {\n                \"gameId\": {\n \
        \                   \"type\": \"string\",\n                    \"description\": \"Game ID\"\n                },\n\
        \                \"sceneType\": {\n                    \"$ref\": \"#/$defs/SceneType\",\n                    \"description\"\
        : \"Scene type\"\n                },\n                \"rules\": {\n                    \"type\": \"array\",\n   \
        \                 \"items\": {\n                        \"$ref\": \"#/$defs/ValidationRule\"\n                   \
        \ },\n                    \"description\": \"Registered rules (empty if none)\"\n                }\n            }\n\
        \        },\n        \"SceneType\": {\n            \"type\": \"string\",\n            \"description\": \"Scene classification
        for querying and validation rule lookup.\\nDifferent types may have different validation requirements per game.\\\
        n\",\n            \"enum\": [\n                \"unknown\",\n                \"region\",\n                \"city\"\
        ,\n                \"district\",\n                \"lot\",\n                \"building\",\n                \"room\"\
        ,\n                \"dungeon\",\n                \"arena\",\n                \"vehicle\",\n                \"prefab\"\
        ,\n                \"cutscene\",\n                \"other\"\n            ]\n        },\n        \"ValidationRule\"\
        : {\n            \"type\": \"object\",\n            \"description\": \"A validation rule definition\",\n         \
        \   \"required\": [\n                \"ruleId\",\n                \"description\",\n                \"severity\",\n\
        \                \"ruleType\"\n            ],\n            \"properties\": {\n                \"ruleId\": {\n    \
        \                \"type\": \"string\",\n                    \"description\": \"Unique rule identifier within the gameId+sceneType\"\
        \n                },\n                \"description\": {\n                    \"type\": \"string\",\n            \
        \        \"description\": \"Human-readable description of the rule\"\n                },\n                \"severity\"\
        : {\n                    \"$ref\": \"#/$defs/ValidationSeverity\",\n                    \"description\": \"Whether
        violation is an error or warning\"\n                },\n                \"ruleType\": {\n                    \"$ref\"\
        : \"#/$defs/ValidationRuleType\",\n                    \"description\": \"Type of validation check\"\n           \
        \     },\n                \"config\": {\n                    \"$ref\": \"#/$defs/ValidationRuleConfig\",\n       \
        \             \"nullable\": true,\n                    \"description\": \"Rule-specific configuration\"\n        \
        \        }\n            }\n        },\n        \"ValidationSeverity\": {\n            \"type\": \"string\",\n    \
        \        \"description\": \"Severity level of a validation issue\",\n            \"enum\": [\n                \"error\"\
        ,\n                \"warning\"\n            ]\n        },\n        \"ValidationRuleType\": {\n            \"type\"\
        : \"string\",\n            \"description\": \"Type of validation check to perform\",\n            \"enum\": [\n  \
        \              \"require_tag\",\n                \"require_node_type\",\n                \"forbid_tag\",\n       \
        \         \"require_annotation\",\n                \"custom_expression\"\n            ]\n        },\n        \"ValidationRuleConfig\"\
        : {\n            \"type\": \"object\",\n            \"description\": \"Configuration for a validation rule\",\n  \
        \          \"properties\": {\n                \"nodeType\": {\n                    \"type\": \"string\",\n       \
        \             \"nullable\": true,\n                    \"description\": \"Filter to nodes of this type (for require_tag)\"\
        \n                },\n                \"tag\": {\n                    \"type\": \"string\",\n                    \"\
        nullable\": true,\n                    \"description\": \"Tag to check for\"\n                },\n               \
        \ \"minCount\": {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n         \
        \           \"description\": \"Minimum occurrences required\"\n                },\n                \"maxCount\": {\n\
        \                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Maximum occurrences allowed\"\n                },\n                \"annotationPath\": {\n                   \
        \ \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\": \"JSONPath
        to required annotation field (for require_annotation)\"\n                },\n                \"expression\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Custom validation expression (for custom_expression)\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get validation rules for a gameId+sceneType\",\n    \"description\": \"\
        Retrieves the registered validation rules for a specific\\ngameId and sceneType combination.\\n\",\n    \"tags\":
        [\n        \"Validation\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"getValidationRules\"\n}"
  /scene/search:
    post:
      summary: Full-text search across scenes
      description: |
        Searches scene names, descriptions, tags, and node names
        for matching content.
      operationId: searchScenes
      tags:
      - Query
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchScenesRequest'
      responses:
        '200':
          description: Search results
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SearchScenesResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SearchScenesRequest\"\
        ,\n    \"$defs\": {\n        \"SearchScenesRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request for full-text search\",\n            \"required\": [\n                \"query\"\n            ],\n    \
        \        \"properties\": {\n                \"query\": {\n                    \"type\": \"string\",\n            \
        \        \"description\": \"Search query text\"\n                },\n                \"gameId\": {\n             \
        \       \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Filter
        by game ID\"\n                },\n                \"sceneTypes\": {\n                    \"type\": \"array\",\n  \
        \                  \"items\": {\n                        \"$ref\": \"#/$defs/SceneType\"\n                    },\n\
        \                    \"nullable\": true,\n                    \"description\": \"Filter by scene types\"\n       \
        \         },\n                \"offset\": {\n                    \"type\": \"integer\",\n                    \"default\"\
        : 0,\n                    \"description\": \"Pagination offset\"\n                },\n                \"limit\": {\n\
        \                    \"type\": \"integer\",\n                    \"default\": 50,\n                    \"description\"\
        : \"Maximum results\"\n                }\n            }\n        },\n        \"SceneType\": {\n            \"type\"\
        : \"string\",\n            \"description\": \"Scene classification for querying and validation rule lookup.\\nDifferent
        types may have different validation requirements per game.\\n\",\n            \"enum\": [\n                \"unknown\"\
        ,\n                \"region\",\n                \"city\",\n                \"district\",\n                \"lot\"\
        ,\n                \"building\",\n                \"room\",\n                \"dungeon\",\n                \"arena\"\
        ,\n                \"vehicle\",\n                \"prefab\",\n                \"cutscene\",\n                \"other\"\
        \n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SearchScenesResponse\"\
        ,\n    \"$defs\": {\n        \"SearchScenesResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Search results\",\n            \"required\": [\n                \"results\",\n                \"total\"\n    \
        \        ],\n            \"properties\": {\n                \"results\": {\n                    \"type\": \"array\"\
        ,\n                    \"items\": {\n                        \"$ref\": \"#/$defs/SearchResult\"\n                \
        \    },\n                    \"description\": \"Matching scenes\"\n                },\n                \"total\":
        {\n                    \"type\": \"integer\",\n                    \"description\": \"Total matches\"\n          \
        \      }\n            }\n        },\n        \"SearchResult\": {\n            \"type\": \"object\",\n            \"\
        description\": \"A single search result\",\n            \"required\": [\n                \"scene\",\n            \
        \    \"matchType\"\n            ],\n            \"properties\": {\n                \"scene\": {\n                \
        \    \"$ref\": \"#/$defs/SceneSummary\",\n                    \"description\": \"Matching scene summary\"\n      \
        \          },\n                \"matchType\": {\n                    \"$ref\": \"#/$defs/SearchMatchType\",\n    \
        \                \"description\": \"Where the match was found\"\n                },\n                \"matchContext\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Context around the match\"\n                }\n            }\n        },\n        \"SceneSummary\": {\n      \
        \      \"type\": \"object\",\n            \"description\": \"Summary of a scene for list results (excludes full node
        tree)\",\n            \"required\": [\n                \"sceneId\",\n                \"gameId\",\n               \
        \ \"sceneType\",\n                \"name\",\n                \"version\"\n            ],\n            \"properties\"\
        : {\n                \"sceneId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"description\": \"Unique scene identifier\"\n                },\n                \"\
        gameId\": {\n                    \"type\": \"string\",\n                    \"description\": \"Game service identifier\"\
        \n                },\n                \"sceneType\": {\n                    \"$ref\": \"#/$defs/SceneType\",\n   \
        \                 \"description\": \"Scene classification\"\n                },\n                \"name\": {\n   \
        \                 \"type\": \"string\",\n                    \"description\": \"Scene name\"\n                },\n\
        \                \"description\": {\n                    \"type\": \"string\",\n                    \"nullable\":
        true,\n                    \"description\": \"Scene description\"\n                },\n                \"version\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Current version\"\n       \
        \         },\n                \"tags\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"description\": \"\
        Scene tags\"\n                },\n                \"nodeCount\": {\n                    \"type\": \"integer\",\n \
        \                   \"description\": \"Total number of nodes in scene\"\n                },\n                \"createdAt\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\",\n                 \
        \   \"description\": \"Creation timestamp\"\n                },\n                \"updatedAt\": {\n              \
        \      \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\"\
        : \"Last update timestamp\"\n                },\n                \"isCheckedOut\": {\n                    \"type\"\
        : \"boolean\",\n                    \"description\": \"Whether scene is currently checked out\"\n                }\n\
        \            }\n        },\n        \"SceneType\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Scene classification for querying and validation rule lookup.\\nDifferent types may have different validation
        requirements per game.\\n\",\n            \"enum\": [\n                \"unknown\",\n                \"region\",\n\
        \                \"city\",\n                \"district\",\n                \"lot\",\n                \"building\"\
        ,\n                \"room\",\n                \"dungeon\",\n                \"arena\",\n                \"vehicle\"\
        ,\n                \"prefab\",\n                \"cutscene\",\n                \"other\"\n            ]\n        },\n\
        \        \"SearchMatchType\": {\n            \"type\": \"string\",\n            \"description\": \"Where the search
        match was found\",\n            \"enum\": [\n                \"name\",\n                \"description\",\n       \
        \         \"tag\",\n                \"node_name\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Full-text search across scenes\",\n    \"description\": \"Searches scene
        names, descriptions, tags, and node names\\nfor matching content.\\n\",\n    \"tags\": [\n        \"Query\"\n    ],\n\
        \    \"deprecated\": false,\n    \"operationId\": \"searchScenes\"\n}"
  /scene/find-references:
    post:
      summary: Find scenes that reference a given scene
      description: |
        Returns all scenes that contain reference nodes pointing
        to the specified scene.
      operationId: findReferences
      tags:
      - Query
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FindReferencesRequest'
      responses:
        '200':
          description: Referencing scenes found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindReferencesResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/FindReferencesRequest\"\
        ,\n    \"$defs\": {\n        \"FindReferencesRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to find referencing scenes\",\n            \"required\": [\n                \"sceneId\"\n            ],\n\
        \            \"properties\": {\n                \"sceneId\": {\n                    \"type\": \"string\",\n      \
        \              \"format\": \"uuid\",\n                    \"description\": \"Scene ID to find references to\"\n  \
        \              }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/FindReferencesResponse\"\
        ,\n    \"$defs\": {\n        \"FindReferencesResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Scenes that reference the target\",\n            \"required\": [\n                \"referencingScenes\"\n    \
        \        ],\n            \"properties\": {\n                \"referencingScenes\": {\n                    \"type\"\
        : \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/ReferenceInfo\"\n    \
        \                },\n                    \"description\": \"Scenes containing references\"\n                }\n  \
        \          }\n        },\n        \"ReferenceInfo\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Information about a reference\",\n            \"required\": [\n                \"sceneId\",\n                \"\
        sceneName\",\n                \"nodeId\",\n                \"nodeRefId\"\n            ],\n            \"properties\"\
        : {\n                \"sceneId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"description\": \"Scene containing the reference\"\n                },\n           \
        \     \"sceneName\": {\n                    \"type\": \"string\",\n                    \"description\": \"Name of
        the referencing scene\"\n                },\n                \"nodeId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Node containing the reference\"\
        \n                },\n                \"nodeRefId\": {\n                    \"type\": \"string\",\n              \
        \      \"description\": \"refId of the referencing node\"\n                },\n                \"nodeName\": {\n \
        \                   \"type\": \"string\",\n                    \"description\": \"Name of the referencing node\"\n\
        \                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Find scenes that reference a given scene\",\n    \"description\": \"Returns
        all scenes that contain reference nodes pointing\\nto the specified scene.\\n\",\n    \"tags\": [\n        \"Query\"\
        \n    ],\n    \"deprecated\": false,\n    \"operationId\": \"findReferences\"\n}"
  /scene/find-asset-usage:
    post:
      summary: Find scenes using a specific asset
      description: |
        Returns all scenes containing nodes that reference
        a specific asset ID.
      operationId: findAssetUsage
      tags:
      - Query
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FindAssetUsageRequest'
      responses:
        '200':
          description: Asset usage found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindAssetUsageResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/FindAssetUsageRequest\"\
        ,\n    \"$defs\": {\n        \"FindAssetUsageRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to find asset usage\",\n            \"required\": [\n                \"assetId\"\n            ],\n   \
        \         \"properties\": {\n                \"assetId\": {\n                    \"type\": \"string\",\n         \
        \           \"format\": \"uuid\",\n                    \"description\": \"Asset ID to find usage of\"\n          \
        \      },\n                \"gameId\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional game filter\"\n                }\n            }\n       \
        \ }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/FindAssetUsageResponse\"\
        ,\n    \"$defs\": {\n        \"FindAssetUsageResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Scenes using the asset\",\n            \"required\": [\n                \"usages\"\n            ],\n         \
        \   \"properties\": {\n                \"usages\": {\n                    \"type\": \"array\",\n                 \
        \   \"items\": {\n                        \"$ref\": \"#/$defs/AssetUsageInfo\"\n                    },\n         \
        \           \"description\": \"Asset usage instances\"\n                }\n            }\n        },\n        \"AssetUsageInfo\"\
        : {\n            \"type\": \"object\",\n            \"description\": \"Information about asset usage\",\n        \
        \    \"required\": [\n                \"sceneId\",\n                \"sceneName\",\n                \"nodeId\",\n\
        \                \"nodeRefId\"\n            ],\n            \"properties\": {\n                \"sceneId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Scene using the asset\"\n                },\n                \"sceneName\": {\n                    \"type\": \"\
        string\",\n                    \"description\": \"Scene name\"\n                },\n                \"nodeId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Node using the asset\"\n                },\n                \"nodeRefId\": {\n                    \"type\": \"\
        string\",\n                    \"description\": \"refId of the node\"\n                },\n                \"nodeName\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Node name\"\n             \
        \   },\n                \"nodeType\": {\n                    \"$ref\": \"#/$defs/NodeType\",\n                   \
        \ \"description\": \"Type of the node\"\n                }\n            }\n        },\n        \"NodeType\": {\n \
        \           \"type\": \"string\",\n            \"description\": \"Structural node type. Indicates what kind of data
        the node contains,\\nnot how it will be used at runtime. Consumers interpret nodes according\\nto their own needs
        via tags and annotations.\\n\",\n            \"enum\": [\n                \"group\",\n                \"mesh\",\n\
        \                \"marker\",\n                \"volume\",\n                \"emitter\",\n                \"reference\"\
        ,\n                \"custom\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Find scenes using a specific asset\",\n    \"description\": \"Returns all
        scenes containing nodes that reference\\na specific asset ID.\\n\",\n    \"tags\": [\n        \"Query\"\n    ],\n\
        \    \"deprecated\": false,\n    \"operationId\": \"findAssetUsage\"\n}"
  /scene/duplicate:
    post:
      summary: Duplicate a scene with a new ID
      description: |
        Creates a copy of a scene with a new sceneId and name.
        All node IDs are regenerated. Version resets to 1.0.0.
      operationId: duplicateScene
      tags:
      - Scene
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DuplicateSceneRequest'
      responses:
        '200':
          description: Scene duplicated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SceneResponse'
        '404':
          description: Source scene not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DuplicateSceneRequest\"\
        ,\n    \"$defs\": {\n        \"DuplicateSceneRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to duplicate a scene\",\n            \"required\": [\n                \"sourceSceneId\",\n           \
        \     \"newName\"\n            ],\n            \"properties\": {\n                \"sourceSceneId\": {\n         \
        \           \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Scene to duplicate\"\n                },\n                \"newName\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Name for the duplicate\"\n                },\n                \"newGameId\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Optional different game ID\"\n                },\n                \"newSceneType\": {\n                    \"\
        $ref\": \"#/$defs/SceneType\",\n                    \"nullable\": true,\n                    \"description\": \"Optional
        different scene type\"\n                }\n            }\n        },\n        \"SceneType\": {\n            \"type\"\
        : \"string\",\n            \"description\": \"Scene classification for querying and validation rule lookup.\\nDifferent
        types may have different validation requirements per game.\\n\",\n            \"enum\": [\n                \"unknown\"\
        ,\n                \"region\",\n                \"city\",\n                \"district\",\n                \"lot\"\
        ,\n                \"building\",\n                \"room\",\n                \"dungeon\",\n                \"arena\"\
        ,\n                \"vehicle\",\n                \"prefab\",\n                \"cutscene\",\n                \"other\"\
        \n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SceneResponse\"\
        ,\n    \"$defs\": {\n        \"SceneResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Standard response containing a scene\",\n            \"required\": [\n                \"scene\"\n            ],\n\
        \            \"properties\": {\n                \"scene\": {\n                    \"$ref\": \"#/$defs/Scene\",\n \
        \                   \"description\": \"The scene document\"\n                }\n            }\n        },\n      \
        \  \"Scene\": {\n            \"type\": \"object\",\n            \"description\": \"A complete scene document with
        hierarchical node structure\",\n            \"required\": [\n                \"sceneId\",\n                \"gameId\"\
        ,\n                \"sceneType\",\n                \"name\",\n                \"version\",\n                \"root\"\
        \n            ],\n            \"properties\": {\n                \"schema\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Schema identifier for validation\",\n                    \"default\": \"\
        bannou://schemas/scene/v1\"\n                },\n                \"sceneId\": {\n                    \"type\": \"\
        string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Unique scene identifier\"\
        \n                },\n                \"gameId\": {\n                    \"type\": \"string\",\n                 \
        \   \"description\": \"Game service identifier for partitioning. Treated as opaque string.\\nDefault is the nil UUID
        for unpartitioned scenes.\\n\",\n                    \"default\": \"00000000-0000-0000-0000-000000000000\"\n     \
        \           },\n                \"sceneType\": {\n                    \"$ref\": \"#/$defs/SceneType\",\n         \
        \           \"description\": \"Scene classification for querying and validation\"\n                },\n          \
        \      \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Human-readable
        scene name\"\n                },\n                \"description\": {\n                    \"type\": \"string\",\n\
        \                    \"nullable\": true,\n                    \"description\": \"Optional scene description\"\n  \
        \              },\n                \"version\": {\n                    \"type\": \"string\",\n                   \
        \ \"pattern\": \"^\\\\d+\\\\.\\\\d+\\\\.\\\\d+$\",\n                    \"description\": \"Semantic version (MAJOR.MINOR.PATCH)\"\
        \n                },\n                \"root\": {\n                    \"$ref\": \"#/$defs/SceneNode\",\n        \
        \            \"description\": \"Root node of the scene hierarchy\"\n                },\n                \"tags\":
        {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Searchable tags for filtering scenes\"\n\
        \                },\n                \"metadata\": {\n                    \"type\": \"object\",\n                \
        \    \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Scene-level metadata. Not interpreted by Scene service.\\nExamples: author, thumbnail, editor preferences, generator
        config.\\n\"\n                },\n                \"createdAt\": {\n                    \"type\": \"string\",\n  \
        \                  \"format\": \"date-time\",\n                    \"description\": \"When the scene was first created\"\
        \n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"date-time\",\n                    \"description\": \"When the scene was last modified\"\n   \
        \             }\n            }\n        },\n        \"SceneType\": {\n            \"type\": \"string\",\n        \
        \    \"description\": \"Scene classification for querying and validation rule lookup.\\nDifferent types may have different
        validation requirements per game.\\n\",\n            \"enum\": [\n                \"unknown\",\n                \"\
        region\",\n                \"city\",\n                \"district\",\n                \"lot\",\n                \"\
        building\",\n                \"room\",\n                \"dungeon\",\n                \"arena\",\n               \
        \ \"vehicle\",\n                \"prefab\",\n                \"cutscene\",\n                \"other\"\n          \
        \  ]\n        },\n        \"SceneNode\": {\n            \"type\": \"object\",\n            \"description\": \"A node
        in the scene hierarchy. Nodes can contain children to form\\na tree structure. Each node has a local transform relative
        to its parent.\\n\",\n            \"required\": [\n                \"nodeId\",\n                \"refId\",\n     \
        \           \"name\",\n                \"nodeType\",\n                \"localTransform\"\n            ],\n       \
        \     \"properties\": {\n                \"nodeId\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"uuid\",\n                    \"description\": \"Globally unique node identifier\"\n         \
        \       },\n                \"refId\": {\n                    \"type\": \"string\",\n                    \"pattern\"\
        : \"^[a-z][a-z0-9_]*$\",\n                    \"description\": \"Scene-local reference identifier. Must be unique
        within the scene.\\nUsed for scripting and cross-referencing. Examples: main_door, npc_spawn_1\\n\"\n            \
        \    },\n                \"parentNodeId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Parent node ID. Null
        for the root node only.\"\n                },\n                \"name\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Human-readable display name for the node\"\n                },\n       \
        \         \"nodeType\": {\n                    \"$ref\": \"#/$defs/NodeType\",\n                    \"description\"\
        : \"The structural type of this node\"\n                },\n                \"localTransform\": {\n              \
        \      \"$ref\": \"#/$defs/Transform\",\n                    \"description\": \"Transform relative to parent node\"\
        \n                },\n                \"asset\": {\n                    \"$ref\": \"#/$defs/AssetReference\",\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Optional asset binding (mesh, sound,
        particle effect)\"\n                },\n                \"children\": {\n                    \"type\": \"array\",\n\
        \                    \"items\": {\n                        \"$ref\": \"#/$defs/SceneNode\"\n                    },\n\
        \                    \"description\": \"Child nodes in the hierarchy\"\n                },\n                \"enabled\"\
        : {\n                    \"type\": \"boolean\",\n                    \"default\": true,\n                    \"description\"\
        : \"Whether this node is active in the scene definition\"\n                },\n                \"sortOrder\": {\n\
        \                    \"type\": \"integer\",\n                    \"default\": 0,\n                    \"description\"\
        : \"Ordering among siblings for deterministic iteration\"\n                },\n                \"tags\": {\n     \
        \               \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\
        \n                    },\n                    \"description\": \"Arbitrary tags for consumer filtering (e.g., entrance,
        spawn, interactive)\"\n                },\n                \"annotations\": {\n                    \"type\": \"object\"\
        ,\n                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                \
        \    \"description\": \"Consumer-specific data stored without interpretation.\\nUse namespaced keys (e.g., render.castShadows,
        game.interactionType).\\n\"\n                },\n                \"attachmentPoints\": {\n                    \"type\"\
        : \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/AttachmentPoint\"\n  \
        \                  },\n                    \"description\": \"Predefined locations for attaching child objects.\\\
        nUsed by Scene Composer for furniture decoration, wall accessories, etc.\\n\"\n                },\n              \
        \  \"affordances\": {\n                    \"type\": \"array\",\n                    \"items\": {\n              \
        \          \"$ref\": \"#/$defs/Affordance\"\n                    },\n                    \"description\": \"Interaction
        capabilities of this node.\\nUsed by AI navigation and character controllers.\\n\"\n                },\n         \
        \       \"assetSlot\": {\n                    \"$ref\": \"#/$defs/AssetSlot\",\n                    \"nullable\":
        true,\n                    \"description\": \"Procedural asset swapping configuration.\\nDefines which assets can
        substitute for this node's asset.\\n\"\n                },\n                \"markerType\": {\n                  \
        \  \"$ref\": \"#/$defs/MarkerType\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type of marker for marker nodes.\\nOnly relevant when nodeType is 'marker'.\\n\"\n                },\n       \
        \         \"volumeShape\": {\n                    \"$ref\": \"#/$defs/VolumeShape\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Shape of volume for volume nodes.\\nOnly relevant when nodeType is
        'volume'.\\n\"\n                },\n                \"volumeSize\": {\n                    \"$ref\": \"#/$defs/Vector3\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Size/extents of the volume (interpretation
        depends on volumeShape).\\nFor box: full dimensions. For sphere: x=radius. For capsule: x=radius, y=height.\\n\"\n\
        \                },\n                \"referenceSceneId\": {\n                    \"type\": \"string\",\n        \
        \            \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\":
        \"Scene ID to embed for reference nodes.\\nOnly relevant when nodeType is 'reference'.\\n\"\n                }\n \
        \           }\n        },\n        \"NodeType\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Structural node type. Indicates what kind of data the node contains,\\nnot how it will be used at runtime. Consumers
        interpret nodes according\\nto their own needs via tags and annotations.\\n\",\n            \"enum\": [\n        \
        \        \"group\",\n                \"mesh\",\n                \"marker\",\n                \"volume\",\n       \
        \         \"emitter\",\n                \"reference\",\n                \"custom\"\n            ]\n        },\n  \
        \      \"Transform\": {\n            \"type\": \"object\",\n            \"description\": \"Position, rotation, and
        scale in 3D space\",\n            \"required\": [\n                \"position\",\n                \"rotation\",\n\
        \                \"scale\"\n            ],\n            \"properties\": {\n                \"position\": {\n     \
        \               \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Position relative to parent\"\
        \n                },\n                \"rotation\": {\n                    \"$ref\": \"#/$defs/Quaternion\",\n   \
        \                 \"description\": \"Rotation relative to parent\"\n                },\n                \"scale\"\
        : {\n                    \"$ref\": \"#/$defs/Vector3\",\n                    \"description\": \"Scale relative to
        parent\"\n                }\n            }\n        },\n        \"Vector3\": {\n            \"type\": \"object\",\n\
        \            \"description\": \"A point or direction in 3D space\",\n            \"required\": [\n               \
        \ \"x\",\n                \"y\",\n                \"z\"\n            ],\n            \"properties\": {\n         \
        \       \"x\": {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n       \
        \             \"description\": \"X coordinate\"\n                },\n                \"y\": {\n                  \
        \  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\": \"Y coordinate\"\
        \n                },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"\
        format\": \"double\",\n                    \"description\": \"Z coordinate\"\n                }\n            }\n \
        \       },\n        \"Quaternion\": {\n            \"type\": \"object\",\n            \"description\": \"Rotation
        represented as a quaternion\",\n            \"required\": [\n                \"x\",\n                \"y\",\n    \
        \            \"z\",\n                \"w\"\n            ],\n            \"properties\": {\n                \"x\":
        {\n                    \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"\
        description\": \"X component\"\n                },\n                \"y\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"double\",\n                    \"description\": \"Y component\"\n           \
        \     },\n                \"z\": {\n                    \"type\": \"number\",\n                    \"format\": \"\
        double\",\n                    \"description\": \"Z component\"\n                },\n                \"w\": {\n  \
        \                  \"type\": \"number\",\n                    \"format\": \"double\",\n                    \"description\"\
        : \"W component (scalar)\"\n                }\n            }\n        },\n        \"AssetReference\": {\n        \
        \    \"type\": \"object\",\n            \"description\": \"Reference to an asset in lib-asset\",\n            \"required\"\
        : [\n                \"assetId\"\n            ],\n            \"properties\": {\n                \"bundleId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional bundle containing the asset\"\n                },\n     \
        \           \"assetId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n\
        \                    \"description\": \"Asset identifier in lib-asset\"\n                },\n                \"variantId\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Variant identifier (consumer interprets meaning)\"\n                }\n            }\n        },\n        \"AttachmentPoint\"\
        : {\n            \"type\": \"object\",\n            \"description\": \"A predefined location where child objects can
        be attached.\\nUsed for decorating furniture, walls, and other objects with accessories.\\nExample: A wall may have
        attachment points for paintings, shelves, or light fixtures.\\n\",\n            \"required\": [\n                \"\
        name\",\n                \"localTransform\"\n            ],\n            \"properties\": {\n                \"name\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Unique name for this attachment
        point within the node.\\nExamples: wall_hook_left, shelf_1, lamp_socket\\n\"\n                },\n               \
        \ \"localTransform\": {\n                    \"$ref\": \"#/$defs/Transform\",\n                    \"description\"\
        : \"Position and orientation relative to the owning node\"\n                },\n                \"acceptsTags\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Tags of assets that can attach here.\\nExamples:
        wall_decoration, picture_frame, plant\\n\"\n                },\n                \"defaultAsset\": {\n            \
        \        \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Default asset to display if no specific attachment is specified\"\n                },\n                \"attachedNodeId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        nullable\": true,\n                    \"description\": \"ID of the node currently attached at this point (runtime
        state)\"\n                }\n            }\n        },\n        \"Affordance\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Describes a capability or interaction mode for a node.\\nUsed by AI systems to understand
        what actions are possible and by\\ncharacter controllers for contextual animations.\\n\",\n            \"required\"\
        : [\n                \"type\"\n            ],\n            \"properties\": {\n                \"type\": {\n      \
        \              \"$ref\": \"#/$defs/AffordanceType\",\n                    \"description\": \"The type of affordance\"\
        \n                },\n                \"parameters\": {\n                    \"type\": \"object\",\n             \
        \       \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Type-specific parameters. Examples:\\n- sittable: { height: 0.5, facing: [0,0,1] }\\n- door: { openAngle: 90,
        locked: false }\\n- container: { capacity: 10, itemTypes: [\\\"weapon\\\", \\\"consumable\\\"] }\\n\"\n          \
        \      }\n            }\n        },\n        \"AffordanceType\": {\n            \"type\": \"string\",\n          \
        \  \"description\": \"Types of affordances describing what an object can do or how it can be interacted with.\\nUsed
        by AI navigation, character controllers, and procedural content systems.\\n\",\n            \"enum\": [\n        \
        \        \"walkable\",\n                \"climbable\",\n                \"sittable\",\n                \"interactive\"\
        ,\n                \"collectible\",\n                \"destructible\",\n                \"container\",\n         \
        \       \"door\",\n                \"teleport\"\n            ]\n        },\n        \"AssetSlot\": {\n           \
        \ \"type\": \"object\",\n            \"description\": \"Defines acceptable asset types for procedural swapping at
        this node.\\nUsed by procedural generation systems to substitute assets while\\nmaintaining scene coherence.\\n\"\
        ,\n            \"required\": [\n                \"slotType\"\n            ],\n            \"properties\": {\n    \
        \            \"slotType\": {\n                    \"type\": \"string\",\n                    \"description\": \"Category
        of acceptable assets.\\nExamples: chair, table, wall_art, floor_lamp\\n\"\n                },\n                \"\
        acceptsTags\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                   \
        \     \"type\": \"string\"\n                    },\n                    \"description\": \"Tags that acceptable assets
        must have.\\nUsed for filtering when selecting random variations.\\n\"\n                },\n                \"defaultAsset\"\
        : {\n                    \"$ref\": \"#/$defs/AssetReference\",\n                    \"nullable\": true,\n        \
        \            \"description\": \"Default asset if no specific asset is bound\"\n                },\n              \
        \  \"variations\": {\n                    \"type\": \"array\",\n                    \"items\": {\n               \
        \         \"$ref\": \"#/$defs/AssetReference\"\n                    },\n                    \"description\": \"Pre-approved
        asset variations for random selection.\\nProcedural systems pick from this list rather than searching all assets.\\\
        n\"\n                }\n            }\n        },\n        \"MarkerType\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Types of marker nodes for spawn points, waypoints, and other positional markers.\"\
        ,\n            \"enum\": [\n                \"generic\",\n                \"spawn_point\",\n                \"npc_spawn\"\
        ,\n                \"waypoint\",\n                \"camera_point\",\n                \"light_point\",\n          \
        \      \"audio_point\",\n                \"trigger_point\"\n            ]\n        },\n        \"VolumeShape\": {\n\
        \            \"type\": \"string\",\n            \"description\": \"Shape of a volume node for spatial bounds\",\n\
        \            \"enum\": [\n                \"box\",\n                \"sphere\",\n                \"capsule\",\n  \
        \              \"cylinder\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Duplicate a scene with a new ID\",\n    \"description\": \"Creates a copy
        of a scene with a new sceneId and name.\\nAll node IDs are regenerated. Version resets to 1.0.0.\\n\",\n    \"tags\"\
        : [\n        \"Scene\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"duplicateScene\"\n}"
components:
  schemas:
    SceneType:
      type: string
      description: |
        Scene classification for querying and validation rule lookup.
        Different types may have different validation requirements per game.
      enum:
      - unknown
      - region
      - city
      - district
      - lot
      - building
      - room
      - dungeon
      - arena
      - vehicle
      - prefab
      - cutscene
      - other
    NodeType:
      type: string
      description: |
        Structural node type. Indicates what kind of data the node contains,
        not how it will be used at runtime. Consumers interpret nodes according
        to their own needs via tags and annotations.
      enum:
      - group
      - mesh
      - marker
      - volume
      - emitter
      - reference
      - custom
    VolumeShape:
      type: string
      description: Shape of a volume node for spatial bounds
      enum:
      - box
      - sphere
      - capsule
      - cylinder
    AffordanceType:
      type: string
      description: |
        Types of affordances describing what an object can do or how it can be interacted with.
        Used by AI navigation, character controllers, and procedural content systems.
      enum:
      - walkable
      - climbable
      - sittable
      - interactive
      - collectible
      - destructible
      - container
      - door
      - teleport
    MarkerType:
      type: string
      description: Types of marker nodes for spawn points, waypoints, and other positional markers.
      enum:
      - generic
      - spawn_point
      - npc_spawn
      - waypoint
      - camera_point
      - light_point
      - audio_point
      - trigger_point
    AttachmentPoint:
      type: object
      description: |
        A predefined location where child objects can be attached.
        Used for decorating furniture, walls, and other objects with accessories.
        Example: A wall may have attachment points for paintings, shelves, or light fixtures.
      required:
      - name
      - localTransform
      properties:
        name:
          type: string
          description: |
            Unique name for this attachment point within the node.
            Examples: wall_hook_left, shelf_1, lamp_socket
        localTransform:
          $ref: '#/components/schemas/Transform'
          description: Position and orientation relative to the owning node
        acceptsTags:
          type: array
          items:
            type: string
          description: |
            Tags of assets that can attach here.
            Examples: wall_decoration, picture_frame, plant
        defaultAsset:
          $ref: '#/components/schemas/AssetReference'
          nullable: true
          description: Default asset to display if no specific attachment is specified
        attachedNodeId:
          type: string
          format: uuid
          nullable: true
          description: ID of the node currently attached at this point (runtime state)
    Affordance:
      type: object
      description: |
        Describes a capability or interaction mode for a node.
        Used by AI systems to understand what actions are possible and by
        character controllers for contextual animations.
      required:
      - type
      properties:
        type:
          $ref: '#/components/schemas/AffordanceType'
          description: The type of affordance
        parameters:
          type: object
          additionalProperties: true
          nullable: true
          description: |
            Type-specific parameters. Examples:
            - sittable: { height: 0.5, facing: [0,0,1] }
            - door: { openAngle: 90, locked: false }
            - container: { capacity: 10, itemTypes: ["weapon", "consumable"] }
    AssetSlot:
      type: object
      description: |
        Defines acceptable asset types for procedural swapping at this node.
        Used by procedural generation systems to substitute assets while
        maintaining scene coherence.
      required:
      - slotType
      properties:
        slotType:
          type: string
          description: |
            Category of acceptable assets.
            Examples: chair, table, wall_art, floor_lamp
        acceptsTags:
          type: array
          items:
            type: string
          description: |
            Tags that acceptable assets must have.
            Used for filtering when selecting random variations.
        defaultAsset:
          $ref: '#/components/schemas/AssetReference'
          nullable: true
          description: Default asset if no specific asset is bound
        variations:
          type: array
          items:
            $ref: '#/components/schemas/AssetReference'
          description: |
            Pre-approved asset variations for random selection.
            Procedural systems pick from this list rather than searching all assets.
    UnresolvedReferenceReason:
      type: string
      description: Reason why a scene reference could not be resolved
      enum:
      - not_found
      - circular_reference
      - depth_exceeded
      - access_denied
    ValidationSeverity:
      type: string
      description: Severity level of a validation issue
      enum:
      - error
      - warning
    ValidationRuleType:
      type: string
      description: Type of validation check to perform
      enum:
      - require_tag
      - require_node_type
      - forbid_tag
      - require_annotation
      - custom_expression
    SearchMatchType:
      type: string
      description: Where the search match was found
      enum:
      - name
      - description
      - tag
      - node_name
    Vector3:
      type: object
      description: A point or direction in 3D space
      required:
      - x
      - y
      - z
      properties:
        x:
          type: number
          format: double
          description: X coordinate
        y:
          type: number
          format: double
          description: Y coordinate
        z:
          type: number
          format: double
          description: Z coordinate
    Quaternion:
      type: object
      description: Rotation represented as a quaternion
      required:
      - x
      - y
      - z
      - w
      properties:
        x:
          type: number
          format: double
          description: X component
        y:
          type: number
          format: double
          description: Y component
        z:
          type: number
          format: double
          description: Z component
        w:
          type: number
          format: double
          description: W component (scalar)
    Transform:
      type: object
      description: Position, rotation, and scale in 3D space
      required:
      - position
      - rotation
      - scale
      properties:
        position:
          $ref: '#/components/schemas/Vector3'
          description: Position relative to parent
        rotation:
          $ref: '#/components/schemas/Quaternion'
          description: Rotation relative to parent
        scale:
          $ref: '#/components/schemas/Vector3'
          description: Scale relative to parent
    AssetReference:
      type: object
      description: Reference to an asset in lib-asset
      required:
      - assetId
      properties:
        bundleId:
          type: string
          format: uuid
          nullable: true
          description: Optional bundle containing the asset
        assetId:
          type: string
          format: uuid
          description: Asset identifier in lib-asset
        variantId:
          type: string
          nullable: true
          description: Variant identifier (consumer interprets meaning)
    SceneNode:
      type: object
      description: |
        A node in the scene hierarchy. Nodes can contain children to form
        a tree structure. Each node has a local transform relative to its parent.
      required:
      - nodeId
      - refId
      - name
      - nodeType
      - localTransform
      properties:
        nodeId:
          type: string
          format: uuid
          description: Globally unique node identifier
        refId:
          type: string
          pattern: '^[a-z][a-z0-9_]*$'
          description: |
            Scene-local reference identifier. Must be unique within the scene.
            Used for scripting and cross-referencing. Examples: main_door, npc_spawn_1
        parentNodeId:
          type: string
          format: uuid
          nullable: true
          description: Parent node ID. Null for the root node only.
        name:
          type: string
          description: Human-readable display name for the node
        nodeType:
          $ref: '#/components/schemas/NodeType'
          description: The structural type of this node
        localTransform:
          $ref: '#/components/schemas/Transform'
          description: Transform relative to parent node
        asset:
          $ref: '#/components/schemas/AssetReference'
          nullable: true
          description: Optional asset binding (mesh, sound, particle effect)
        children:
          type: array
          items:
            $ref: '#/components/schemas/SceneNode'
          description: Child nodes in the hierarchy
        enabled:
          type: boolean
          default: true
          description: Whether this node is active in the scene definition
        sortOrder:
          type: integer
          default: 0
          description: Ordering among siblings for deterministic iteration
        tags:
          type: array
          items:
            type: string
          description: Arbitrary tags for consumer filtering (e.g., entrance, spawn, interactive)
        annotations:
          type: object
          additionalProperties: true
          nullable: true
          description: |
            Consumer-specific data stored without interpretation.
            Use namespaced keys (e.g., render.castShadows, game.interactionType).
        attachmentPoints:
          type: array
          items:
            $ref: '#/components/schemas/AttachmentPoint'
          description: |
            Predefined locations for attaching child objects.
            Used by Scene Composer for furniture decoration, wall accessories, etc.
        affordances:
          type: array
          items:
            $ref: '#/components/schemas/Affordance'
          description: |
            Interaction capabilities of this node.
            Used by AI navigation and character controllers.
        assetSlot:
          $ref: '#/components/schemas/AssetSlot'
          nullable: true
          description: |
            Procedural asset swapping configuration.
            Defines which assets can substitute for this node's asset.
        markerType:
          $ref: '#/components/schemas/MarkerType'
          nullable: true
          description: |
            Type of marker for marker nodes.
            Only relevant when nodeType is 'marker'.
        volumeShape:
          $ref: '#/components/schemas/VolumeShape'
          nullable: true
          description: |
            Shape of volume for volume nodes.
            Only relevant when nodeType is 'volume'.
        volumeSize:
          $ref: '#/components/schemas/Vector3'
          nullable: true
          description: |
            Size/extents of the volume (interpretation depends on volumeShape).
            For box: full dimensions. For sphere: x=radius. For capsule: x=radius, y=height.
        referenceSceneId:
          type: string
          format: uuid
          nullable: true
          description: |
            Scene ID to embed for reference nodes.
            Only relevant when nodeType is 'reference'.
    Scene:
      type: object
      description: A complete scene document with hierarchical node structure
      required:
      - sceneId
      - gameId
      - sceneType
      - name
      - version
      - root
      properties:
        schema:
          type: string
          description: Schema identifier for validation
          default: "bannou://schemas/scene/v1"
        sceneId:
          type: string
          format: uuid
          description: Unique scene identifier
        gameId:
          type: string
          description: |
            Game service identifier for partitioning. Treated as opaque string.
            Default is the nil UUID for unpartitioned scenes.
          default: "00000000-0000-0000-0000-000000000000"
        sceneType:
          $ref: '#/components/schemas/SceneType'
          description: Scene classification for querying and validation
        name:
          type: string
          description: Human-readable scene name
        description:
          type: string
          nullable: true
          description: Optional scene description
        version:
          type: string
          pattern: '^\d+\.\d+\.\d+$'
          description: Semantic version (MAJOR.MINOR.PATCH)
        root:
          $ref: '#/components/schemas/SceneNode'
          description: Root node of the scene hierarchy
        tags:
          type: array
          items:
            type: string
          description: Searchable tags for filtering scenes
        metadata:
          type: object
          additionalProperties: true
          nullable: true
          description: |
            Scene-level metadata. Not interpreted by Scene service.
            Examples: author, thumbnail, editor preferences, generator config.
        createdAt:
          type: string
          format: date-time
          description: When the scene was first created
        updatedAt:
          type: string
          format: date-time
          description: When the scene was last modified
    CreateSceneRequest:
      type: object
      description: Request to create a new scene
      required:
      - scene
      properties:
        scene:
          $ref: '#/components/schemas/Scene'
          description: The scene document to create
    GetSceneRequest:
      type: object
      description: Request to retrieve a scene
      required:
      - sceneId
      properties:
        sceneId:
          type: string
          format: uuid
          description: ID of the scene to retrieve
        version:
          type: string
          nullable: true
          description: Specific version to retrieve (null = latest)
        resolveReferences:
          type: boolean
          default: false
          description: Whether to resolve and embed referenced scenes
        maxReferenceDepth:
          type: integer
          default: 3
          minimum: 1
          maximum: 10
          description: Maximum depth for reference resolution (prevents infinite recursion)
    GetSceneResponse:
      type: object
      description: Response containing a scene and resolution metadata
      required:
      - scene
      properties:
        scene:
          $ref: '#/components/schemas/Scene'
          description: The retrieved scene
        resolvedReferences:
          type: array
          items:
            $ref: '#/components/schemas/ResolvedReference'
          nullable: true
          description: List of resolved references (if resolveReferences was true)
        unresolvedReferences:
          type: array
          items:
            $ref: '#/components/schemas/UnresolvedReference'
          nullable: true
          description: References that could not be resolved (circular, missing, depth exceeded)
        resolutionErrors:
          type: array
          items:
            type: string
          nullable: true
          description: Error messages for reference resolution issues
    ResolvedReference:
      type: object
      description: A successfully resolved scene reference
      required:
      - nodeId
      - refId
      - referencedSceneId
      - scene
      properties:
        nodeId:
          type: string
          format: uuid
          description: Node ID containing the reference
        refId:
          type: string
          description: refId of the referencing node
        referencedSceneId:
          type: string
          format: uuid
          description: ID of the referenced scene
        referencedVersion:
          type: string
          nullable: true
          description: Version that was resolved
        scene:
          $ref: '#/components/schemas/Scene'
          description: The resolved scene content
        depth:
          type: integer
          description: Depth level of this reference
    UnresolvedReference:
      type: object
      description: A scene reference that could not be resolved
      required:
      - nodeId
      - refId
      - referencedSceneId
      - reason
      properties:
        nodeId:
          type: string
          format: uuid
          description: Node ID containing the reference
        refId:
          type: string
          description: refId of the referencing node
        referencedSceneId:
          type: string
          format: uuid
          description: ID of the scene that could not be resolved
        reason:
          $ref: '#/components/schemas/UnresolvedReferenceReason'
          description: Why the reference could not be resolved
        cyclePath:
          type: array
          items:
            type: string
            format: uuid
          nullable: true
          description: For circular references, the cycle path (sceneId chain)
    ListScenesRequest:
      type: object
      description: Request to list scenes with optional filters
      properties:
        gameId:
          type: string
          nullable: true
          description: Filter by game ID
        sceneType:
          $ref: '#/components/schemas/SceneType'
          nullable: true
          description: Filter by single scene type
        sceneTypes:
          type: array
          items:
            $ref: '#/components/schemas/SceneType'
          nullable: true
          description: Filter by multiple scene types (OR)
        tags:
          type: array
          items:
            type: string
          nullable: true
          description: Filter by tags (scenes must have ALL specified tags)
        nameContains:
          type: string
          nullable: true
          description: Filter by name containing this substring (case-insensitive)
        offset:
          type: integer
          default: 0
          minimum: 0
          description: Pagination offset
        limit:
          type: integer
          default: 50
          minimum: 1
          maximum: 200
          description: Maximum results to return
    ListScenesResponse:
      type: object
      description: Response containing scene list and pagination info
      required:
      - scenes
      - total
      properties:
        scenes:
          type: array
          items:
            $ref: '#/components/schemas/SceneSummary'
          description: List of scene summaries (not full documents)
        total:
          type: integer
          description: Total number of matching scenes
        offset:
          type: integer
          description: Current offset
        limit:
          type: integer
          description: Applied limit
    SceneSummary:
      type: object
      description: Summary of a scene for list results (excludes full node tree)
      required:
      - sceneId
      - gameId
      - sceneType
      - name
      - version
      properties:
        sceneId:
          type: string
          format: uuid
          description: Unique scene identifier
        gameId:
          type: string
          description: Game service identifier
        sceneType:
          $ref: '#/components/schemas/SceneType'
          description: Scene classification
        name:
          type: string
          description: Scene name
        description:
          type: string
          nullable: true
          description: Scene description
        version:
          type: string
          description: Current version
        tags:
          type: array
          items:
            type: string
          description: Scene tags
        nodeCount:
          type: integer
          description: Total number of nodes in scene
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp
        isCheckedOut:
          type: boolean
          description: Whether scene is currently checked out
    UpdateSceneRequest:
      type: object
      description: Request to update an existing scene
      required:
      - scene
      properties:
        scene:
          $ref: '#/components/schemas/Scene'
          description: The updated scene document (sceneId must match existing)
        checkoutToken:
          type: string
          nullable: true
          description: Checkout token if updating via checkout workflow
    DeleteSceneRequest:
      type: object
      description: Request to delete a scene
      required:
      - sceneId
      properties:
        sceneId:
          type: string
          format: uuid
          description: ID of the scene to delete
        reason:
          type: string
          nullable: true
          description: Optional reason for deletion (included in event)
    DeleteSceneResponse:
      type: object
      description: Response confirming scene deletion
      required:
      - deleted
      properties:
        deleted:
          type: boolean
          description: Whether the scene was successfully deleted
        sceneId:
          type: string
          format: uuid
          description: ID of the deleted scene
        referencingScenes:
          type: array
          items:
            type: string
            format: uuid
          nullable: true
          description: If deletion failed, IDs of scenes that reference this one
    SceneResponse:
      type: object
      description: Standard response containing a scene
      required:
      - scene
      properties:
        scene:
          $ref: '#/components/schemas/Scene'
          description: The scene document
    ValidateSceneRequest:
      type: object
      description: Request to validate a scene structure
      required:
      - scene
      properties:
        scene:
          $ref: '#/components/schemas/Scene'
          description: The scene to validate
        applyGameRules:
          type: boolean
          default: true
          description: Whether to apply registered game-specific validation rules
    ValidationResult:
      type: object
      description: Result of scene validation
      required:
      - valid
      properties:
        valid:
          type: boolean
          description: Whether the scene passed all validation checks
        errors:
          type: array
          items:
            $ref: '#/components/schemas/ValidationError'
          nullable: true
          description: Validation errors (severity = error)
        warnings:
          type: array
          items:
            $ref: '#/components/schemas/ValidationError'
          nullable: true
          description: Validation warnings (severity = warning)
    ValidationError:
      type: object
      description: A single validation error or warning
      required:
      - ruleId
      - message
      - severity
      properties:
        ruleId:
          type: string
          description: Identifier of the validation rule that triggered this
        message:
          type: string
          description: Human-readable error message
        severity:
          $ref: '#/components/schemas/ValidationSeverity'
          description: Severity level
        nodePath:
          type: string
          nullable: true
          description: Path to the problematic node (e.g., root.children[0].children[2])
        nodeId:
          type: string
          format: uuid
          nullable: true
          description: ID of the problematic node
        context:
          type: object
          additionalProperties: true
          nullable: true
          description: Additional context for the error
    InstantiateSceneRequest:
      type: object
      description: Request to record a scene instantiation
      required:
      - sceneAssetId
      - instanceId
      - regionId
      - worldTransform
      properties:
        sceneAssetId:
          type: string
          format: uuid
          description: Scene asset ID that was instantiated
        version:
          type: string
          nullable: true
          description: Specific version (null = validates latest exists)
        instanceId:
          type: string
          format: uuid
          description: Caller-provided unique instance ID
        regionId:
          type: string
          format: uuid
          description: Region where scene was placed
        worldTransform:
          $ref: '#/components/schemas/Transform'
          description: World-space transform for scene origin
        metadata:
          type: object
          additionalProperties: true
          nullable: true
          description: Caller-provided metadata passed to event
    InstantiateSceneResponse:
      type: object
      description: Response confirming instantiation
      required:
      - instanceId
      - sceneVersion
      properties:
        instanceId:
          type: string
          format: uuid
          description: The instance ID
        sceneVersion:
          type: string
          description: Version that was instantiated
        eventPublished:
          type: boolean
          description: Whether the event was successfully published
    DestroyInstanceRequest:
      type: object
      description: Request to record instance destruction
      required:
      - instanceId
      properties:
        instanceId:
          type: string
          format: uuid
          description: Instance ID to destroy
        regionId:
          type: string
          format: uuid
          nullable: true
          description: Region where instance was (for event metadata)
        sceneAssetId:
          type: string
          format: uuid
          nullable: true
          description: Scene asset ID (for event metadata)
        metadata:
          type: object
          additionalProperties: true
          nullable: true
          description: Caller-provided metadata
    DestroyInstanceResponse:
      type: object
      description: Response confirming destruction
      required:
      - destroyed
      properties:
        destroyed:
          type: boolean
          description: Whether destruction was recorded
        eventPublished:
          type: boolean
          description: Whether the event was successfully published
    CheckoutRequest:
      type: object
      description: Request to checkout a scene for editing
      required:
      - sceneId
      properties:
        sceneId:
          type: string
          format: uuid
          description: Scene to checkout
        editorId:
          type: string
          nullable: true
          description: Optional editor identifier (defaults to caller identity)
        ttlMinutes:
          type: integer
          nullable: true
          description: Custom lock TTL (uses default if not specified)
    CheckoutResponse:
      type: object
      description: Response containing checkout token and scene
      required:
      - checkoutToken
      - scene
      - expiresAt
      properties:
        checkoutToken:
          type: string
          description: Token required for commit/discard/heartbeat
        scene:
          $ref: '#/components/schemas/Scene'
          description: Current scene document
        expiresAt:
          type: string
          format: date-time
          description: When the checkout lock expires
    CommitRequest:
      type: object
      description: Request to commit checkout changes
      required:
      - sceneId
      - checkoutToken
      - scene
      properties:
        sceneId:
          type: string
          format: uuid
          description: Scene being committed
        checkoutToken:
          type: string
          description: Checkout token from checkout response
        scene:
          $ref: '#/components/schemas/Scene'
          description: Updated scene document
        changesSummary:
          type: string
          nullable: true
          description: Optional summary of changes for audit
    CommitResponse:
      type: object
      description: Response confirming commit
      required:
      - committed
      - newVersion
      properties:
        committed:
          type: boolean
          description: Whether commit was successful
        newVersion:
          type: string
          description: New version after commit
        scene:
          $ref: '#/components/schemas/Scene'
          nullable: true
          description: Committed scene with updated metadata
    DiscardRequest:
      type: object
      description: Request to discard checkout
      required:
      - sceneId
      - checkoutToken
      properties:
        sceneId:
          type: string
          format: uuid
          description: Scene to discard changes for
        checkoutToken:
          type: string
          description: Checkout token
    DiscardResponse:
      type: object
      description: Response confirming discard
      required:
      - discarded
      properties:
        discarded:
          type: boolean
          description: Whether discard was successful
    HeartbeatRequest:
      type: object
      description: Request to extend checkout lock
      required:
      - sceneId
      - checkoutToken
      properties:
        sceneId:
          type: string
          format: uuid
          description: Scene being edited
        checkoutToken:
          type: string
          description: Checkout token
    HeartbeatResponse:
      type: object
      description: Response confirming lock extension
      required:
      - extended
      - newExpiresAt
      properties:
        extended:
          type: boolean
          description: Whether extension was successful
        newExpiresAt:
          type: string
          format: date-time
          description: New expiration time
        extensionsRemaining:
          type: integer
          description: Number of extensions remaining
    HistoryRequest:
      type: object
      description: Request for scene version history
      required:
      - sceneId
      properties:
        sceneId:
          type: string
          format: uuid
          description: Scene to get history for
        limit:
          type: integer
          default: 10
          description: Maximum versions to return
    HistoryResponse:
      type: object
      description: Scene version history
      required:
      - sceneId
      - versions
      properties:
        sceneId:
          type: string
          format: uuid
          description: Scene ID
        currentVersion:
          type: string
          description: Current active version
        versions:
          type: array
          items:
            $ref: '#/components/schemas/VersionInfo'
          description: Version history entries
    VersionInfo:
      type: object
      description: Information about a specific version
      required:
      - version
      - createdAt
      properties:
        version:
          type: string
          description: Version string
        createdAt:
          type: string
          format: date-time
          description: When this version was created
        createdBy:
          type: string
          nullable: true
          description: Who created this version
        changesSummary:
          type: string
          nullable: true
          description: Summary of changes
        nodeCount:
          type: integer
          description: Node count at this version
    RegisterValidationRulesRequest:
      type: object
      description: Request to register validation rules
      required:
      - gameId
      - sceneType
      - rules
      properties:
        gameId:
          type: string
          description: Game ID for these rules
        sceneType:
          $ref: '#/components/schemas/SceneType'
          description: Scene type for these rules
        rules:
          type: array
          items:
            $ref: '#/components/schemas/ValidationRule'
          description: Validation rules to register
    RegisterValidationRulesResponse:
      type: object
      description: Response confirming rule registration
      required:
      - registered
      - ruleCount
      properties:
        registered:
          type: boolean
          description: Whether registration was successful
        ruleCount:
          type: integer
          description: Number of rules registered
    GetValidationRulesRequest:
      type: object
      description: Request to get validation rules
      required:
      - gameId
      - sceneType
      properties:
        gameId:
          type: string
          description: Game ID
        sceneType:
          $ref: '#/components/schemas/SceneType'
          description: Scene type
    GetValidationRulesResponse:
      type: object
      description: Response containing validation rules
      required:
      - gameId
      - sceneType
      properties:
        gameId:
          type: string
          description: Game ID
        sceneType:
          $ref: '#/components/schemas/SceneType'
          description: Scene type
        rules:
          type: array
          items:
            $ref: '#/components/schemas/ValidationRule'
          description: Registered rules (empty if none)
    ValidationRule:
      type: object
      description: A validation rule definition
      required:
      - ruleId
      - description
      - severity
      - ruleType
      properties:
        ruleId:
          type: string
          description: Unique rule identifier within the gameId+sceneType
        description:
          type: string
          description: Human-readable description of the rule
        severity:
          $ref: '#/components/schemas/ValidationSeverity'
          description: Whether violation is an error or warning
        ruleType:
          $ref: '#/components/schemas/ValidationRuleType'
          description: Type of validation check
        config:
          $ref: '#/components/schemas/ValidationRuleConfig'
          nullable: true
          description: Rule-specific configuration
    ValidationRuleConfig:
      type: object
      description: Configuration for a validation rule
      properties:
        nodeType:
          type: string
          nullable: true
          description: Filter to nodes of this type (for require_tag)
        tag:
          type: string
          nullable: true
          description: Tag to check for
        minCount:
          type: integer
          nullable: true
          description: Minimum occurrences required
        maxCount:
          type: integer
          nullable: true
          description: Maximum occurrences allowed
        annotationPath:
          type: string
          nullable: true
          description: JSONPath to required annotation field (for require_annotation)
        expression:
          type: string
          nullable: true
          description: Custom validation expression (for custom_expression)
    SearchScenesRequest:
      type: object
      description: Request for full-text search
      required:
      - query
      properties:
        query:
          type: string
          description: Search query text
        gameId:
          type: string
          nullable: true
          description: Filter by game ID
        sceneTypes:
          type: array
          items:
            $ref: '#/components/schemas/SceneType'
          nullable: true
          description: Filter by scene types
        offset:
          type: integer
          default: 0
          description: Pagination offset
        limit:
          type: integer
          default: 50
          description: Maximum results
    SearchScenesResponse:
      type: object
      description: Search results
      required:
      - results
      - total
      properties:
        results:
          type: array
          items:
            $ref: '#/components/schemas/SearchResult'
          description: Matching scenes
        total:
          type: integer
          description: Total matches
    SearchResult:
      type: object
      description: A single search result
      required:
      - scene
      - matchType
      properties:
        scene:
          $ref: '#/components/schemas/SceneSummary'
          description: Matching scene summary
        matchType:
          $ref: '#/components/schemas/SearchMatchType'
          description: Where the match was found
        matchContext:
          type: string
          nullable: true
          description: Context around the match
    FindReferencesRequest:
      type: object
      description: Request to find referencing scenes
      required:
      - sceneId
      properties:
        sceneId:
          type: string
          format: uuid
          description: Scene ID to find references to
    FindReferencesResponse:
      type: object
      description: Scenes that reference the target
      required:
      - referencingScenes
      properties:
        referencingScenes:
          type: array
          items:
            $ref: '#/components/schemas/ReferenceInfo'
          description: Scenes containing references
    ReferenceInfo:
      type: object
      description: Information about a reference
      required:
      - sceneId
      - sceneName
      - nodeId
      - nodeRefId
      properties:
        sceneId:
          type: string
          format: uuid
          description: Scene containing the reference
        sceneName:
          type: string
          description: Name of the referencing scene
        nodeId:
          type: string
          format: uuid
          description: Node containing the reference
        nodeRefId:
          type: string
          description: refId of the referencing node
        nodeName:
          type: string
          description: Name of the referencing node
    FindAssetUsageRequest:
      type: object
      description: Request to find asset usage
      required:
      - assetId
      properties:
        assetId:
          type: string
          format: uuid
          description: Asset ID to find usage of
        gameId:
          type: string
          nullable: true
          description: Optional game filter
    FindAssetUsageResponse:
      type: object
      description: Scenes using the asset
      required:
      - usages
      properties:
        usages:
          type: array
          items:
            $ref: '#/components/schemas/AssetUsageInfo'
          description: Asset usage instances
    AssetUsageInfo:
      type: object
      description: Information about asset usage
      required:
      - sceneId
      - sceneName
      - nodeId
      - nodeRefId
      properties:
        sceneId:
          type: string
          format: uuid
          description: Scene using the asset
        sceneName:
          type: string
          description: Scene name
        nodeId:
          type: string
          format: uuid
          description: Node using the asset
        nodeRefId:
          type: string
          description: refId of the node
        nodeName:
          type: string
          description: Node name
        nodeType:
          $ref: '#/components/schemas/NodeType'
          description: Type of the node
    DuplicateSceneRequest:
      type: object
      description: Request to duplicate a scene
      required:
      - sourceSceneId
      - newName
      properties:
        sourceSceneId:
          type: string
          format: uuid
          description: Scene to duplicate
        newName:
          type: string
          description: Name for the duplicate
        newGameId:
          type: string
          nullable: true
          description: Optional different game ID
        newSceneType:
          $ref: '#/components/schemas/SceneType'
          nullable: true
          description: Optional different scene type
