openapi: 3.0.3
info:
  title: Save-Load Service API
  version: 1.0.0
  description: |
    Generic save/load system for game state persistence.
    Supports polymorphic ownership, versioned saves, and schema migration.
servers:
- url: http://localhost:5012
tags:
- name: Slots
  description: Save slot management
- name: Saves
  description: Save/load operations
- name: Versions
  description: Version management
- name: Query
  description: Search and filtering
- name: Migration
  description: Schema migration operations
paths:
  /save-load/slot/create:
    post:
      tags:
      - Slots
      operationId: CreateSlot
      summary: Create or configure a save slot
      description: |
        Creates a new save slot or updates configuration of an existing slot.
        Slots are auto-created on first save, but pre-creation allows setting
        custom configuration (max versions, retention policy, etc.).
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSlotRequest'
      responses:
        '200':
          description: Slot created or updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SlotResponse'
        '400':
          description: Invalid request
        '409':
          description: Slot already exists with different owner
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/CreateSlotRequest\"\
        ,\n    \"$defs\": {\n        \"CreateSlotRequest\": {\n            \"description\": \"Request to create a new save
        slot for an entity.\",\n            \"type\": \"object\",\n            \"required\": [\n                \"gameId\"\
        ,\n                \"ownerId\",\n                \"ownerType\",\n                \"slotName\",\n                \"\
        category\"\n            ],\n            \"properties\": {\n                \"gameId\": {\n                    \"type\"\
        : \"string\",\n                    \"minLength\": 1,\n                    \"maxLength\": 32,\n                   \
        \ \"pattern\": \"^[a-z][a-z0-9-]*$\",\n                    \"description\": \"Game identifier for namespace isolation
        (e.g., \\\"arcadia\\\", \\\"fantasia\\\")\"\n                },\n                \"ownerId\": {\n                \
        \    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"ID of
        the owning entity\"\n                },\n                \"ownerType\": {\n                    \"$ref\": \"#/$defs/OwnerType\"\
        ,\n                    \"description\": \"Type of entity that owns this save slot\"\n                },\n        \
        \        \"slotName\": {\n                    \"type\": \"string\",\n                    \"minLength\": 1,\n     \
        \               \"maxLength\": 64,\n                    \"pattern\": \"^[a-z0-9]([a-z0-9-]*[a-z0-9])?$\",\n      \
        \              \"description\": \"Slot name (lowercase alphanumeric with hyphens, single char like \\\"q\\\" allowed)\"\
        \n                },\n                \"category\": {\n                    \"$ref\": \"#/$defs/SaveCategory\",\n \
        \                   \"description\": \"Save category determining retention and cleanup behavior\"\n              \
        \  },\n                \"maxVersions\": {\n                    \"type\": \"integer\",\n                    \"nullable\"\
        : true,\n                    \"minimum\": 1,\n                    \"maximum\": 100,\n                    \"description\"\
        : \"Override default max versions for this category (null = use category default)\"\n                },\n        \
        \        \"retentionDays\": {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n\
        \                    \"minimum\": 1,\n                    \"description\": \"Days to retain versions (null = indefinite)\"\
        \n                },\n                \"compressionType\": {\n                    \"allOf\": [\n                 \
        \       {\n                            \"$ref\": \"#/$defs/CompressionType\"\n                        }\n        \
        \            ],\n                    \"nullable\": true,\n                    \"description\": \"Compression algorithm
        to use for save data (null = use category default)\"\n                },\n                \"tags\": {\n          \
        \          \"type\": \"array\",\n                    \"nullable\": true,\n                    \"items\": {\n     \
        \                   \"type\": \"string\",\n                        \"maxLength\": 32\n                    },\n   \
        \                 \"maxItems\": 20,\n                    \"description\": \"Searchable tags for slot categorization
        (e.g., \\\"boss-fight\\\", \\\"chapter-3\\\")\"\n                },\n                \"metadata\": {\n           \
        \         \"type\": \"object\",\n                    \"nullable\": true,\n                    \"additionalProperties\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"description\": \"\
        Custom key-value metadata for the slot\"\n                }\n            }\n        },\n        \"OwnerType\": {\n\
        \            \"type\": \"string\",\n            \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\"\
        ,\n                \"SESSION\",\n                \"REALM\"\n            ],\n            \"description\": \"Type of
        entity that owns this save slot\"\n        },\n        \"SaveCategory\": {\n            \"type\": \"string\",\n  \
        \          \"enum\": [\n                \"QUICK_SAVE\",\n                \"AUTO_SAVE\",\n                \"MANUAL_SAVE\"\
        ,\n                \"CHECKPOINT\",\n                \"STATE_SNAPSHOT\"\n            ],\n            \"description\"\
        : \"Category of save with predefined behaviors.\\nQUICK_SAVE: Single-slot fast save, overwritten frequently (max 1
        version).\\nAUTO_SAVE: System-triggered periodic saves (max 5 versions, rolling).\\nMANUAL_SAVE: User-initiated named
        saves (max 10 versions, no auto-cleanup).\\nCHECKPOINT: Progress markers (max 20 versions, rolling).\\nSTATE_SNAPSHOT:
        Full state captures for debugging (max 3 versions, rolling).\\n\"\n        },\n        \"CompressionType\": {\n  \
        \          \"type\": \"string\",\n            \"enum\": [\n                \"NONE\",\n                \"GZIP\",\n\
        \                \"BROTLI\"\n            ],\n            \"description\": \"Compression algorithm used for save data\"\
        \n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SlotResponse\"\
        ,\n    \"$defs\": {\n        \"SlotResponse\": {\n            \"type\": \"object\",\n            \"description\":
        \"Complete metadata for a save slot including version statistics\",\n            \"required\": [\n               \
        \ \"slotId\",\n                \"ownerId\",\n                \"ownerType\",\n                \"slotName\",\n     \
        \           \"category\",\n                \"createdAt\"\n            ],\n            \"properties\": {\n        \
        \        \"slotId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n   \
        \                 \"description\": \"Unique slot identifier\"\n                },\n                \"ownerId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"ID of the owning entity\"\n                },\n                \"ownerType\": {\n                    \"$ref\"\
        : \"#/$defs/OwnerType\",\n                    \"description\": \"Type of entity that owns this save slot\"\n     \
        \           },\n                \"slotName\": {\n                    \"type\": \"string\",\n                    \"\
        description\": \"Slot name\"\n                },\n                \"category\": {\n                    \"$ref\": \"\
        #/$defs/SaveCategory\",\n                    \"description\": \"Save category determining retention and cleanup behavior\"\
        \n                },\n                \"maxVersions\": {\n                    \"type\": \"integer\",\n           \
        \         \"description\": \"Maximum versions to retain\"\n                },\n                \"retentionDays\":
        {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Days to retain versions (null = indefinite)\"\n                },\n                \"compressionType\": {\n  \
        \                  \"$ref\": \"#/$defs/CompressionType\",\n                    \"description\": \"Compression algorithm
        used for save data\"\n                },\n                \"versionCount\": {\n                    \"type\": \"integer\"\
        ,\n                    \"description\": \"Current number of versions in slot\"\n                },\n             \
        \   \"latestVersion\": {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n  \
        \                  \"description\": \"Latest version number (null if empty)\"\n                },\n              \
        \  \"totalSizeBytes\": {\n                    \"type\": \"integer\",\n                    \"format\": \"int64\",\n\
        \                    \"description\": \"Total storage used by all versions\"\n                },\n               \
        \ \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\",\n  \
        \                  \"description\": \"Slot creation timestamp\"\n                },\n                \"updatedAt\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\",\n                 \
        \   \"description\": \"Last modification timestamp\"\n                },\n                \"metadata\": {\n      \
        \              \"type\": \"object\",\n                    \"additionalProperties\": {\n                        \"\
        type\": \"string\"\n                    },\n                    \"description\": \"Custom key-value metadata\"\n \
        \               }\n            }\n        },\n        \"OwnerType\": {\n            \"type\": \"string\",\n      \
        \      \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\",\n                \"SESSION\",\n \
        \               \"REALM\"\n            ],\n            \"description\": \"Type of entity that owns this save slot\"\
        \n        },\n        \"SaveCategory\": {\n            \"type\": \"string\",\n            \"enum\": [\n          \
        \      \"QUICK_SAVE\",\n                \"AUTO_SAVE\",\n                \"MANUAL_SAVE\",\n                \"CHECKPOINT\"\
        ,\n                \"STATE_SNAPSHOT\"\n            ],\n            \"description\": \"Category of save with predefined
        behaviors.\\nQUICK_SAVE: Single-slot fast save, overwritten frequently (max 1 version).\\nAUTO_SAVE: System-triggered
        periodic saves (max 5 versions, rolling).\\nMANUAL_SAVE: User-initiated named saves (max 10 versions, no auto-cleanup).\\
        nCHECKPOINT: Progress markers (max 20 versions, rolling).\\nSTATE_SNAPSHOT: Full state captures for debugging (max
        3 versions, rolling).\\n\"\n        },\n        \"CompressionType\": {\n            \"type\": \"string\",\n      \
        \      \"enum\": [\n                \"NONE\",\n                \"GZIP\",\n                \"BROTLI\"\n           \
        \ ],\n            \"description\": \"Compression algorithm used for save data\"\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Create or configure a save slot\",\n    \"description\": \"Creates a new
        save slot or updates configuration of an existing slot.\\nSlots are auto-created on first save, but pre-creation allows
        setting\\ncustom configuration (max versions, retention policy, etc.).\\n\",\n    \"tags\": [\n        \"Slots\"\n\
        \    ],\n    \"deprecated\": false,\n    \"operationId\": \"CreateSlot\"\n}"
  /save-load/slot/get:
    post:
      tags:
      - Slots
      operationId: GetSlot
      summary: Get slot metadata
      description: Returns slot configuration and version summary.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetSlotRequest'
      responses:
        '200':
          description: Slot found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SlotResponse'
        '404':
          description: Slot not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetSlotRequest\"\
        ,\n    \"$defs\": {\n        \"GetSlotRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to retrieve metadata for a specific save slot\",\n            \"required\": [\n                \"gameId\"\
        ,\n                \"ownerId\",\n                \"ownerType\",\n                \"slotName\"\n            ],\n  \
        \          \"properties\": {\n                \"gameId\": {\n                    \"type\": \"string\",\n         \
        \           \"minLength\": 1,\n                    \"maxLength\": 32,\n                    \"pattern\": \"^[a-z][a-z0-9-]*$\"\
        ,\n                    \"description\": \"Game identifier for namespace isolation\"\n                },\n        \
        \        \"ownerId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n  \
        \                  \"description\": \"ID of the owning entity\"\n                },\n                \"ownerType\"\
        : {\n                    \"$ref\": \"#/$defs/OwnerType\",\n                    \"description\": \"Type of entity that
        owns this save slot\"\n                },\n                \"slotName\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Slot name\"\n                }\n            }\n        },\n        \"OwnerType\"\
        : {\n            \"type\": \"string\",\n            \"enum\": [\n                \"ACCOUNT\",\n                \"\
        CHARACTER\",\n                \"SESSION\",\n                \"REALM\"\n            ],\n            \"description\"\
        : \"Type of entity that owns this save slot\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SlotResponse\"\
        ,\n    \"$defs\": {\n        \"SlotResponse\": {\n            \"type\": \"object\",\n            \"description\":
        \"Complete metadata for a save slot including version statistics\",\n            \"required\": [\n               \
        \ \"slotId\",\n                \"ownerId\",\n                \"ownerType\",\n                \"slotName\",\n     \
        \           \"category\",\n                \"createdAt\"\n            ],\n            \"properties\": {\n        \
        \        \"slotId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n   \
        \                 \"description\": \"Unique slot identifier\"\n                },\n                \"ownerId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"ID of the owning entity\"\n                },\n                \"ownerType\": {\n                    \"$ref\"\
        : \"#/$defs/OwnerType\",\n                    \"description\": \"Type of entity that owns this save slot\"\n     \
        \           },\n                \"slotName\": {\n                    \"type\": \"string\",\n                    \"\
        description\": \"Slot name\"\n                },\n                \"category\": {\n                    \"$ref\": \"\
        #/$defs/SaveCategory\",\n                    \"description\": \"Save category determining retention and cleanup behavior\"\
        \n                },\n                \"maxVersions\": {\n                    \"type\": \"integer\",\n           \
        \         \"description\": \"Maximum versions to retain\"\n                },\n                \"retentionDays\":
        {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Days to retain versions (null = indefinite)\"\n                },\n                \"compressionType\": {\n  \
        \                  \"$ref\": \"#/$defs/CompressionType\",\n                    \"description\": \"Compression algorithm
        used for save data\"\n                },\n                \"versionCount\": {\n                    \"type\": \"integer\"\
        ,\n                    \"description\": \"Current number of versions in slot\"\n                },\n             \
        \   \"latestVersion\": {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n  \
        \                  \"description\": \"Latest version number (null if empty)\"\n                },\n              \
        \  \"totalSizeBytes\": {\n                    \"type\": \"integer\",\n                    \"format\": \"int64\",\n\
        \                    \"description\": \"Total storage used by all versions\"\n                },\n               \
        \ \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\",\n  \
        \                  \"description\": \"Slot creation timestamp\"\n                },\n                \"updatedAt\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\",\n                 \
        \   \"description\": \"Last modification timestamp\"\n                },\n                \"metadata\": {\n      \
        \              \"type\": \"object\",\n                    \"additionalProperties\": {\n                        \"\
        type\": \"string\"\n                    },\n                    \"description\": \"Custom key-value metadata\"\n \
        \               }\n            }\n        },\n        \"OwnerType\": {\n            \"type\": \"string\",\n      \
        \      \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\",\n                \"SESSION\",\n \
        \               \"REALM\"\n            ],\n            \"description\": \"Type of entity that owns this save slot\"\
        \n        },\n        \"SaveCategory\": {\n            \"type\": \"string\",\n            \"enum\": [\n          \
        \      \"QUICK_SAVE\",\n                \"AUTO_SAVE\",\n                \"MANUAL_SAVE\",\n                \"CHECKPOINT\"\
        ,\n                \"STATE_SNAPSHOT\"\n            ],\n            \"description\": \"Category of save with predefined
        behaviors.\\nQUICK_SAVE: Single-slot fast save, overwritten frequently (max 1 version).\\nAUTO_SAVE: System-triggered
        periodic saves (max 5 versions, rolling).\\nMANUAL_SAVE: User-initiated named saves (max 10 versions, no auto-cleanup).\\
        nCHECKPOINT: Progress markers (max 20 versions, rolling).\\nSTATE_SNAPSHOT: Full state captures for debugging (max
        3 versions, rolling).\\n\"\n        },\n        \"CompressionType\": {\n            \"type\": \"string\",\n      \
        \      \"enum\": [\n                \"NONE\",\n                \"GZIP\",\n                \"BROTLI\"\n           \
        \ ],\n            \"description\": \"Compression algorithm used for save data\"\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get slot metadata\",\n    \"description\": \"Returns slot configuration
        and version summary.\",\n    \"tags\": [\n        \"Slots\"\n    ],\n    \"deprecated\": false,\n    \"operationId\"\
        : \"GetSlot\"\n}"
  /save-load/slot/list:
    post:
      tags:
      - Slots
      operationId: ListSlots
      summary: List slots for owner
      description: Returns all slots owned by the specified entity.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListSlotsRequest'
      responses:
        '200':
          description: Slots listed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListSlotsResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListSlotsRequest\"\
        ,\n    \"$defs\": {\n        \"ListSlotsRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to list all save slots belonging to a specific owner\",\n            \"required\": [\n               \
        \ \"gameId\",\n                \"ownerId\",\n                \"ownerType\"\n            ],\n            \"properties\"\
        : {\n                \"gameId\": {\n                    \"type\": \"string\",\n                    \"minLength\":
        1,\n                    \"maxLength\": 32,\n                    \"pattern\": \"^[a-z][a-z0-9-]*$\",\n            \
        \        \"description\": \"Game identifier for namespace isolation\"\n                },\n                \"ownerId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"ID of the owning entity\"\n                },\n                \"ownerType\": {\n               \
        \     \"$ref\": \"#/$defs/OwnerType\",\n                    \"description\": \"Type of entity that owns the save slots
        to list\"\n                },\n                \"category\": {\n                    \"allOf\": [\n               \
        \         {\n                            \"$ref\": \"#/$defs/SaveCategory\"\n                        }\n         \
        \           ],\n                    \"nullable\": true,\n                    \"description\": \"Optional filter by
        save category\"\n                },\n                \"includeVersionCount\": {\n                    \"type\": \"\
        boolean\",\n                    \"default\": true,\n                    \"description\": \"Include version count in
        response\"\n                }\n            }\n        },\n        \"OwnerType\": {\n            \"type\": \"string\"\
        ,\n            \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\",\n                \"SESSION\"\
        ,\n                \"REALM\"\n            ],\n            \"description\": \"Type of entity that owns this save slot\"\
        \n        },\n        \"SaveCategory\": {\n            \"type\": \"string\",\n            \"enum\": [\n          \
        \      \"QUICK_SAVE\",\n                \"AUTO_SAVE\",\n                \"MANUAL_SAVE\",\n                \"CHECKPOINT\"\
        ,\n                \"STATE_SNAPSHOT\"\n            ],\n            \"description\": \"Category of save with predefined
        behaviors.\\nQUICK_SAVE: Single-slot fast save, overwritten frequently (max 1 version).\\nAUTO_SAVE: System-triggered
        periodic saves (max 5 versions, rolling).\\nMANUAL_SAVE: User-initiated named saves (max 10 versions, no auto-cleanup).\\
        nCHECKPOINT: Progress markers (max 20 versions, rolling).\\nSTATE_SNAPSHOT: Full state captures for debugging (max
        3 versions, rolling).\\n\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListSlotsResponse\"\
        ,\n    \"$defs\": {\n        \"ListSlotsResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Response containing a list of save slots for an owner\",\n            \"required\": [\n                \"slots\"\
        \n            ],\n            \"properties\": {\n                \"slots\": {\n                    \"type\": \"array\"\
        ,\n                    \"items\": {\n                        \"$ref\": \"#/$defs/SlotResponse\"\n                \
        \    },\n                    \"description\": \"List of slots\"\n                },\n                \"totalCount\"\
        : {\n                    \"type\": \"integer\",\n                    \"description\": \"Total number of slots for
        owner\"\n                }\n            }\n        },\n        \"SlotResponse\": {\n            \"type\": \"object\"\
        ,\n            \"description\": \"Complete metadata for a save slot including version statistics\",\n            \"\
        required\": [\n                \"slotId\",\n                \"ownerId\",\n                \"ownerType\",\n       \
        \         \"slotName\",\n                \"category\",\n                \"createdAt\"\n            ],\n          \
        \  \"properties\": {\n                \"slotId\": {\n                    \"type\": \"string\",\n                 \
        \   \"format\": \"uuid\",\n                    \"description\": \"Unique slot identifier\"\n                },\n \
        \               \"ownerId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"ID of the owning entity\"\n                },\n                \"ownerType\"\
        : {\n                    \"$ref\": \"#/$defs/OwnerType\",\n                    \"description\": \"Type of entity that
        owns this save slot\"\n                },\n                \"slotName\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Slot name\"\n                },\n                \"category\": {\n     \
        \               \"$ref\": \"#/$defs/SaveCategory\",\n                    \"description\": \"Save category determining
        retention and cleanup behavior\"\n                },\n                \"maxVersions\": {\n                    \"type\"\
        : \"integer\",\n                    \"description\": \"Maximum versions to retain\"\n                },\n        \
        \        \"retentionDays\": {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Days to retain versions (null = indefinite)\"\n                },\n      \
        \          \"compressionType\": {\n                    \"$ref\": \"#/$defs/CompressionType\",\n                  \
        \  \"description\": \"Compression algorithm used for save data\"\n                },\n                \"versionCount\"\
        : {\n                    \"type\": \"integer\",\n                    \"description\": \"Current number of versions
        in slot\"\n                },\n                \"latestVersion\": {\n                    \"type\": \"integer\",\n\
        \                    \"nullable\": true,\n                    \"description\": \"Latest version number (null if empty)\"\
        \n                },\n                \"totalSizeBytes\": {\n                    \"type\": \"integer\",\n        \
        \            \"format\": \"int64\",\n                    \"description\": \"Total storage used by all versions\"\n\
        \                },\n                \"createdAt\": {\n                    \"type\": \"string\",\n               \
        \     \"format\": \"date-time\",\n                    \"description\": \"Slot creation timestamp\"\n             \
        \   },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"date-time\",\n                    \"description\": \"Last modification timestamp\"\n                },\n     \
        \           \"metadata\": {\n                    \"type\": \"object\",\n                    \"additionalProperties\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"description\": \"\
        Custom key-value metadata\"\n                }\n            }\n        },\n        \"OwnerType\": {\n            \"\
        type\": \"string\",\n            \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\",\n     \
        \           \"SESSION\",\n                \"REALM\"\n            ],\n            \"description\": \"Type of entity
        that owns this save slot\"\n        },\n        \"SaveCategory\": {\n            \"type\": \"string\",\n         \
        \   \"enum\": [\n                \"QUICK_SAVE\",\n                \"AUTO_SAVE\",\n                \"MANUAL_SAVE\"\
        ,\n                \"CHECKPOINT\",\n                \"STATE_SNAPSHOT\"\n            ],\n            \"description\"\
        : \"Category of save with predefined behaviors.\\nQUICK_SAVE: Single-slot fast save, overwritten frequently (max 1
        version).\\nAUTO_SAVE: System-triggered periodic saves (max 5 versions, rolling).\\nMANUAL_SAVE: User-initiated named
        saves (max 10 versions, no auto-cleanup).\\nCHECKPOINT: Progress markers (max 20 versions, rolling).\\nSTATE_SNAPSHOT:
        Full state captures for debugging (max 3 versions, rolling).\\n\"\n        },\n        \"CompressionType\": {\n  \
        \          \"type\": \"string\",\n            \"enum\": [\n                \"NONE\",\n                \"GZIP\",\n\
        \                \"BROTLI\"\n            ],\n            \"description\": \"Compression algorithm used for save data\"\
        \n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"List slots for owner\",\n    \"description\": \"Returns all slots owned
        by the specified entity.\",\n    \"tags\": [\n        \"Slots\"\n    ],\n    \"deprecated\": false,\n    \"operationId\"\
        : \"ListSlots\"\n}"
  /save-load/slot/delete:
    post:
      tags:
      - Slots
      operationId: DeleteSlot
      summary: Delete slot and all versions
      description: |
        Permanently deletes a slot and all save versions within it.
        This is irreversible. Requires owner access or admin role.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteSlotRequest'
      responses:
        '200':
          description: Slot deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteSlotResponse'
        '404':
          description: Slot not found
        '403':
          description: Not authorized to delete this slot
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeleteSlotRequest\"\
        ,\n    \"$defs\": {\n        \"DeleteSlotRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to permanently delete a save slot and all its versions\",\n            \"required\": [\n             \
        \   \"gameId\",\n                \"ownerId\",\n                \"ownerType\",\n                \"slotName\"\n    \
        \        ],\n            \"properties\": {\n                \"gameId\": {\n                    \"type\": \"string\"\
        ,\n                    \"minLength\": 1,\n                    \"maxLength\": 32,\n                    \"pattern\"\
        : \"^[a-z][a-z0-9-]*$\",\n                    \"description\": \"Game identifier for namespace isolation\"\n     \
        \           },\n                \"ownerId\": {\n                    \"type\": \"string\",\n                    \"\
        format\": \"uuid\",\n                    \"description\": \"ID of the owning entity\"\n                },\n      \
        \          \"ownerType\": {\n                    \"$ref\": \"#/$defs/OwnerType\",\n                    \"description\"\
        : \"Type of entity that owns this save slot\"\n                },\n                \"slotName\": {\n             \
        \       \"type\": \"string\",\n                    \"description\": \"Slot name\"\n                }\n           \
        \ }\n        },\n        \"OwnerType\": {\n            \"type\": \"string\",\n            \"enum\": [\n          \
        \      \"ACCOUNT\",\n                \"CHARACTER\",\n                \"SESSION\",\n                \"REALM\"\n   \
        \         ],\n            \"description\": \"Type of entity that owns this save slot\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeleteSlotResponse\"\
        ,\n    \"$defs\": {\n        \"DeleteSlotResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Result of a slot deletion operation with cleanup statistics\",\n            \"required\": [\n                \"\
        deleted\",\n                \"versionsDeleted\",\n                \"bytesFreed\"\n            ],\n            \"properties\"\
        : {\n                \"deleted\": {\n                    \"type\": \"boolean\",\n                    \"description\"\
        : \"Whether slot was deleted\"\n                },\n                \"versionsDeleted\": {\n                    \"\
        type\": \"integer\",\n                    \"description\": \"Number of versions deleted\"\n                },\n  \
        \              \"bytesFreed\": {\n                    \"type\": \"integer\",\n                    \"format\": \"int64\"\
        ,\n                    \"description\": \"Storage freed in bytes\"\n                }\n            }\n        }\n\
        \    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Delete slot and all versions\",\n    \"description\": \"Permanently deletes
        a slot and all save versions within it.\\nThis is irreversible. Requires owner access or admin role.\\n\",\n    \"\
        tags\": [\n        \"Slots\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"DeleteSlot\"\n}"
  /save-load/slot/rename:
    post:
      tags:
      - Slots
      operationId: RenameSlot
      summary: Rename a save slot
      description: |
        Renames an existing slot without affecting its versions or data.
        The new name must not already exist for this owner.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RenameSlotRequest'
      responses:
        '200':
          description: Slot renamed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SlotResponse'
        '404':
          description: Slot not found
        '409':
          description: Target name already exists
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/RenameSlotRequest\"\
        ,\n    \"$defs\": {\n        \"RenameSlotRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to rename an existing save slot\",\n            \"required\": [\n                \"gameId\",\n       \
        \         \"ownerId\",\n                \"ownerType\",\n                \"slotName\",\n                \"newSlotName\"\
        \n            ],\n            \"properties\": {\n                \"gameId\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Game identifier\"\n                },\n                \"ownerId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Entity ID that owns the slot\"\n                },\n                \"ownerType\": {\n                    \"$ref\"\
        : \"#/$defs/OwnerType\",\n                    \"description\": \"Type of entity that owns this save slot\"\n     \
        \           },\n                \"slotName\": {\n                    \"type\": \"string\",\n                    \"\
        description\": \"Current slot name\"\n                },\n                \"newSlotName\": {\n                   \
        \ \"type\": \"string\",\n                    \"minLength\": 1,\n                    \"maxLength\": 64,\n         \
        \           \"pattern\": \"^[a-z0-9]([a-z0-9-]*[a-z0-9])?$\",\n                    \"description\": \"New slot name\"\
        \n                }\n            }\n        },\n        \"OwnerType\": {\n            \"type\": \"string\",\n    \
        \        \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\",\n                \"SESSION\",\n\
        \                \"REALM\"\n            ],\n            \"description\": \"Type of entity that owns this save slot\"\
        \n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SlotResponse\"\
        ,\n    \"$defs\": {\n        \"SlotResponse\": {\n            \"type\": \"object\",\n            \"description\":
        \"Complete metadata for a save slot including version statistics\",\n            \"required\": [\n               \
        \ \"slotId\",\n                \"ownerId\",\n                \"ownerType\",\n                \"slotName\",\n     \
        \           \"category\",\n                \"createdAt\"\n            ],\n            \"properties\": {\n        \
        \        \"slotId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n   \
        \                 \"description\": \"Unique slot identifier\"\n                },\n                \"ownerId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"ID of the owning entity\"\n                },\n                \"ownerType\": {\n                    \"$ref\"\
        : \"#/$defs/OwnerType\",\n                    \"description\": \"Type of entity that owns this save slot\"\n     \
        \           },\n                \"slotName\": {\n                    \"type\": \"string\",\n                    \"\
        description\": \"Slot name\"\n                },\n                \"category\": {\n                    \"$ref\": \"\
        #/$defs/SaveCategory\",\n                    \"description\": \"Save category determining retention and cleanup behavior\"\
        \n                },\n                \"maxVersions\": {\n                    \"type\": \"integer\",\n           \
        \         \"description\": \"Maximum versions to retain\"\n                },\n                \"retentionDays\":
        {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Days to retain versions (null = indefinite)\"\n                },\n                \"compressionType\": {\n  \
        \                  \"$ref\": \"#/$defs/CompressionType\",\n                    \"description\": \"Compression algorithm
        used for save data\"\n                },\n                \"versionCount\": {\n                    \"type\": \"integer\"\
        ,\n                    \"description\": \"Current number of versions in slot\"\n                },\n             \
        \   \"latestVersion\": {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n  \
        \                  \"description\": \"Latest version number (null if empty)\"\n                },\n              \
        \  \"totalSizeBytes\": {\n                    \"type\": \"integer\",\n                    \"format\": \"int64\",\n\
        \                    \"description\": \"Total storage used by all versions\"\n                },\n               \
        \ \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\",\n  \
        \                  \"description\": \"Slot creation timestamp\"\n                },\n                \"updatedAt\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\",\n                 \
        \   \"description\": \"Last modification timestamp\"\n                },\n                \"metadata\": {\n      \
        \              \"type\": \"object\",\n                    \"additionalProperties\": {\n                        \"\
        type\": \"string\"\n                    },\n                    \"description\": \"Custom key-value metadata\"\n \
        \               }\n            }\n        },\n        \"OwnerType\": {\n            \"type\": \"string\",\n      \
        \      \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\",\n                \"SESSION\",\n \
        \               \"REALM\"\n            ],\n            \"description\": \"Type of entity that owns this save slot\"\
        \n        },\n        \"SaveCategory\": {\n            \"type\": \"string\",\n            \"enum\": [\n          \
        \      \"QUICK_SAVE\",\n                \"AUTO_SAVE\",\n                \"MANUAL_SAVE\",\n                \"CHECKPOINT\"\
        ,\n                \"STATE_SNAPSHOT\"\n            ],\n            \"description\": \"Category of save with predefined
        behaviors.\\nQUICK_SAVE: Single-slot fast save, overwritten frequently (max 1 version).\\nAUTO_SAVE: System-triggered
        periodic saves (max 5 versions, rolling).\\nMANUAL_SAVE: User-initiated named saves (max 10 versions, no auto-cleanup).\\
        nCHECKPOINT: Progress markers (max 20 versions, rolling).\\nSTATE_SNAPSHOT: Full state captures for debugging (max
        3 versions, rolling).\\n\"\n        },\n        \"CompressionType\": {\n            \"type\": \"string\",\n      \
        \      \"enum\": [\n                \"NONE\",\n                \"GZIP\",\n                \"BROTLI\"\n           \
        \ ],\n            \"description\": \"Compression algorithm used for save data\"\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Rename a save slot\",\n    \"description\": \"Renames an existing slot
        without affecting its versions or data.\\nThe new name must not already exist for this owner.\\n\",\n    \"tags\"\
        : [\n        \"Slots\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"RenameSlot\"\n}"
  /save-load/slot/bulk-delete:
    post:
      tags:
      - Slots
      operationId: BulkDeleteSlots
      summary: Delete multiple slots at once
      description: |
        Deletes multiple slots and all their versions in a single operation.
        Useful for cleanup operations or account deletion.
      x-permissions:
      - role: admin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BulkDeleteSlotsRequest'
      responses:
        '200':
          description: Slots deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BulkDeleteSlotsResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/BulkDeleteSlotsRequest\"\
        ,\n    \"$defs\": {\n        \"BulkDeleteSlotsRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to delete multiple save slots in a single operation\",\n            \"required\": [\n                \"\
        gameId\",\n                \"slotIds\"\n            ],\n            \"properties\": {\n                \"gameId\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Game identifier\"\n       \
        \         },\n                \"slotIds\": {\n                    \"type\": \"array\",\n                    \"items\"\
        : {\n                        \"type\": \"string\",\n                        \"format\": \"uuid\"\n               \
        \     },\n                    \"description\": \"Slot IDs to delete\"\n                }\n            }\n        }\n\
        \    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/BulkDeleteSlotsResponse\"\
        ,\n    \"$defs\": {\n        \"BulkDeleteSlotsResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Result of bulk slot deletion with total cleanup statistics\",\n            \"required\": [\n                \"\
        deletedCount\",\n                \"bytesFreed\"\n            ],\n            \"properties\": {\n                \"\
        deletedCount\": {\n                    \"type\": \"integer\",\n                    \"description\": \"Number of slots
        deleted\"\n                },\n                \"bytesFreed\": {\n                    \"type\": \"integer\",\n   \
        \                 \"format\": \"int64\",\n                    \"description\": \"Total storage freed\"\n         \
        \       }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Delete multiple slots at once\",\n    \"description\": \"Deletes multiple
        slots and all their versions in a single operation.\\nUseful for cleanup operations or account deletion.\\n\",\n \
        \   \"tags\": [\n        \"Slots\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"BulkDeleteSlots\"\n\
        }"
  /save-load/save:
    post:
      tags:
      - Saves
      operationId: Save
      summary: Save data to slot
      description: |
        Creates a new version in the specified slot with the provided data.
        If the slot doesn't exist, it's auto-created with default configuration.

        Large saves (>1MB by default) are automatically compressed.
        Rolling version cleanup is applied based on slot configuration.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SaveRequest'
      responses:
        '200':
          description: Save successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SaveResponse'
        '400':
          description: Invalid request or data validation failed
        '413':
          description: Save data exceeds maximum size limit
        '403':
          description: Not authorized to save to this slot
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SaveRequest\"\
        ,\n    \"$defs\": {\n        \"SaveRequest\": {\n            \"type\": \"object\",\n            \"description\": \"\
        Request to save game state data to a slot with optional compression and metadata\",\n            \"required\": [\n\
        \                \"gameId\",\n                \"ownerId\",\n                \"ownerType\",\n                \"slotName\"\
        ,\n                \"data\"\n            ],\n            \"properties\": {\n                \"gameId\": {\n      \
        \              \"type\": \"string\",\n                    \"description\": \"Game identifier for namespace isolation\"\
        \n                },\n                \"ownerId\": {\n                    \"type\": \"string\",\n                \
        \    \"format\": \"uuid\",\n                    \"description\": \"ID of the owning entity\"\n                },\n\
        \                \"ownerType\": {\n                    \"$ref\": \"#/$defs/OwnerType\",\n                    \"description\"\
        : \"Type of entity that owns this save slot\"\n                },\n                \"slotName\": {\n             \
        \       \"type\": \"string\",\n                    \"description\": \"Slot name (auto-created if doesn't exist)\"\n\
        \                },\n                \"category\": {\n                    \"allOf\": [\n                        {\n\
        \                            \"$ref\": \"#/$defs/SaveCategory\"\n                        }\n                    ],\n\
        \                    \"nullable\": true,\n                    \"description\": \"Category for auto-created slots (defaults
        to MANUAL_SAVE)\"\n                },\n                \"data\": {\n                    \"type\": \"string\",\n  \
        \                  \"format\": \"byte\",\n                    \"description\": \"Base64-encoded save data\"\n    \
        \            },\n                \"schemaVersion\": {\n                    \"type\": \"string\",\n               \
        \     \"nullable\": true,\n                    \"description\": \"Schema version identifier for migration tracking\"\
        \n                },\n                \"displayName\": {\n                    \"type\": \"string\",\n            \
        \        \"nullable\": true,\n                    \"maxLength\": 128,\n                    \"description\": \"Human-readable
        name for this save\"\n                },\n                \"thumbnail\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"byte\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Optional preview image (JPEG/WebP). Max size configurable\\n(default 256KB). Used for save slot previews in game
        UI.\\n\"\n                },\n                \"deviceId\": {\n                    \"type\": \"string\",\n       \
        \             \"maxLength\": 64,\n                    \"nullable\": true,\n                    \"description\": \"\
        Optional device identifier for cloud save conflict detection.\\nWhen provided, saves are prefixed/tagged with device
        info,\\nenabling opt-in cross-device sync with collision awareness.\\n\"\n                },\n                \"metadata\"\
        : {\n                    \"type\": \"object\",\n                    \"nullable\": true,\n                    \"additionalProperties\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"description\": \"\
        Custom metadata (e.g., level, playtime, location)\"\n                },\n                \"pinAsCheckpoint\": {\n\
        \                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"maxLength\"\
        : 64,\n                    \"description\": \"If provided, pin this version with checkpoint name\"\n             \
        \   }\n            }\n        },\n        \"OwnerType\": {\n            \"type\": \"string\",\n            \"enum\"\
        : [\n                \"ACCOUNT\",\n                \"CHARACTER\",\n                \"SESSION\",\n                \"\
        REALM\"\n            ],\n            \"description\": \"Type of entity that owns this save slot\"\n        },\n  \
        \      \"SaveCategory\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"QUICK_SAVE\"\
        ,\n                \"AUTO_SAVE\",\n                \"MANUAL_SAVE\",\n                \"CHECKPOINT\",\n           \
        \     \"STATE_SNAPSHOT\"\n            ],\n            \"description\": \"Category of save with predefined behaviors.\\
        nQUICK_SAVE: Single-slot fast save, overwritten frequently (max 1 version).\\nAUTO_SAVE: System-triggered periodic
        saves (max 5 versions, rolling).\\nMANUAL_SAVE: User-initiated named saves (max 10 versions, no auto-cleanup).\\nCHECKPOINT:
        Progress markers (max 20 versions, rolling).\\nSTATE_SNAPSHOT: Full state captures for debugging (max 3 versions,
        rolling).\\n\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SaveResponse\"\
        ,\n    \"$defs\": {\n        \"SaveResponse\": {\n            \"type\": \"object\",\n            \"description\":
        \"Result of a save operation including version info and conflict detection\",\n            \"required\": [\n     \
        \           \"slotId\",\n                \"versionNumber\",\n                \"contentHash\",\n                \"\
        sizeBytes\",\n                \"createdAt\"\n            ],\n            \"properties\": {\n                \"slotId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Slot identifier\"\n                },\n                \"versionNumber\": {\n                   \
        \ \"type\": \"integer\",\n                    \"description\": \"Assigned version number\"\n                },\n \
        \               \"contentHash\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"SHA-256 hash of save data\"\n                },\n                \"sizeBytes\": {\n                    \"type\"\
        : \"integer\",\n                    \"format\": \"int64\",\n                    \"description\": \"Size of save data
        in bytes\"\n                },\n                \"compressedSizeBytes\": {\n                    \"type\": \"integer\"\
        ,\n                    \"format\": \"int64\",\n                    \"description\": \"Compressed size (if compression
        applied)\"\n                },\n                \"compressionRatio\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"double\",\n                    \"description\": \"Compression ratio (0-1)\"\n\
        \                },\n                \"pinned\": {\n                    \"type\": \"boolean\",\n                 \
        \   \"description\": \"Whether version was pinned\"\n                },\n                \"checkpointName\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Checkpoint name if pinned\"\n                },\n                \"thumbnailUrl\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uri\",\n                    \"nullable\": true,\n               \
        \     \"description\": \"Pre-signed URL to retrieve thumbnail (if provided)\"\n                },\n              \
        \  \"conflictDetected\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"True
        if this save overwrote a version from a different device.\\nOnly relevant when deviceId is used for cloud sync.\\\
        n\"\n                },\n                \"conflictingDeviceId\": {\n                    \"type\": \"string\",\n \
        \                   \"nullable\": true,\n                    \"description\": \"Device ID of the overwritten version
        (if conflict)\"\n                },\n                \"conflictingVersion\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Version number that was overwritten
        (if conflict)\"\n                },\n                \"createdAt\": {\n                    \"type\": \"string\",\n\
        \                    \"format\": \"date-time\",\n                    \"description\": \"Save timestamp\"\n       \
        \         },\n                \"versionsCleanedUp\": {\n                    \"type\": \"integer\",\n             \
        \       \"description\": \"Number of old versions cleaned up by rolling policy\"\n                },\n           \
        \     \"uploadPending\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"True
        if async upload is enabled and data is queued for MinIO upload.\\nSave is immediately loadable from Redis cache, but
        not yet durable.\\n\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Save data to slot\",\n    \"description\": \"Creates a new version in the
        specified slot with the provided data.\\nIf the slot doesn't exist, it's auto-created with default configuration.\\
        n\\nLarge saves (>1MB by default) are automatically compressed.\\nRolling version cleanup is applied based on slot
        configuration.\\n\",\n    \"tags\": [\n        \"Saves\"\n    ],\n    \"deprecated\": false,\n    \"operationId\"\
        : \"Save\"\n}"
  /save-load/load:
    post:
      tags:
      - Saves
      operationId: Load
      summary: Load data from slot
      description: |
        Retrieves save data from the specified slot. By default, loads the
        latest version. Optionally specify a version number or checkpoint name.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoadRequest'
      responses:
        '200':
          description: Load successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoadResponse'
        '404':
          description: Slot or version not found
        '403':
          description: Not authorized to load from this slot
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LoadRequest\"\
        ,\n    \"$defs\": {\n        \"LoadRequest\": {\n            \"type\": \"object\",\n            \"description\": \"\
        Request to load save data from a specific slot and version\",\n            \"required\": [\n                \"gameId\"\
        ,\n                \"ownerId\",\n                \"ownerType\",\n                \"slotName\"\n            ],\n  \
        \          \"properties\": {\n                \"gameId\": {\n                    \"type\": \"string\",\n         \
        \           \"minLength\": 1,\n                    \"maxLength\": 32,\n                    \"pattern\": \"^[a-z][a-z0-9-]*$\"\
        ,\n                    \"description\": \"Game identifier for namespace isolation\"\n                },\n        \
        \        \"ownerId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n  \
        \                  \"description\": \"ID of the owning entity\"\n                },\n                \"ownerType\"\
        : {\n                    \"$ref\": \"#/$defs/OwnerType\",\n                    \"description\": \"Type of entity that
        owns this save slot\"\n                },\n                \"slotName\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Slot name\"\n                },\n                \"versionNumber\": {\n\
        \                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Specific version to load (defaults to latest)\"\n                },\n                \"checkpointName\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Load by checkpoint name instead of version number\"\n                },\n                \"includeMetadata\":
        {\n                    \"type\": \"boolean\",\n                    \"default\": true,\n                    \"description\"\
        : \"Include version metadata in response\"\n                }\n            }\n        },\n        \"OwnerType\": {\n\
        \            \"type\": \"string\",\n            \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\"\
        ,\n                \"SESSION\",\n                \"REALM\"\n            ],\n            \"description\": \"Type of
        entity that owns this save slot\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LoadResponse\"\
        ,\n    \"$defs\": {\n        \"LoadResponse\": {\n            \"type\": \"object\",\n            \"description\":
        \"Response containing loaded save data with integrity verification\",\n            \"required\": [\n             \
        \   \"slotId\",\n                \"versionNumber\",\n                \"data\",\n                \"contentHash\"\n\
        \            ],\n            \"properties\": {\n                \"slotId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Slot identifier\"\n         \
        \       },\n                \"versionNumber\": {\n                    \"type\": \"integer\",\n                   \
        \ \"description\": \"Version number loaded\"\n                },\n                \"data\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"byte\",\n                    \"description\": \"Base64-encoded
        save data (decompressed)\"\n                },\n                \"contentHash\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"SHA-256 hash for integrity verification\"\n                },\n\
        \                \"schemaVersion\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Schema version of this save\"\n                },\n              \
        \  \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n      \
        \              \"description\": \"Human-readable name\"\n                },\n                \"pinned\": {\n     \
        \               \"type\": \"boolean\",\n                    \"description\": \"Whether this version is pinned\"\n\
        \                },\n                \"checkpointName\": {\n                    \"type\": \"string\",\n          \
        \          \"nullable\": true,\n                    \"description\": \"Checkpoint name if pinned\"\n             \
        \   },\n                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"date-time\",\n                    \"description\": \"Save timestamp\"\n                },\n                \"\
        metadata\": {\n                    \"type\": \"object\",\n                    \"additionalProperties\": {\n      \
        \                  \"type\": \"string\"\n                    },\n                    \"description\": \"Custom metadata\"\
        \n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Load data from slot\",\n    \"description\": \"Retrieves save data from
        the specified slot. By default, loads the\\nlatest version. Optionally specify a version number or checkpoint name.\\\
        n\",\n    \"tags\": [\n        \"Saves\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"Load\"\n}"
  /save-load/save-delta:
    post:
      tags:
      - Saves
      operationId: SaveDelta
      summary: Save incremental changes from base version
      description: |
        Creates a new version by applying a delta (patch) to a base version.
        Significantly reduces storage for large saves with small incremental changes.

        Uses JSON Patch (RFC 6902) by default. The implementation is designed to
        allow swapping to binary diff algorithms (bsdiff/xdelta) if needed for
        specific use cases (e.g., binary game state).

        Delta versions store only the patch; full data is reconstructed on load.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SaveDeltaRequest'
      responses:
        '200':
          description: Delta save successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SaveDeltaResponse'
        '400':
          description: Invalid delta or base version not found
        '409':
          description: Base version has been deleted (cannot apply delta)
        '413':
          description: Delta too large (consider full save instead)
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SaveDeltaRequest\"\
        ,\n    \"$defs\": {\n        \"SaveDeltaRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to save incremental changes as a delta from a base version\",\n            \"required\": [\n         \
        \       \"gameId\",\n                \"ownerId\",\n                \"ownerType\",\n                \"slotName\",\n\
        \                \"baseVersion\",\n                \"delta\"\n            ],\n            \"properties\": {\n    \
        \            \"gameId\": {\n                    \"type\": \"string\",\n                    \"description\": \"Game
        identifier for namespace isolation\"\n                },\n                \"ownerId\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"ID of the owning
        entity\"\n                },\n                \"ownerType\": {\n                    \"$ref\": \"#/$defs/OwnerType\"\
        ,\n                    \"description\": \"Type of entity that owns this save slot\"\n                },\n        \
        \        \"slotName\": {\n                    \"type\": \"string\",\n                    \"description\": \"Name of
        the slot to save the delta to\"\n                },\n                \"baseVersion\": {\n                    \"type\"\
        : \"integer\",\n                    \"description\": \"Version number this delta is based on\"\n                },\n\
        \                \"delta\": {\n                    \"type\": \"string\",\n                    \"format\": \"byte\"\
        ,\n                    \"description\": \"Base64-encoded delta/patch data.\\nFor JSON_PATCH: Array of RFC 6902 operations\\
        nFor BSDIFF/XDELTA: Binary patch data\\n\"\n                },\n                \"algorithm\": {\n               \
        \     \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/DeltaAlgorithm\"\n\
        \                        }\n                    ],\n                    \"nullable\": true,\n                    \"\
        description\": \"Delta computation algorithm to use (defaults to JSON_PATCH)\"\n                },\n             \
        \   \"schemaVersion\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Schema version of this save for migration tracking\"\n                },\n  \
        \              \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Human-readable name for this delta save\"\n                },\n          \
        \      \"deviceId\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n     \
        \               \"description\": \"Device identifier for cross-device sync conflict detection\"\n                },\n\
        \                \"metadata\": {\n                    \"type\": \"object\",\n                    \"nullable\": true,\n\
        \                    \"additionalProperties\": {\n                        \"type\": \"string\"\n                 \
        \   },\n                    \"description\": \"Custom key-value metadata for this delta version\"\n              \
        \  }\n            }\n        },\n        \"OwnerType\": {\n            \"type\": \"string\",\n            \"enum\"\
        : [\n                \"ACCOUNT\",\n                \"CHARACTER\",\n                \"SESSION\",\n                \"\
        REALM\"\n            ],\n            \"description\": \"Type of entity that owns this save slot\"\n        },\n  \
        \      \"DeltaAlgorithm\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"JSON_PATCH\"\
        ,\n                \"BSDIFF\",\n                \"XDELTA\"\n            ],\n            \"default\": \"JSON_PATCH\"\
        ,\n            \"description\": \"Algorithm used for delta computation.\\nJSON_PATCH: RFC 6902, best for structured
        JSON data\\nBSDIFF: Binary diff, good for general binary data\\nXDELTA: RFC 3284 VCDIFF, efficient for large binary
        files\\n\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SaveDeltaResponse\"\
        ,\n    \"$defs\": {\n        \"SaveDeltaResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Result of delta save operation with size and chain information\",\n            \"required\": [\n             \
        \   \"slotId\",\n                \"versionNumber\",\n                \"baseVersion\",\n                \"deltaSizeBytes\"\
        ,\n                \"estimatedFullSizeBytes\",\n                \"createdAt\"\n            ],\n            \"properties\"\
        : {\n                \"slotId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"description\": \"Unique identifier of the save slot\"\n                },\n       \
        \         \"versionNumber\": {\n                    \"type\": \"integer\",\n                    \"description\": \"\
        New version number\"\n                },\n                \"baseVersion\": {\n                    \"type\": \"integer\"\
        ,\n                    \"description\": \"Base version this delta is relative to\"\n                },\n         \
        \       \"deltaSizeBytes\": {\n                    \"type\": \"integer\",\n                    \"format\": \"int64\"\
        ,\n                    \"description\": \"Size of stored delta\"\n                },\n                \"estimatedFullSizeBytes\"\
        : {\n                    \"type\": \"integer\",\n                    \"format\": \"int64\",\n                    \"\
        description\": \"Estimated size when reconstructed\"\n                },\n                \"chainLength\": {\n   \
        \                 \"type\": \"integer\",\n                    \"description\": \"Number of deltas in chain to base
        snapshot\"\n                },\n                \"compressionSavings\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"double\",\n                    \"description\": \"Storage savings vs full snapshot
        (0-1)\"\n                },\n                \"createdAt\": {\n                    \"type\": \"string\",\n       \
        \             \"format\": \"date-time\",\n                    \"description\": \"When the delta version was created\"\
        \n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Save incremental changes from base version\",\n    \"description\": \"\
        Creates a new version by applying a delta (patch) to a base version.\\nSignificantly reduces storage for large saves
        with small incremental changes.\\n\\nUses JSON Patch (RFC 6902) by default. The implementation is designed to\\nallow
        swapping to binary diff algorithms (bsdiff/xdelta) if needed for\\nspecific use cases (e.g., binary game state).\\
        n\\nDelta versions store only the patch; full data is reconstructed on load.\\n\",\n    \"tags\": [\n        \"Saves\"\
        \n    ],\n    \"deprecated\": false,\n    \"operationId\": \"SaveDelta\"\n}"
  /save-load/load-with-deltas:
    post:
      tags:
      - Saves
      operationId: LoadWithDeltas
      summary: Load save reconstructing from delta chain
      description: |
        Loads save data, automatically reconstructing from delta chain if needed.
        Returns the full reconstructed data, not the raw delta.

        For performance, the service may cache reconstructed data or collapse
        delta chains during background cleanup.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoadRequest'
      responses:
        '200':
          description: Load successful (reconstructed if delta)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoadResponse'
        '404':
          description: Slot or version not found
        '422':
          description: Delta chain broken (base version missing)
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LoadRequest\"\
        ,\n    \"$defs\": {\n        \"LoadRequest\": {\n            \"type\": \"object\",\n            \"description\": \"\
        Request to load save data from a specific slot and version\",\n            \"required\": [\n                \"gameId\"\
        ,\n                \"ownerId\",\n                \"ownerType\",\n                \"slotName\"\n            ],\n  \
        \          \"properties\": {\n                \"gameId\": {\n                    \"type\": \"string\",\n         \
        \           \"minLength\": 1,\n                    \"maxLength\": 32,\n                    \"pattern\": \"^[a-z][a-z0-9-]*$\"\
        ,\n                    \"description\": \"Game identifier for namespace isolation\"\n                },\n        \
        \        \"ownerId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n  \
        \                  \"description\": \"ID of the owning entity\"\n                },\n                \"ownerType\"\
        : {\n                    \"$ref\": \"#/$defs/OwnerType\",\n                    \"description\": \"Type of entity that
        owns this save slot\"\n                },\n                \"slotName\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Slot name\"\n                },\n                \"versionNumber\": {\n\
        \                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Specific version to load (defaults to latest)\"\n                },\n                \"checkpointName\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Load by checkpoint name instead of version number\"\n                },\n                \"includeMetadata\":
        {\n                    \"type\": \"boolean\",\n                    \"default\": true,\n                    \"description\"\
        : \"Include version metadata in response\"\n                }\n            }\n        },\n        \"OwnerType\": {\n\
        \            \"type\": \"string\",\n            \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\"\
        ,\n                \"SESSION\",\n                \"REALM\"\n            ],\n            \"description\": \"Type of
        entity that owns this save slot\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LoadResponse\"\
        ,\n    \"$defs\": {\n        \"LoadResponse\": {\n            \"type\": \"object\",\n            \"description\":
        \"Response containing loaded save data with integrity verification\",\n            \"required\": [\n             \
        \   \"slotId\",\n                \"versionNumber\",\n                \"data\",\n                \"contentHash\"\n\
        \            ],\n            \"properties\": {\n                \"slotId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Slot identifier\"\n         \
        \       },\n                \"versionNumber\": {\n                    \"type\": \"integer\",\n                   \
        \ \"description\": \"Version number loaded\"\n                },\n                \"data\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"byte\",\n                    \"description\": \"Base64-encoded
        save data (decompressed)\"\n                },\n                \"contentHash\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"SHA-256 hash for integrity verification\"\n                },\n\
        \                \"schemaVersion\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Schema version of this save\"\n                },\n              \
        \  \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n      \
        \              \"description\": \"Human-readable name\"\n                },\n                \"pinned\": {\n     \
        \               \"type\": \"boolean\",\n                    \"description\": \"Whether this version is pinned\"\n\
        \                },\n                \"checkpointName\": {\n                    \"type\": \"string\",\n          \
        \          \"nullable\": true,\n                    \"description\": \"Checkpoint name if pinned\"\n             \
        \   },\n                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"date-time\",\n                    \"description\": \"Save timestamp\"\n                },\n                \"\
        metadata\": {\n                    \"type\": \"object\",\n                    \"additionalProperties\": {\n      \
        \                  \"type\": \"string\"\n                    },\n                    \"description\": \"Custom metadata\"\
        \n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Load save reconstructing from delta chain\",\n    \"description\": \"Loads
        save data, automatically reconstructing from delta chain if needed.\\nReturns the full reconstructed data, not the
        raw delta.\\n\\nFor performance, the service may cache reconstructed data or collapse\\ndelta chains during background
        cleanup.\\n\",\n    \"tags\": [\n        \"Saves\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"LoadWithDeltas\"\
        \n}"
  /save-load/collapse-deltas:
    post:
      tags:
      - Saves
      operationId: CollapseDeltas
      summary: Collapse delta chain into full snapshot
      description: |
        Collapses a chain of delta versions into a single full snapshot.
        Useful for reducing load latency or before deleting base versions.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CollapseDeltasRequest'
      responses:
        '200':
          description: Delta chain collapsed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SaveResponse'
        '404':
          description: Slot or version not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/CollapseDeltasRequest\"\
        ,\n    \"$defs\": {\n        \"CollapseDeltasRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to collapse a delta chain into a full snapshot\",\n            \"required\": [\n                \"gameId\"\
        ,\n                \"ownerId\",\n                \"ownerType\",\n                \"slotName\"\n            ],\n  \
        \          \"properties\": {\n                \"gameId\": {\n                    \"type\": \"string\",\n         \
        \           \"description\": \"Game identifier for namespace isolation\"\n                },\n                \"ownerId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Entity ID that owns the save slot\"\n                },\n                \"ownerType\": {\n     \
        \               \"$ref\": \"#/$defs/OwnerType\",\n                    \"description\": \"Type of entity that owns
        this save slot\"\n                },\n                \"slotName\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Name of the slot containing deltas to collapse\"\n                },\n   \
        \             \"versionNumber\": {\n                    \"type\": \"integer\",\n                    \"nullable\":
        true,\n                    \"description\": \"Version to collapse to (latest if null)\"\n                },\n    \
        \            \"deleteIntermediates\": {\n                    \"type\": \"boolean\",\n                    \"default\"\
        : true,\n                    \"description\": \"Delete intermediate delta versions after collapse\"\n            \
        \    }\n            }\n        },\n        \"OwnerType\": {\n            \"type\": \"string\",\n            \"enum\"\
        : [\n                \"ACCOUNT\",\n                \"CHARACTER\",\n                \"SESSION\",\n                \"\
        REALM\"\n            ],\n            \"description\": \"Type of entity that owns this save slot\"\n        }\n   \
        \ }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SaveResponse\"\
        ,\n    \"$defs\": {\n        \"SaveResponse\": {\n            \"type\": \"object\",\n            \"description\":
        \"Result of a save operation including version info and conflict detection\",\n            \"required\": [\n     \
        \           \"slotId\",\n                \"versionNumber\",\n                \"contentHash\",\n                \"\
        sizeBytes\",\n                \"createdAt\"\n            ],\n            \"properties\": {\n                \"slotId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Slot identifier\"\n                },\n                \"versionNumber\": {\n                   \
        \ \"type\": \"integer\",\n                    \"description\": \"Assigned version number\"\n                },\n \
        \               \"contentHash\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"SHA-256 hash of save data\"\n                },\n                \"sizeBytes\": {\n                    \"type\"\
        : \"integer\",\n                    \"format\": \"int64\",\n                    \"description\": \"Size of save data
        in bytes\"\n                },\n                \"compressedSizeBytes\": {\n                    \"type\": \"integer\"\
        ,\n                    \"format\": \"int64\",\n                    \"description\": \"Compressed size (if compression
        applied)\"\n                },\n                \"compressionRatio\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"double\",\n                    \"description\": \"Compression ratio (0-1)\"\n\
        \                },\n                \"pinned\": {\n                    \"type\": \"boolean\",\n                 \
        \   \"description\": \"Whether version was pinned\"\n                },\n                \"checkpointName\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Checkpoint name if pinned\"\n                },\n                \"thumbnailUrl\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uri\",\n                    \"nullable\": true,\n               \
        \     \"description\": \"Pre-signed URL to retrieve thumbnail (if provided)\"\n                },\n              \
        \  \"conflictDetected\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"True
        if this save overwrote a version from a different device.\\nOnly relevant when deviceId is used for cloud sync.\\\
        n\"\n                },\n                \"conflictingDeviceId\": {\n                    \"type\": \"string\",\n \
        \                   \"nullable\": true,\n                    \"description\": \"Device ID of the overwritten version
        (if conflict)\"\n                },\n                \"conflictingVersion\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Version number that was overwritten
        (if conflict)\"\n                },\n                \"createdAt\": {\n                    \"type\": \"string\",\n\
        \                    \"format\": \"date-time\",\n                    \"description\": \"Save timestamp\"\n       \
        \         },\n                \"versionsCleanedUp\": {\n                    \"type\": \"integer\",\n             \
        \       \"description\": \"Number of old versions cleaned up by rolling policy\"\n                },\n           \
        \     \"uploadPending\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"True
        if async upload is enabled and data is queued for MinIO upload.\\nSave is immediately loadable from Redis cache, but
        not yet durable.\\n\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Collapse delta chain into full snapshot\",\n    \"description\": \"Collapses
        a chain of delta versions into a single full snapshot.\\nUseful for reducing load latency or before deleting base
        versions.\\n\",\n    \"tags\": [\n        \"Saves\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"CollapseDeltas\"\
        \n}"
  /save-load/version/list:
    post:
      tags:
      - Versions
      operationId: ListVersions
      summary: List versions in slot
      description: Returns all versions in a slot with metadata.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListVersionsRequest'
      responses:
        '200':
          description: Versions listed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListVersionsResponse'
        '404':
          description: Slot not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListVersionsRequest\"\
        ,\n    \"$defs\": {\n        \"ListVersionsRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to list all versions within a save slot with pagination\",\n            \"required\": [\n            \
        \    \"ownerId\",\n                \"ownerType\",\n                \"slotName\"\n            ],\n            \"properties\"\
        : {\n                \"ownerId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"description\": \"ID of the owning entity\"\n                },\n                \"\
        ownerType\": {\n                    \"$ref\": \"#/$defs/OwnerType\",\n                    \"description\": \"Type
        of entity that owns this save slot\"\n                },\n                \"slotName\": {\n                    \"\
        type\": \"string\",\n                    \"description\": \"Slot name\"\n                },\n                \"offset\"\
        : {\n                    \"type\": \"integer\",\n                    \"default\": 0,\n                    \"description\"\
        : \"Pagination offset\"\n                },\n                \"limit\": {\n                    \"type\": \"integer\"\
        ,\n                    \"default\": 20,\n                    \"maximum\": 100,\n                    \"description\"\
        : \"Maximum results to return\"\n                },\n                \"pinnedOnly\": {\n                    \"type\"\
        : \"boolean\",\n                    \"default\": false,\n                    \"description\": \"Only return pinned
        versions\"\n                }\n            }\n        },\n        \"OwnerType\": {\n            \"type\": \"string\"\
        ,\n            \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\",\n                \"SESSION\"\
        ,\n                \"REALM\"\n            ],\n            \"description\": \"Type of entity that owns this save slot\"\
        \n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListVersionsResponse\"\
        ,\n    \"$defs\": {\n        \"ListVersionsResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Paginated list of save versions within a slot\",\n            \"required\": [\n                \"versions\",\n\
        \                \"totalCount\"\n            ],\n            \"properties\": {\n                \"versions\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"$ref\": \"\
        #/$defs/VersionResponse\"\n                    },\n                    \"description\": \"List of versions\"\n   \
        \             },\n                \"totalCount\": {\n                    \"type\": \"integer\",\n                \
        \    \"description\": \"Total version count in slot\"\n                }\n            }\n        },\n        \"VersionResponse\"\
        : {\n            \"type\": \"object\",\n            \"description\": \"Metadata for a single save version including
        size and checkpoint info\",\n            \"required\": [\n                \"versionNumber\",\n                \"contentHash\"\
        ,\n                \"sizeBytes\",\n                \"createdAt\"\n            ],\n            \"properties\": {\n\
        \                \"versionNumber\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Version number\"\n                },\n                \"assetId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Reference to asset in lib-asset\"\
        \n                },\n                \"contentHash\": {\n                    \"type\": \"string\",\n            \
        \        \"description\": \"SHA-256 hash\"\n                },\n                \"sizeBytes\": {\n               \
        \     \"type\": \"integer\",\n                    \"format\": \"int64\",\n                    \"description\": \"\
        Size in bytes\"\n                },\n                \"compressedSizeBytes\": {\n                    \"type\": \"\
        integer\",\n                    \"format\": \"int64\",\n                    \"description\": \"Compressed size if
        applicable\"\n                },\n                \"schemaVersion\": {\n                    \"type\": \"string\",\n\
        \                    \"nullable\": true,\n                    \"description\": \"Schema version\"\n              \
        \  },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Human-readable name\"\n                },\n                \"pinned\"\
        : {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether version is pinned\"\
        \n                },\n                \"checkpointName\": {\n                    \"type\": \"string\",\n         \
        \           \"nullable\": true,\n                    \"description\": \"Checkpoint name if pinned\"\n            \
        \    },\n                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"date-time\",\n                    \"description\": \"Creation timestamp\"\n                },\n              \
        \  \"metadata\": {\n                    \"type\": \"object\",\n                    \"additionalProperties\": {\n \
        \                       \"type\": \"string\"\n                    },\n                    \"description\": \"Custom
        metadata\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"List versions in slot\",\n    \"description\": \"Returns all versions in
        a slot with metadata.\",\n    \"tags\": [\n        \"Versions\"\n    ],\n    \"deprecated\": false,\n    \"operationId\"\
        : \"ListVersions\"\n}"
  /save-load/version/pin:
    post:
      tags:
      - Versions
      operationId: PinVersion
      summary: Pin a version as checkpoint
      description: |
        Pins a specific version, excluding it from rolling cleanup.
        Optionally assigns a checkpoint name for easy retrieval.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PinVersionRequest'
      responses:
        '200':
          description: Version pinned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VersionResponse'
        '404':
          description: Slot or version not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/PinVersionRequest\"\
        ,\n    \"$defs\": {\n        \"PinVersionRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to pin a save version as a checkpoint to prevent cleanup\",\n            \"required\": [\n           \
        \     \"ownerId\",\n                \"ownerType\",\n                \"slotName\",\n                \"versionNumber\"\
        \n            ],\n            \"properties\": {\n                \"ownerId\": {\n                    \"type\": \"\
        string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"ID of the owning entity\"\
        \n                },\n                \"ownerType\": {\n                    \"$ref\": \"#/$defs/OwnerType\",\n   \
        \                 \"description\": \"Type of entity that owns this save slot\"\n                },\n             \
        \   \"slotName\": {\n                    \"type\": \"string\",\n                    \"description\": \"Slot name\"\
        \n                },\n                \"versionNumber\": {\n                    \"type\": \"integer\",\n         \
        \           \"description\": \"Version to pin\"\n                },\n                \"checkpointName\": {\n     \
        \               \"type\": \"string\",\n                    \"maxLength\": 64,\n                    \"description\"\
        : \"Optional checkpoint name for easy retrieval\"\n                }\n            }\n        },\n        \"OwnerType\"\
        : {\n            \"type\": \"string\",\n            \"enum\": [\n                \"ACCOUNT\",\n                \"\
        CHARACTER\",\n                \"SESSION\",\n                \"REALM\"\n            ],\n            \"description\"\
        : \"Type of entity that owns this save slot\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/VersionResponse\"\
        ,\n    \"$defs\": {\n        \"VersionResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Metadata for a single save version including size and checkpoint info\",\n            \"required\": [\n      \
        \          \"versionNumber\",\n                \"contentHash\",\n                \"sizeBytes\",\n                \"\
        createdAt\"\n            ],\n            \"properties\": {\n                \"versionNumber\": {\n               \
        \     \"type\": \"integer\",\n                    \"description\": \"Version number\"\n                },\n      \
        \          \"assetId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n\
        \                    \"description\": \"Reference to asset in lib-asset\"\n                },\n                \"\
        contentHash\": {\n                    \"type\": \"string\",\n                    \"description\": \"SHA-256 hash\"\
        \n                },\n                \"sizeBytes\": {\n                    \"type\": \"integer\",\n             \
        \       \"format\": \"int64\",\n                    \"description\": \"Size in bytes\"\n                },\n     \
        \           \"compressedSizeBytes\": {\n                    \"type\": \"integer\",\n                    \"format\"\
        : \"int64\",\n                    \"description\": \"Compressed size if applicable\"\n                },\n       \
        \         \"schemaVersion\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Schema version\"\n                },\n                \"displayName\": {\n\
        \                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Human-readable name\"\n                },\n                \"pinned\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether version is pinned\"\n                },\n                \"checkpointName\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Checkpoint name if pinned\"\n                },\n                \"createdAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Creation timestamp\"\
        \n                },\n                \"metadata\": {\n                    \"type\": \"object\",\n               \
        \     \"additionalProperties\": {\n                        \"type\": \"string\"\n                    },\n        \
        \            \"description\": \"Custom metadata\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Pin a version as checkpoint\",\n    \"description\": \"Pins a specific
        version, excluding it from rolling cleanup.\\nOptionally assigns a checkpoint name for easy retrieval.\\n\",\n   \
        \ \"tags\": [\n        \"Versions\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"PinVersion\"\n}"
  /save-load/version/unpin:
    post:
      tags:
      - Versions
      operationId: UnpinVersion
      summary: Unpin a version
      description: Removes pin from a version, making it eligible for rolling cleanup.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UnpinVersionRequest'
      responses:
        '200':
          description: Version unpinned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VersionResponse'
        '404':
          description: Slot or version not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/UnpinVersionRequest\"\
        ,\n    \"$defs\": {\n        \"UnpinVersionRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to unpin a previously pinned save version\",\n            \"required\": [\n                \"ownerId\"\
        ,\n                \"ownerType\",\n                \"slotName\",\n                \"versionNumber\"\n            ],\n\
        \            \"properties\": {\n                \"ownerId\": {\n                    \"type\": \"string\",\n      \
        \              \"format\": \"uuid\",\n                    \"description\": \"ID of the owning entity\"\n         \
        \       },\n                \"ownerType\": {\n                    \"$ref\": \"#/$defs/OwnerType\",\n             \
        \       \"description\": \"Type of entity that owns this save slot\"\n                },\n                \"slotName\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Slot name\"\n             \
        \   },\n                \"versionNumber\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Version to unpin\"\n                }\n            }\n        },\n        \"OwnerType\": {\n            \"type\"\
        : \"string\",\n            \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\",\n           \
        \     \"SESSION\",\n                \"REALM\"\n            ],\n            \"description\": \"Type of entity that
        owns this save slot\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/VersionResponse\"\
        ,\n    \"$defs\": {\n        \"VersionResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Metadata for a single save version including size and checkpoint info\",\n            \"required\": [\n      \
        \          \"versionNumber\",\n                \"contentHash\",\n                \"sizeBytes\",\n                \"\
        createdAt\"\n            ],\n            \"properties\": {\n                \"versionNumber\": {\n               \
        \     \"type\": \"integer\",\n                    \"description\": \"Version number\"\n                },\n      \
        \          \"assetId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n\
        \                    \"description\": \"Reference to asset in lib-asset\"\n                },\n                \"\
        contentHash\": {\n                    \"type\": \"string\",\n                    \"description\": \"SHA-256 hash\"\
        \n                },\n                \"sizeBytes\": {\n                    \"type\": \"integer\",\n             \
        \       \"format\": \"int64\",\n                    \"description\": \"Size in bytes\"\n                },\n     \
        \           \"compressedSizeBytes\": {\n                    \"type\": \"integer\",\n                    \"format\"\
        : \"int64\",\n                    \"description\": \"Compressed size if applicable\"\n                },\n       \
        \         \"schemaVersion\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Schema version\"\n                },\n                \"displayName\": {\n\
        \                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Human-readable name\"\n                },\n                \"pinned\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether version is pinned\"\n                },\n                \"checkpointName\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Checkpoint name if pinned\"\n                },\n                \"createdAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Creation timestamp\"\
        \n                },\n                \"metadata\": {\n                    \"type\": \"object\",\n               \
        \     \"additionalProperties\": {\n                        \"type\": \"string\"\n                    },\n        \
        \            \"description\": \"Custom metadata\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Unpin a version\",\n    \"description\": \"Removes pin from a version,
        making it eligible for rolling cleanup.\",\n    \"tags\": [\n        \"Versions\"\n    ],\n    \"deprecated\": false,\n\
        \    \"operationId\": \"UnpinVersion\"\n}"
  /save-load/version/delete:
    post:
      tags:
      - Versions
      operationId: DeleteVersion
      summary: Delete specific version
      description: |
        Permanently deletes a specific version from a slot.
        Cannot delete pinned versions; unpin first.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteVersionRequest'
      responses:
        '200':
          description: Version deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteVersionResponse'
        '404':
          description: Slot or version not found
        '409':
          description: Cannot delete pinned version
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeleteVersionRequest\"\
        ,\n    \"$defs\": {\n        \"DeleteVersionRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to permanently delete a specific save version\",\n            \"required\": [\n                \"ownerId\"\
        ,\n                \"ownerType\",\n                \"slotName\",\n                \"versionNumber\"\n            ],\n\
        \            \"properties\": {\n                \"ownerId\": {\n                    \"type\": \"string\",\n      \
        \              \"format\": \"uuid\",\n                    \"description\": \"ID of the owning entity\"\n         \
        \       },\n                \"ownerType\": {\n                    \"$ref\": \"#/$defs/OwnerType\",\n             \
        \       \"description\": \"Type of entity that owns this save slot\"\n                },\n                \"slotName\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Slot name\"\n             \
        \   },\n                \"versionNumber\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Version to delete\"\n                }\n            }\n        },\n        \"OwnerType\": {\n            \"type\"\
        : \"string\",\n            \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\",\n           \
        \     \"SESSION\",\n                \"REALM\"\n            ],\n            \"description\": \"Type of entity that
        owns this save slot\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeleteVersionResponse\"\
        ,\n    \"$defs\": {\n        \"DeleteVersionResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Result of a version deletion operation with storage freed\",\n            \"required\": [\n                \"\
        deleted\",\n                \"bytesFreed\"\n            ],\n            \"properties\": {\n                \"deleted\"\
        : {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether version was deleted\"\
        \n                },\n                \"bytesFreed\": {\n                    \"type\": \"integer\",\n            \
        \        \"format\": \"int64\",\n                    \"description\": \"Storage freed in bytes\"\n               \
        \ }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Delete specific version\",\n    \"description\": \"Permanently deletes
        a specific version from a slot.\\nCannot delete pinned versions; unpin first.\\n\",\n    \"tags\": [\n        \"Versions\"\
        \n    ],\n    \"deprecated\": false,\n    \"operationId\": \"DeleteVersion\"\n}"
  /save-load/query:
    post:
      tags:
      - Query
      operationId: QuerySaves
      summary: Query saves with filters
      description: |
        Search and filter saves across slots. Supports filtering by owner,
        category, date range, metadata, and more. Paginated results.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QuerySavesRequest'
      responses:
        '200':
          description: Query results
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuerySavesResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/QuerySavesRequest\"\
        ,\n    \"$defs\": {\n        \"QuerySavesRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Advanced query for saves across multiple owners with filtering and sorting\",\n            \"properties\": {\n\
        \                \"ownerId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Filter by owner ID\"\n        \
        \        },\n                \"ownerType\": {\n                    \"allOf\": [\n                        {\n     \
        \                       \"$ref\": \"#/$defs/OwnerType\"\n                        }\n                    ],\n     \
        \               \"nullable\": true,\n                    \"description\": \"Filter by owner type\"\n             \
        \   },\n                \"category\": {\n                    \"allOf\": [\n                        {\n           \
        \                 \"$ref\": \"#/$defs/SaveCategory\"\n                        }\n                    ],\n        \
        \            \"nullable\": true,\n                    \"description\": \"Filter by save category\"\n             \
        \   },\n                \"createdAfter\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"date-time\",\n                    \"nullable\": true,\n                    \"description\": \"Filter by creation
        date\"\n                },\n                \"createdBefore\": {\n                    \"type\": \"string\",\n    \
        \                \"format\": \"date-time\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Filter by creation date\"\n                },\n                \"pinnedOnly\": {\n                    \"type\"\
        : \"boolean\",\n                    \"nullable\": true,\n                    \"description\": \"Only return pinned
        versions\"\n                },\n                \"schemaVersion\": {\n                    \"type\": \"string\",\n\
        \                    \"nullable\": true,\n                    \"description\": \"Filter by schema version\"\n    \
        \            },\n                \"metadataFilter\": {\n                    \"type\": \"object\",\n              \
        \      \"nullable\": true,\n                    \"additionalProperties\": {\n                        \"type\": \"\
        string\"\n                    },\n                    \"description\": \"Filter by metadata key-value pairs\"\n  \
        \              },\n                \"offset\": {\n                    \"type\": \"integer\",\n                   \
        \ \"default\": 0,\n                    \"description\": \"Pagination offset\"\n                },\n              \
        \  \"limit\": {\n                    \"type\": \"integer\",\n                    \"default\": 20,\n              \
        \      \"maximum\": 100,\n                    \"description\": \"Maximum results\"\n                },\n         \
        \       \"sortBy\": {\n                    \"type\": \"string\",\n                    \"enum\": [\n              \
        \          \"created_at\",\n                        \"size\",\n                        \"version_number\"\n      \
        \              ],\n                    \"default\": \"created_at\",\n                    \"description\": \"Sort field\"\
        \n                },\n                \"sortOrder\": {\n                    \"type\": \"string\",\n              \
        \      \"enum\": [\n                        \"asc\",\n                        \"desc\"\n                    ],\n \
        \                   \"default\": \"desc\",\n                    \"description\": \"Sort order\"\n                }\n\
        \            }\n        },\n        \"OwnerType\": {\n            \"type\": \"string\",\n            \"enum\": [\n\
        \                \"ACCOUNT\",\n                \"CHARACTER\",\n                \"SESSION\",\n                \"REALM\"\
        \n            ],\n            \"description\": \"Type of entity that owns this save slot\"\n        },\n        \"\
        SaveCategory\": {\n            \"type\": \"string\",\n            \"enum\": [\n                \"QUICK_SAVE\",\n \
        \               \"AUTO_SAVE\",\n                \"MANUAL_SAVE\",\n                \"CHECKPOINT\",\n              \
        \  \"STATE_SNAPSHOT\"\n            ],\n            \"description\": \"Category of save with predefined behaviors.\\
        nQUICK_SAVE: Single-slot fast save, overwritten frequently (max 1 version).\\nAUTO_SAVE: System-triggered periodic
        saves (max 5 versions, rolling).\\nMANUAL_SAVE: User-initiated named saves (max 10 versions, no auto-cleanup).\\nCHECKPOINT:
        Progress markers (max 20 versions, rolling).\\nSTATE_SNAPSHOT: Full state captures for debugging (max 3 versions,
        rolling).\\n\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/QuerySavesResponse\"\
        ,\n    \"$defs\": {\n        \"QuerySavesResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Paginated results from a save query operation\",\n            \"required\": [\n                \"results\",\n\
        \                \"totalCount\"\n            ],\n            \"properties\": {\n                \"results\": {\n \
        \                   \"type\": \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/QueryResultItem\"\
        \n                    },\n                    \"description\": \"Query results\"\n                },\n           \
        \     \"totalCount\": {\n                    \"type\": \"integer\",\n                    \"description\": \"Total
        matching results\"\n                }\n            }\n        },\n        \"QueryResultItem\": {\n            \"type\"\
        : \"object\",\n            \"description\": \"Single result item from a save query with slot and version metadata\"\
        ,\n            \"required\": [\n                \"slotId\",\n                \"slotName\",\n                \"ownerId\"\
        ,\n                \"ownerType\",\n                \"category\",\n                \"versionNumber\",\n           \
        \     \"createdAt\"\n            ],\n            \"properties\": {\n                \"slotId\": {\n              \
        \      \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Slot
        identifier\"\n                },\n                \"slotName\": {\n                    \"type\": \"string\",\n   \
        \                 \"description\": \"Slot name\"\n                },\n                \"ownerId\": {\n           \
        \         \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"\
        Owner ID\"\n                },\n                \"ownerType\": {\n                    \"$ref\": \"#/$defs/OwnerType\"\
        ,\n                    \"description\": \"Type of entity that owns this save slot\"\n                },\n        \
        \        \"category\": {\n                    \"$ref\": \"#/$defs/SaveCategory\",\n                    \"description\"\
        : \"Save category of the slot\"\n                },\n                \"versionNumber\": {\n                    \"\
        type\": \"integer\",\n                    \"description\": \"Version number\"\n                },\n              \
        \  \"sizeBytes\": {\n                    \"type\": \"integer\",\n                    \"format\": \"int64\",\n    \
        \                \"description\": \"Size in bytes\"\n                },\n                \"schemaVersion\": {\n  \
        \                  \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Schema version\"\n                },\n                \"displayName\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Display name\"\n              \
        \  },\n                \"pinned\": {\n                    \"type\": \"boolean\",\n                    \"description\"\
        : \"Whether pinned\"\n                },\n                \"checkpointName\": {\n                    \"type\": \"\
        string\",\n                    \"nullable\": true,\n                    \"description\": \"Checkpoint name\"\n   \
        \             },\n                \"createdAt\": {\n                    \"type\": \"string\",\n                  \
        \  \"format\": \"date-time\",\n                    \"description\": \"Creation timestamp\"\n                },\n \
        \               \"metadata\": {\n                    \"type\": \"object\",\n                    \"additionalProperties\"\
        : {\n                        \"type\": \"string\"\n                    },\n                    \"description\": \"\
        Custom metadata\"\n                }\n            }\n        },\n        \"OwnerType\": {\n            \"type\": \"\
        string\",\n            \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\",\n               \
        \ \"SESSION\",\n                \"REALM\"\n            ],\n            \"description\": \"Type of entity that owns
        this save slot\"\n        },\n        \"SaveCategory\": {\n            \"type\": \"string\",\n            \"enum\"\
        : [\n                \"QUICK_SAVE\",\n                \"AUTO_SAVE\",\n                \"MANUAL_SAVE\",\n         \
        \       \"CHECKPOINT\",\n                \"STATE_SNAPSHOT\"\n            ],\n            \"description\": \"Category
        of save with predefined behaviors.\\nQUICK_SAVE: Single-slot fast save, overwritten frequently (max 1 version).\\\
        nAUTO_SAVE: System-triggered periodic saves (max 5 versions, rolling).\\nMANUAL_SAVE: User-initiated named saves (max
        10 versions, no auto-cleanup).\\nCHECKPOINT: Progress markers (max 20 versions, rolling).\\nSTATE_SNAPSHOT: Full state
        captures for debugging (max 3 versions, rolling).\\n\"\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Query saves with filters\",\n    \"description\": \"Search and filter saves
        across slots. Supports filtering by owner,\\ncategory, date range, metadata, and more. Paginated results.\\n\",\n\
        \    \"tags\": [\n        \"Query\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"QuerySaves\"\n}"
  /save-load/copy:
    post:
      tags:
      - Transfer
      operationId: CopySave
      summary: Copy save to different slot or owner
      description: |
        Copies a save version to a different slot or owner.
        Can copy to same owner (different slot) or different owner (with admin).
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CopySaveRequest'
      responses:
        '200':
          description: Save copied
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SaveResponse'
        '404':
          description: Source slot or version not found
        '403':
          description: Not authorized to copy to target
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/CopySaveRequest\"\
        ,\n    \"$defs\": {\n        \"CopySaveRequest\": {\n            \"description\": \"Request to copy save data from
        one slot to another, optionally across different entities or games.\",\n            \"type\": \"object\",\n      \
        \      \"required\": [\n                \"sourceGameId\",\n                \"sourceOwnerId\",\n                \"\
        sourceOwnerType\",\n                \"sourceSlotName\",\n                \"targetGameId\",\n                \"targetOwnerId\"\
        ,\n                \"targetOwnerType\",\n                \"targetSlotName\"\n            ],\n            \"properties\"\
        : {\n                \"sourceGameId\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Game identifier of the source save\"\n                },\n                \"sourceOwnerId\": {\n             \
        \       \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"\
        Entity ID that owns the source save\"\n                },\n                \"sourceOwnerType\": {\n              \
        \      \"$ref\": \"#/$defs/OwnerType\",\n                    \"description\": \"Type of entity that owns the source
        save\"\n                },\n                \"sourceSlotName\": {\n                    \"type\": \"string\",\n   \
        \                 \"description\": \"Name of the source slot to copy from\"\n                },\n                \"\
        sourceVersion\": {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n        \
        \            \"description\": \"Version to copy (latest if null)\"\n                },\n                \"targetGameId\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Game identifier for the target
        save\"\n                },\n                \"targetOwnerId\": {\n                    \"type\": \"string\",\n    \
        \                \"format\": \"uuid\",\n                    \"description\": \"Entity ID that will own the copied
        save\"\n                },\n                \"targetOwnerType\": {\n                    \"$ref\": \"#/$defs/OwnerType\"\
        ,\n                    \"description\": \"Type of entity that will own the copied save\"\n                },\n   \
        \             \"targetSlotName\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Name of the target slot to copy to\"\n                },\n                \"targetCategory\": {\n            \
        \        \"$ref\": \"#/$defs/SaveCategory\",\n                    \"description\": \"Category for new slot if auto-created\"\
        \n                }\n            }\n        },\n        \"OwnerType\": {\n            \"type\": \"string\",\n    \
        \        \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\",\n                \"SESSION\",\n\
        \                \"REALM\"\n            ],\n            \"description\": \"Type of entity that owns this save slot\"\
        \n        },\n        \"SaveCategory\": {\n            \"type\": \"string\",\n            \"enum\": [\n          \
        \      \"QUICK_SAVE\",\n                \"AUTO_SAVE\",\n                \"MANUAL_SAVE\",\n                \"CHECKPOINT\"\
        ,\n                \"STATE_SNAPSHOT\"\n            ],\n            \"description\": \"Category of save with predefined
        behaviors.\\nQUICK_SAVE: Single-slot fast save, overwritten frequently (max 1 version).\\nAUTO_SAVE: System-triggered
        periodic saves (max 5 versions, rolling).\\nMANUAL_SAVE: User-initiated named saves (max 10 versions, no auto-cleanup).\\
        nCHECKPOINT: Progress markers (max 20 versions, rolling).\\nSTATE_SNAPSHOT: Full state captures for debugging (max
        3 versions, rolling).\\n\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SaveResponse\"\
        ,\n    \"$defs\": {\n        \"SaveResponse\": {\n            \"type\": \"object\",\n            \"description\":
        \"Result of a save operation including version info and conflict detection\",\n            \"required\": [\n     \
        \           \"slotId\",\n                \"versionNumber\",\n                \"contentHash\",\n                \"\
        sizeBytes\",\n                \"createdAt\"\n            ],\n            \"properties\": {\n                \"slotId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Slot identifier\"\n                },\n                \"versionNumber\": {\n                   \
        \ \"type\": \"integer\",\n                    \"description\": \"Assigned version number\"\n                },\n \
        \               \"contentHash\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"SHA-256 hash of save data\"\n                },\n                \"sizeBytes\": {\n                    \"type\"\
        : \"integer\",\n                    \"format\": \"int64\",\n                    \"description\": \"Size of save data
        in bytes\"\n                },\n                \"compressedSizeBytes\": {\n                    \"type\": \"integer\"\
        ,\n                    \"format\": \"int64\",\n                    \"description\": \"Compressed size (if compression
        applied)\"\n                },\n                \"compressionRatio\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"double\",\n                    \"description\": \"Compression ratio (0-1)\"\n\
        \                },\n                \"pinned\": {\n                    \"type\": \"boolean\",\n                 \
        \   \"description\": \"Whether version was pinned\"\n                },\n                \"checkpointName\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Checkpoint name if pinned\"\n                },\n                \"thumbnailUrl\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uri\",\n                    \"nullable\": true,\n               \
        \     \"description\": \"Pre-signed URL to retrieve thumbnail (if provided)\"\n                },\n              \
        \  \"conflictDetected\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"True
        if this save overwrote a version from a different device.\\nOnly relevant when deviceId is used for cloud sync.\\\
        n\"\n                },\n                \"conflictingDeviceId\": {\n                    \"type\": \"string\",\n \
        \                   \"nullable\": true,\n                    \"description\": \"Device ID of the overwritten version
        (if conflict)\"\n                },\n                \"conflictingVersion\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Version number that was overwritten
        (if conflict)\"\n                },\n                \"createdAt\": {\n                    \"type\": \"string\",\n\
        \                    \"format\": \"date-time\",\n                    \"description\": \"Save timestamp\"\n       \
        \         },\n                \"versionsCleanedUp\": {\n                    \"type\": \"integer\",\n             \
        \       \"description\": \"Number of old versions cleaned up by rolling policy\"\n                },\n           \
        \     \"uploadPending\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"True
        if async upload is enabled and data is queued for MinIO upload.\\nSave is immediately loadable from Redis cache, but
        not yet durable.\\n\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Copy save to different slot or owner\",\n    \"description\": \"Copies
        a save version to a different slot or owner.\\nCan copy to same owner (different slot) or different owner (with admin).\\\
        n\",\n    \"tags\": [\n        \"Transfer\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"CopySave\"\
        \n}"
  /save-load/export:
    post:
      tags:
      - Transfer
      operationId: ExportSaves
      summary: Export saves for backup/portability
      description: |
        Exports one or more slots with all versions as a downloadable archive.
        Returns a pre-signed URL to download the export bundle.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExportSavesRequest'
      responses:
        '200':
          description: Export prepared
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExportSavesResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ExportSavesRequest\"\
        ,\n    \"$defs\": {\n        \"ExportSavesRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to export all saves for an owner to a downloadable archive\",\n            \"required\": [\n         \
        \       \"gameId\",\n                \"ownerId\",\n                \"ownerType\"\n            ],\n            \"properties\"\
        : {\n                \"gameId\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Game identifier for namespace isolation\"\n                },\n                \"ownerId\": {\n              \
        \      \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Entity
        ID that owns the saves to export\"\n                },\n                \"ownerType\": {\n                    \"$ref\"\
        : \"#/$defs/OwnerType\",\n                    \"description\": \"Type of entity that owns the saves to export\"\n\
        \                },\n                \"slotNames\": {\n                    \"type\": \"array\",\n                \
        \    \"items\": {\n                        \"type\": \"string\"\n                    },\n                    \"description\"\
        : \"Specific slots to export (all if null)\"\n                }\n            }\n        },\n        \"OwnerType\"\
        : {\n            \"type\": \"string\",\n            \"enum\": [\n                \"ACCOUNT\",\n                \"\
        CHARACTER\",\n                \"SESSION\",\n                \"REALM\"\n            ],\n            \"description\"\
        : \"Type of entity that owns this save slot\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ExportSavesResponse\"\
        ,\n    \"$defs\": {\n        \"ExportSavesResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Response with pre-signed URL for downloading exported save archive\",\n            \"required\": [\n         \
        \       \"downloadUrl\",\n                \"expiresAt\",\n                \"sizeBytes\"\n            ],\n        \
        \    \"properties\": {\n                \"downloadUrl\": {\n                    \"type\": \"string\",\n          \
        \          \"format\": \"uri\",\n                    \"description\": \"Pre-signed URL to download export archive\"\
        \n                },\n                \"expiresAt\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"date-time\",\n                    \"description\": \"When the download URL expires\"\n      \
        \          },\n                \"sizeBytes\": {\n                    \"type\": \"integer\",\n                    \"\
        format\": \"int64\",\n                    \"description\": \"Archive size\"\n                }\n            }\n  \
        \      }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Export saves for backup/portability\",\n    \"description\": \"Exports
        one or more slots with all versions as a downloadable archive.\\nReturns a pre-signed URL to download the export bundle.\\\
        n\",\n    \"tags\": [\n        \"Transfer\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"ExportSaves\"\
        \n}"
  /save-load/import:
    post:
      tags:
      - Transfer
      operationId: ImportSaves
      summary: Import saves from backup
      description: |
        Imports saves from a previously exported archive.
        Supports conflict resolution strategies for existing slots.
      x-permissions:
      - role: admin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ImportSavesRequest'
      responses:
        '200':
          description: Import completed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ImportSavesResponse'
        '400':
          description: Invalid archive format
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ImportSavesRequest\"\
        ,\n    \"$defs\": {\n        \"ImportSavesRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to import saves from an uploaded archive\",\n            \"required\": [\n                \"archiveAssetId\"\
        ,\n                \"targetGameId\",\n                \"targetOwnerId\",\n                \"targetOwnerType\"\n  \
        \          ],\n            \"properties\": {\n                \"archiveAssetId\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Asset ID of uploaded
        export archive\"\n                },\n                \"targetGameId\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Game identifier for namespace isolation\"\n                },\n        \
        \        \"targetOwnerId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"Entity ID that will own the imported saves\"\n                },\n     \
        \           \"targetOwnerType\": {\n                    \"$ref\": \"#/$defs/OwnerType\",\n                    \"description\"\
        : \"Type of entity that will own the imported saves\"\n                },\n                \"conflictResolution\"\
        : {\n                    \"$ref\": \"#/$defs/ConflictResolution\",\n                    \"description\": \"How to
        handle existing slots\"\n                }\n            }\n        },\n        \"OwnerType\": {\n            \"type\"\
        : \"string\",\n            \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\",\n           \
        \     \"SESSION\",\n                \"REALM\"\n            ],\n            \"description\": \"Type of entity that
        owns this save slot\"\n        },\n        \"ConflictResolution\": {\n            \"type\": \"string\",\n        \
        \    \"enum\": [\n                \"SKIP\",\n                \"OVERWRITE\",\n                \"RENAME\",\n       \
        \         \"FAIL\"\n            ],\n            \"description\": \"Strategy for handling conflicts during import\"\
        \n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ImportSavesResponse\"\
        ,\n    \"$defs\": {\n        \"ImportSavesResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Result of save archive import with success and conflict counts\",\n            \"required\": [\n             \
        \   \"importedSlots\",\n                \"importedVersions\",\n                \"skippedSlots\"\n            ],\n\
        \            \"properties\": {\n                \"importedSlots\": {\n                    \"type\": \"integer\",\n\
        \                    \"description\": \"Number of slots successfully imported\"\n                },\n            \
        \    \"importedVersions\": {\n                    \"type\": \"integer\",\n                    \"description\": \"\
        Total number of versions imported across all slots\"\n                },\n                \"skippedSlots\": {\n  \
        \                  \"type\": \"integer\",\n                    \"description\": \"Slots skipped due to conflicts\"\
        \n                },\n                \"conflicts\": {\n                    \"type\": \"array\",\n               \
        \     \"items\": {\n                        \"type\": \"string\"\n                    },\n                    \"description\"\
        : \"Names of slots that had conflicts\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Import saves from backup\",\n    \"description\": \"Imports saves from
        a previously exported archive.\\nSupports conflict resolution strategies for existing slots.\\n\",\n    \"tags\":
        [\n        \"Transfer\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"ImportSaves\"\n}"
  /save-load/verify:
    post:
      tags:
      - Validation
      operationId: VerifyIntegrity
      summary: Verify save data integrity
      description: |
        Verifies the integrity of stored save data by comparing content hash
        against the stored SHA-256 hash. Detects corruption or tampering.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyIntegrityRequest'
      responses:
        '200':
          description: Verification result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VerifyIntegrityResponse'
        '404':
          description: Slot or version not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/VerifyIntegrityRequest\"\
        ,\n    \"$defs\": {\n        \"VerifyIntegrityRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to verify data integrity of a save version via hash comparison\",\n            \"required\": [\n     \
        \           \"gameId\",\n                \"ownerId\",\n                \"ownerType\",\n                \"slotName\"\
        \n            ],\n            \"properties\": {\n                \"gameId\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Game identifier for namespace isolation\"\n                },\n        \
        \        \"ownerId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n  \
        \                  \"description\": \"ID of the owning entity\"\n                },\n                \"ownerType\"\
        : {\n                    \"$ref\": \"#/$defs/OwnerType\",\n                    \"description\": \"Type of entity that
        owns this save slot\"\n                },\n                \"slotName\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Name of the slot to verify\"\n                },\n                \"versionNumber\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Version to verify (latest if null)\"\n                }\n            }\n        },\n        \"OwnerType\": {\n\
        \            \"type\": \"string\",\n            \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\"\
        ,\n                \"SESSION\",\n                \"REALM\"\n            ],\n            \"description\": \"Type of
        entity that owns this save slot\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/VerifyIntegrityResponse\"\
        ,\n    \"$defs\": {\n        \"VerifyIntegrityResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Result of integrity verification with hash comparison details\",\n            \"required\": [\n              \
        \  \"valid\",\n                \"versionNumber\"\n            ],\n            \"properties\": {\n                \"\
        valid\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether integrity check
        passed\"\n                },\n                \"versionNumber\": {\n                    \"type\": \"integer\",\n \
        \                   \"description\": \"Version that was verified\"\n                },\n                \"expectedHash\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Expected SHA-256 hash\"\n \
        \               },\n                \"actualHash\": {\n                    \"type\": \"string\",\n               \
        \     \"nullable\": true,\n                    \"description\": \"Actual hash (null if data unavailable)\"\n     \
        \           },\n                \"errorMessage\": {\n                    \"type\": \"string\",\n                 \
        \   \"nullable\": true,\n                    \"description\": \"Error details if verification failed\"\n         \
        \       }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Verify save data integrity\",\n    \"description\": \"Verifies the integrity
        of stored save data by comparing content hash\\nagainst the stored SHA-256 hash. Detects corruption or tampering.\\\
        n\",\n    \"tags\": [\n        \"Validation\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"VerifyIntegrity\"\
        \n}"
  /save-load/version/promote:
    post:
      tags:
      - Versions
      operationId: PromoteVersion
      summary: Promote old version to latest
      description: |
        Creates a new version from an existing older version, effectively
        "promoting" it to be the latest. Useful for rollback scenarios.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PromoteVersionRequest'
      responses:
        '200':
          description: Version promoted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SaveResponse'
        '404':
          description: Slot or version not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/PromoteVersionRequest\"\
        ,\n    \"$defs\": {\n        \"PromoteVersionRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to promote an older save version to be the latest\",\n            \"required\": [\n                \"\
        gameId\",\n                \"ownerId\",\n                \"ownerType\",\n                \"slotName\",\n         \
        \       \"versionNumber\"\n            ],\n            \"properties\": {\n                \"gameId\": {\n        \
        \            \"type\": \"string\",\n                    \"description\": \"Game identifier for namespace isolation\"\
        \n                },\n                \"ownerId\": {\n                    \"type\": \"string\",\n                \
        \    \"format\": \"uuid\",\n                    \"description\": \"ID of the owning entity\"\n                },\n\
        \                \"ownerType\": {\n                    \"$ref\": \"#/$defs/OwnerType\",\n                    \"description\"\
        : \"Type of entity that owns this save slot\"\n                },\n                \"slotName\": {\n             \
        \       \"type\": \"string\",\n                    \"description\": \"Name of the slot containing the version to promote\"\
        \n                },\n                \"versionNumber\": {\n                    \"type\": \"integer\",\n         \
        \           \"description\": \"Old version to promote to latest\"\n                },\n                \"displayName\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Display name for promoted version\"\n                }\n            }\n        },\n        \"OwnerType\": {\n\
        \            \"type\": \"string\",\n            \"enum\": [\n                \"ACCOUNT\",\n                \"CHARACTER\"\
        ,\n                \"SESSION\",\n                \"REALM\"\n            ],\n            \"description\": \"Type of
        entity that owns this save slot\"\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SaveResponse\"\
        ,\n    \"$defs\": {\n        \"SaveResponse\": {\n            \"type\": \"object\",\n            \"description\":
        \"Result of a save operation including version info and conflict detection\",\n            \"required\": [\n     \
        \           \"slotId\",\n                \"versionNumber\",\n                \"contentHash\",\n                \"\
        sizeBytes\",\n                \"createdAt\"\n            ],\n            \"properties\": {\n                \"slotId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Slot identifier\"\n                },\n                \"versionNumber\": {\n                   \
        \ \"type\": \"integer\",\n                    \"description\": \"Assigned version number\"\n                },\n \
        \               \"contentHash\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"SHA-256 hash of save data\"\n                },\n                \"sizeBytes\": {\n                    \"type\"\
        : \"integer\",\n                    \"format\": \"int64\",\n                    \"description\": \"Size of save data
        in bytes\"\n                },\n                \"compressedSizeBytes\": {\n                    \"type\": \"integer\"\
        ,\n                    \"format\": \"int64\",\n                    \"description\": \"Compressed size (if compression
        applied)\"\n                },\n                \"compressionRatio\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"double\",\n                    \"description\": \"Compression ratio (0-1)\"\n\
        \                },\n                \"pinned\": {\n                    \"type\": \"boolean\",\n                 \
        \   \"description\": \"Whether version was pinned\"\n                },\n                \"checkpointName\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Checkpoint name if pinned\"\n                },\n                \"thumbnailUrl\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uri\",\n                    \"nullable\": true,\n               \
        \     \"description\": \"Pre-signed URL to retrieve thumbnail (if provided)\"\n                },\n              \
        \  \"conflictDetected\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"True
        if this save overwrote a version from a different device.\\nOnly relevant when deviceId is used for cloud sync.\\\
        n\"\n                },\n                \"conflictingDeviceId\": {\n                    \"type\": \"string\",\n \
        \                   \"nullable\": true,\n                    \"description\": \"Device ID of the overwritten version
        (if conflict)\"\n                },\n                \"conflictingVersion\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Version number that was overwritten
        (if conflict)\"\n                },\n                \"createdAt\": {\n                    \"type\": \"string\",\n\
        \                    \"format\": \"date-time\",\n                    \"description\": \"Save timestamp\"\n       \
        \         },\n                \"versionsCleanedUp\": {\n                    \"type\": \"integer\",\n             \
        \       \"description\": \"Number of old versions cleaned up by rolling policy\"\n                },\n           \
        \     \"uploadPending\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"True
        if async upload is enabled and data is queued for MinIO upload.\\nSave is immediately loadable from Redis cache, but
        not yet durable.\\n\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Promote old version to latest\",\n    \"description\": \"Creates a new
        version from an existing older version, effectively\\n\\\"promoting\\\" it to be the latest. Useful for rollback scenarios.\\\
        n\",\n    \"tags\": [\n        \"Versions\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"PromoteVersion\"\
        \n}"
  /save-load/migrate:
    post:
      tags:
      - Migration
      operationId: MigrateSave
      summary: Migrate save to new schema version
      description: |
        Applies migration handlers to upgrade a save from one schema version
        to another. Creates a new version with the migrated data.
      x-permissions:
      - role: developer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MigrateSaveRequest'
      responses:
        '200':
          description: Migration successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MigrateSaveResponse'
        '400':
          description: Migration failed or no path exists
        '404':
          description: Save not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/MigrateSaveRequest\"\
        ,\n    \"$defs\": {\n        \"MigrateSaveRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to migrate a save to a newer schema version\",\n            \"required\": [\n                \"ownerId\"\
        ,\n                \"ownerType\",\n                \"slotName\",\n                \"targetSchemaVersion\"\n      \
        \      ],\n            \"properties\": {\n                \"ownerId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"ID of the owning entity\"\n \
        \               },\n                \"ownerType\": {\n                    \"$ref\": \"#/$defs/OwnerType\",\n     \
        \               \"description\": \"Type of entity that owns this save slot\"\n                },\n               \
        \ \"slotName\": {\n                    \"type\": \"string\",\n                    \"description\": \"Slot name\"\n\
        \                },\n                \"versionNumber\": {\n                    \"type\": \"integer\",\n          \
        \          \"description\": \"Specific version to migrate (defaults to latest)\"\n                },\n           \
        \     \"targetSchemaVersion\": {\n                    \"type\": \"string\",\n                    \"description\":
        \"Target schema version to migrate to\"\n                },\n                \"dryRun\": {\n                    \"\
        type\": \"boolean\",\n                    \"default\": false,\n