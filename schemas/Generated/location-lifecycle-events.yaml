openapi: 3.0.4
info:
  title: Location Service Events Lifecycle Events
  description: "Auto-generated lifecycle event schemas for location service.\nDO NOT EDIT - This file is completely overwritten
    by generate-lifecycle-events.py.\nSource of truth: location-events.yaml x-lifecycle section."
  version: 1.0.0
paths: {}
components:
  schemas:
    LocationCreatedEvent:
      allOf:
      - $ref: ../common-events.yaml#/components/schemas/BaseServiceEvent
      type: object
      additionalProperties: false
      description: Published to location.created when a location is created
      required:
      - eventName
      - eventId
      - timestamp
      - locationId
      - realmId
      - code
      - name
      - locationType
      - depth
      - isDeprecated
      - boundsPrecision
      - coordinateMode
      - createdAt
      - updatedAt
      properties:
        eventName:
          type: string
          default: location.created
          description: 'Event type identifier: location.created'
        locationId: &id001
          type: string
          format: uuid
          description: "Unique identifier for the location"
        realmId: &id002
          type: string
          format: uuid
          description: "ID of the realm this location belongs to"
        code: &id003
          type: string
          description: "Unique code identifier for the location within its realm"
        name: &id004
          type: string
          description: "Human-readable name of the location"
        description: &id005
          type: string
          nullable: true
          description: "Detailed description of the location"
        locationType: &id006
          $ref: ../location-api.yaml#/components/schemas/LocationType
          description: "Type classification of the location"
        parentLocationId: &id007
          type: string
          format: uuid
          nullable: true
          description: "ID of the parent location for hierarchical structures"
        depth: &id008
          type: integer
          description: "Depth level in the location hierarchy (0 for root locations)"
        isDeprecated: &id009
          type: boolean
          description: "Whether this location has been marked as deprecated"
        deprecatedAt: &id010
          type: string
          format: date-time
          nullable: true
          description: "Timestamp when the location was deprecated"
        deprecationReason: &id011
          type: string
          nullable: true
          description: "Explanation for why the location was deprecated"
        bounds: &id012
          $ref: ../common-api.yaml#/components/schemas/BoundingBox3D
          nullable: true
          description: "Optional spatial extent in world coordinates"
        boundsPrecision: &id013
          $ref: ../location-api.yaml#/components/schemas/BoundsPrecision
          description: "Precision level of spatial bounds"
        coordinateMode: &id014
          $ref: ../location-api.yaml#/components/schemas/CoordinateMode
          description: "How this location's coordinate system relates to its parent"
        localOrigin: &id015
          $ref: ../common-api.yaml#/components/schemas/Position3D
          nullable: true
          description: "Origin point for local or inherited coordinate systems"
        metadata: &id016
          type: object
          additionalProperties: true
          nullable: true
          description: "Client-provided location metadata. No Bannou plugin reads specific keys from this field by convention."
        createdAt: &id017
          type: string
          format: date-time
          description: "Timestamp when the location was created"
        updatedAt: &id018
          type: string
          format: date-time
          description: "Timestamp when the location was last updated"
    LocationUpdatedEvent:
      allOf:
      - $ref: ../common-events.yaml#/components/schemas/BaseServiceEvent
      type: object
      additionalProperties: false
      description: Published to location.updated when a location is updated
      required:
      - eventName
      - eventId
      - timestamp
      - locationId
      - realmId
      - code
      - name
      - locationType
      - depth
      - isDeprecated
      - boundsPrecision
      - coordinateMode
      - createdAt
      - updatedAt
      - changedFields
      properties:
        eventName:
          type: string
          default: location.updated
          description: 'Event type identifier: location.updated'
        locationId: *id001
        realmId: *id002
        code: *id003
        name: *id004
        description: *id005
        locationType: *id006
        parentLocationId: *id007
        depth: *id008
        isDeprecated: *id009
        deprecatedAt: *id010
        deprecationReason: *id011
        bounds: *id012
        boundsPrecision: *id013
        coordinateMode: *id014
        localOrigin: *id015
        metadata: *id016
        createdAt: *id017
        updatedAt: *id018
        changedFields:
          type: array
          items:
            type: string
          description: List of field names that were modified
    LocationDeletedEvent:
      allOf:
      - $ref: ../common-events.yaml#/components/schemas/BaseServiceEvent
      type: object
      additionalProperties: false
      description: Published to location.deleted when a location is deleted
      required:
      - eventName
      - eventId
      - timestamp
      - locationId
      - realmId
      - code
      - name
      - locationType
      - depth
      - isDeprecated
      - boundsPrecision
      - coordinateMode
      - createdAt
      - updatedAt
      properties:
        eventName:
          type: string
          default: location.deleted
          description: 'Event type identifier: location.deleted'
        locationId: *id001
        realmId: *id002
        code: *id003
        name: *id004
        description: *id005
        locationType: *id006
        parentLocationId: *id007
        depth: *id008
        isDeprecated: *id009
        deprecatedAt: *id010
        deprecationReason: *id011
        bounds: *id012
        boundsPrecision: *id013
        coordinateMode: *id014
        localOrigin: *id015
        metadata: *id016
        createdAt: *id017
        updatedAt: *id018
        deletedReason:
          type: string
          nullable: true
          description: Optional reason for deletion (e.g., "Merged into {targetId}")
