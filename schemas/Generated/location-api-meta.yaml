openapi: 3.0.4
info:
  title: Bannou Location Service API
  description: |
    Location management service for game worlds.

    **POST-Only API Pattern**: This API uses POST for all operations to support zero-copy
    WebSocket routing. Path parameters are passed in request bodies instead of URLs.
    See docs/BANNOU_DESIGN.md for architectural rationale.

    Locations represent physical places in the game world. Each location belongs to
    exactly one realm and can optionally have a parent location for hierarchical organization.

    **Three-Level Hierarchy**:
    - Realm (top-level persistent world - separate Realm service)
    - Region (parentLocationId=null, locations within a realm)
    - Location (parentLocationId=regionId, specific places within regions)

    **Realm-Scoped**: Every location has a realmId, enabling realm-specific location queries.

    **Hierarchy Support**: Locations can nest within other locations via parentLocationId,
    enabling Region -> City -> District -> Building -> Room organization patterns.

    **Location Types**: Flexible locationType field (e.g., "REGION", "CITY", "BUILDING", "ROOM")
    allows domain-specific categorization without rigid schema constraints.

    **Deprecation System**: Locations can be deprecated instead of deleted directly.
    Deprecated locations remain queryable but prevent new entity placement.

    **Two-Step Deletion**:
    1. Deprecate the location (soft delete, prevents new usage)
    2. Optionally hard-delete the deprecated location after all references are removed

    **SCHEMA MODIFICATION GATE**: STOP. Before modifying this schema, you MUST:
    1. Read docs/reference/SCHEMA-RULES.md
    2. State which section applies to your change
    3. Only then proceed with edits
    Edits without stating the applicable rule are FORBIDDEN.
  version: 1.0.0
  x-resource-lifecycle:
    resourceType: location
    gracePeriodSeconds: 604800
    cleanupPolicy: ALL_REQUIRED
x-service-layer: GameFoundation
servers:
- url: http://localhost:5012
  description: Bannou service endpoint (internal only)
paths:
  /location/get:
    post:
      summary: Get location by ID
      operationId: getLocation
      tags:
      - Location
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetLocationRequest'
      responses:
        '200':
          description: Location retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationResponse'
        '404':
          description: Location not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetLocationRequest\"\
        ,\n    \"$defs\": {\n        \"GetLocationRequest\": {\n            \"description\": \"Request to retrieve a location
        by its unique identifier\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n   \
        \         \"required\": [\n                \"locationId\"\n            ],\n            \"properties\": {\n       \
        \         \"locationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n\
        \                    \"description\": \"Unique identifier of the location\"\n                }\n            }\n  \
        \      }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationResponse\"\
        ,\n    \"$defs\": {\n        \"LocationResponse\": {\n            \"description\": \"Complete location data returned
        from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n        \
        \    \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\",\n \
        \               \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get location by ID\",\n    \"description\": \"\",\n    \"tags\": [\n  \
        \      \"Location\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"getLocation\"\n}"
  /location/get-by-code:
    post:
      summary: Get location by code and realm
      description: Retrieve a location using its unique code within a specific realm
      operationId: getLocationByCode
      tags:
      - Location
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetLocationByCodeRequest'
      responses:
        '200':
          description: Location retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationResponse'
        '404':
          description: Location not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetLocationByCodeRequest\"\
        ,\n    \"$defs\": {\n        \"GetLocationByCodeRequest\": {\n            \"description\": \"Request to retrieve a
        location by its code within a specific realm\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"code\",\n                \"realmId\"\n            ],\n  \
        \          \"properties\": {\n                \"code\": {\n                    \"type\": \"string\",\n           \
        \         \"minLength\": 1,\n                    \"maxLength\": 100,\n                    \"pattern\": \"^[A-Z][A-Z0-9_]*$\"\
        ,\n                    \"description\": \"Unique code for the location within the realm\"\n                },\n  \
        \              \"realmId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"Realm ID to scope the code lookup\"\n                }\n            }\n\
        \        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationResponse\"\
        ,\n    \"$defs\": {\n        \"LocationResponse\": {\n            \"description\": \"Complete location data returned
        from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n        \
        \    \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\",\n \
        \               \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get location by code and realm\",\n    \"description\": \"Retrieve a location
        using its unique code within a specific realm\",\n    \"tags\": [\n        \"Location\"\n    ],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"getLocationByCode\"\n}"
  /location/list:
    post:
      summary: List locations with filtering
      description: Retrieve locations with optional realm, parent, and type filtering
      operationId: listLocations
      tags:
      - Location
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListLocationsRequest'
      responses:
        '200':
          description: Locations retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationListResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListLocationsRequest\"\
        ,\n    \"$defs\": {\n        \"ListLocationsRequest\": {\n            \"description\": \"Request to list locations
        within a realm with optional type and deprecation filtering\",\n            \"type\": \"object\",\n            \"\
        additionalProperties\": false,\n            \"required\": [\n                \"realmId\"\n            ],\n       \
        \     \"properties\": {\n                \"realmId\": {\n                    \"type\": \"string\",\n             \
        \       \"format\": \"uuid\",\n                    \"description\": \"Realm ID to query (required - locations are
        partitioned by realm)\"\n                },\n                \"locationType\": {\n                    \"allOf\": [\n\
        \                        {\n                            \"$ref\": \"#/$defs/LocationType\"\n                     \
        \   }\n                    ],\n                    \"nullable\": true,\n                    \"description\": \"Filter
        by location type\"\n                },\n                \"includeDeprecated\": {\n                    \"type\": \"\
        boolean\",\n                    \"default\": false,\n                    \"description\": \"Whether to include deprecated
        locations in the response\"\n                },\n                \"page\": {\n                    \"type\": \"integer\"\
        ,\n                    \"minimum\": 1,\n                    \"default\": 1,\n                    \"description\":
        \"Page number for pagination (1-indexed)\"\n                },\n                \"pageSize\": {\n                \
        \    \"type\": \"integer\",\n                    \"minimum\": 1,\n                    \"maximum\": 100,\n        \
        \            \"default\": 20,\n                    \"description\": \"Number of results per page\"\n             \
        \   }\n            }\n        },\n        \"LocationType\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Type classification for locations\",\n            \"enum\": [\n                \"CONTINENT\",\n              \
        \  \"REGION\",\n                \"CITY\",\n                \"DISTRICT\",\n                \"BUILDING\",\n        \
        \        \"ROOM\",\n                \"LANDMARK\",\n                \"WILDERNESS\",\n                \"DUNGEON\",\n\
        \                \"OTHER\"\n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationListResponse\"\
        ,\n    \"$defs\": {\n        \"LocationListResponse\": {\n            \"description\": \"Paginated list of locations
        with metadata for navigation\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locations\",\n                \"totalCount\",\n                \"\
        page\",\n                \"pageSize\",\n                \"hasNextPage\",\n                \"hasPreviousPage\"\n  \
        \          ],\n            \"properties\": {\n                \"locations\": {\n                    \"type\": \"array\"\
        ,\n                    \"items\": {\n                        \"$ref\": \"#/$defs/LocationResponse\"\n            \
        \        },\n                    \"description\": \"List of locations matching the query\"\n                },\n \
        \               \"totalCount\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Total number of locations matching the query (across all pages)\"\n                },\n                \"page\"\
        : {\n                    \"type\": \"integer\",\n                    \"description\": \"Current page number (1-indexed)\"\
        \n                },\n                \"pageSize\": {\n                    \"type\": \"integer\",\n              \
        \      \"description\": \"Number of results per page\"\n                },\n                \"hasNextPage\": {\n \
        \                   \"type\": \"boolean\",\n                    \"description\": \"Whether there are more pages after
        the current page\"\n                },\n                \"hasPreviousPage\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether there are pages before the current page\"\n                }\n \
        \           }\n        },\n        \"LocationResponse\": {\n            \"description\": \"Complete location data
        returned from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\"\
        ,\n                \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"List locations with filtering\",\n    \"description\": \"Retrieve locations
        with optional realm, parent, and type filtering\",\n    \"tags\": [\n        \"Location\"\n    ],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"listLocations\"\n}"
  /location/list-by-realm:
    post:
      summary: List all locations in a realm (primary query pattern)
      description: |
        Returns all locations within a specific realm, optionally filtered by
        location type and parent. This is the primary access pattern for
        realm-scoped location queries.
      operationId: listLocationsByRealm
      tags:
      - Location
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListLocationsByRealmRequest'
      responses:
        '200':
          description: Locations retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationListResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListLocationsByRealmRequest\"\
        ,\n    \"$defs\": {\n        \"ListLocationsByRealmRequest\": {\n            \"description\": \"Request to list all
        locations within a specific realm with optional filtering\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"realmId\"\n            ],\n            \"properties\": {\n\
        \                \"realmId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"Realm ID to query\"\n                },\n                \"locationType\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/LocationType\"\
        \n                        }\n                    ],\n                    \"nullable\": true,\n                   \
        \ \"description\": \"Optional type filter\"\n                },\n                \"includeDeprecated\": {\n      \
        \              \"type\": \"boolean\",\n                    \"default\": false,\n                    \"description\"\
        : \"Whether to include deprecated locations in the response\"\n                },\n                \"page\": {\n \
        \                   \"type\": \"integer\",\n                    \"minimum\": 1,\n                    \"default\":
        1,\n                    \"description\": \"Page number for pagination (1-indexed)\"\n                },\n        \
        \        \"pageSize\": {\n                    \"type\": \"integer\",\n                    \"minimum\": 1,\n      \
        \              \"maximum\": 100,\n                    \"default\": 20,\n                    \"description\": \"Number
        of results per page\"\n                }\n            }\n        },\n        \"LocationType\": {\n            \"type\"\
        : \"string\",\n            \"description\": \"Type classification for locations\",\n            \"enum\": [\n    \
        \            \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n                \"DISTRICT\"\
        ,\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n                \"WILDERNESS\"\
        ,\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationListResponse\"\
        ,\n    \"$defs\": {\n        \"LocationListResponse\": {\n            \"description\": \"Paginated list of locations
        with metadata for navigation\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locations\",\n                \"totalCount\",\n                \"\
        page\",\n                \"pageSize\",\n                \"hasNextPage\",\n                \"hasPreviousPage\"\n  \
        \          ],\n            \"properties\": {\n                \"locations\": {\n                    \"type\": \"array\"\
        ,\n                    \"items\": {\n                        \"$ref\": \"#/$defs/LocationResponse\"\n            \
        \        },\n                    \"description\": \"List of locations matching the query\"\n                },\n \
        \               \"totalCount\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Total number of locations matching the query (across all pages)\"\n                },\n                \"page\"\
        : {\n                    \"type\": \"integer\",\n                    \"description\": \"Current page number (1-indexed)\"\
        \n                },\n                \"pageSize\": {\n                    \"type\": \"integer\",\n              \
        \      \"description\": \"Number of results per page\"\n                },\n                \"hasNextPage\": {\n \
        \                   \"type\": \"boolean\",\n                    \"description\": \"Whether there are more pages after
        the current page\"\n                },\n                \"hasPreviousPage\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether there are pages before the current page\"\n                }\n \
        \           }\n        },\n        \"LocationResponse\": {\n            \"description\": \"Complete location data
        returned from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\"\
        ,\n                \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"List all locations in a realm (primary query pattern)\",\n    \"description\"\
        : \"Returns all locations within a specific realm, optionally filtered by\\nlocation type and parent. This is the
        primary access pattern for\\nrealm-scoped location queries.\\n\",\n    \"tags\": [\n        \"Location\"\n    ],\n\
        \    \"deprecated\": false,\n    \"operationId\": \"listLocationsByRealm\"\n}"
  /location/list-by-parent:
    post:
      summary: Get child locations for a parent location
      description: |
        Retrieve all locations that have the specified location as their parent.
        Useful for getting all cities in a region, all buildings in a city, etc.
      operationId: listLocationsByParent
      tags:
      - Location
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListLocationsByParentRequest'
      responses:
        '200':
          description: Child locations retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationListResponse'
        '404':
          description: Parent location not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListLocationsByParentRequest\"\
        ,\n    \"$defs\": {\n        \"ListLocationsByParentRequest\": {\n            \"description\": \"Request to list all
        child locations of a specified parent location\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"parentLocationId\"\n            ],\n            \"properties\"\
        : {\n                \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"description\": \"ID of the parent location\"\n                },\n            \
        \    \"locationType\": {\n                    \"allOf\": [\n                        {\n                          \
        \  \"$ref\": \"#/$defs/LocationType\"\n                        }\n                    ],\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional filter by location type\"\n                },\n         \
        \       \"includeDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"default\": false,\n\
        \                    \"description\": \"Whether to include deprecated locations in the response\"\n              \
        \  },\n                \"page\": {\n                    \"type\": \"integer\",\n                    \"minimum\": 1,\n\
        \                    \"default\": 1,\n                    \"description\": \"Page number for pagination (1-indexed)\"\
        \n                },\n                \"pageSize\": {\n                    \"type\": \"integer\",\n              \
        \      \"minimum\": 1,\n                    \"maximum\": 100,\n                    \"default\": 20,\n            \
        \        \"description\": \"Number of results per page\"\n                }\n            }\n        },\n        \"\
        LocationType\": {\n            \"type\": \"string\",\n            \"description\": \"Type classification for locations\"\
        ,\n            \"enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\"\
        ,\n                \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\"\
        ,\n                \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n     \
        \   }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationListResponse\"\
        ,\n    \"$defs\": {\n        \"LocationListResponse\": {\n            \"description\": \"Paginated list of locations
        with metadata for navigation\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locations\",\n                \"totalCount\",\n                \"\
        page\",\n                \"pageSize\",\n                \"hasNextPage\",\n                \"hasPreviousPage\"\n  \
        \          ],\n            \"properties\": {\n                \"locations\": {\n                    \"type\": \"array\"\
        ,\n                    \"items\": {\n                        \"$ref\": \"#/$defs/LocationResponse\"\n            \
        \        },\n                    \"description\": \"List of locations matching the query\"\n                },\n \
        \               \"totalCount\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Total number of locations matching the query (across all pages)\"\n                },\n                \"page\"\
        : {\n                    \"type\": \"integer\",\n                    \"description\": \"Current page number (1-indexed)\"\
        \n                },\n                \"pageSize\": {\n                    \"type\": \"integer\",\n              \
        \      \"description\": \"Number of results per page\"\n                },\n                \"hasNextPage\": {\n \
        \                   \"type\": \"boolean\",\n                    \"description\": \"Whether there are more pages after
        the current page\"\n                },\n                \"hasPreviousPage\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether there are pages before the current page\"\n                }\n \
        \           }\n        },\n        \"LocationResponse\": {\n            \"description\": \"Complete location data
        returned from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\"\
        ,\n                \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get child locations for a parent location\",\n    \"description\": \"Retrieve
        all locations that have the specified location as their parent.\\nUseful for getting all cities in a region, all buildings
        in a city, etc.\\n\",\n    \"tags\": [\n        \"Location\"\n    ],\n    \"deprecated\": false,\n    \"operationId\"\
        : \"listLocationsByParent\"\n}"
  /location/list-root:
    post:
      summary: Get root locations in a realm
      description: |
        Returns all top-level locations in a realm (locations with no parent).
        These are typically regions or major areas within the realm.
      operationId: listRootLocations
      tags:
      - Location
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListRootLocationsRequest'
      responses:
        '200':
          description: Root locations retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationListResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListRootLocationsRequest\"\
        ,\n    \"$defs\": {\n        \"ListRootLocationsRequest\": {\n            \"description\": \"Request to list all top-level
        locations (without parents) in a realm\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"realmId\"\n            ],\n            \"properties\": {\n\
        \                \"realmId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"Realm ID to get root locations for\"\n                },\n             \
        \   \"locationType\": {\n                    \"allOf\": [\n                        {\n                           \
        \ \"$ref\": \"#/$defs/LocationType\"\n                        }\n                    ],\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional filter by location type\"\n                },\n         \
        \       \"includeDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"default\": false,\n\
        \                    \"description\": \"Whether to include deprecated locations in the response\"\n              \
        \  },\n                \"page\": {\n                    \"type\": \"integer\",\n                    \"minimum\": 1,\n\
        \                    \"default\": 1,\n                    \"description\": \"Page number for pagination (1-indexed)\"\
        \n                },\n                \"pageSize\": {\n                    \"type\": \"integer\",\n              \
        \      \"minimum\": 1,\n                    \"maximum\": 100,\n                    \"default\": 20,\n            \
        \        \"description\": \"Number of results per page\"\n                }\n            }\n        },\n        \"\
        LocationType\": {\n            \"type\": \"string\",\n            \"description\": \"Type classification for locations\"\
        ,\n            \"enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\"\
        ,\n                \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\"\
        ,\n                \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n     \
        \   }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationListResponse\"\
        ,\n    \"$defs\": {\n        \"LocationListResponse\": {\n            \"description\": \"Paginated list of locations
        with metadata for navigation\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locations\",\n                \"totalCount\",\n                \"\
        page\",\n                \"pageSize\",\n                \"hasNextPage\",\n                \"hasPreviousPage\"\n  \
        \          ],\n            \"properties\": {\n                \"locations\": {\n                    \"type\": \"array\"\
        ,\n                    \"items\": {\n                        \"$ref\": \"#/$defs/LocationResponse\"\n            \
        \        },\n                    \"description\": \"List of locations matching the query\"\n                },\n \
        \               \"totalCount\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Total number of locations matching the query (across all pages)\"\n                },\n                \"page\"\
        : {\n                    \"type\": \"integer\",\n                    \"description\": \"Current page number (1-indexed)\"\
        \n                },\n                \"pageSize\": {\n                    \"type\": \"integer\",\n              \
        \      \"description\": \"Number of results per page\"\n                },\n                \"hasNextPage\": {\n \
        \                   \"type\": \"boolean\",\n                    \"description\": \"Whether there are more pages after
        the current page\"\n                },\n                \"hasPreviousPage\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether there are pages before the current page\"\n                }\n \
        \           }\n        },\n        \"LocationResponse\": {\n            \"description\": \"Complete location data
        returned from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\"\
        ,\n                \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get root locations in a realm\",\n    \"description\": \"Returns all top-level
        locations in a realm (locations with no parent).\\nThese are typically regions or major areas within the realm.\\\
        n\",\n    \"tags\": [\n        \"Location\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"listRootLocations\"\
        \n}"
  /location/get-ancestors:
    post:
      summary: Get all ancestors of a location
      description: |
        Returns the full ancestry chain from the specified location up to the
        root location (parentLocationId=null). For example, for a specific building
        might return [district, city, region].
      operationId: getLocationAncestors
      tags:
      - Location
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetLocationAncestorsRequest'
      responses:
        '200':
          description: Ancestors retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationListResponse'
        '404':
          description: Location not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetLocationAncestorsRequest\"\
        ,\n    \"$defs\": {\n        \"GetLocationAncestorsRequest\": {\n            \"description\": \"Request to retrieve
        the full ancestry chain of a location up to the root\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"locationId\"\n            ],\n            \"properties\"\
        : {\n                \"locationId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"description\": \"The location to get ancestors for\"\n                }\n     \
        \       }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationListResponse\"\
        ,\n    \"$defs\": {\n        \"LocationListResponse\": {\n            \"description\": \"Paginated list of locations
        with metadata for navigation\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locations\",\n                \"totalCount\",\n                \"\
        page\",\n                \"pageSize\",\n                \"hasNextPage\",\n                \"hasPreviousPage\"\n  \
        \          ],\n            \"properties\": {\n                \"locations\": {\n                    \"type\": \"array\"\
        ,\n                    \"items\": {\n                        \"$ref\": \"#/$defs/LocationResponse\"\n            \
        \        },\n                    \"description\": \"List of locations matching the query\"\n                },\n \
        \               \"totalCount\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Total number of locations matching the query (across all pages)\"\n                },\n                \"page\"\
        : {\n                    \"type\": \"integer\",\n                    \"description\": \"Current page number (1-indexed)\"\
        \n                },\n                \"pageSize\": {\n                    \"type\": \"integer\",\n              \
        \      \"description\": \"Number of results per page\"\n                },\n                \"hasNextPage\": {\n \
        \                   \"type\": \"boolean\",\n                    \"description\": \"Whether there are more pages after
        the current page\"\n                },\n                \"hasPreviousPage\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether there are pages before the current page\"\n                }\n \
        \           }\n        },\n        \"LocationResponse\": {\n            \"description\": \"Complete location data
        returned from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\"\
        ,\n                \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get all ancestors of a location\",\n    \"description\": \"Returns the
        full ancestry chain from the specified location up to the\\nroot location (parentLocationId=null). For example, for
        a specific building\\nmight return [district, city, region].\\n\",\n    \"tags\": [\n        \"Location\"\n    ],\n\
        \    \"deprecated\": false,\n    \"operationId\": \"getLocationAncestors\"\n}"
  /location/validate-territory:
    post:
      operationId: validateTerritory
      tags:
      - Location
      summary: Validate location against territory boundaries
      description: |
        Checks if a proposed location falls within or outside specified territory boundaries.
        Used by Contract service's clause type handler system for territory validation.

        Territory modes:
        - exclusive: Location must NOT be within any territory location (or descendants)
        - inclusive: Location MUST be within at least one territory location (or descendants)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ValidateTerritoryRequest'
      responses:
        '200':
          description: Territory validation result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidateTerritoryResponse'
        '404':
          description: Location not found
      x-permissions:
      - role: user
        states: {}
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ValidateTerritoryRequest\"\
        ,\n    \"$defs\": {\n        \"ValidateTerritoryRequest\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Request to validate a location against territory boundaries\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locationId\",\n                \"territoryLocationIds\"\n        \
        \    ],\n            \"properties\": {\n                \"locationId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"The location to validate\"\n\
        \                },\n                \"territoryLocationIds\": {\n                    \"type\": \"array\",\n     \
        \               \"items\": {\n                        \"type\": \"string\",\n                        \"format\": \"\
        uuid\"\n                    },\n                    \"description\": \"Territory boundary location IDs\"\n       \
        \         },\n                \"territoryMode\": {\n                    \"allOf\": [\n                        {\n\
        \                            \"$ref\": \"#/$defs/TerritoryMode\"\n                        }\n                    ],\n\
        \                    \"nullable\": true,\n                    \"description\": \"Validation mode (exclusive or inclusive).
        Defaults to exclusive.\"\n                }\n            }\n        },\n        \"TerritoryMode\": {\n           \
        \ \"type\": \"string\",\n            \"description\": \"Territory validation mode for constraint checking\",\n   \
        \         \"enum\": [\n                \"exclusive\",\n                \"inclusive\"\n            ]\n        }\n \
        \   }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ValidateTerritoryResponse\"\
        ,\n    \"$defs\": {\n        \"ValidateTerritoryResponse\": {\n            \"type\": \"object\",\n            \"description\"\
        : \"Territory validation result\",\n            \"additionalProperties\": false,\n            \"required\": [\n  \
        \              \"isValid\"\n            ],\n            \"properties\": {\n                \"isValid\": {\n      \
        \              \"type\": \"boolean\",\n                    \"description\": \"True if location passes territory validation\"\
        \n                },\n                \"violationReason\": {\n                    \"type\": \"string\",\n        \
        \            \"nullable\": true,\n                    \"description\": \"Human-readable reason if validation failed\"\
        \n                },\n                \"matchedTerritoryId\": {\n                    \"type\": \"string\",\n     \
        \               \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"The territory location that matched (for inclusive) or conflicted (for exclusive)\"\n                }\n     \
        \       }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Validate location against territory boundaries\",\n    \"description\"\
        : \"Checks if a proposed location falls within or outside specified territory boundaries.\\nUsed by Contract service's
        clause type handler system for territory validation.\\n\\nTerritory modes:\\n- exclusive: Location must NOT be within
        any territory location (or descendants)\\n- inclusive: Location MUST be within at least one territory location (or
        descendants)\\n\",\n    \"tags\": [\n        \"Location\"\n    ],\n    \"deprecated\": false,\n    \"operationId\"\
        : \"validateTerritory\"\n}"
  /location/get-descendants:
    post:
      summary: Get all descendants of a location
      description: |
        Returns all locations that are descendants of the specified location
        (direct children, grandchildren, etc.). Useful for finding all places
        within a region or city.
      operationId: getLocationDescendants
      tags:
      - Location
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetLocationDescendantsRequest'
      responses:
        '200':
          description: Descendants retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationListResponse'
        '404':
          description: Location not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetLocationDescendantsRequest\"\
        ,\n    \"$defs\": {\n        \"GetLocationDescendantsRequest\": {\n            \"description\": \"Request to retrieve
        all descendants of a location (children, grandchildren, etc.)\",\n            \"type\": \"object\",\n            \"\
        additionalProperties\": false,\n            \"required\": [\n                \"locationId\"\n            ],\n    \
        \        \"properties\": {\n                \"locationId\": {\n                    \"type\": \"string\",\n       \
        \             \"format\": \"uuid\",\n                    \"description\": \"The location to get descendants for\"\n\
        \                },\n                \"locationType\": {\n                    \"allOf\": [\n                     \
        \   {\n                            \"$ref\": \"#/$defs/LocationType\"\n                        }\n               \
        \     ],\n                    \"nullable\": true,\n                    \"description\": \"Optional filter by location
        type\"\n                },\n                \"maxDepth\": {\n                    \"type\": \"integer\",\n        \
        \            \"minimum\": 1,\n                    \"maximum\": 10,\n                    \"nullable\": true,\n    \
        \                \"description\": \"Maximum depth of descendants to return (null = all)\"\n                },\n  \
        \              \"includeDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"default\"\
        : false,\n                    \"description\": \"Whether to include deprecated locations in the response\"\n     \
        \           },\n                \"page\": {\n                    \"type\": \"integer\",\n                    \"minimum\"\
        : 1,\n                    \"default\": 1,\n                    \"description\": \"Page number for pagination (1-indexed)\"\
        \n                },\n                \"pageSize\": {\n                    \"type\": \"integer\",\n              \
        \      \"minimum\": 1,\n                    \"maximum\": 100,\n                    \"default\": 20,\n            \
        \        \"description\": \"Number of results per page\"\n                }\n            }\n        },\n        \"\
        LocationType\": {\n            \"type\": \"string\",\n            \"description\": \"Type classification for locations\"\
        ,\n            \"enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\"\
        ,\n                \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\"\
        ,\n                \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n     \
        \   }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationListResponse\"\
        ,\n    \"$defs\": {\n        \"LocationListResponse\": {\n            \"description\": \"Paginated list of locations
        with metadata for navigation\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locations\",\n                \"totalCount\",\n                \"\
        page\",\n                \"pageSize\",\n                \"hasNextPage\",\n                \"hasPreviousPage\"\n  \
        \          ],\n            \"properties\": {\n                \"locations\": {\n                    \"type\": \"array\"\
        ,\n                    \"items\": {\n                        \"$ref\": \"#/$defs/LocationResponse\"\n            \
        \        },\n                    \"description\": \"List of locations matching the query\"\n                },\n \
        \               \"totalCount\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Total number of locations matching the query (across all pages)\"\n                },\n                \"page\"\
        : {\n                    \"type\": \"integer\",\n                    \"description\": \"Current page number (1-indexed)\"\
        \n                },\n                \"pageSize\": {\n                    \"type\": \"integer\",\n              \
        \      \"description\": \"Number of results per page\"\n                },\n                \"hasNextPage\": {\n \
        \                   \"type\": \"boolean\",\n                    \"description\": \"Whether there are more pages after
        the current page\"\n                },\n                \"hasPreviousPage\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether there are pages before the current page\"\n                }\n \
        \           }\n        },\n        \"LocationResponse\": {\n            \"description\": \"Complete location data
        returned from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\"\
        ,\n                \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get all descendants of a location\",\n    \"description\": \"Returns all
        locations that are descendants of the specified location\\n(direct children, grandchildren, etc.). Useful for finding
        all places\\nwithin a region or city.\\n\",\n    \"tags\": [\n        \"Location\"\n    ],\n    \"deprecated\": false,\n\
        \    \"operationId\": \"getLocationDescendants\"\n}"
  /location/create:
    post:
      summary: Create new location
      operationId: createLocation
      tags:
      - Location Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLocationRequest'
      responses:
        '200':
          description: Location created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationResponse'
        '400':
          description: Invalid location data or parent realm mismatch
        '409':
          description: Location with this code already exists in this realm
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/CreateLocationRequest\"\
        ,\n    \"$defs\": {\n        \"CreateLocationRequest\": {\n            \"description\": \"Request to create a new
        location within a realm\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n    \
        \        \"required\": [\n                \"code\",\n                \"name\",\n                \"realmId\",\n   \
        \             \"locationType\"\n            ],\n            \"properties\": {\n                \"code\": {\n     \
        \               \"type\": \"string\",\n                    \"minLength\": 1,\n                    \"maxLength\": 100,\n\
        \                    \"pattern\": \"^[A-Z][A-Z0-9_]*$\",\n                    \"description\": \"Unique code for the
        location within the realm\"\n                },\n                \"name\": {\n                    \"type\": \"string\"\
        ,\n                    \"minLength\": 1,\n                    \"maxLength\": 200,\n                    \"description\"\
        : \"Display name for the location\"\n                },\n                \"description\": {\n                    \"\
        type\": \"string\",\n                    \"maxLength\": 2000,\n                    \"nullable\": true,\n         \
        \           \"description\": \"Description of the location\"\n                },\n                \"realmId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Realm this location belongs to\"\n                },\n                \"locationType\": {\n                  \
        \  \"$ref\": \"#/$defs/LocationType\",\n                    \"description\": \"Type classification for this location\"\
        \n                },\n                \"parentLocationId\": {\n                    \"type\": \"string\",\n       \
        \             \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Parent location ID for hierarchy (null for root locations)\"\n                },\n                \"bounds\":
        {\n                    \"allOf\": [\n                        {\n                            \"type\": \"object\"\n\
        \                        }\n                    ],\n                    \"nullable\": true,\n                    \"\
        description\": \"Optional spatial extent in world coordinates\"\n                },\n                \"boundsPrecision\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/BoundsPrecision\"\
        \n                        }\n                    ],\n                    \"nullable\": true,\n                   \
        \ \"description\": \"Precision level of spatial bounds (defaults to none)\"\n                },\n                \"\
        coordinateMode\": {\n                    \"allOf\": [\n                        {\n                            \"$ref\"\
        : \"#/$defs/CoordinateMode\"\n                        }\n                    ],\n                    \"nullable\"\
        : true,\n                    \"description\": \"How this location's coordinate system relates to its parent (defaults
        to inherit)\"\n                },\n                \"localOrigin\": {\n                    \"allOf\": [\n        \
        \                {\n                            \"type\": \"object\"\n                        }\n                \
        \    ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point for local or
        inherited coordinate systems\"\n                },\n                \"metadata\": {\n                    \"type\"\
        : \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\": true,\n    \
        \                \"description\": \"Client-provided location metadata. No Bannou plugin reads specific keys from this
        field by convention.\"\n                }\n            }\n        },\n        \"LocationType\": {\n            \"\
        type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"enum\": [\n\
        \                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n                \"DISTRICT\"\
        ,\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n                \"WILDERNESS\"\
        ,\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n        \"BoundsPrecision\"\
        : {\n            \"type\": \"string\",\n            \"description\": \"Precision level of spatial bounds for a location\"\
        ,\n            \"enum\": [\n                \"exact\",\n                \"approximate\",\n                \"none\"\
        \n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"How this location's coordinate system relates to its parent\",\n            \"enum\": [\n                \"inherit\"\
        ,\n                \"local\",\n                \"portal\"\n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationResponse\"\
        ,\n    \"$defs\": {\n        \"LocationResponse\": {\n            \"description\": \"Complete location data returned
        from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n        \
        \    \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\",\n \
        \               \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Create new location\",\n    \"description\": \"\",\n    \"tags\": [\n \
        \       \"Location Admin\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"createLocation\"\n}"
  /location/update:
    post:
      summary: Update location
      operationId: updateLocation
      tags:
      - Location Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateLocationRequest'
      responses:
        '200':
          description: Location updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationResponse'
        '404':
          description: Location not found
        '400':
          description: Invalid update data
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/UpdateLocationRequest\"\
        ,\n    \"$defs\": {\n        \"UpdateLocationRequest\": {\n            \"description\": \"Request to update an existing
        location's properties\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n      \
        \      \"required\": [\n                \"locationId\"\n            ],\n            \"properties\": {\n          \
        \      \"locationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n \
        \                   \"description\": \"ID of the location to update\"\n                },\n                \"name\"\
        : {\n                    \"type\": \"string\",\n                    \"minLength\": 1,\n                    \"maxLength\"\
        : 200,\n                    \"nullable\": true,\n                    \"description\": \"Display name for the location\"\
        \n                },\n                \"description\": {\n                    \"type\": \"string\",\n            \
        \        \"maxLength\": 2000,\n                    \"nullable\": true,\n                    \"description\": \"Description
        of the location\"\n                },\n                \"locationType\": {\n                    \"allOf\": [\n   \
        \                     {\n                            \"$ref\": \"#/$defs/LocationType\"\n                        }\n\
        \                    ],\n                    \"nullable\": true,\n                    \"description\": \"Type of location\"\
        \n                },\n                \"bounds\": {\n                    \"allOf\": [\n                        {\n\
        \                            \"type\": \"object\"\n                        }\n                    ],\n           \
        \         \"nullable\": true,\n                    \"description\": \"Optional spatial extent in world coordinates\"\
        \n                },\n                \"boundsPrecision\": {\n                    \"allOf\": [\n                 \
        \       {\n                            \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n        \
        \            ],\n                    \"nullable\": true,\n                    \"description\": \"Precision level of
        spatial bounds\"\n                },\n                \"coordinateMode\": {\n                    \"allOf\": [\n  \
        \                      {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\n                     \
        \   }\n                    ],\n                    \"nullable\": true,\n                    \"description\": \"How
        this location's coordinate system relates to its parent\"\n                },\n                \"localOrigin\": {\n\
        \                    \"allOf\": [\n                        {\n                            \"type\": \"object\"\n \
        \                       }\n                    ],\n                    \"nullable\": true,\n                    \"\
        description\": \"Origin point for local or inherited coordinate systems\"\n                },\n                \"\
        metadata\": {\n                    \"type\": \"object\",\n                    \"additionalProperties\": true,\n  \
        \                  \"nullable\": true,\n                    \"description\": \"Updated client-provided location metadata.
        No Bannou plugin reads specific keys from this field by convention.\"\n                }\n            }\n        },\n\
        \        \"LocationType\": {\n            \"type\": \"string\",\n            \"description\": \"Type classification
        for locations\",\n            \"enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n         \
        \       \"CITY\",\n                \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n     \
        \           \"LANDMARK\",\n                \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\
        \n            ]\n        },\n        \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Precision level of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n   \
        \             \"approximate\",\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n\
        \            \"type\": \"string\",\n            \"description\": \"How this location's coordinate system relates to
        its parent\",\n            \"enum\": [\n                \"inherit\",\n                \"local\",\n               \
        \ \"portal\"\n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationResponse\"\
        ,\n    \"$defs\": {\n        \"LocationResponse\": {\n            \"description\": \"Complete location data returned
        from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n        \
        \    \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\",\n \
        \               \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Update location\",\n    \"description\": \"\",\n    \"tags\": [\n     \
        \   \"Location Admin\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"updateLocation\"\n}"
  /location/set-parent:
    post:
      summary: Set or change the parent of a location
      description: |
        Update a location's parent, moving it in the hierarchy.
        Validates that:
        - New parent exists and is in the same realm
        - No circular reference would be created
        - Updates depth for location and all descendants
      operationId: setLocationParent
      tags:
      - Location Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetLocationParentRequest'
      responses:
        '200':
          description: Parent updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationResponse'
        '404':
          description: Location or parent not found
        '400':
          description: Invalid parent (different realm or circular reference)
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SetLocationParentRequest\"\
        ,\n    \"$defs\": {\n        \"SetLocationParentRequest\": {\n            \"description\": \"Request to set or change
        a location's parent in the hierarchy\",\n            \"type\": \"object\",\n            \"additionalProperties\":
        false,\n            \"required\": [\n                \"locationId\",\n                \"parentLocationId\"\n     \
        \       ],\n            \"properties\": {\n                \"locationId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"ID of the location to update\"\
        \n                },\n                \"parentLocationId\": {\n                    \"type\": \"string\",\n       \
        \             \"format\": \"uuid\",\n                    \"description\": \"ID of the new parent location (must be
        in same realm)\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationResponse\"\
        ,\n    \"$defs\": {\n        \"LocationResponse\": {\n            \"description\": \"Complete location data returned
        from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n        \
        \    \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\",\n \
        \               \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Set or change the parent of a location\",\n    \"description\": \"Update
        a location's parent, moving it in the hierarchy.\\nValidates that:\\n- New parent exists and is in the same realm\\
        n- No circular reference would be created\\n- Updates depth for location and all descendants\\n\",\n    \"tags\":
        [\n        \"Location Admin\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"setLocationParent\"\n}"
  /location/remove-parent:
    post:
      summary: Remove parent from a location (make it a root location)
      description: |
        Remove the parent of a location, making it a top-level root location
        within its realm. Updates depth for location and all descendants.
      operationId: removeLocationParent
      tags:
      - Location Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveLocationParentRequest'
      responses:
        '200':
          description: Parent removed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationResponse'
        '404':
          description: Location not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/RemoveLocationParentRequest\"\
        ,\n    \"$defs\": {\n        \"RemoveLocationParentRequest\": {\n            \"description\": \"Request to remove
        a location's parent, making it a root location\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"locationId\"\n            ],\n            \"properties\"\
        : {\n                \"locationId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"description\": \"ID of the location to make a root location\"\n               \
        \ }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationResponse\"\
        ,\n    \"$defs\": {\n        \"LocationResponse\": {\n            \"description\": \"Complete location data returned
        from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n        \
        \    \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\",\n \
        \               \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Remove parent from a location (make it a root location)\",\n    \"description\"\
        : \"Remove the parent of a location, making it a top-level root location\\nwithin its realm. Updates depth for location
        and all descendants.\\n\",\n    \"tags\": [\n        \"Location Admin\"\n    ],\n    \"deprecated\": false,\n    \"\
        operationId\": \"removeLocationParent\"\n}"
  /location/delete:
    post:
      summary: Delete location
      description: |
        Hard delete a location. This will fail if the location:
        - Has child locations (must delete or reparent children first)
        - Is still referenced by other entities
        For safe removal, first deprecate the location, remove all children,
        then delete.
      operationId: deleteLocation
      tags:
      - Location Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteLocationRequest'
      responses:
        '200':
          description: Location deleted successfully
        '404':
          description: Location not found
        '409':
          description: Cannot delete - location has children or is in use
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeleteLocationRequest\"\
        ,\n    \"$defs\": {\n        \"DeleteLocationRequest\": {\n            \"description\": \"Request to permanently delete
        a location from the system\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n \
        \           \"required\": [\n                \"locationId\"\n            ],\n            \"properties\": {\n     \
        \           \"locationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"ID of the location to delete\"\n                }\n            }\n     \
        \   }\n    }\n}"
      x-response-schema-json: '{}'
      x-endpoint-info-json: "{\n    \"summary\": \"Delete location\",\n    \"description\": \"Hard delete a location. This
        will fail if the location:\\n- Has child locations (must delete or reparent children first)\\n- Is still referenced
        by other entities\\nFor safe removal, first deprecate the location, remove all children,\\nthen delete.\\n\",\n  \
        \  \"tags\": [\n        \"Location Admin\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"deleteLocation\"\
        \n}"
  /location/transfer-realm:
    post:
      summary: Transfer a location to a different realm
      description: |
        Moves a location from its current realm to a target realm.
        Updates all realm-scoped indexes (code-index, realm-index, parent/root indexes).
        The transferred location becomes a root location in the target realm (parent cleared).
        Returns Conflict if the target realm already has a location with the same code.
        Does NOT move children  caller is responsible for tree ordering.
      operationId: transferLocationToRealm
      tags:
      - Location Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferLocationToRealmRequest'
      responses:
        '200':
          description: Location transferred successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationResponse'
        '404':
          description: Location or target realm not found
        '409':
          description: Target realm already has a location with the same code
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/TransferLocationToRealmRequest\"\
        ,\n    \"$defs\": {\n        \"TransferLocationToRealmRequest\": {\n            \"description\": \"Request to transfer
        a location from its current realm to a different realm\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"locationId\",\n                \"targetRealmId\"\n      \
        \      ],\n            \"properties\": {\n                \"locationId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"ID of the location to transfer\"\
        \n                },\n                \"targetRealmId\": {\n                    \"type\": \"string\",\n          \
        \          \"format\": \"uuid\",\n                    \"description\": \"ID of the target realm to transfer the location
        to\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationResponse\"\
        ,\n    \"$defs\": {\n        \"LocationResponse\": {\n            \"description\": \"Complete location data returned
        from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n        \
        \    \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\",\n \
        \               \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Transfer a location to a different realm\",\n    \"description\": \"Moves
        a location from its current realm to a target realm.\\nUpdates all realm-scoped indexes (code-index, realm-index,
        parent/root indexes).\\nThe transferred location becomes a root location in the target realm (parent cleared).\\nReturns
        Conflict if the target realm already has a location with the same code.\\nDoes NOT move children \\u2014 caller is
        responsible for tree ordering.\\n\",\n    \"tags\": [\n        \"Location Admin\"\n    ],\n    \"deprecated\": false,\n\
        \    \"operationId\": \"transferLocationToRealm\"\n}"
  /location/deprecate:
    post:
      summary: Deprecate a location
      description: |
        Soft-delete a location by marking it as deprecated.
        Deprecated locations:
        - Remain queryable for historical data
        - Cannot be used for placing new entities
        - Can be hard-deleted after all references are removed
      operationId: deprecateLocation
      tags:
      - Location Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeprecateLocationRequest'
      responses:
        '200':
          description: Location deprecated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationResponse'
        '404':
          description: Location not found
        '409':
          description: Location is already deprecated
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeprecateLocationRequest\"\
        ,\n    \"$defs\": {\n        \"DeprecateLocationRequest\": {\n            \"description\": \"Request to soft-delete
        a location by marking it as deprecated\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"locationId\"\n            ],\n            \"properties\"\
        : {\n                \"locationId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"description\": \"ID of the location to deprecate\"\n                },\n      \
        \          \"reason\": {\n                    \"type\": \"string\",\n                    \"maxLength\": 500,\n   \
        \                 \"nullable\": true,\n                    \"description\": \"Optional reason for deprecation (for
        audit purposes)\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationResponse\"\
        ,\n    \"$defs\": {\n        \"LocationResponse\": {\n            \"description\": \"Complete location data returned
        from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n        \
        \    \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\",\n \
        \               \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Deprecate a location\",\n    \"description\": \"Soft-delete a location
        by marking it as deprecated.\\nDeprecated locations:\\n- Remain queryable for historical data\\n- Cannot be used for
        placing new entities\\n- Can be hard-deleted after all references are removed\\n\",\n    \"tags\": [\n        \"Location
        Admin\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"deprecateLocation\"\n}"
  /location/undeprecate:
    post:
      summary: Restore a deprecated location
      description: |
        Remove the deprecated status from a location, making it
        available for entity placement again.
      operationId: undeprecateLocation
      tags:
      - Location Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UndeprecateLocationRequest'
      responses:
        '200':
          description: Location restored successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationResponse'
        '404':
          description: Location not found
        '400':
          description: Location is not deprecated
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/UndeprecateLocationRequest\"\
        ,\n    \"$defs\": {\n        \"UndeprecateLocationRequest\": {\n            \"description\": \"Request to restore
        a deprecated location back to active status\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"locationId\"\n            ],\n            \"properties\"\
        : {\n                \"locationId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"description\": \"ID of the location to restore\"\n                }\n         \
        \   }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationResponse\"\
        ,\n    \"$defs\": {\n        \"LocationResponse\": {\n            \"description\": \"Complete location data returned
        from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n        \
        \    \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\",\n \
        \               \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Restore a deprecated location\",\n    \"description\": \"Remove the deprecated
        status from a location, making it\\navailable for entity placement again.\\n\",\n    \"tags\": [\n        \"Location
        Admin\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"undeprecateLocation\"\n}"
  /location/exists:
    post:
      summary: Check if location exists and is active
      description: |
        Fast validation endpoint for other services to check location validity.
        Returns true if location exists and is not deprecated, false otherwise.
      operationId: locationExists
      tags:
      - Location
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LocationExistsRequest'
      responses:
        '200':
          description: Validation result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationExistsResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationExistsRequest\"\
        ,\n    \"$defs\": {\n        \"LocationExistsRequest\": {\n            \"description\": \"Request to check if a location
        exists and is active\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n       \
        \     \"required\": [\n                \"locationId\"\n            ],\n            \"properties\": {\n           \
        \     \"locationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n  \
        \                  \"description\": \"ID of the location to validate\"\n                }\n            }\n       \
        \ }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationExistsResponse\"\
        ,\n    \"$defs\": {\n        \"LocationExistsResponse\": {\n            \"description\": \"Response indicating whether
        a location exists and its active status\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"exists\",\n                \"isActive\"\n            ],\n\
        \            \"properties\": {\n                \"exists\": {\n                    \"type\": \"boolean\",\n      \
        \              \"description\": \"Whether the location exists\"\n                },\n                \"isActive\"\
        : {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether the location is active
        (false if deprecated or not found)\"\n                },\n                \"realmId\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n              \
        \      \"description\": \"The realm ID if location found\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Check if location exists and is active\",\n    \"description\": \"Fast
        validation endpoint for other services to check location validity.\\nReturns true if location exists and is not deprecated,
        false otherwise.\\n\",\n    \"tags\": [\n        \"Location\"\n    ],\n    \"deprecated\": false,\n    \"operationId\"\
        : \"locationExists\"\n}"
  /location/query/by-position:
    post:
      summary: Find locations containing a spatial position
      description: |
        Given a Position3D and realmId, returns all locations whose bounds contain
        that position, ordered by depth descending (most specific first). Only
        locations with spatial bounds data are considered. A position is "in" a
        location if it falls within the location's axis-aligned bounding box.
      operationId: queryLocationsByPosition
      tags:
      - Location
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryLocationsByPositionRequest'
      responses:
        '200':
          description: Locations containing the position
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationListResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/QueryLocationsByPositionRequest\"\
        ,\n    \"$defs\": {\n        \"QueryLocationsByPositionRequest\": {\n            \"description\": \"Request to find
        all locations containing a spatial position\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"position\",\n                \"realmId\"\n            ],\n\
        \            \"properties\": {\n                \"position\": {\n                    \"type\": \"object\",\n     \
        \               \"description\": \"Position to query in world coordinates\"\n                },\n                \"\
        realmId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n             \
        \       \"description\": \"Realm to search within\"\n                },\n                \"maxDepth\": {\n       \
        \             \"type\": \"integer\",\n                    \"minimum\": 0,\n                    \"nullable\": true,\n\
        \                    \"description\": \"Maximum hierarchy depth to search (null for all depths)\"\n              \
        \  },\n                \"page\": {\n                    \"type\": \"integer\",\n                    \"minimum\": 1,\n\
        \                    \"default\": 1,\n                    \"description\": \"Page number for pagination (1-indexed)\"\
        \n                },\n                \"pageSize\": {\n                    \"type\": \"integer\",\n              \
        \      \"minimum\": 1,\n                    \"maximum\": 100,\n                    \"default\": 20,\n            \
        \        \"description\": \"Number of results per page\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LocationListResponse\"\
        ,\n    \"$defs\": {\n        \"LocationListResponse\": {\n            \"description\": \"Paginated list of locations
        with metadata for navigation\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locations\",\n                \"totalCount\",\n                \"\
        page\",\n                \"pageSize\",\n                \"hasNextPage\",\n                \"hasPreviousPage\"\n  \
        \          ],\n            \"properties\": {\n                \"locations\": {\n                    \"type\": \"array\"\
        ,\n                    \"items\": {\n                        \"$ref\": \"#/$defs/LocationResponse\"\n            \
        \        },\n                    \"description\": \"List of locations matching the query\"\n                },\n \
        \               \"totalCount\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Total number of locations matching the query (across all pages)\"\n                },\n                \"page\"\
        : {\n                    \"type\": \"integer\",\n                    \"description\": \"Current page number (1-indexed)\"\
        \n                },\n                \"pageSize\": {\n                    \"type\": \"integer\",\n              \
        \      \"description\": \"Number of results per page\"\n                },\n                \"hasNextPage\": {\n \
        \                   \"type\": \"boolean\",\n                    \"description\": \"Whether there are more pages after
        the current page\"\n                },\n                \"hasPreviousPage\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether there are pages before the current page\"\n                }\n \
        \           }\n        },\n        \"LocationResponse\": {\n            \"description\": \"Complete location data
        returned from API operations\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locationId\",\n                \"realmId\",\n                \"code\"\
        ,\n                \"name\",\n                \"locationType\",\n                \"depth\",\n                \"isDeprecated\"\
        ,\n                \"boundsPrecision\",\n                \"coordinateMode\",\n                \"createdAt\",\n   \
        \             \"updatedAt\"\n            ],\n            \"properties\": {\n                \"locationId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier for the location\"\n                },\n                \"realmId\": {\n                   \
        \ \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Realm this
        location belongs to\"\n                },\n                \"code\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Unique code for the location within its realm\"\n                },\n    \
        \            \"name\": {\n                    \"type\": \"string\",\n                    \"description\": \"Display
        name of the location\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional description of the location\"\
        \n                },\n                \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\"\
        ,\n                    \"description\": \"Type classification of the location\"\n                },\n            \
        \    \"parentLocationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Parent location ID (null for root
        locations)\"\n                },\n                \"depth\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Depth in hierarchy (0 for root locations)\"\n                },\n             \
        \   \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether
        this location is deprecated and cannot be used\"\n                },\n                \"deprecatedAt\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Timestamp when this location was deprecated\"\n                },\n\
        \                \"deprecationReason\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Optional reason for deprecation\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"description\": \"Precision level of spatial bounds\"\n                },\n                \"coordinateMode\"\
        : {\n                    \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\
        \n                        }\n                    ],\n                    \"description\": \"How this location's coordinate
        system relates to its parent\"\n                },\n                \"localOrigin\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"type\": \"object\"\n                        }\n    \
        \                ],\n                    \"nullable\": true,\n                    \"description\": \"Origin point
        for local or inherited coordinate systems\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Client-provided location metadata. No Bannou plugin reads specific
        keys from this field by convention.\"\n                },\n                \"createdAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp
        when the location was created\"\n                },\n                \"updatedAt\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"Timestamp when
        the location was last updated\"\n                }\n            }\n        },\n        \"LocationType\": {\n     \
        \       \"type\": \"string\",\n            \"description\": \"Type classification for locations\",\n            \"\
        enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n                \"CITY\",\n              \
        \  \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n                \"LANDMARK\",\n      \
        \          \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\n            ]\n        },\n \
        \       \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\": \"Precision level
        of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n                \"approximate\"\
        ,\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"How this location's coordinate system relates to its parent\",\n            \"enum\"\
        : [\n                \"inherit\",\n                \"local\",\n                \"portal\"\n            ]\n       \
        \ }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Find locations containing a spatial position\",\n    \"description\": \"\
        Given a Position3D and realmId, returns all locations whose bounds contain\\nthat position, ordered by depth descending
        (most specific first). Only\\nlocations with spatial bounds data are considered. A position is \\\"in\\\" a\\nlocation
        if it falls within the location's axis-aligned bounding box.\\n\",\n    \"tags\": [\n        \"Location\"\n    ],\n\
        \    \"deprecated\": false,\n    \"operationId\": \"queryLocationsByPosition\"\n}"
  /location/seed:
    post:
      summary: Seed locations from configuration
      description: |
        Idempotent operation to seed locations from provided data.
        Creates locations that don't exist, optionally updates existing locations.
        Processes locations in dependency order (parents before children).
        Typically called at service startup with YAML-defined location hierarchies.
      operationId: seedLocations
      tags:
      - Location Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SeedLocationsRequest'
      responses:
        '200':
          description: Seed operation completed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SeedLocationsResponse'
        '400':
          description: Invalid seed data
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SeedLocationsRequest\"\
        ,\n    \"$defs\": {\n        \"SeedLocationsRequest\": {\n            \"description\": \"Request to seed multiple
        locations from configuration data\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locations\"\n            ],\n            \"properties\": {\n     \
        \           \"locations\": {\n                    \"type\": \"array\",\n                    \"items\": {\n       \
        \                 \"$ref\": \"#/$defs/SeedLocation\"\n                    },\n                    \"description\"\
        : \"List of locations to seed (processed in dependency order)\"\n                },\n                \"updateExisting\"\
        : {\n                    \"type\": \"boolean\",\n                    \"default\": false,\n                    \"description\"\
        : \"Whether to update locations that already exist\"\n                }\n            }\n        },\n        \"SeedLocation\"\
        : {\n            \"description\": \"Location data for seeding operations, using codes instead of IDs for references\"\
        ,\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n            \"required\": [\n\
        \                \"code\",\n                \"name\",\n                \"realmCode\",\n                \"locationType\"\
        \n            ],\n            \"properties\": {\n                \"code\": {\n                    \"type\": \"string\"\
        ,\n                    \"minLength\": 1,\n                    \"maxLength\": 100,\n                    \"pattern\"\
        : \"^[A-Z][A-Z0-9_]*$\",\n                    \"description\": \"Unique code for the location within realm\"\n   \
        \             },\n                \"name\": {\n                    \"type\": \"string\",\n                    \"minLength\"\
        : 1,\n                    \"maxLength\": 200,\n                    \"description\": \"Display name\"\n           \
        \     },\n                \"description\": {\n                    \"type\": \"string\",\n                    \"maxLength\"\
        : 2000,\n                    \"nullable\": true,\n                    \"description\": \"Description\"\n         \
        \       },\n                \"realmCode\": {\n                    \"type\": \"string\",\n                    \"minLength\"\
        : 1,\n                    \"maxLength\": 100,\n                    \"pattern\": \"^[A-Z][A-Z0-9_]*$\",\n         \
        \           \"description\": \"Code of the realm (resolved during seeding)\"\n                },\n               \
        \ \"locationType\": {\n                    \"$ref\": \"#/$defs/LocationType\",\n                    \"description\"\
        : \"Type classification for this location\"\n                },\n                \"parentLocationCode\": {\n     \
        \               \"type\": \"string\",\n                    \"minLength\": 1,\n                    \"maxLength\": 100,\n\
        \                    \"pattern\": \"^[A-Z][A-Z0-9_]*$\",\n                    \"nullable\": true,\n              \
        \      \"description\": \"Code of the parent location (resolved during seeding)\"\n                },\n          \
        \      \"bounds\": {\n                    \"allOf\": [\n                        {\n                            \"\
        type\": \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n \
        \                   \"description\": \"Optional spatial extent in world coordinates\"\n                },\n      \
        \          \"boundsPrecision\": {\n                    \"allOf\": [\n                        {\n                 \
        \           \"$ref\": \"#/$defs/BoundsPrecision\"\n                        }\n                    ],\n           \
        \         \"nullable\": true,\n                    \"description\": \"Precision level of spatial bounds (defaults
        to none)\"\n                },\n                \"coordinateMode\": {\n                    \"allOf\": [\n        \
        \                {\n                            \"$ref\": \"#/$defs/CoordinateMode\"\n                        }\n\
        \                    ],\n                    \"nullable\": true,\n                    \"description\": \"How this
        location's coordinate system relates to its parent (defaults to inherit)\"\n                },\n                \"\
        localOrigin\": {\n                    \"allOf\": [\n                        {\n                            \"type\"\
        : \"object\"\n                        }\n                    ],\n                    \"nullable\": true,\n       \
        \             \"description\": \"Origin point for local or inherited coordinate systems\"\n                },\n  \
        \              \"metadata\": {\n                    \"type\": \"object\",\n                    \"additionalProperties\"\
        : true,\n                    \"nullable\": true,\n                    \"description\": \"Client-provided location
        metadata. No Bannou plugin reads specific keys from this field by convention.\"\n                }\n            }\n\
        \        },\n        \"LocationType\": {\n            \"type\": \"string\",\n            \"description\": \"Type classification
        for locations\",\n            \"enum\": [\n                \"CONTINENT\",\n                \"REGION\",\n         \
        \       \"CITY\",\n                \"DISTRICT\",\n                \"BUILDING\",\n                \"ROOM\",\n     \
        \           \"LANDMARK\",\n                \"WILDERNESS\",\n                \"DUNGEON\",\n                \"OTHER\"\
        \n            ]\n        },\n        \"BoundsPrecision\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Precision level of spatial bounds for a location\",\n            \"enum\": [\n                \"exact\",\n   \
        \             \"approximate\",\n                \"none\"\n            ]\n        },\n        \"CoordinateMode\": {\n\
        \            \"type\": \"string\",\n            \"description\": \"How this location's coordinate system relates to
        its parent\",\n            \"enum\": [\n                \"inherit\",\n                \"local\",\n               \
        \ \"portal\"\n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SeedLocationsResponse\"\
        ,\n    \"$defs\": {\n        \"SeedLocationsResponse\": {\n            \"description\": \"Summary of a seed operation
        including counts of created, updated, and skipped locations\",\n            \"type\": \"object\",\n            \"\
        additionalProperties\": false,\n            \"required\": [\n                \"created\",\n                \"updated\"\
        ,\n                \"skipped\",\n                \"errors\"\n            ],\n            \"properties\": {\n     \
        \           \"created\": {\n                    \"type\": \"integer\",\n                    \"description\": \"Number
        of new locations created\"\n                },\n                \"updated\": {\n                    \"type\": \"integer\"\
        ,\n                    \"description\": \"Number of existing locations updated\"\n                },\n           \
        \     \"skipped\": {\n                    \"type\": \"integer\",\n                    \"description\": \"Number of
        locations skipped (already exist, updateExisting=false)\"\n                },\n                \"errors\": {\n   \
        \                 \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\
        \n                    },\n                    \"description\": \"List of error messages for locations that failed
        to seed\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Seed locations from configuration\",\n    \"description\": \"Idempotent
        operation to seed locations from provided data.\\nCreates locations that don't exist, optionally updates existing
        locations.\\nProcesses locations in dependency order (parents before children).\\nTypically called at service startup
        with YAML-defined location hierarchies.\\n\",\n    \"tags\": [\n        \"Location Admin\"\n    ],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"seedLocations\"\n}"
  /location/report-entity-position:
    post:
      summary: Report entity presence at a location
      description: |
        Reports that an entity is present at a location. Creates or refreshes an ephemeral
        presence binding with configurable TTL. Reporters must call this periodically to
        keep the presence alive. Publishes arrival/departure events only when the entity's
        location actually changes (pure refreshes are silent).

        The optional previousLocationId provides a caller-hint optimization: if provided
        and matches the current stored location, only a TTL refresh occurs (no GET needed).
        If omitted, the service reads the current value to detect location changes.
      operationId: reportEntityPosition
      tags:
      - Location Presence
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReportEntityPositionRequest'
      responses:
        '200':
          description: Position reported successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReportEntityPositionResponse'
        '404':
          description: Location not found
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ReportEntityPositionRequest\"\
        ,\n    \"$defs\": {\n        \"ReportEntityPositionRequest\": {\n            \"description\": \"Request to report
        an entity's presence at a location\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"entityType\",\n                \"entityId\",\n                \"locationId\"\
        \n            ],\n            \"properties\": {\n                \"entityType\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"Type of entity (opaque string - character, actor, npc, player,
        etc.)\"\n                },\n                \"entityId\": {\n                    \"type\": \"string\",\n        \
        \            \"format\": \"uuid\",\n                    \"description\": \"ID of the entity being reported\"\n   \
        \             },\n                \"locationId\": {\n                    \"type\": \"string\",\n                 \
        \   \"format\": \"uuid\",\n                    \"description\": \"ID of the location the entity is at\"\n        \
        \        },\n                \"previousLocationId\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Caller
        hint for the entity's previous location (optimization to skip GET on refresh)\"\n                },\n            \
        \    \"realmId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n      \
        \              \"nullable\": true,\n                    \"description\": \"ID of the realm the location belongs to
        (included in arrival events if provided)\"\n                },\n                \"reportedBy\": {\n              \
        \      \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Identifier
        of the reporter (service name or session ID)\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ReportEntityPositionResponse\"\
        ,\n    \"$defs\": {\n        \"ReportEntityPositionResponse\": {\n            \"description\": \"Result of reporting
        entity presence. HTTP 200 confirms the position was recorded.\",\n            \"type\": \"object\",\n            \"\
        additionalProperties\": false,\n            \"properties\": {\n                \"arrivedAt\": {\n                \
        \    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n \
        \                   \"description\": \"Location ID the entity arrived at (only set when location changed)\"\n    \
        \            },\n                \"departedFrom\": {\n                    \"type\": \"string\",\n                \
        \    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Location
        ID the entity departed from (only set when location changed)\"\n                }\n            }\n        }\n    }\n\
        }"
      x-endpoint-info-json: "{\n    \"summary\": \"Report entity presence at a location\",\n    \"description\": \"Reports
        that an entity is present at a location. Creates or refreshes an ephemeral\\npresence binding with configurable TTL.
        Reporters must call this periodically to\\nkeep the presence alive. Publishes arrival/departure events only when the
        entity's\\nlocation actually changes (pure refreshes are silent).\\n\\nThe optional previousLocationId provides a
        caller-hint optimization: if provided\\nand matches the current stored location, only a TTL refresh occurs (no GET
        needed).\\nIf omitted, the service reads the current value to detect location changes.\\n\",\n    \"tags\": [\n  \
        \      \"Location Presence\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"reportEntityPosition\"\n}"
  /location/get-entity-location:
    post:
      summary: Get the current location of an entity
      description: |
        Queries where an entity currently is. Returns the entity's location if a
        non-expired presence binding exists.
      operationId: getEntityLocation
      tags:
      - Location Presence
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetEntityLocationRequest'
      responses:
        '200':
          description: Entity location query result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetEntityLocationResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetEntityLocationRequest\"\
        ,\n    \"$defs\": {\n        \"GetEntityLocationRequest\": {\n            \"description\": \"Request to query an entity's
        current location\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n           \
        \ \"required\": [\n                \"entityType\",\n                \"entityId\"\n            ],\n            \"properties\"\
        : {\n                \"entityType\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Type of entity (opaque string - character, actor, npc, player, etc.)\"\n                },\n                \"\
        entityId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n            \
        \        \"description\": \"ID of the entity to look up\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetEntityLocationResponse\"\
        ,\n    \"$defs\": {\n        \"GetEntityLocationResponse\": {\n            \"description\": \"Result of querying an
        entity's current location. All fields are null if no active presence exists.\",\n            \"type\": \"object\"\
        ,\n            \"additionalProperties\": false,\n            \"properties\": {\n                \"locationId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"ID of the location the entity is currently at (null if no active presence)\"\
        \n                },\n                \"realmId\": {\n                    \"type\": \"string\",\n                \
        \    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"ID of
        the realm the location belongs to\"\n                },\n                \"reportedAt\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"When the presence was last reported\"\n                },\n                \"\
        reportedBy\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n            \
        \        \"description\": \"Identifier of the last reporter\"\n                }\n            }\n        }\n    }\n\
        }"
      x-endpoint-info-json: "{\n    \"summary\": \"Get the current location of an entity\",\n    \"description\": \"Queries
        where an entity currently is. Returns the entity's location if a\\nnon-expired presence binding exists.\\n\",\n  \
        \  \"tags\": [\n        \"Location Presence\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"getEntityLocation\"\
        \n}"
  /location/list-entities-at-location:
    post:
      summary: List entities currently at a location
      description: |
        Queries which entities are currently present at a location. Supports optional
        entity type filtering and pagination. Results are hydrated from the entity
        presence store for reporting metadata.
      operationId: listEntitiesAtLocation
      tags:
      - Location Presence
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListEntitiesAtLocationRequest'
      responses:
        '200':
          description: Entity list for the location
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListEntitiesAtLocationResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListEntitiesAtLocationRequest\"\
        ,\n    \"$defs\": {\n        \"ListEntitiesAtLocationRequest\": {\n            \"description\": \"Request to list
        entities at a specific location\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"locationId\"\n            ],\n            \"properties\": {\n    \
        \            \"locationId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"ID of the location to query\"\n                },\n                \"entityType\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Optional filter by entity type (opaque string)\"\n                },\n                \"page\": {\n          \
        \          \"type\": \"integer\",\n                    \"minimum\": 1,\n                    \"default\": 1,\n    \
        \                \"description\": \"Page number (1-indexed)\"\n                },\n                \"pageSize\": {\n\
        \                    \"type\": \"integer\",\n                    \"minimum\": 1,\n                    \"maximum\"\
        : 100,\n                    \"default\": 50,\n                    \"description\": \"Number of entities per page\"\
        \n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListEntitiesAtLocationResponse\"\
        ,\n    \"$defs\": {\n        \"ListEntitiesAtLocationResponse\": {\n            \"description\": \"Result of listing
        entities at a location\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n     \
        \       \"required\": [\n                \"entities\",\n                \"totalCount\",\n                \"locationId\"\
        \n            ],\n            \"properties\": {\n                \"entities\": {\n                    \"type\": \"\
        array\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/EntityPresenceEntry\"\n  \
        \                  },\n                    \"description\": \"Entities currently present at the location\"\n     \
        \           },\n                \"totalCount\": {\n                    \"type\": \"integer\",\n                  \
        \  \"description\": \"Total number of entities matching the query\"\n                },\n                \"locationId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"ID of the queried location\"\n                }\n            }\n        },\n        \"EntityPresenceEntry\"\
        : {\n            \"description\": \"An entity currently present at a location\",\n            \"type\": \"object\"\
        ,\n            \"additionalProperties\": false,\n            \"required\": [\n                \"entityType\",\n  \
        \              \"entityId\"\n            ],\n            \"properties\": {\n                \"entityType\": {\n  \
        \                  \"type\": \"string\",\n                    \"description\": \"Type of entity (opaque string)\"\n\
        \                },\n                \"entityId\": {\n                    \"type\": \"string\",\n                \
        \    \"format\": \"uuid\",\n                    \"description\": \"ID of the entity\"\n                },\n      \
        \          \"reportedAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"When the presence was last reported\"\
        \n                },\n                \"reportedBy\": {\n                    \"type\": \"string\",\n             \
        \       \"nullable\": true,\n                    \"description\": \"Identifier of the last reporter\"\n          \
        \      }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"List entities currently at a location\",\n    \"description\": \"Queries
        which entities are currently present at a location. Supports optional\\nentity type filtering and pagination. Results
        are hydrated from the entity\\npresence store for reporting metadata.\\n\",\n    \"tags\": [\n        \"Location Presence\"\
        \n    ],\n    \"deprecated\": false,\n    \"operationId\": \"listEntitiesAtLocation\"\n}"
  /location/clear-entity-position:
    post:
      summary: Remove entity presence from its current location
      description: |
        Clears an entity's presence binding, removing it from its current location.
        Publishes a departure event if the entity was present at a location.
      operationId: clearEntityPosition
      tags:
      - Location Presence
      x-permissions:
      - role: developer
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClearEntityPositionRequest'
      responses:
        '200':
          description: Entity position cleared
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClearEntityPositionResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ClearEntityPositionRequest\"\
        ,\n    \"$defs\": {\n        \"ClearEntityPositionRequest\": {\n            \"description\": \"Request to clear an
        entity's presence from its current location\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"entityType\",\n                \"entityId\"\n           \
        \ ],\n            \"properties\": {\n                \"entityType\": {\n                    \"type\": \"string\",\n\
        \                    \"description\": \"Type of entity (opaque string - character, actor, npc, player, etc.)\"\n \
        \               },\n                \"entityId\": {\n                    \"type\": \"string\",\n                 \
        \   \"format\": \"uuid\",\n                    \"description\": \"ID of the entity to clear\"\n                }\n\
        \            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ClearEntityPositionResponse\"\
        ,\n    \"$defs\": {\n        \"ClearEntityPositionResponse\": {\n            \"description\": \"Result of clearing
        entity presence. HTTP 200 confirms the operation completed.\",\n            \"type\": \"object\",\n            \"\
        additionalProperties\": false,\n            \"properties\": {\n                \"previousLocationId\": {\n       \
        \             \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\":
        true,\n                    \"description\": \"Location the entity was removed from (null if entity had no active presence)\"\
        \n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Remove entity presence from its current location\",\n    \"description\"\
        : \"Clears an entity's presence binding, removing it from its current location.\\nPublishes a departure event if the
        entity was present at a location.\\n\",\n    \"tags\": [\n        \"Location Presence\"\n    ],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"clearEntityPosition\"\n}"
components:
  schemas:
    LocationType:
      type: string
      description: Type classification for locations
      enum:
      - CONTINENT
      - REGION
      - CITY
      - DISTRICT
      - BUILDING
      - ROOM
      - LANDMARK
      - WILDERNESS
      - DUNGEON
      - OTHER
    BoundsPrecision:
      type: string
      description: Precision level of spatial bounds for a location
      enum:
      - exact
      - approximate
      - none
    CoordinateMode:
      type: string
      description: How this location's coordinate system relates to its parent
      enum:
      - inherit
      - local
      - portal
    TerritoryMode:
      type: string
      description: Territory validation mode for constraint checking
      enum:
      - exclusive
      - inclusive
    ValidateTerritoryRequest:
      type: object
      description: Request to validate a location against territory boundaries
      additionalProperties: false
      required:
      - locationId
      - territoryLocationIds
      properties:
        locationId:
          type: string
          format: uuid
          description: The location to validate
        territoryLocationIds:
          type: array
          items:
            type: string
            format: uuid
          description: Territory boundary location IDs
        territoryMode:
          allOf:
          - $ref: '#/components/schemas/TerritoryMode'
          nullable: true
          description: Validation mode (exclusive or inclusive). Defaults to exclusive.
    ValidateTerritoryResponse:
      type: object
      description: Territory validation result
      additionalProperties: false
      required:
      - isValid
      properties:
        isValid:
          type: boolean
          description: True if location passes territory validation
        violationReason:
          type: string
          nullable: true
          description: Human-readable reason if validation failed
        matchedTerritoryId:
          type: string
          format: uuid
          nullable: true
          description: The territory location that matched (for inclusive) or conflicted (for exclusive)
    GetLocationRequest:
      description: Request to retrieve a location by its unique identifier
      type: object
      additionalProperties: false
      required:
      - locationId
      properties:
        locationId:
          type: string
          format: uuid
          description: Unique identifier of the location
    GetLocationByCodeRequest:
      description: Request to retrieve a location by its code within a specific realm
      type: object
      additionalProperties: false
      required:
      - code
      - realmId
      properties:
        code:
          type: string
          minLength: 1
          maxLength: 100
          pattern: '^[A-Z][A-Z0-9_]*$'
          description: Unique code for the location within the realm
        realmId:
          type: string
          format: uuid
          description: Realm ID to scope the code lookup
    ListLocationsRequest:
      description: Request to list locations within a realm with optional type and deprecation filtering
      type: object
      additionalProperties: false
      required:
      - realmId
      properties:
        realmId:
          type: string
          format: uuid
          description: Realm ID to query (required - locations are partitioned by realm)
        locationType:
          allOf:
          - $ref: '#/components/schemas/LocationType'
          nullable: true
          description: Filter by location type
        includeDeprecated:
          type: boolean
          default: false
          description: Whether to include deprecated locations in the response
        page:
          type: integer
          minimum: 1
          default: 1
          description: Page number for pagination (1-indexed)
        pageSize:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          description: Number of results per page
    ListLocationsByRealmRequest:
      description: Request to list all locations within a specific realm with optional filtering
      type: object
      additionalProperties: false
      required:
      - realmId
      properties:
        realmId:
          type: string
          format: uuid
          description: Realm ID to query
        locationType:
          allOf:
          - $ref: '#/components/schemas/LocationType'
          nullable: true
          description: Optional type filter
        includeDeprecated:
          type: boolean
          default: false
          description: Whether to include deprecated locations in the response
        page:
          type: integer
          minimum: 1
          default: 1
          description: Page number for pagination (1-indexed)
        pageSize:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          description: Number of results per page
    ListLocationsByParentRequest:
      description: Request to list all child locations of a specified parent location
      type: object
      additionalProperties: false
      required:
      - parentLocationId
      properties:
        parentLocationId:
          type: string
          format: uuid
          description: ID of the parent location
        locationType:
          allOf:
          - $ref: '#/components/schemas/LocationType'
          nullable: true
          description: Optional filter by location type
        includeDeprecated:
          type: boolean
          default: false
          description: Whether to include deprecated locations in the response
        page:
          type: integer
          minimum: 1
          default: 1
          description: Page number for pagination (1-indexed)
        pageSize:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          description: Number of results per page
    ListRootLocationsRequest:
      description: Request to list all top-level locations (without parents) in a realm
      type: object
      additionalProperties: false
      required:
      - realmId
      properties:
        realmId:
          type: string
          format: uuid
          description: Realm ID to get root locations for
        locationType:
          allOf:
          - $ref: '#/components/schemas/LocationType'
          nullable: true
          description: Optional filter by location type
        includeDeprecated:
          type: boolean
          default: false
          description: Whether to include deprecated locations in the response
        page:
          type: integer
          minimum: 1
          default: 1
          description: Page number for pagination (1-indexed)
        pageSize:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          description: Number of results per page
    GetLocationAncestorsRequest:
      description: Request to retrieve the full ancestry chain of a location up to the root
      type: object
      additionalProperties: false
      required:
      - locationId
      properties:
        locationId:
          type: string
          format: uuid
          description: The location to get ancestors for
    GetLocationDescendantsRequest:
      description: Request to retrieve all descendants of a location (children, grandchildren, etc.)
      type: object
      additionalProperties: false
      required:
      - locationId
      properties:
        locationId:
          type: string
          format: uuid
          description: The location to get descendants for
        locationType:
          allOf:
          - $ref: '#/components/schemas/LocationType'
          nullable: true
          description: Optional filter by location type
        maxDepth:
          type: integer
          minimum: 1
          maximum: 10
          nullable: true
          description: Maximum depth of descendants to return (null = all)
        includeDeprecated:
          type: boolean
          default: false
          description: Whether to include deprecated locations in the response
        page:
          type: integer
          minimum: 1
          default: 1
          description: Page number for pagination (1-indexed)
        pageSize:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          description: Number of results per page
    CreateLocationRequest:
      description: Request to create a new location within a realm
      type: object
      additionalProperties: false
      required:
      - code
      - name
      - realmId
      - locationType
      properties:
        code:
          type: string
          minLength: 1
          maxLength: 100
          pattern: '^[A-Z][A-Z0-9_]*$'
          description: Unique code for the location within the realm
        name:
          type: string
          minLength: 1
          maxLength: 200
          description: Display name for the location
        description:
          type: string
          maxLength: 2000
          nullable: true
          description: Description of the location
        realmId:
          type: string
          format: uuid
          description: Realm this location belongs to
        locationType:
          $ref: '#/components/schemas/LocationType'
          description: Type classification for this location
        parentLocationId:
          type: string
          format: uuid
          nullable: true
          description: Parent location ID for hierarchy (null for root locations)
        bounds:
          allOf:
          - $ref: 'common-api.yaml#/components/schemas/BoundingBox3D'
          nullable: true
          description: Optional spatial extent in world coordinates
        boundsPrecision:
          allOf:
          - $ref: '#/components/schemas/BoundsPrecision'
          nullable: true
          description: Precision level of spatial bounds (defaults to none)
        coordinateMode:
          allOf:
          - $ref: '#/components/schemas/CoordinateMode'
          nullable: true
          description: How this location's coordinate system relates to its parent (defaults to inherit)
        localOrigin:
          allOf:
          - $ref: 'common-api.yaml#/components/schemas/Position3D'
          nullable: true
          description: Origin point for local or inherited coordinate systems
        metadata:
          type: object
          additionalProperties: true
          nullable: true
          description: >-
            Client-provided location metadata.
            No Bannou plugin reads specific keys from this field by convention.
    UpdateLocationRequest:
      description: Request to update an existing location's properties
      type: object
      additionalProperties: false
      required:
      - locationId
      properties:
        locationId:
          type: string
          format: uuid
          description: ID of the location to update
        name:
          type: string
          minLength: 1
          maxLength: 200
          nullable: true
          description: Display name for the location
        description:
          type: string
          maxLength: 2000
          nullable: true
          description: Description of the location
        locationType:
          allOf:
          - $ref: '#/components/schemas/LocationType'
          nullable: true
          description: Type of location
        bounds:
          allOf:
          - $ref: 'common-api.yaml#/components/schemas/BoundingBox3D'
          nullable: true
          description: Optional spatial extent in world coordinates
        boundsPrecision:
          allOf:
          - $ref: '#/components/schemas/BoundsPrecision'
          nullable: true
          description: Precision level of spatial bounds
        coordinateMode:
          allOf:
          - $ref: '#/components/schemas/CoordinateMode'
          nullable: true
          description: How this location's coordinate system relates to its parent
        localOrigin:
          allOf:
          - $ref: 'common-api.yaml#/components/schemas/Position3D'
          nullable: true
          description: Origin point for local or inherited coordinate systems
        metadata:
          type: object
          additionalProperties: true
          nullable: true
          description: >-
            Updated client-provided location metadata.
            No Bannou plugin reads specific keys from this field by convention.
    SetLocationParentRequest:
      description: Request to set or change a location's parent in the hierarchy
      type: object
      additionalProperties: false
      required:
      - locationId
      - parentLocationId
      properties:
        locationId:
          type: string
          format: uuid
          description: ID of the location to update
        parentLocationId:
          type: string
          format: uuid
          description: ID of the new parent location (must be in same realm)
    RemoveLocationParentRequest:
      description: Request to remove a location's parent, making it a root location
      type: object
      additionalProperties: false
      required:
      - locationId
      properties:
        locationId:
          type: string
          format: uuid
          description: ID of the location to make a root location
    DeleteLocationRequest:
      description: Request to permanently delete a location from the system
      type: object
      additionalProperties: false
      required:
      - locationId
      properties:
        locationId:
          type: string
          format: uuid
          description: ID of the location to delete
    TransferLocationToRealmRequest:
      description: Request to transfer a location from its current realm to a different realm
      type: object
      additionalProperties: false
      required:
      - locationId
      - targetRealmId
      properties:
        locationId:
          type: string
          format: uuid
          description: ID of the location to transfer
        targetRealmId:
          type: string
          format: uuid
          description: ID of the target realm to transfer the location to
    DeprecateLocationRequest:
      description: Request to soft-delete a location by marking it as deprecated
      type: object
      additionalProperties: false
      required:
      - locationId
      properties:
        locationId:
          type: string
          format: uuid
          description: ID of the location to deprecate
        reason:
          type: string
          maxLength: 500
          nullable: true
          description: Optional reason for deprecation (for audit purposes)
    UndeprecateLocationRequest:
      description: Request to restore a deprecated location back to active status
      type: object
      additionalProperties: false
      required:
      - locationId
      properties:
        locationId:
          type: string
          format: uuid
          description: ID of the location to restore
    LocationExistsRequest:
      description: Request to check if a location exists and is active
      type: object
      additionalProperties: false
      required:
      - locationId
      properties:
        locationId:
          type: string
          format: uuid
          description: ID of the location to validate
    LocationExistsResponse:
      description: Response indicating whether a location exists and its active status
      type: object
      additionalProperties: false
      required:
      - exists
      - isActive
      properties:
        exists:
          type: boolean
          description: Whether the location exists
        isActive:
          type: boolean
          description: Whether the location is active (false if deprecated or not found)
        realmId:
          type: string
          format: uuid
          nullable: true
          description: The realm ID if location found
    SeedLocationsRequest:
      description: Request to seed multiple locations from configuration data
      type: object
      additionalProperties: false
      required:
      - locations
      properties:
        locations:
          type: array
          items:
            $ref: '#/components/schemas/SeedLocation'
          description: List of locations to seed (processed in dependency order)
        updateExisting:
          type: boolean
          default: false
          description: Whether to update locations that already exist
    SeedLocation:
      description: Location data for seeding operations, using codes instead of IDs for references
      type: object
      additionalProperties: false
      required:
      - code
      - name
      - realmCode
      - locationType
      properties:
        code:
          type: string
          minLength: 1
          maxLength: 100
          pattern: '^[A-Z][A-Z0-9_]*$'
          description: Unique code for the location within realm
        name:
          type: string
          minLength: 1
          maxLength: 200
          description: Display name
        description:
          type: string
          maxLength: 2000
          nullable: true
          description: Description
        realmCode:
          type: string
          minLength: 1
          maxLength: 100
          pattern: '^[A-Z][A-Z0-9_]*$'
          description: Code of the realm (resolved during seeding)
        locationType:
          $ref: '#/components/schemas/LocationType'
          description: Type classification for this location
        parentLocationCode:
          type: string
          minLength: 1
          maxLength: 100
          pattern: '^[A-Z][A-Z0-9_]*$'
          nullable: true
          description: Code of the parent location (resolved during seeding)
        bounds:
          allOf:
          - $ref: 'common-api.yaml#/components/schemas/BoundingBox3D'
          nullable: true
          description: Optional spatial extent in world coordinates
        boundsPrecision:
          allOf:
          - $ref: '#/components/schemas/BoundsPrecision'
          nullable: true
          description: Precision level of spatial bounds (defaults to none)
        coordinateMode:
          allOf:
          - $ref: '#/components/schemas/CoordinateMode'
          nullable: true
          description: How this location's coordinate system relates to its parent (defaults to inherit)
        localOrigin:
          allOf:
          - $ref: 'common-api.yaml#/components/schemas/Position3D'
          nullable: true
          description: Origin point for local or inherited coordinate systems
        metadata:
          type: object
          additionalProperties: true
          nullable: true
          description: >-
            Client-provided location metadata.
            No Bannou plugin reads specific keys from this field by convention.
    QueryLocationsByPositionRequest:
      description: Request to find all locations containing a spatial position
      type: object
      additionalProperties: false
      required:
      - position
      - realmId
      properties:
        position:
          $ref: 'common-api.yaml#/components/schemas/Position3D'
          description: Position to query in world coordinates
        realmId:
          type: string
          format: uuid
          description: Realm to search within
        maxDepth:
          type: integer
          minimum: 0
          nullable: true
          description: Maximum hierarchy depth to search (null for all depths)
        page:
          type: integer
          minimum: 1
          default: 1
          description: Page number for pagination (1-indexed)
        pageSize:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          description: Number of results per page
    LocationResponse:
      description: Complete location data returned from API operations
      type: object
      additionalProperties: false
      required:
      - locationId
      - realmId
      - code
      - name
      - locationType
      - depth
      - isDeprecated
      - boundsPrecision
      - coordinateMode
      - createdAt
      - updatedAt
      properties:
        locationId:
          type: string
          format: uuid
          description: Unique identifier for the location
        realmId:
          type: string
          format: uuid
          description: Realm this location belongs to
        code:
          type: string
          description: Unique code for the location within its realm
        name:
          type: string
          description: Display name of the location
        description:
          type: string
          nullable: true
          description: Optional description of the location
        locationType:
          $ref: '#/components/schemas/LocationType'
          description: Type classification of the location
        parentLocationId:
          type: string
          format: uuid
          nullable: true
          description: Parent location ID (null for root locations)
        depth:
          type: integer
          description: Depth in hierarchy (0 for root locations)
        isDeprecated:
          type: boolean
          description: Whether this location is deprecated and cannot be used
        deprecatedAt:
          type: string
          format: date-time
          nullable: true
          description: Timestamp when this location was deprecated
        deprecationReason:
          type: string
          nullable: true
          description: Optional reason for deprecation
        bounds:
          allOf:
          - $ref: 'common-api.yaml#/components/schemas/BoundingBox3D'
          nullable: true
          description: Optional spatial extent in world coordinates
        boundsPrecision:
          allOf:
          - $ref: '#/components/schemas/BoundsPrecision'
          description: Precision level of spatial bounds
        coordinateMode:
          allOf:
          - $ref: '#/components/schemas/CoordinateMode'
          description: How this location's coordinate system relates to its parent
        localOrigin:
          allOf:
          - $ref: 'common-api.yaml#/components/schemas/Position3D'
          nullable: true
          description: Origin point for local or inherited coordinate systems
        metadata:
          type: object
          additionalProperties: true
          nullable: true
          description: >-
            Client-provided location metadata.
            No Bannou plugin reads specific keys from this field by convention.
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the location was created
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the location was last updated
    LocationListResponse:
      description: Paginated list of locations with metadata for navigation
      type: object
      additionalProperties: false
      required:
      - locations
      - totalCount
      - page
      - pageSize
      - hasNextPage
      - hasPreviousPage
      properties:
        locations:
          type: array
          items:
            $ref: '#/components/schemas/LocationResponse'
          description: List of locations matching the query
        totalCount:
          type: integer
          description: Total number of locations matching the query (across all pages)
        page:
          type: integer
          description: Current page number (1-indexed)
        pageSize:
          type: integer
          description: Number of results per page
        hasNextPage:
          type: boolean
          description: Whether there are more pages after the current page
        hasPreviousPage:
          type: boolean
          description: Whether there are pages before the current page
    SeedLocationsResponse:
      description: Summary of a seed operation including counts of created, updated, and skipped locations
      type: object
      additionalProperties: false
      required:
      - created
      - updated
      - skipped
      - errors
      properties:
        created:
          type: integer
          description: Number of new locations created
        updated:
          type: integer
          description: Number of existing locations updated
        skipped:
          type: integer
          description: Number of locations skipped (already exist, updateExisting=false)
        errors:
          type: array
          items:
            type: string
          description: List of error messages for locations that failed to seed
    ReportEntityPositionRequest:
      description: Request to report an entity's presence at a location
      type: object
      additionalProperties: false
      required:
      - entityType
      - entityId
      - locationId
      properties:
        entityType:
          type: string
          description: Type of entity (opaque string - character, actor, npc, player, etc.)
        entityId:
          type: string
          format: uuid
          description: ID of the entity being reported
        locationId:
          type: string
          format: uuid
          description: ID of the location the entity is at
        previousLocationId:
          type: string
          format: uuid
          nullable: true
          description: Caller hint for the entity's previous location (optimization to skip GET on refresh)
        realmId:
          type: string
          format: uuid
          nullable: true
          description: ID of the realm the location belongs to (included in arrival events if provided)
        reportedBy:
          type: string
          nullable: true
          description: Identifier of the reporter (service name or session ID)
    ReportEntityPositionResponse:
      description: Result of reporting entity presence. HTTP 200 confirms the position was recorded.
      type: object
      additionalProperties: false
      properties:
        arrivedAt:
          type: string
          format: uuid
          nullable: true
          description: Location ID the entity arrived at (only set when location changed)
        departedFrom:
          type: string
          format: uuid
          nullable: true
          description: Location ID the entity departed from (only set when location changed)
    GetEntityLocationRequest:
      description: Request to query an entity's current location
      type: object
      additionalProperties: false
      required:
      - entityType
      - entityId
      properties:
        entityType:
          type: string
          description: Type of entity (opaque string - character, actor, npc, player, etc.)
        entityId:
          type: string
          format: uuid
          description: ID of the entity to look up
    GetEntityLocationResponse:
      description: Result of querying an entity's current location. All fields are null if no active presence exists.
      type: object
      additionalProperties: false
      properties:
        locationId:
          type: string
          format: uuid
          nullable: true
          description: ID of the location the entity is currently at (null if no active presence)
        realmId:
          type: string
          format: uuid
          nullable: true
          description: ID of the realm the location belongs to
        reportedAt:
          type: string
          format: date-time
          nullable: true
          description: When the presence was last reported
        reportedBy:
          type: string
          nullable: true
          description: Identifier of the last reporter
    ListEntitiesAtLocationRequest:
      description: Request to list entities at a specific location
      type: object
      additionalProperties: false
      required:
      - locationId
      properties:
        locationId:
          type: string
          format: uuid
          description: ID of the location to query
        entityType:
          type: string
          nullable: true
          description: Optional filter by entity type (opaque string)
        page:
          type: integer
          minimum: 1
          default: 1
          description: Page number (1-indexed)
        pageSize:
          type: integer
          minimum: 1
          maximum: 100
          default: 50
          description: Number of entities per page
    ListEntitiesAtLocationResponse:
      description: Result of listing entities at a location
      type: object
      additionalProperties: false
      required:
      - entities
      - totalCount
      - locationId
      properties:
        entities:
          type: array
          items:
            $ref: '#/components/schemas/EntityPresenceEntry'
          description: Entities currently present at the location
        totalCount:
          type: integer
          description: Total number of entities matching the query
        locationId:
          type: string
          format: uuid
          description: ID of the queried location
    EntityPresenceEntry:
      description: An entity currently present at a location
      type: object
      additionalProperties: false
      required:
      - entityType
      - entityId
      properties:
        entityType:
          type: string
          description: Type of entity (opaque string)
        entityId:
          type: string
          format: uuid
          description: ID of the entity
        reportedAt:
          type: string
          format: date-time
          nullable: true
          description: When the presence was last reported
        reportedBy:
          type: string
          nullable: true
          description: Identifier of the last reporter
    ClearEntityPositionRequest:
      description: Request to clear an entity's presence from its current location
      type: object
      additionalProperties: false
      required:
      - entityType
      - entityId
      properties:
        entityType:
          type: string
          description: Type of entity (opaque string - character, actor, npc, player, etc.)
        entityId:
          type: string
          format: uuid
          description: ID of the entity to clear
    ClearEntityPositionResponse:
      description: Result of clearing entity presence. HTTP 200 confirms the operation completed.
      type: object
      additionalProperties: false
      properties:
        previousLocationId:
          type: string
          format: uuid
          nullable: true
          description: Location the entity was removed from (null if entity had no active presence)
