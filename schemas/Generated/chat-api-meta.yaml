openapi: 3.0.4
info:
  title: Chat Service API
  version: 1.0.0
  description: >
    Typed message channel service (L1 AppFoundation) providing universal
    communication primitives. Channel type determines valid message formats:
    text, sentiment, emoji, or custom-validated payloads. Supports contract-
    governed room lifecycles, Connect companion rooms, and moderation primitives.
    Internal-only, never internet-facing.

    **SCHEMA MODIFICATION GATE**: STOP. Before modifying this schema, you MUST:
    1. Read docs/reference/SCHEMA-RULES.md
    2. State which section applies to your change
    3. Only then proceed with edits
    Edits without stating the applicable rule are FORBIDDEN.
x-service-layer: AppFoundation
servers:
- url: http://localhost:5012
paths:
  /chat/type/register:
    post:
      operationId: RegisterRoomType
      summary: Register a new room type
      description: >
        Registers a new room type definition. Room types are a dynamic registry
        of string codes. Built-in types (text, sentiment, emoji) are pre-registered
        on startup. Custom types are added via this endpoint. Returns conflict
        if code already exists for the given game service scope.
      x-permissions:
      - role: developer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRoomTypeRequest'
      responses:
        '200':
          description: Room type registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoomTypeResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/RegisterRoomTypeRequest\"\
        ,\n    \"$defs\": {\n        \"RegisterRoomTypeRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to register a new room type definition\",\n            \"required\"\
        : [\n                \"code\",\n                \"displayName\",\n                \"messageFormat\",\n           \
        \     \"persistenceMode\",\n                \"allowAnonymousSenders\"\n            ],\n            \"properties\"\
        : {\n                \"code\": {\n                    \"type\": \"string\",\n                    \"minLength\": 1,\n\
        \                    \"maxLength\": 100,\n                    \"pattern\": \"^[a-z][a-z0-9_]*$\",\n              \
        \      \"description\": \"Unique room type code (e.g., \\\"text\\\", \\\"guild_board\\\", \\\"trade_posting\\\")\"\
        \n                },\n                \"displayName\": {\n                    \"type\": \"string\",\n            \
        \        \"minLength\": 1,\n                    \"maxLength\": 200,\n                    \"description\": \"Human-readable
        name for the room type\"\n                },\n                \"description\": {\n                    \"type\": \"\
        string\",\n                    \"nullable\": true,\n                    \"maxLength\": 1000,\n                   \
        \ \"description\": \"Optional description of the room type\"\n                },\n                \"gameServiceId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        nullable\": true,\n                    \"description\": \"Game service scope (null for global types)\"\n         \
        \       },\n                \"messageFormat\": {\n                    \"$ref\": \"#/$defs/MessageFormat\",\n     \
        \               \"description\": \"Content format this room type accepts\"\n                },\n                \"\
        validatorConfig\": {\n                    \"allOf\": [\n                        {\n                            \"\
        $ref\": \"#/$defs/ValidatorConfig\"\n                        }\n                    ],\n                    \"nullable\"\
        : true,\n                    \"description\": \"Validation rules for messages (null uses format defaults)\"\n    \
        \            },\n                \"persistenceMode\": {\n                    \"$ref\": \"#/$defs/PersistenceMode\"\
        ,\n                    \"description\": \"Message storage mode (ephemeral or persistent)\"\n                },\n \
        \               \"defaultMaxParticipants\": {\n                    \"type\": \"integer\",\n                    \"\
        nullable\": true,\n                    \"minimum\": 1,\n                    \"description\": \"Default participant
        limit (null uses service default)\"\n                },\n                \"retentionDays\": {\n                  \
        \  \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"minimum\": 1,\n        \
        \            \"description\": \"Message retention in days (null uses service default)\"\n                },\n    \
        \            \"defaultContractTemplateId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Default contract template
        for rooms of this type\"\n                },\n                \"allowAnonymousSenders\": {\n                    \"\
        type\": \"boolean\",\n                    \"description\": \"Whether null senderId is allowed in messages\"\n    \
        \            },\n                \"rateLimitPerMinute\": {\n                    \"type\": \"integer\",\n         \
        \           \"nullable\": true,\n                    \"minimum\": 1,\n                    \"description\": \"Messages
        per minute per participant (null uses service default)\"\n                },\n                \"metadata\": {\n  \
        \                  \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field by convention.\"\
        \n                }\n            }\n        },\n        \"MessageFormat\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Determines what kind of content a room accepts\",\n            \"enum\": [\n     \
        \           \"Text\",\n                \"Sentiment\",\n                \"Emoji\",\n                \"Custom\"\n  \
        \          ]\n        },\n        \"ValidatorConfig\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Validation rules applied to messages in rooms of this type\",\n         \
        \   \"properties\": {\n                \"maxMessageLength\": {\n                    \"type\": \"integer\",\n     \
        \               \"nullable\": true,\n                    \"description\": \"Maximum message length in characters for
        text and custom formats\"\n                },\n                \"allowedPattern\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Regex pattern for content
        validation\"\n                },\n                \"allowedValues\": {\n                    \"type\": \"array\",\n\
        \                    \"nullable\": true,\n                    \"description\": \"Whitelist of allowed values (emoji
        codes, etc.)\",\n                    \"items\": {\n                        \"type\": \"string\",\n               \
        \         \"description\": \"An allowed value\"\n                    }\n                },\n                \"requiredFields\"\
        : {\n                    \"type\": \"array\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Required JSON fields for Custom format messages\",\n                    \"items\": {\n                       \
        \ \"type\": \"string\",\n                        \"description\": \"A required field name\"\n                    }\n\
        \                },\n                \"jsonSchema\": {\n                    \"type\": \"string\",\n              \
        \      \"nullable\": true,\n                    \"description\": \"Full JSON Schema string for complex Custom format
        validation\"\n                }\n            }\n        },\n        \"PersistenceMode\": {\n            \"type\":
        \"string\",\n            \"description\": \"Whether room messages are stored in Redis (TTL) or MySQL (durable)\",\n\
        \            \"enum\": [\n                \"Ephemeral\",\n                \"Persistent\"\n            ]\n        }\n\
        \    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/RoomTypeResponse\"\
        ,\n    \"$defs\": {\n        \"RoomTypeResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Room type definition with current configuration and status\",\n         \
        \   \"required\": [\n                \"code\",\n                \"displayName\",\n                \"messageFormat\"\
        ,\n                \"persistenceMode\",\n                \"allowAnonymousSenders\",\n                \"status\",\n\
        \                \"createdAt\"\n            ],\n            \"properties\": {\n                \"code\": {\n     \
        \               \"type\": \"string\",\n                    \"description\": \"Unique room type code\"\n          \
        \      },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Human-readable name\"\n                },\n                \"description\": {\n                    \"type\": \"\
        string\",\n                    \"nullable\": true,\n                    \"description\": \"Room type description\"\
        \n                },\n                \"gameServiceId\": {\n                    \"type\": \"string\",\n          \
        \          \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Game service scope (null for global)\"\n                },\n                \"messageFormat\": {\n               \
        \     \"$ref\": \"#/$defs/MessageFormat\",\n                    \"description\": \"Content format accepted by this
        room type\"\n                },\n                \"validatorConfig\": {\n                    \"allOf\": [\n      \
        \                  {\n                            \"$ref\": \"#/$defs/ValidatorConfig\"\n                        }\n\
        \                    ],\n                    \"nullable\": true,\n                    \"description\": \"Active validation
        rules\"\n                },\n                \"persistenceMode\": {\n                    \"$ref\": \"#/$defs/PersistenceMode\"\
        ,\n                    \"description\": \"Message storage mode\"\n                },\n                \"defaultMaxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Default participant limit\"\n                },\n                \"retentionDays\": {\n                    \"\
        type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Message retention
        in days\"\n                },\n                \"defaultContractTemplateId\": {\n                    \"type\": \"\
        string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Default contract template ID\"\n                },\n                \"allowAnonymousSenders\"\
        : {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether anonymous senders
        are allowed\"\n                },\n                \"rateLimitPerMinute\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Messages per minute limit\"\n \
        \               },\n                \"metadata\": {\n                    \"type\": \"string\",\n                 \
        \   \"nullable\": true,\n                    \"description\": \"Client-only metadata stored as JSON string. No Bannou
        plugin reads specific keys from this field by convention.\"\n                },\n                \"status\": {\n \
        \                   \"$ref\": \"#/$defs/RoomTypeStatus\",\n                    \"description\": \"Current lifecycle
        status of the room type\"\n                },\n                \"createdAt\": {\n                    \"type\": \"\
        string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When the room type
        was created\"\n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"date-time\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"When the room type was last updated\"\n                }\n            }\n        },\n        \"MessageFormat\"\
        : {\n            \"type\": \"string\",\n            \"description\": \"Determines what kind of content a room accepts\"\
        ,\n            \"enum\": [\n                \"Text\",\n                \"Sentiment\",\n                \"Emoji\",\n\
        \                \"Custom\"\n            ]\n        },\n        \"ValidatorConfig\": {\n            \"type\": \"object\"\
        ,\n            \"additionalProperties\": false,\n            \"description\": \"Validation rules applied to messages
        in rooms of this type\",\n            \"properties\": {\n                \"maxMessageLength\": {\n               \
        \     \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Maximum
        message length in characters for text and custom formats\"\n                },\n                \"allowedPattern\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Regex pattern for content validation\"\n                },\n                \"allowedValues\": {\n           \
        \         \"type\": \"array\",\n                    \"nullable\": true,\n                    \"description\": \"Whitelist
        of allowed values (emoji codes, etc.)\",\n                    \"items\": {\n                        \"type\": \"string\"\
        ,\n                        \"description\": \"An allowed value\"\n                    }\n                },\n    \
        \            \"requiredFields\": {\n                    \"type\": \"array\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Required JSON fields for Custom format messages\",\n                    \"\
        items\": {\n                        \"type\": \"string\",\n                        \"description\": \"A required field
        name\"\n                    }\n                },\n                \"jsonSchema\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Full JSON Schema string
        for complex Custom format validation\"\n                }\n            }\n        },\n        \"PersistenceMode\"\
        : {\n            \"type\": \"string\",\n            \"description\": \"Whether room messages are stored in Redis (TTL)
        or MySQL (durable)\",\n            \"enum\": [\n                \"Ephemeral\",\n                \"Persistent\"\n \
        \           ]\n        },\n        \"RoomTypeStatus\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Lifecycle status of a room type definition\",\n            \"enum\": [\n                \"Active\",\n        \
        \        \"Deprecated\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Register a new room type\",\n    \"description\": \"Registers a new room
        type definition. Room types are a dynamic registry of string codes. Built-in types (text, sentiment, emoji) are pre-registered
        on startup. Custom types are added via this endpoint. Returns conflict if code already exists for the given game service
        scope.\\n\",\n    \"tags\": [],\n    \"deprecated\": false,\n    \"operationId\": \"RegisterRoomType\"\n}"
  /chat/type/get:
    post:
      operationId: GetRoomType
      summary: Get room type by code
      description: Returns the room type definition for the specified code and optional game service scope.
      x-permissions:
      - role: developer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetRoomTypeRequest'
      responses:
        '200':
          description: Room type found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoomTypeResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetRoomTypeRequest\"\
        ,\n    \"$defs\": {\n        \"GetRoomTypeRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to retrieve a room type by code\",\n            \"required\": [\n\
        \                \"code\"\n            ],\n            \"properties\": {\n                \"code\": {\n          \
        \          \"type\": \"string\",\n                    \"description\": \"Room type code to look up\"\n           \
        \     },\n                \"gameServiceId\": {\n                    \"type\": \"string\",\n                    \"\
        format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Game service
        scope (null for global types)\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/RoomTypeResponse\"\
        ,\n    \"$defs\": {\n        \"RoomTypeResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Room type definition with current configuration and status\",\n         \
        \   \"required\": [\n                \"code\",\n                \"displayName\",\n                \"messageFormat\"\
        ,\n                \"persistenceMode\",\n                \"allowAnonymousSenders\",\n                \"status\",\n\
        \                \"createdAt\"\n            ],\n            \"properties\": {\n                \"code\": {\n     \
        \               \"type\": \"string\",\n                    \"description\": \"Unique room type code\"\n          \
        \      },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Human-readable name\"\n                },\n                \"description\": {\n                    \"type\": \"\
        string\",\n                    \"nullable\": true,\n                    \"description\": \"Room type description\"\
        \n                },\n                \"gameServiceId\": {\n                    \"type\": \"string\",\n          \
        \          \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Game service scope (null for global)\"\n                },\n                \"messageFormat\": {\n               \
        \     \"$ref\": \"#/$defs/MessageFormat\",\n                    \"description\": \"Content format accepted by this
        room type\"\n                },\n                \"validatorConfig\": {\n                    \"allOf\": [\n      \
        \                  {\n                            \"$ref\": \"#/$defs/ValidatorConfig\"\n                        }\n\
        \                    ],\n                    \"nullable\": true,\n                    \"description\": \"Active validation
        rules\"\n                },\n                \"persistenceMode\": {\n                    \"$ref\": \"#/$defs/PersistenceMode\"\
        ,\n                    \"description\": \"Message storage mode\"\n                },\n                \"defaultMaxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Default participant limit\"\n                },\n                \"retentionDays\": {\n                    \"\
        type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Message retention
        in days\"\n                },\n                \"defaultContractTemplateId\": {\n                    \"type\": \"\
        string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Default contract template ID\"\n                },\n                \"allowAnonymousSenders\"\
        : {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether anonymous senders
        are allowed\"\n                },\n                \"rateLimitPerMinute\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Messages per minute limit\"\n \
        \               },\n                \"metadata\": {\n                    \"type\": \"string\",\n                 \
        \   \"nullable\": true,\n                    \"description\": \"Client-only metadata stored as JSON string. No Bannou
        plugin reads specific keys from this field by convention.\"\n                },\n                \"status\": {\n \
        \                   \"$ref\": \"#/$defs/RoomTypeStatus\",\n                    \"description\": \"Current lifecycle
        status of the room type\"\n                },\n                \"createdAt\": {\n                    \"type\": \"\
        string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When the room type
        was created\"\n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"date-time\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"When the room type was last updated\"\n                }\n            }\n        },\n        \"MessageFormat\"\
        : {\n            \"type\": \"string\",\n            \"description\": \"Determines what kind of content a room accepts\"\
        ,\n            \"enum\": [\n                \"Text\",\n                \"Sentiment\",\n                \"Emoji\",\n\
        \                \"Custom\"\n            ]\n        },\n        \"ValidatorConfig\": {\n            \"type\": \"object\"\
        ,\n            \"additionalProperties\": false,\n            \"description\": \"Validation rules applied to messages
        in rooms of this type\",\n            \"properties\": {\n                \"maxMessageLength\": {\n               \
        \     \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Maximum
        message length in characters for text and custom formats\"\n                },\n                \"allowedPattern\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Regex pattern for content validation\"\n                },\n                \"allowedValues\": {\n           \
        \         \"type\": \"array\",\n                    \"nullable\": true,\n                    \"description\": \"Whitelist
        of allowed values (emoji codes, etc.)\",\n                    \"items\": {\n                        \"type\": \"string\"\
        ,\n                        \"description\": \"An allowed value\"\n                    }\n                },\n    \
        \            \"requiredFields\": {\n                    \"type\": \"array\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Required JSON fields for Custom format messages\",\n                    \"\
        items\": {\n                        \"type\": \"string\",\n                        \"description\": \"A required field
        name\"\n                    }\n                },\n                \"jsonSchema\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Full JSON Schema string
        for complex Custom format validation\"\n                }\n            }\n        },\n        \"PersistenceMode\"\
        : {\n            \"type\": \"string\",\n            \"description\": \"Whether room messages are stored in Redis (TTL)
        or MySQL (durable)\",\n            \"enum\": [\n                \"Ephemeral\",\n                \"Persistent\"\n \
        \           ]\n        },\n        \"RoomTypeStatus\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Lifecycle status of a room type definition\",\n            \"enum\": [\n                \"Active\",\n        \
        \        \"Deprecated\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get room type by code\",\n    \"description\": \"Returns the room type
        definition for the specified code and optional game service scope.\",\n    \"tags\": [],\n    \"deprecated\": false,\n\
        \    \"operationId\": \"GetRoomType\"\n}"
  /chat/type/list:
    post:
      operationId: ListRoomTypes
      summary: List room types with filters
      description: Returns room types matching the specified filters with pagination.
      x-permissions:
      - role: developer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListRoomTypesRequest'
      responses:
        '200':
          description: Room types returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListRoomTypesResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListRoomTypesRequest\"\
        ,\n    \"$defs\": {\n        \"ListRoomTypesRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to list room types with optional filters and pagination\",\n    \
        \        \"properties\": {\n                \"gameServiceId\": {\n                    \"type\": \"string\",\n    \
        \                \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Filter by game service scope\"\n                },\n                \"messageFormat\": {\n                   \
        \ \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/MessageFormat\"\n     \
        \                   }\n                    ],\n                    \"nullable\": true,\n                    \"description\"\
        : \"Filter by message format\"\n                },\n                \"status\": {\n                    \"allOf\":
        [\n                        {\n                            \"$ref\": \"#/$defs/RoomTypeStatus\"\n                 \
        \       }\n                    ],\n                    \"nullable\": true,\n                    \"description\": \"\
        Filter by status\"\n                },\n                \"page\": {\n                    \"type\": \"integer\",\n\
        \                    \"default\": 0,\n                    \"minimum\": 0,\n                    \"description\": \"\
        Page number (zero-based)\"\n                },\n                \"pageSize\": {\n                    \"type\": \"\
        integer\",\n                    \"default\": 20,\n                    \"minimum\": 1,\n                    \"maximum\"\
        : 100,\n                    \"description\": \"Number of items per page\"\n                }\n            }\n    \
        \    },\n        \"MessageFormat\": {\n            \"type\": \"string\",\n            \"description\": \"Determines
        what kind of content a room accepts\",\n            \"enum\": [\n                \"Text\",\n                \"Sentiment\"\
        ,\n                \"Emoji\",\n                \"Custom\"\n            ]\n        },\n        \"RoomTypeStatus\":
        {\n            \"type\": \"string\",\n            \"description\": \"Lifecycle status of a room type definition\"\
        ,\n            \"enum\": [\n                \"Active\",\n                \"Deprecated\"\n            ]\n        }\n\
        \    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListRoomTypesResponse\"\
        ,\n    \"$defs\": {\n        \"ListRoomTypesResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Paginated list of room type definitions\",\n            \"required\": [\n\
        \                \"items\",\n                \"totalCount\",\n                \"page\",\n                \"pageSize\"\
        \n            ],\n            \"properties\": {\n                \"items\": {\n                    \"type\": \"array\"\
        ,\n                    \"description\": \"Room type definitions matching the filter\",\n                    \"items\"\
        : {\n                        \"$ref\": \"#/$defs/RoomTypeResponse\"\n                    }\n                },\n \
        \               \"totalCount\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Total number of matching room types\"\n                },\n                \"page\": {\n                    \"\
        type\": \"integer\",\n                    \"description\": \"Current page number\"\n                },\n         \
        \       \"pageSize\": {\n                    \"type\": \"integer\",\n                    \"description\": \"Items
        per page\"\n                }\n            }\n        },\n        \"RoomTypeResponse\": {\n            \"type\": \"\
        object\",\n            \"additionalProperties\": false,\n            \"description\": \"Room type definition with
        current configuration and status\",\n            \"required\": [\n                \"code\",\n                \"displayName\"\
        ,\n                \"messageFormat\",\n                \"persistenceMode\",\n                \"allowAnonymousSenders\"\
        ,\n                \"status\",\n                \"createdAt\"\n            ],\n            \"properties\": {\n   \
        \             \"code\": {\n                    \"type\": \"string\",\n                    \"description\": \"Unique
        room type code\"\n                },\n                \"displayName\": {\n                    \"type\": \"string\"\
        ,\n                    \"description\": \"Human-readable name\"\n                },\n                \"description\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Room type description\"\n                },\n                \"gameServiceId\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n              \
        \      \"description\": \"Game service scope (null for global)\"\n                },\n                \"messageFormat\"\
        : {\n                    \"$ref\": \"#/$defs/MessageFormat\",\n                    \"description\": \"Content format
        accepted by this room type\"\n                },\n                \"validatorConfig\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"$ref\": \"#/$defs/ValidatorConfig\"\n              \
        \          }\n                    ],\n                    \"nullable\": true,\n                    \"description\"\
        : \"Active validation rules\"\n                },\n                \"persistenceMode\": {\n                    \"\
        $ref\": \"#/$defs/PersistenceMode\",\n                    \"description\": \"Message storage mode\"\n            \
        \    },\n                \"defaultMaxParticipants\": {\n                    \"type\": \"integer\",\n             \
        \       \"nullable\": true,\n                    \"description\": \"Default participant limit\"\n                },\n\
        \                \"retentionDays\": {\n                    \"type\": \"integer\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Message retention in days\"\n                },\n                \"\
        defaultContractTemplateId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Default contract template ID\"\n\
        \                },\n                \"allowAnonymousSenders\": {\n                    \"type\": \"boolean\",\n  \
        \                  \"description\": \"Whether anonymous senders are allowed\"\n                },\n              \
        \  \"rateLimitPerMinute\": {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Messages per minute limit\"\n                },\n                \"metadata\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field by convention.\"\
        \n                },\n                \"status\": {\n                    \"$ref\": \"#/$defs/RoomTypeStatus\",\n \
        \                   \"description\": \"Current lifecycle status of the room type\"\n                },\n         \
        \       \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"When the room type was created\"\n                },\n                \"\
        updatedAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\",\n      \
        \              \"nullable\": true,\n                    \"description\": \"When the room type was last updated\"\n\
        \                }\n            }\n        },\n        \"MessageFormat\": {\n            \"type\": \"string\",\n \
        \           \"description\": \"Determines what kind of content a room accepts\",\n            \"enum\": [\n      \
        \          \"Text\",\n                \"Sentiment\",\n                \"Emoji\",\n                \"Custom\"\n   \
        \         ]\n        },\n        \"ValidatorConfig\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Validation rules applied to messages in rooms of this type\",\n         \
        \   \"properties\": {\n                \"maxMessageLength\": {\n                    \"type\": \"integer\",\n     \
        \               \"nullable\": true,\n                    \"description\": \"Maximum message length in characters for
        text and custom formats\"\n                },\n                \"allowedPattern\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Regex pattern for content
        validation\"\n                },\n                \"allowedValues\": {\n                    \"type\": \"array\",\n\
        \                    \"nullable\": true,\n                    \"description\": \"Whitelist of allowed values (emoji
        codes, etc.)\",\n                    \"items\": {\n                        \"type\": \"string\",\n               \
        \         \"description\": \"An allowed value\"\n                    }\n                },\n                \"requiredFields\"\
        : {\n                    \"type\": \"array\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Required JSON fields for Custom format messages\",\n                    \"items\": {\n                       \
        \ \"type\": \"string\",\n                        \"description\": \"A required field name\"\n                    }\n\
        \                },\n                \"jsonSchema\": {\n                    \"type\": \"string\",\n              \
        \      \"nullable\": true,\n                    \"description\": \"Full JSON Schema string for complex Custom format
        validation\"\n                }\n            }\n        },\n        \"PersistenceMode\": {\n            \"type\":
        \"string\",\n            \"description\": \"Whether room messages are stored in Redis (TTL) or MySQL (durable)\",\n\
        \            \"enum\": [\n                \"Ephemeral\",\n                \"Persistent\"\n            ]\n        },\n\
        \        \"RoomTypeStatus\": {\n            \"type\": \"string\",\n            \"description\": \"Lifecycle status
        of a room type definition\",\n            \"enum\": [\n                \"Active\",\n                \"Deprecated\"\
        \n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"List room types with filters\",\n    \"description\": \"Returns room types
        matching the specified filters with pagination.\",\n    \"tags\": [],\n    \"deprecated\": false,\n    \"operationId\"\
        : \"ListRoomTypes\"\n}"
  /chat/type/update:
    post:
      operationId: UpdateRoomType
      summary: Update a room type definition
      description: Updates mutable fields of a room type definition. Cannot change code or message format.
      x-permissions:
      - role: developer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRoomTypeRequest'
      responses:
        '200':
          description: Room type updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoomTypeResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/UpdateRoomTypeRequest\"\
        ,\n    \"$defs\": {\n        \"UpdateRoomTypeRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to update room type properties (null fields left unchanged)\",\n\
        \            \"required\": [\n                \"code\"\n            ],\n            \"properties\": {\n          \
        \      \"code\": {\n                    \"type\": \"string\",\n                    \"description\": \"Room type code
        to update\"\n                },\n                \"gameServiceId\": {\n                    \"type\": \"string\",\n\
        \                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Game service scope for the type\"\n                },\n                \"displayName\": {\n                  \
        \  \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Updated
        display name\"\n                },\n                \"description\": {\n                    \"type\": \"string\",\n\
        \                    \"nullable\": true,\n                    \"description\": \"Updated description\"\n         \
        \       },\n                \"validatorConfig\": {\n                    \"allOf\": [\n                        {\n\
        \                            \"$ref\": \"#/$defs/ValidatorConfig\"\n                        }\n                  \
        \  ],\n                    \"nullable\": true,\n                    \"description\": \"Updated validation rules\"\n\
        \                },\n                \"defaultMaxParticipants\": {\n                    \"type\": \"integer\",\n \
        \                   \"nullable\": true,\n                    \"description\": \"Updated default participant limit\"\
        \n                },\n                \"retentionDays\": {\n                    \"type\": \"integer\",\n         \
        \           \"nullable\": true,\n                    \"description\": \"Updated message retention in days\"\n    \
        \            },\n                \"defaultContractTemplateId\": {\n                    \"type\": \"string\",\n   \
        \                 \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Updated default contract template\"\n                },\n                \"allowAnonymousSenders\": {\n      \
        \              \"type\": \"boolean\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Updated anonymous sender policy\"\n                },\n                \"rateLimitPerMinute\": {\n           \
        \         \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Updated rate limit\"\n                },\n                \"metadata\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Updated JSON metadata\"\n     \
        \           }\n            }\n        },\n        \"ValidatorConfig\": {\n            \"type\": \"object\",\n    \
        \        \"additionalProperties\": false,\n            \"description\": \"Validation rules applied to messages in
        rooms of this type\",\n            \"properties\": {\n                \"maxMessageLength\": {\n                  \
        \  \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Maximum
        message length in characters for text and custom formats\"\n                },\n                \"allowedPattern\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Regex pattern for content validation\"\n                },\n                \"allowedValues\": {\n           \
        \         \"type\": \"array\",\n                    \"nullable\": true,\n                    \"description\": \"Whitelist
        of allowed values (emoji codes, etc.)\",\n                    \"items\": {\n                        \"type\": \"string\"\
        ,\n                        \"description\": \"An allowed value\"\n                    }\n                },\n    \
        \            \"requiredFields\": {\n                    \"type\": \"array\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Required JSON fields for Custom format messages\",\n                    \"\
        items\": {\n                        \"type\": \"string\",\n                        \"description\": \"A required field
        name\"\n                    }\n                },\n                \"jsonSchema\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Full JSON Schema string
        for complex Custom format validation\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/RoomTypeResponse\"\
        ,\n    \"$defs\": {\n        \"RoomTypeResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Room type definition with current configuration and status\",\n         \
        \   \"required\": [\n                \"code\",\n                \"displayName\",\n                \"messageFormat\"\
        ,\n                \"persistenceMode\",\n                \"allowAnonymousSenders\",\n                \"status\",\n\
        \                \"createdAt\"\n            ],\n            \"properties\": {\n                \"code\": {\n     \
        \               \"type\": \"string\",\n                    \"description\": \"Unique room type code\"\n          \
        \      },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Human-readable name\"\n                },\n                \"description\": {\n                    \"type\": \"\
        string\",\n                    \"nullable\": true,\n                    \"description\": \"Room type description\"\
        \n                },\n                \"gameServiceId\": {\n                    \"type\": \"string\",\n          \
        \          \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Game service scope (null for global)\"\n                },\n                \"messageFormat\": {\n               \
        \     \"$ref\": \"#/$defs/MessageFormat\",\n                    \"description\": \"Content format accepted by this
        room type\"\n                },\n                \"validatorConfig\": {\n                    \"allOf\": [\n      \
        \                  {\n                            \"$ref\": \"#/$defs/ValidatorConfig\"\n                        }\n\
        \                    ],\n                    \"nullable\": true,\n                    \"description\": \"Active validation
        rules\"\n                },\n                \"persistenceMode\": {\n                    \"$ref\": \"#/$defs/PersistenceMode\"\
        ,\n                    \"description\": \"Message storage mode\"\n                },\n                \"defaultMaxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Default participant limit\"\n                },\n                \"retentionDays\": {\n                    \"\
        type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Message retention
        in days\"\n                },\n                \"defaultContractTemplateId\": {\n                    \"type\": \"\
        string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Default contract template ID\"\n                },\n                \"allowAnonymousSenders\"\
        : {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether anonymous senders
        are allowed\"\n                },\n                \"rateLimitPerMinute\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Messages per minute limit\"\n \
        \               },\n                \"metadata\": {\n                    \"type\": \"string\",\n                 \
        \   \"nullable\": true,\n                    \"description\": \"Client-only metadata stored as JSON string. No Bannou
        plugin reads specific keys from this field by convention.\"\n                },\n                \"status\": {\n \
        \                   \"$ref\": \"#/$defs/RoomTypeStatus\",\n                    \"description\": \"Current lifecycle
        status of the room type\"\n                },\n                \"createdAt\": {\n                    \"type\": \"\
        string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When the room type
        was created\"\n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"date-time\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"When the room type was last updated\"\n                }\n            }\n        },\n        \"MessageFormat\"\
        : {\n            \"type\": \"string\",\n            \"description\": \"Determines what kind of content a room accepts\"\
        ,\n            \"enum\": [\n                \"Text\",\n                \"Sentiment\",\n                \"Emoji\",\n\
        \                \"Custom\"\n            ]\n        },\n        \"ValidatorConfig\": {\n            \"type\": \"object\"\
        ,\n            \"additionalProperties\": false,\n            \"description\": \"Validation rules applied to messages
        in rooms of this type\",\n            \"properties\": {\n                \"maxMessageLength\": {\n               \
        \     \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Maximum
        message length in characters for text and custom formats\"\n                },\n                \"allowedPattern\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Regex pattern for content validation\"\n                },\n                \"allowedValues\": {\n           \
        \         \"type\": \"array\",\n                    \"nullable\": true,\n                    \"description\": \"Whitelist
        of allowed values (emoji codes, etc.)\",\n                    \"items\": {\n                        \"type\": \"string\"\
        ,\n                        \"description\": \"An allowed value\"\n                    }\n                },\n    \
        \            \"requiredFields\": {\n                    \"type\": \"array\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Required JSON fields for Custom format messages\",\n                    \"\
        items\": {\n                        \"type\": \"string\",\n                        \"description\": \"A required field
        name\"\n                    }\n                },\n                \"jsonSchema\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Full JSON Schema string
        for complex Custom format validation\"\n                }\n            }\n        },\n        \"PersistenceMode\"\
        : {\n            \"type\": \"string\",\n            \"description\": \"Whether room messages are stored in Redis (TTL)
        or MySQL (durable)\",\n            \"enum\": [\n                \"Ephemeral\",\n                \"Persistent\"\n \
        \           ]\n        },\n        \"RoomTypeStatus\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Lifecycle status of a room type definition\",\n            \"enum\": [\n                \"Active\",\n        \
        \        \"Deprecated\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Update a room type definition\",\n    \"description\": \"Updates mutable
        fields of a room type definition. Cannot change code or message format.\",\n    \"tags\": [],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"UpdateRoomType\"\n}"
  /chat/type/deprecate:
    post:
      operationId: DeprecateRoomType
      summary: Soft-deprecate a room type
      description: Sets the room type status to Deprecated. Existing rooms continue to work but no new rooms can be 
        created with this type.
      x-permissions:
      - role: developer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeprecateRoomTypeRequest'
      responses:
        '200':
          description: Room type deprecated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoomTypeResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeprecateRoomTypeRequest\"\
        ,\n    \"$defs\": {\n        \"DeprecateRoomTypeRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to deprecate a room type (prevents new room creation)\",\n      \
        \      \"required\": [\n                \"code\"\n            ],\n            \"properties\": {\n                \"\
        code\": {\n                    \"type\": \"string\",\n                    \"description\": \"Room type code to deprecate\"\
        \n                },\n                \"gameServiceId\": {\n                    \"type\": \"string\",\n          \
        \          \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Game service scope for the type\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/RoomTypeResponse\"\
        ,\n    \"$defs\": {\n        \"RoomTypeResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Room type definition with current configuration and status\",\n         \
        \   \"required\": [\n                \"code\",\n                \"displayName\",\n                \"messageFormat\"\
        ,\n                \"persistenceMode\",\n                \"allowAnonymousSenders\",\n                \"status\",\n\
        \                \"createdAt\"\n            ],\n            \"properties\": {\n                \"code\": {\n     \
        \               \"type\": \"string\",\n                    \"description\": \"Unique room type code\"\n          \
        \      },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Human-readable name\"\n                },\n                \"description\": {\n                    \"type\": \"\
        string\",\n                    \"nullable\": true,\n                    \"description\": \"Room type description\"\
        \n                },\n                \"gameServiceId\": {\n                    \"type\": \"string\",\n          \
        \          \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Game service scope (null for global)\"\n                },\n                \"messageFormat\": {\n               \
        \     \"$ref\": \"#/$defs/MessageFormat\",\n                    \"description\": \"Content format accepted by this
        room type\"\n                },\n                \"validatorConfig\": {\n                    \"allOf\": [\n      \
        \                  {\n                            \"$ref\": \"#/$defs/ValidatorConfig\"\n                        }\n\
        \                    ],\n                    \"nullable\": true,\n                    \"description\": \"Active validation
        rules\"\n                },\n                \"persistenceMode\": {\n                    \"$ref\": \"#/$defs/PersistenceMode\"\
        ,\n                    \"description\": \"Message storage mode\"\n                },\n                \"defaultMaxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Default participant limit\"\n                },\n                \"retentionDays\": {\n                    \"\
        type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Message retention
        in days\"\n                },\n                \"defaultContractTemplateId\": {\n                    \"type\": \"\
        string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Default contract template ID\"\n                },\n                \"allowAnonymousSenders\"\
        : {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether anonymous senders
        are allowed\"\n                },\n                \"rateLimitPerMinute\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Messages per minute limit\"\n \
        \               },\n                \"metadata\": {\n                    \"type\": \"string\",\n                 \
        \   \"nullable\": true,\n                    \"description\": \"Client-only metadata stored as JSON string. No Bannou
        plugin reads specific keys from this field by convention.\"\n                },\n                \"status\": {\n \
        \                   \"$ref\": \"#/$defs/RoomTypeStatus\",\n                    \"description\": \"Current lifecycle
        status of the room type\"\n                },\n                \"createdAt\": {\n                    \"type\": \"\
        string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"When the room type
        was created\"\n                },\n                \"updatedAt\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"date-time\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"When the room type was last updated\"\n                }\n            }\n        },\n        \"MessageFormat\"\
        : {\n            \"type\": \"string\",\n            \"description\": \"Determines what kind of content a room accepts\"\
        ,\n            \"enum\": [\n                \"Text\",\n                \"Sentiment\",\n                \"Emoji\",\n\
        \                \"Custom\"\n            ]\n        },\n        \"ValidatorConfig\": {\n            \"type\": \"object\"\
        ,\n            \"additionalProperties\": false,\n            \"description\": \"Validation rules applied to messages
        in rooms of this type\",\n            \"properties\": {\n                \"maxMessageLength\": {\n               \
        \     \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Maximum
        message length in characters for text and custom formats\"\n                },\n                \"allowedPattern\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Regex pattern for content validation\"\n                },\n                \"allowedValues\": {\n           \
        \         \"type\": \"array\",\n                    \"nullable\": true,\n                    \"description\": \"Whitelist
        of allowed values (emoji codes, etc.)\",\n                    \"items\": {\n                        \"type\": \"string\"\
        ,\n                        \"description\": \"An allowed value\"\n                    }\n                },\n    \
        \            \"requiredFields\": {\n                    \"type\": \"array\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Required JSON fields for Custom format messages\",\n                    \"\
        items\": {\n                        \"type\": \"string\",\n                        \"description\": \"A required field
        name\"\n                    }\n                },\n                \"jsonSchema\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Full JSON Schema string
        for complex Custom format validation\"\n                }\n            }\n        },\n        \"PersistenceMode\"\
        : {\n            \"type\": \"string\",\n            \"description\": \"Whether room messages are stored in Redis (TTL)
        or MySQL (durable)\",\n            \"enum\": [\n                \"Ephemeral\",\n                \"Persistent\"\n \
        \           ]\n        },\n        \"RoomTypeStatus\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Lifecycle status of a room type definition\",\n            \"enum\": [\n                \"Active\",\n        \
        \        \"Deprecated\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Soft-deprecate a room type\",\n    \"description\": \"Sets the room type
        status to Deprecated. Existing rooms continue to work but no new rooms can be created with this type.\",\n    \"tags\"\
        : [],\n    \"deprecated\": false,\n    \"operationId\": \"DeprecateRoomType\"\n}"
  /chat/room/create:
    post:
      operationId: CreateRoom
      summary: Create a chat room
      description: >
        Creates a new chat room of the specified type. Optionally associates
        a governing contract that drives room lifecycle (lock, archive, delete)
        on contract state changes.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRoomRequest'
      responses:
        '200':
          description: Room created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatRoomResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/CreateRoomRequest\"\
        ,\n    \"$defs\": {\n        \"CreateRoomRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to create a new chat room\",\n            \"required\": [\n     \
        \           \"roomTypeCode\"\n            ],\n            \"properties\": {\n                \"roomTypeCode\": {\n\
        \                    \"type\": \"string\",\n                    \"minLength\": 1,\n                    \"maxLength\"\
        : 100,\n                    \"description\": \"Room type code determining message format and validation\"\n      \
        \          },\n                \"sessionId\": {\n                    \"type\": \"string\",\n                    \"\
        format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Connect session
        ID for companion rooms\"\n                },\n                \"contractId\": {\n                    \"type\": \"\
        string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Governing contract ID for lifecycle management\"\n                },\n                \"displayName\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"maxLength\"\
        : 200,\n                    \"description\": \"Human-readable room name\"\n                },\n                \"\
        maxParticipants\": {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n      \
        \              \"minimum\": 1,\n                    \"description\": \"Participant limit override (null uses type
        default)\"\n                },\n                \"contractFulfilledAction\": {\n                    \"allOf\": [\n\
        \                        {\n                            \"$ref\": \"#/$defs/ContractRoomAction\"\n               \
        \         }\n                    ],\n                    \"nullable\": true,\n                    \"description\"\
        : \"Action when governing contract is fulfilled (null uses service default)\"\n                },\n              \
        \  \"contractBreachAction\": {\n                    \"allOf\": [\n                        {\n                    \
        \        \"$ref\": \"#/$defs/ContractRoomAction\"\n                        }\n                    ],\n           \
        \         \"nullable\": true,\n                    \"description\": \"Action when governing contract is breached (null
        uses service default)\"\n                },\n                \"contractTerminatedAction\": {\n                   \
        \ \"allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/ContractRoomAction\"\n\
        \                        }\n                    ],\n                    \"nullable\": true,\n                    \"\
        description\": \"Action when governing contract is terminated (null uses service default)\"\n                },\n\
        \                \"contractExpiredAction\": {\n                    \"allOf\": [\n                        {\n     \
        \                       \"$ref\": \"#/$defs/ContractRoomAction\"\n                        }\n                    ],\n\
        \                    \"nullable\": true,\n                    \"description\": \"Action when governing contract expires
        (null uses service default)\"\n                },\n                \"metadata\": {\n                    \"type\":
        \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Client-only metadata
        stored as JSON string. No Bannou plugin reads specific keys from this field by convention.\"\n                }\n\
        \            }\n        },\n        \"ContractRoomAction\": {\n            \"type\": \"string\",\n            \"description\"\
        : \"Action to take on a contract-governed room when contract state changes\",\n            \"enum\": [\n         \
        \       \"Continue\",\n                \"Lock\",\n                \"Archive\",\n                \"Delete\"\n     \
        \       ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChatRoomResponse\"\
        ,\n    \"$defs\": {\n        \"ChatRoomResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Chat room details including status and participant count\",\n           \
        \ \"required\": [\n                \"roomId\",\n                \"roomTypeCode\",\n                \"status\",\n \
        \               \"participantCount\",\n                \"isArchived\",\n                \"createdAt\"\n          \
        \  ],\n            \"properties\": {\n                \"roomId\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"uuid\",\n                    \"description\": \"Unique room identifier\"\n     \
        \           },\n                \"roomTypeCode\": {\n                    \"type\": \"string\",\n                 \
        \   \"description\": \"Room type code\"\n                },\n                \"sessionId\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Connect session ID if companion room\"\n                },\n                \"\
        contractId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n          \
        \          \"nullable\": true,\n                    \"description\": \"Governing contract ID\"\n                },\n\
        \                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\":
        true,\n                    \"description\": \"Human-readable room name\"\n                },\n                \"status\"\
        : {\n                    \"$ref\": \"#/$defs/ChatRoomStatus\",\n                    \"description\": \"Current room
        status\"\n                },\n                \"participantCount\": {\n                    \"type\": \"integer\",\n\
        \                    \"description\": \"Current number of participants\"\n                },\n                \"maxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Maximum participant limit\"\n                },\n                \"isArchived\": {\n                    \"type\"\
        : \"boolean\",\n                    \"description\": \"Whether the room has been archived\"\n                },\n\
        \                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"When the room was created\"\n                },\n                \"metadata\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field by convention.\"\
        \n                }\n            }\n        },\n        \"ChatRoomStatus\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Current state of a chat room\",\n            \"enum\": [\n                \"Active\"\
        ,\n                \"Locked\",\n                \"Archived\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Create a chat room\",\n    \"description\": \"Creates a new chat room of
        the specified type. Optionally associates a governing contract that drives room lifecycle (lock, archive, delete)
        on contract state changes.\\n\",\n    \"tags\": [],\n    \"deprecated\": false,\n    \"operationId\": \"CreateRoom\"\
        \n}"
  /chat/room/get:
    post:
      operationId: GetRoom
      summary: Get room by ID
      description: Returns the chat room metadata for the specified room ID.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetRoomRequest'
      responses:
        '200':
          description: Room found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatRoomResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetRoomRequest\"\
        ,\n    \"$defs\": {\n        \"GetRoomRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to retrieve a room by ID\",\n            \"required\": [\n      \
        \          \"roomId\"\n            ],\n            \"properties\": {\n                \"roomId\": {\n            \
        \        \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"\
        Room ID to look up\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChatRoomResponse\"\
        ,\n    \"$defs\": {\n        \"ChatRoomResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Chat room details including status and participant count\",\n           \
        \ \"required\": [\n                \"roomId\",\n                \"roomTypeCode\",\n                \"status\",\n \
        \               \"participantCount\",\n                \"isArchived\",\n                \"createdAt\"\n          \
        \  ],\n            \"properties\": {\n                \"roomId\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"uuid\",\n                    \"description\": \"Unique room identifier\"\n     \
        \           },\n                \"roomTypeCode\": {\n                    \"type\": \"string\",\n                 \
        \   \"description\": \"Room type code\"\n                },\n                \"sessionId\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Connect session ID if companion room\"\n                },\n                \"\
        contractId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n          \
        \          \"nullable\": true,\n                    \"description\": \"Governing contract ID\"\n                },\n\
        \                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\":
        true,\n                    \"description\": \"Human-readable room name\"\n                },\n                \"status\"\
        : {\n                    \"$ref\": \"#/$defs/ChatRoomStatus\",\n                    \"description\": \"Current room
        status\"\n                },\n                \"participantCount\": {\n                    \"type\": \"integer\",\n\
        \                    \"description\": \"Current number of participants\"\n                },\n                \"maxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Maximum participant limit\"\n                },\n                \"isArchived\": {\n                    \"type\"\
        : \"boolean\",\n                    \"description\": \"Whether the room has been archived\"\n                },\n\
        \                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"When the room was created\"\n                },\n                \"metadata\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field by convention.\"\
        \n                }\n            }\n        },\n        \"ChatRoomStatus\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Current state of a chat room\",\n            \"enum\": [\n                \"Active\"\
        ,\n                \"Locked\",\n                \"Archived\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get room by ID\",\n    \"description\": \"Returns the chat room metadata
        for the specified room ID.\",\n    \"tags\": [],\n    \"deprecated\": false,\n    \"operationId\": \"GetRoom\"\n}"
  /chat/room/list:
    post:
      operationId: ListRooms
      summary: List rooms with filters
      description: Returns rooms matching the specified filters with pagination.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListRoomsRequest'
      responses:
        '200':
          description: Rooms returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListRoomsResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListRoomsRequest\"\
        ,\n    \"$defs\": {\n        \"ListRoomsRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to list rooms with optional filters and pagination\",\n         \
        \   \"properties\": {\n                \"roomTypeCode\": {\n                    \"type\": \"string\",\n          \
        \          \"nullable\": true,\n                    \"maxLength\": 100,\n                    \"description\": \"Filter
        by room type code\"\n                },\n                \"sessionId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Filter by Connect session ID\"\n                },\n                \"status\": {\n                    \"allOf\"\
        : [\n                        {\n                            \"$ref\": \"#/$defs/ChatRoomStatus\"\n               \
        \         }\n                    ],\n                    \"nullable\": true,\n                    \"description\"\
        : \"Filter by room status\"\n                },\n                \"page\": {\n                    \"type\": \"integer\"\
        ,\n                    \"default\": 0,\n                    \"minimum\": 0,\n                    \"description\":
        \"Page number (zero-based)\"\n                },\n                \"pageSize\": {\n                    \"type\": \"\
        integer\",\n                    \"default\": 20,\n                    \"minimum\": 1,\n                    \"maximum\"\
        : 100,\n                    \"description\": \"Number of items per page\"\n                }\n            }\n    \
        \    },\n        \"ChatRoomStatus\": {\n            \"type\": \"string\",\n            \"description\": \"Current
        state of a chat room\",\n            \"enum\": [\n                \"Active\",\n                \"Locked\",\n     \
        \           \"Archived\"\n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListRoomsResponse\"\
        ,\n    \"$defs\": {\n        \"ListRoomsResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Paginated list of chat rooms\",\n            \"required\": [\n          \
        \      \"items\",\n                \"totalCount\",\n                \"page\",\n                \"pageSize\"\n    \
        \        ],\n            \"properties\": {\n                \"items\": {\n                    \"type\": \"array\"\
        ,\n                    \"description\": \"Rooms matching the filter\",\n                    \"items\": {\n       \
        \                 \"$ref\": \"#/$defs/ChatRoomResponse\"\n                    }\n                },\n            \
        \    \"totalCount\": {\n                    \"type\": \"integer\",\n                    \"description\": \"Total number
        of matching rooms\"\n                },\n                \"page\": {\n                    \"type\": \"integer\",\n\
        \                    \"description\": \"Current page number\"\n                },\n                \"pageSize\": {\n\
        \                    \"type\": \"integer\",\n                    \"description\": \"Items per page\"\n           \
        \     }\n            }\n        },\n        \"ChatRoomResponse\": {\n            \"type\": \"object\",\n         \
        \   \"additionalProperties\": false,\n            \"description\": \"Chat room details including status and participant
        count\",\n            \"required\": [\n                \"roomId\",\n                \"roomTypeCode\",\n          \
        \      \"status\",\n                \"participantCount\",\n                \"isArchived\",\n                \"createdAt\"\
        \n            ],\n            \"properties\": {\n                \"roomId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Unique room identifier\"\n  \
        \              },\n                \"roomTypeCode\": {\n                    \"type\": \"string\",\n              \
        \      \"description\": \"Room type code\"\n                },\n                \"sessionId\": {\n               \
        \     \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Connect session ID if companion room\"\n                },\n             \
        \   \"contractId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Governing contract ID\"\n           \
        \     },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Human-readable room name\"\n                },\n                \"\
        status\": {\n                    \"$ref\": \"#/$defs/ChatRoomStatus\",\n                    \"description\": \"Current
        room status\"\n                },\n                \"participantCount\": {\n                    \"type\": \"integer\"\
        ,\n                    \"description\": \"Current number of participants\"\n                },\n                \"\
        maxParticipants\": {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n      \
        \              \"description\": \"Maximum participant limit\"\n                },\n                \"isArchived\"\
        : {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether the room has been
        archived\"\n                },\n                \"createdAt\": {\n                    \"type\": \"string\",\n    \
        \                \"format\": \"date-time\",\n                    \"description\": \"When the room was created\"\n\
        \                },\n                \"metadata\": {\n                    \"type\": \"string\",\n                \
        \    \"nullable\": true,\n                    \"description\": \"Client-only metadata stored as JSON string. No Bannou
        plugin reads specific keys from this field by convention.\"\n                }\n            }\n        },\n      \
        \  \"ChatRoomStatus\": {\n            \"type\": \"string\",\n            \"description\": \"Current state of a chat
        room\",\n            \"enum\": [\n                \"Active\",\n                \"Locked\",\n                \"Archived\"\
        \n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"List rooms with filters\",\n    \"description\": \"Returns rooms matching
        the specified filters with pagination.\",\n    \"tags\": [],\n    \"deprecated\": false,\n    \"operationId\": \"\
        ListRooms\"\n}"
  /chat/room/update:
    post:
      operationId: UpdateRoom
      summary: Update room settings
      description: Updates mutable room settings. Caller must be the room owner.
      x-permissions:
      - role: user
        states:
          chat: in_room
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRoomRequest'
      responses:
        '200':
          description: Room updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatRoomResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/UpdateRoomRequest\"\
        ,\n    \"$defs\": {\n        \"UpdateRoomRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to update room properties (null fields left unchanged)\",\n     \
        \       \"required\": [\n                \"roomId\"\n            ],\n            \"properties\": {\n             \
        \   \"roomId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n        \
        \            \"description\": \"Room ID to update\"\n                },\n                \"displayName\": {\n    \
        \                \"type\": \"string\",\n                    \"nullable\": true,\n                    \"maxLength\"\
        : 200,\n                    \"description\": \"Updated room name\"\n                },\n                \"maxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"minimum\"\
        : 1,\n                    \"description\": \"Updated participant limit\"\n                },\n                \"metadata\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field by convention.\"\
        \n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChatRoomResponse\"\
        ,\n    \"$defs\": {\n        \"ChatRoomResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Chat room details including status and participant count\",\n           \
        \ \"required\": [\n                \"roomId\",\n                \"roomTypeCode\",\n                \"status\",\n \
        \               \"participantCount\",\n                \"isArchived\",\n                \"createdAt\"\n          \
        \  ],\n            \"properties\": {\n                \"roomId\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"uuid\",\n                    \"description\": \"Unique room identifier\"\n     \
        \           },\n                \"roomTypeCode\": {\n                    \"type\": \"string\",\n                 \
        \   \"description\": \"Room type code\"\n                },\n                \"sessionId\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Connect session ID if companion room\"\n                },\n                \"\
        contractId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n          \
        \          \"nullable\": true,\n                    \"description\": \"Governing contract ID\"\n                },\n\
        \                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\":
        true,\n                    \"description\": \"Human-readable room name\"\n                },\n                \"status\"\
        : {\n                    \"$ref\": \"#/$defs/ChatRoomStatus\",\n                    \"description\": \"Current room
        status\"\n                },\n                \"participantCount\": {\n                    \"type\": \"integer\",\n\
        \                    \"description\": \"Current number of participants\"\n                },\n                \"maxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Maximum participant limit\"\n                },\n                \"isArchived\": {\n                    \"type\"\
        : \"boolean\",\n                    \"description\": \"Whether the room has been archived\"\n                },\n\
        \                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"When the room was created\"\n                },\n                \"metadata\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field by convention.\"\
        \n                }\n            }\n        },\n        \"ChatRoomStatus\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Current state of a chat room\",\n            \"enum\": [\n                \"Active\"\
        ,\n                \"Locked\",\n                \"Archived\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Update room settings\",\n    \"description\": \"Updates mutable room settings.
        Caller must be the room owner.\",\n    \"tags\": [],\n    \"deprecated\": false,\n    \"operationId\": \"UpdateRoom\"\
        \n}"
  /chat/room/delete:
    post:
      operationId: DeleteRoom
      summary: Delete a room
      description: Deletes a room, removing all participants and messages. Caller must be the room owner or the room 
        must be empty.
      x-permissions:
      - role: user
        states:
          chat: in_room
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteRoomRequest'
      responses:
        '200':
          description: Room deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatRoomResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeleteRoomRequest\"\
        ,\n    \"$defs\": {\n        \"DeleteRoomRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to permanently delete a room and all its messages\",\n          \
        \  \"required\": [\n                \"roomId\"\n            ],\n            \"properties\": {\n                \"\
        roomId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n              \
        \      \"description\": \"Room ID to delete\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChatRoomResponse\"\
        ,\n    \"$defs\": {\n        \"ChatRoomResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Chat room details including status and participant count\",\n           \
        \ \"required\": [\n                \"roomId\",\n                \"roomTypeCode\",\n                \"status\",\n \
        \               \"participantCount\",\n                \"isArchived\",\n                \"createdAt\"\n          \
        \  ],\n            \"properties\": {\n                \"roomId\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"uuid\",\n                    \"description\": \"Unique room identifier\"\n     \
        \           },\n                \"roomTypeCode\": {\n                    \"type\": \"string\",\n                 \
        \   \"description\": \"Room type code\"\n                },\n                \"sessionId\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Connect session ID if companion room\"\n                },\n                \"\
        contractId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n          \
        \          \"nullable\": true,\n                    \"description\": \"Governing contract ID\"\n                },\n\
        \                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\":
        true,\n                    \"description\": \"Human-readable room name\"\n                },\n                \"status\"\
        : {\n                    \"$ref\": \"#/$defs/ChatRoomStatus\",\n                    \"description\": \"Current room
        status\"\n                },\n                \"participantCount\": {\n                    \"type\": \"integer\",\n\
        \                    \"description\": \"Current number of participants\"\n                },\n                \"maxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Maximum participant limit\"\n                },\n                \"isArchived\": {\n                    \"type\"\
        : \"boolean\",\n                    \"description\": \"Whether the room has been archived\"\n                },\n\
        \                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"When the room was created\"\n                },\n                \"metadata\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field by convention.\"\
        \n                }\n            }\n        },\n        \"ChatRoomStatus\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Current state of a chat room\",\n            \"enum\": [\n                \"Active\"\
        ,\n                \"Locked\",\n                \"Archived\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Delete a room\",\n    \"description\": \"Deletes a room, removing all participants
        and messages. Caller must be the room owner or the room must be empty.\",\n    \"tags\": [],\n    \"deprecated\":
        false,\n    \"operationId\": \"DeleteRoom\"\n}"
  /chat/room/archive:
    post:
      operationId: ArchiveRoom
      summary: Archive a room to Resource
      description: Archives a persistent room via lib-resource, preserving message history and metadata. Room is marked 
        as archived after successful archival.
      x-permissions:
      - role: user
        states:
          chat: in_room
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ArchiveRoomRequest'
      responses:
        '200':
          description: Room archived
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatRoomResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ArchiveRoomRequest\"\
        ,\n    \"$defs\": {\n        \"ArchiveRoomRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to archive a room (makes it read-only)\",\n            \"required\"\
        : [\n                \"roomId\"\n            ],\n            \"properties\": {\n                \"roomId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Room ID to archive\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChatRoomResponse\"\
        ,\n    \"$defs\": {\n        \"ChatRoomResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Chat room details including status and participant count\",\n           \
        \ \"required\": [\n                \"roomId\",\n                \"roomTypeCode\",\n                \"status\",\n \
        \               \"participantCount\",\n                \"isArchived\",\n                \"createdAt\"\n          \
        \  ],\n            \"properties\": {\n                \"roomId\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"uuid\",\n                    \"description\": \"Unique room identifier\"\n     \
        \           },\n                \"roomTypeCode\": {\n                    \"type\": \"string\",\n                 \
        \   \"description\": \"Room type code\"\n                },\n                \"sessionId\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Connect session ID if companion room\"\n                },\n                \"\
        contractId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n          \
        \          \"nullable\": true,\n                    \"description\": \"Governing contract ID\"\n                },\n\
        \                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\":
        true,\n                    \"description\": \"Human-readable room name\"\n                },\n                \"status\"\
        : {\n                    \"$ref\": \"#/$defs/ChatRoomStatus\",\n                    \"description\": \"Current room
        status\"\n                },\n                \"participantCount\": {\n                    \"type\": \"integer\",\n\
        \                    \"description\": \"Current number of participants\"\n                },\n                \"maxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Maximum participant limit\"\n                },\n                \"isArchived\": {\n                    \"type\"\
        : \"boolean\",\n                    \"description\": \"Whether the room has been archived\"\n                },\n\
        \                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"When the room was created\"\n                },\n                \"metadata\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field by convention.\"\
        \n                }\n            }\n        },\n        \"ChatRoomStatus\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Current state of a chat room\",\n            \"enum\": [\n                \"Active\"\
        ,\n                \"Locked\",\n                \"Archived\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Archive a room to Resource\",\n    \"description\": \"Archives a persistent
        room via lib-resource, preserving message history and metadata. Room is marked as archived after successful archival.\"\
        ,\n    \"tags\": [],\n    \"deprecated\": false,\n    \"operationId\": \"ArchiveRoom\"\n}"
  /chat/room/join:
    post:
      operationId: JoinRoom
      summary: Join a chat room
      description: >
        Joins the caller to the specified room. For companion rooms in AutoJoinLazy
        or Manual mode, the room is created on-the-fly if it does not yet exist.
        Returns conflict if the room is full or forbidden if the caller is banned.
      x-permissions:
      - role: user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JoinRoomRequest'
      responses:
        '200':
          description: Joined room
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatRoomResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/JoinRoomRequest\"\
        ,\n    \"$defs\": {\n        \"JoinRoomRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to join a chat room as a participant\",\n            \"required\"\
        : [\n                \"roomId\"\n            ],\n            \"properties\": {\n                \"roomId\": {\n  \
        \                  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Room ID to join\"\n                },\n                \"senderType\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Opaque sender type identifier (e.g.,
        \\\"session\\\", \\\"character\\\", \\\"system\\\")\"\n                },\n                \"senderId\": {\n     \
        \               \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Sender entity ID (nullable for anonymous)\"\n                },\n\
        \                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\":
        true,\n                    \"maxLength\": 200,\n                    \"description\": \"Human-readable display name\"\
        \n                },\n                \"role\": {\n                    \"allOf\": [\n                        {\n \
        \                           \"$ref\": \"#/$defs/ChatParticipantRole\"\n                        }\n               \
        \     ],\n                    \"nullable\": true,\n                    \"description\": \"Requested role (defaults
        to Member if not specified)\"\n                }\n            }\n        },\n        \"ChatParticipantRole\": {\n\
        \            \"type\": \"string\",\n            \"description\": \"Participant role within a chat room determining
        moderation privileges\",\n            \"enum\": [\n                \"Owner\",\n                \"Moderator\",\n  \
        \              \"Member\",\n                \"ReadOnly\"\n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChatRoomResponse\"\
        ,\n    \"$defs\": {\n        \"ChatRoomResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Chat room details including status and participant count\",\n           \
        \ \"required\": [\n                \"roomId\",\n                \"roomTypeCode\",\n                \"status\",\n \
        \               \"participantCount\",\n                \"isArchived\",\n                \"createdAt\"\n          \
        \  ],\n            \"properties\": {\n                \"roomId\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"uuid\",\n                    \"description\": \"Unique room identifier\"\n     \
        \           },\n                \"roomTypeCode\": {\n                    \"type\": \"string\",\n                 \
        \   \"description\": \"Room type code\"\n                },\n                \"sessionId\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Connect session ID if companion room\"\n                },\n                \"\
        contractId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n          \
        \          \"nullable\": true,\n                    \"description\": \"Governing contract ID\"\n                },\n\
        \                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\":
        true,\n                    \"description\": \"Human-readable room name\"\n                },\n                \"status\"\
        : {\n                    \"$ref\": \"#/$defs/ChatRoomStatus\",\n                    \"description\": \"Current room
        status\"\n                },\n                \"participantCount\": {\n                    \"type\": \"integer\",\n\
        \                    \"description\": \"Current number of participants\"\n                },\n                \"maxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Maximum participant limit\"\n                },\n                \"isArchived\": {\n                    \"type\"\
        : \"boolean\",\n                    \"description\": \"Whether the room has been archived\"\n                },\n\
        \                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"When the room was created\"\n                },\n                \"metadata\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field by convention.\"\
        \n                }\n            }\n        },\n        \"ChatRoomStatus\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Current state of a chat room\",\n            \"enum\": [\n                \"Active\"\
        ,\n                \"Locked\",\n                \"Archived\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Join a chat room\",\n    \"description\": \"Joins the caller to the specified
        room. For companion rooms in AutoJoinLazy or Manual mode, the room is created on-the-fly if it does not yet exist.
        Returns conflict if the room is full or forbidden if the caller is banned.\\n\",\n    \"tags\": [],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"JoinRoom\"\n}"
  /chat/room/leave:
    post:
      operationId: LeaveRoom
      summary: Leave a chat room
      description: Removes the caller from the room. If the owner leaves, promotes the next moderator or oldest member.
      x-permissions:
      - role: user
        states:
          chat: in_room
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LeaveRoomRequest'
      responses:
        '200':
          description: Left room
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatRoomResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/LeaveRoomRequest\"\
        ,\n    \"$defs\": {\n        \"LeaveRoomRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to leave a chat room\",\n            \"required\": [\n          \
        \      \"roomId\"\n            ],\n            \"properties\": {\n                \"roomId\": {\n                \
        \    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Room
        ID to leave\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChatRoomResponse\"\
        ,\n    \"$defs\": {\n        \"ChatRoomResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Chat room details including status and participant count\",\n           \
        \ \"required\": [\n                \"roomId\",\n                \"roomTypeCode\",\n                \"status\",\n \
        \               \"participantCount\",\n                \"isArchived\",\n                \"createdAt\"\n          \
        \  ],\n            \"properties\": {\n                \"roomId\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"uuid\",\n                    \"description\": \"Unique room identifier\"\n     \
        \           },\n                \"roomTypeCode\": {\n                    \"type\": \"string\",\n                 \
        \   \"description\": \"Room type code\"\n                },\n                \"sessionId\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Connect session ID if companion room\"\n                },\n                \"\
        contractId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n          \
        \          \"nullable\": true,\n                    \"description\": \"Governing contract ID\"\n                },\n\
        \                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\":
        true,\n                    \"description\": \"Human-readable room name\"\n                },\n                \"status\"\
        : {\n                    \"$ref\": \"#/$defs/ChatRoomStatus\",\n                    \"description\": \"Current room
        status\"\n                },\n                \"participantCount\": {\n                    \"type\": \"integer\",\n\
        \                    \"description\": \"Current number of participants\"\n                },\n                \"maxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Maximum participant limit\"\n                },\n                \"isArchived\": {\n                    \"type\"\
        : \"boolean\",\n                    \"description\": \"Whether the room has been archived\"\n                },\n\
        \                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"When the room was created\"\n                },\n                \"metadata\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field by convention.\"\
        \n                }\n            }\n        },\n        \"ChatRoomStatus\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Current state of a chat room\",\n            \"enum\": [\n                \"Active\"\
        ,\n                \"Locked\",\n                \"Archived\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Leave a chat room\",\n    \"description\": \"Removes the caller from the
        room. If the owner leaves, promotes the next moderator or oldest member.\",\n    \"tags\": [],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"LeaveRoom\"\n}"
  /chat/room/participants:
    post:
      operationId: ListParticipants
      summary: List room participants
      description: Returns all current participants in the room with their roles and status.
      x-permissions:
      - role: user
        states:
          chat: in_room
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListParticipantsRequest'
      responses:
        '200':
          description: Participants returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ParticipantsResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListParticipantsRequest\"\
        ,\n    \"$defs\": {\n        \"ListParticipantsRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to list participants in a room\",\n            \"required\": [\n\
        \                \"roomId\"\n            ],\n            \"properties\": {\n                \"roomId\": {\n      \
        \              \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Room ID to list participants for\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ParticipantsResponse\"\
        ,\n    \"$defs\": {\n        \"ParticipantsResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"List of participants in a room\",\n            \"required\": [\n        \
        \        \"roomId\",\n                \"participants\"\n            ],\n            \"properties\": {\n          \
        \      \"roomId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n     \
        \               \"description\": \"Room ID\"\n                },\n                \"participants\": {\n          \
        \          \"type\": \"array\",\n                    \"description\": \"Current room participants\",\n           \
        \         \"items\": {\n                        \"$ref\": \"#/$defs/ParticipantInfo\"\n                    }\n   \
        \             }\n            }\n        },\n        \"ParticipantInfo\": {\n            \"type\": \"object\",\n  \
        \          \"additionalProperties\": false,\n            \"description\": \"Details about a chat room participant\"\
        ,\n            \"required\": [\n                \"sessionId\",\n                \"role\",\n                \"joinedAt\"\
        ,\n                \"isMuted\"\n            ],\n            \"properties\": {\n                \"sessionId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Participant Connect session ID\"\n                },\n                \"senderType\": {\n                    \"\
        type\": \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Opaque sender
        type\"\n                },\n                \"senderId\": {\n                    \"type\": \"string\",\n         \
        \           \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Sender entity ID\"\n                },\n                \"displayName\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Display name\"\n              \
        \  },\n                \"role\": {\n                    \"$ref\": \"#/$defs/ChatParticipantRole\",\n             \
        \       \"description\": \"Participant role in the room\"\n                },\n                \"joinedAt\": {\n \
        \                   \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"\
        description\": \"When the participant joined\"\n                },\n                \"isMuted\": {\n             \
        \       \"type\": \"boolean\",\n                    \"description\": \"Whether the participant is currently muted\"\
        \n                }\n            }\n        },\n        \"ChatParticipantRole\": {\n            \"type\": \"string\"\
        ,\n            \"description\": \"Participant role within a chat room determining moderation privileges\",\n     \
        \       \"enum\": [\n                \"Owner\",\n                \"Moderator\",\n                \"Member\",\n   \
        \             \"ReadOnly\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"List room participants\",\n    \"description\": \"Returns all current participants
        in the room with their roles and status.\",\n    \"tags\": [],\n    \"deprecated\": false,\n    \"operationId\": \"\
        ListParticipants\"\n}"
  /chat/room/participant/kick:
    post:
      operationId: KickParticipant
      summary: Remove a participant from the room
      description: Kicks a participant from the room. Caller must be Owner or Moderator with higher role than target.
      x-permissions:
      - role: user
        states:
          chat: in_room
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/KickParticipantRequest'
      responses:
        '200':
          description: Participant kicked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatRoomResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/KickParticipantRequest\"\
        ,\n    \"$defs\": {\n        \"KickParticipantRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to remove a participant from a room\",\n            \"required\"\
        : [\n                \"roomId\",\n                \"targetSessionId\"\n            ],\n            \"properties\"\
        : {\n                \"roomId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"description\": \"Room ID\"\n                },\n                \"targetSessionId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Session ID of participant to kick\"\n                },\n                \"reason\": {\n        \
        \            \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\":
        \"Optional reason for the kick\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChatRoomResponse\"\
        ,\n    \"$defs\": {\n        \"ChatRoomResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Chat room details including status and participant count\",\n           \
        \ \"required\": [\n                \"roomId\",\n                \"roomTypeCode\",\n                \"status\",\n \
        \               \"participantCount\",\n                \"isArchived\",\n                \"createdAt\"\n          \
        \  ],\n            \"properties\": {\n                \"roomId\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"uuid\",\n                    \"description\": \"Unique room identifier\"\n     \
        \           },\n                \"roomTypeCode\": {\n                    \"type\": \"string\",\n                 \
        \   \"description\": \"Room type code\"\n                },\n                \"sessionId\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Connect session ID if companion room\"\n                },\n                \"\
        contractId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n          \
        \          \"nullable\": true,\n                    \"description\": \"Governing contract ID\"\n                },\n\
        \                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\":
        true,\n                    \"description\": \"Human-readable room name\"\n                },\n                \"status\"\
        : {\n                    \"$ref\": \"#/$defs/ChatRoomStatus\",\n                    \"description\": \"Current room
        status\"\n                },\n                \"participantCount\": {\n                    \"type\": \"integer\",\n\
        \                    \"description\": \"Current number of participants\"\n                },\n                \"maxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Maximum participant limit\"\n                },\n                \"isArchived\": {\n                    \"type\"\
        : \"boolean\",\n                    \"description\": \"Whether the room has been archived\"\n                },\n\
        \                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"When the room was created\"\n                },\n                \"metadata\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field by convention.\"\
        \n                }\n            }\n        },\n        \"ChatRoomStatus\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Current state of a chat room\",\n            \"enum\": [\n                \"Active\"\
        ,\n                \"Locked\",\n                \"Archived\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Remove a participant from the room\",\n    \"description\": \"Kicks a participant
        from the room. Caller must be Owner or Moderator with higher role than target.\",\n    \"tags\": [],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"KickParticipant\"\n}"
  /chat/room/participant/ban:
    post:
      operationId: BanParticipant
      summary: Ban a participant from the room
      description: Bans a participant. If currently in the room, they are kicked first. Optionally set a duration; null 
        means permanent.
      x-permissions:
      - role: user
        states:
          chat: in_room
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BanParticipantRequest'
      responses:
        '200':
          description: Participant banned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatRoomResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/BanParticipantRequest\"\
        ,\n    \"$defs\": {\n        \"BanParticipantRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to ban a participant from a room\",\n            \"required\": [\n\
        \                \"roomId\",\n                \"targetSessionId\"\n            ],\n            \"properties\": {\n\
        \                \"roomId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"Room ID\"\n                },\n                \"targetSessionId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Session ID of participant to ban\"\n                },\n                \"reason\": {\n                    \"\
        type\": \"string\",\n                    \"nullable\": true,\n                    \"maxLength\": 500,\n          \
        \          \"description\": \"Optional reason for the ban\"\n                },\n                \"durationMinutes\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"minimum\"\
        : 1,\n                    \"description\": \"Ban duration in minutes (null for permanent)\"\n                }\n \
        \           }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChatRoomResponse\"\
        ,\n    \"$defs\": {\n        \"ChatRoomResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Chat room details including status and participant count\",\n           \
        \ \"required\": [\n                \"roomId\",\n                \"roomTypeCode\",\n                \"status\",\n \
        \               \"participantCount\",\n                \"isArchived\",\n                \"createdAt\"\n          \
        \  ],\n            \"properties\": {\n                \"roomId\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"uuid\",\n                    \"description\": \"Unique room identifier\"\n     \
        \           },\n                \"roomTypeCode\": {\n                    \"type\": \"string\",\n                 \
        \   \"description\": \"Room type code\"\n                },\n                \"sessionId\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Connect session ID if companion room\"\n                },\n                \"\
        contractId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n          \
        \          \"nullable\": true,\n                    \"description\": \"Governing contract ID\"\n                },\n\
        \                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\":
        true,\n                    \"description\": \"Human-readable room name\"\n                },\n                \"status\"\
        : {\n                    \"$ref\": \"#/$defs/ChatRoomStatus\",\n                    \"description\": \"Current room
        status\"\n                },\n                \"participantCount\": {\n                    \"type\": \"integer\",\n\
        \                    \"description\": \"Current number of participants\"\n                },\n                \"maxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Maximum participant limit\"\n                },\n                \"isArchived\": {\n                    \"type\"\
        : \"boolean\",\n                    \"description\": \"Whether the room has been archived\"\n                },\n\
        \                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"When the room was created\"\n                },\n                \"metadata\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field by convention.\"\
        \n                }\n            }\n        },\n        \"ChatRoomStatus\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Current state of a chat room\",\n            \"enum\": [\n                \"Active\"\
        ,\n                \"Locked\",\n                \"Archived\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Ban a participant from the room\",\n    \"description\": \"Bans a participant.
        If currently in the room, they are kicked first. Optionally set a duration; null means permanent.\",\n    \"tags\"\
        : [],\n    \"deprecated\": false,\n    \"operationId\": \"BanParticipant\"\n}"
  /chat/room/participant/unban:
    post:
      operationId: UnbanParticipant
      summary: Unban a participant
      description: Removes a ban record for a participant. Caller must be Owner or Moderator.
      x-permissions:
      - role: user
        states:
          chat: in_room
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UnbanParticipantRequest'
      responses:
        '200':
          description: Participant unbanned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatRoomResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/UnbanParticipantRequest\"\
        ,\n    \"$defs\": {\n        \"UnbanParticipantRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to remove a ban for a participant\",\n            \"required\": [\n\
        \                \"roomId\",\n                \"targetSessionId\"\n            ],\n            \"properties\": {\n\
        \                \"roomId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"Room ID\"\n                },\n                \"targetSessionId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Session ID of participant to unban\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChatRoomResponse\"\
        ,\n    \"$defs\": {\n        \"ChatRoomResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Chat room details including status and participant count\",\n           \
        \ \"required\": [\n                \"roomId\",\n                \"roomTypeCode\",\n                \"status\",\n \
        \               \"participantCount\",\n                \"isArchived\",\n                \"createdAt\"\n          \
        \  ],\n            \"properties\": {\n                \"roomId\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"uuid\",\n                    \"description\": \"Unique room identifier\"\n     \
        \           },\n                \"roomTypeCode\": {\n                    \"type\": \"string\",\n                 \
        \   \"description\": \"Room type code\"\n                },\n                \"sessionId\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Connect session ID if companion room\"\n                },\n                \"\
        contractId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n          \
        \          \"nullable\": true,\n                    \"description\": \"Governing contract ID\"\n                },\n\
        \                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\":
        true,\n                    \"description\": \"Human-readable room name\"\n                },\n                \"status\"\
        : {\n                    \"$ref\": \"#/$defs/ChatRoomStatus\",\n                    \"description\": \"Current room
        status\"\n                },\n                \"participantCount\": {\n                    \"type\": \"integer\",\n\
        \                    \"description\": \"Current number of participants\"\n                },\n                \"maxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Maximum participant limit\"\n                },\n                \"isArchived\": {\n                    \"type\"\
        : \"boolean\",\n                    \"description\": \"Whether the room has been archived\"\n                },\n\
        \                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"When the room was created\"\n                },\n                \"metadata\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field by convention.\"\
        \n                }\n            }\n        },\n        \"ChatRoomStatus\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Current state of a chat room\",\n            \"enum\": [\n                \"Active\"\
        ,\n                \"Locked\",\n                \"Archived\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Unban a participant\",\n    \"description\": \"Removes a ban record for
        a participant. Caller must be Owner or Moderator.\",\n    \"tags\": [],\n    \"deprecated\": false,\n    \"operationId\"\
        : \"UnbanParticipant\"\n}"
  /chat/room/participant/mute:
    post:
      operationId: MuteParticipant
      summary: Mute a participant
      description: Mutes a participant, preventing them from sending messages. Optionally set a duration; null means 
        permanent.
      x-permissions:
      - role: user
        states:
          chat: in_room
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MuteParticipantRequest'
      responses:
        '200':
          description: Participant muted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatRoomResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/MuteParticipantRequest\"\
        ,\n    \"$defs\": {\n        \"MuteParticipantRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to mute a participant in a room\",\n            \"required\": [\n\
        \                \"roomId\",\n                \"targetSessionId\"\n            ],\n            \"properties\": {\n\
        \                \"roomId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"Room ID\"\n                },\n                \"targetSessionId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Session ID of participant to mute\"\n                },\n                \"durationMinutes\": {\n            \
        \        \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"minimum\": 1,\n  \
        \                  \"description\": \"Mute duration in minutes (null for permanent)\"\n                }\n       \
        \     }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChatRoomResponse\"\
        ,\n    \"$defs\": {\n        \"ChatRoomResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Chat room details including status and participant count\",\n           \
        \ \"required\": [\n                \"roomId\",\n                \"roomTypeCode\",\n                \"status\",\n \
        \               \"participantCount\",\n                \"isArchived\",\n                \"createdAt\"\n          \
        \  ],\n            \"properties\": {\n                \"roomId\": {\n                    \"type\": \"string\",\n \
        \                   \"format\": \"uuid\",\n                    \"description\": \"Unique room identifier\"\n     \
        \           },\n                \"roomTypeCode\": {\n                    \"type\": \"string\",\n                 \
        \   \"description\": \"Room type code\"\n                },\n                \"sessionId\": {\n                  \
        \  \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Connect session ID if companion room\"\n                },\n                \"\
        contractId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n          \
        \          \"nullable\": true,\n                    \"description\": \"Governing contract ID\"\n                },\n\
        \                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\":
        true,\n                    \"description\": \"Human-readable room name\"\n                },\n                \"status\"\
        : {\n                    \"$ref\": \"#/$defs/ChatRoomStatus\",\n                    \"description\": \"Current room
        status\"\n                },\n                \"participantCount\": {\n                    \"type\": \"integer\",\n\
        \                    \"description\": \"Current number of participants\"\n                },\n                \"maxParticipants\"\
        : {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Maximum participant limit\"\n                },\n                \"isArchived\": {\n                    \"type\"\
        : \"boolean\",\n                    \"description\": \"Whether the room has been archived\"\n                },\n\
        \                \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"When the room was created\"\n                },\n                \"metadata\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field by convention.\"\
        \n                }\n            }\n        },\n        \"ChatRoomStatus\": {\n            \"type\": \"string\",\n\
        \            \"description\": \"Current state of a chat room\",\n            \"enum\": [\n                \"Active\"\
        ,\n                \"Locked\",\n                \"Archived\"\n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Mute a participant\",\n    \"description\": \"Mutes a participant, preventing
        them from sending messages. Optionally set a duration; null means permanent.\",\n    \"tags\": [],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"MuteParticipant\"\n}"
  /chat/message/send:
    post:
      operationId: SendMessage
      summary: Send a message to a room
      description: >
        Sends a message to the specified room. Content is validated against
        the room type's message format and validator config. For AutoJoinLazy
        companion rooms, the room is created and the sender auto-joined if
        the room does not yet exist.
      x-permissions:
      - role: user
        states:
          chat: in_room
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendMessageRequest'
      responses:
        '200':
          description: Message sent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatMessageResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SendMessageRequest\"\
        ,\n    \"$defs\": {\n        \"SendMessageRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to send a message to a chat room\",\n            \"required\": [\n\
        \                \"roomId\",\n                \"content\"\n            ],\n            \"properties\": {\n       \
        \         \"roomId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n  \
        \                  \"description\": \"Room ID to send the message to\"\n                },\n                \"content\"\
        : {\n                    \"$ref\": \"#/$defs/SendMessageContent\",\n                    \"description\": \"Message
        content matching the room format\"\n                },\n                \"senderType\": {\n                    \"\
        type\": \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Opaque sender
        type for this message\"\n                },\n                \"senderId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Sender entity ID\"\n                },\n                \"displayName\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Sender display name for this message\"\
        \n                }\n            }\n        },\n        \"SendMessageContent\": {\n            \"type\": \"object\"\
        ,\n            \"additionalProperties\": false,\n            \"description\": \"Message content discriminated by the
        room message format. Exactly one content field group must be set, matching the room type format.\\n\",\n         \
        \   \"properties\": {\n                \"text\": {\n                    \"type\": \"string\",\n                  \
        \  \"nullable\": true,\n                    \"description\": \"Text content (for Text format rooms)\"\n          \
        \      },\n                \"sentimentCategory\": {\n                    \"allOf\": [\n                        {\n\
        \                            \"type\": \"object\"\n                        }\n                    ],\n           \
        \         \"nullable\": true,\n                    \"description\": \"Sentiment category (for Sentiment format rooms)\"\
        \n                },\n                \"sentimentIntensity\": {\n                    \"type\": \"number\",\n     \
        \               \"format\": \"float\",\n                    \"nullable\": true,\n                    \"minimum\":
        0.0,\n                    \"maximum\": 1.0,\n                    \"description\": \"Sentiment intensity 0.0-1.0 (for
        Sentiment format rooms)\"\n                },\n                \"emojiCode\": {\n                    \"type\": \"\
        string\",\n                    \"nullable\": true,\n                    \"description\": \"Emoji code (Unicode or
        custom) for Emoji format rooms\"\n                },\n                \"emojiSetId\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n              \
        \      \"description\": \"Custom emoji set reference (null for Unicode)\"\n                },\n                \"\
        customPayload\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n         \
        \           \"description\": \"JSON string validated against room type validator config (for Custom format rooms)\"\
        \n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChatMessageResponse\"\
        ,\n    \"$defs\": {\n        \"ChatMessageResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"A chat message with metadata and content\",\n            \"required\": [\n\
        \                \"messageId\",\n                \"roomId\",\n                \"timestamp\",\n                \"roomTypeCode\"\
        ,\n                \"isPinned\"\n            ],\n            \"properties\": {\n                \"messageId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique message identifier\"\n                },\n                \"roomId\": {\n                    \"type\":
        \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Room the message belongs
        to\"\n                },\n                \"senderType\": {\n                    \"type\": \"string\",\n         \
        \           \"nullable\": true,\n                    \"description\": \"Opaque sender type\"\n                },\n\
        \                \"senderId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Sender entity ID\"\n          \
        \      },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Sender display name\"\n                },\n                \"timestamp\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\",\n                 \
        \   \"description\": \"When the message was sent\"\n                },\n                \"roomTypeCode\": {\n    \
        \                \"type\": \"string\",\n                    \"description\": \"Room type code for this message\"\n\
        \                },\n                \"content\": {\n                    \"allOf\": [\n                        {\n\
        \                            \"$ref\": \"#/$defs/SendMessageContent\"\n                        }\n               \
        \     ],\n                    \"nullable\": true,\n                    \"description\": \"Message content (null for
        deleted messages)\"\n                },\n                \"isPinned\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether the message is pinned\"\n                }\n            }\n    \
        \    },\n        \"SendMessageContent\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Message content discriminated by the room message format. Exactly one content
        field group must be set, matching the room type format.\\n\",\n            \"properties\": {\n                \"text\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Text content (for Text format rooms)\"\n                },\n                \"sentimentCategory\": {\n       \
        \             \"allOf\": [\n                        {\n                            \"type\": \"object\"\n        \
        \                }\n                    ],\n                    \"nullable\": true,\n                    \"description\"\
        : \"Sentiment category (for Sentiment format rooms)\"\n                },\n                \"sentimentIntensity\"\
        : {\n                    \"type\": \"number\",\n                    \"format\": \"float\",\n                    \"\
        nullable\": true,\n                    \"minimum\": 0.0,\n                    \"maximum\": 1.0,\n                \
        \    \"description\": \"Sentiment intensity 0.0-1.0 (for Sentiment format rooms)\"\n                },\n         \
        \       \"emojiCode\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Emoji code (Unicode or custom) for Emoji format rooms\"\n                },\n\
        \                \"emojiSetId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Custom emoji set reference
        (null for Unicode)\"\n                },\n                \"customPayload\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"JSON string validated against room
        type validator config (for Custom format rooms)\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Send a message to a room\",\n    \"description\": \"Sends a message to
        the specified room. Content is validated against the room type's message format and validator config. For AutoJoinLazy
        companion rooms, the room is created and the sender auto-joined if the room does not yet exist.\\n\",\n    \"tags\"\
        : [],\n    \"deprecated\": false,\n    \"operationId\": \"SendMessage\"\n}"
  /chat/message/send-batch:
    post:
      operationId: SendMessageBatch
      summary: Send multiple messages
      description: Sends multiple messages to a room atomically. Intended for bulk sentiment pushes from higher-layer 
        services.
      x-permissions:
      - role: developer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendMessageBatchRequest'
      responses:
        '200':
          description: Messages sent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SendMessageBatchResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SendMessageBatchRequest\"\
        ,\n    \"$defs\": {\n        \"SendMessageBatchRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to send multiple messages to a room atomically\",\n            \"\
        required\": [\n                \"roomId\",\n                \"messages\"\n            ],\n            \"properties\"\
        : {\n                \"roomId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"description\": \"Room ID to send messages to\"\n                },\n              \
        \  \"messages\": {\n                    \"type\": \"array\",\n                    \"description\": \"Messages to send
        atomically\",\n                    \"items\": {\n                        \"$ref\": \"#/$defs/BatchMessageEntry\"\n\
        \                    }\n                }\n            }\n        },\n        \"BatchMessageEntry\": {\n         \
        \   \"type\": \"object\",\n            \"additionalProperties\": false,\n            \"description\": \"Individual
        message entry in a batch send operation\",\n            \"required\": [\n                \"content\"\n           \
        \ ],\n            \"properties\": {\n                \"content\": {\n                    \"$ref\": \"#/$defs/SendMessageContent\"\
        ,\n                    \"description\": \"Message content matching the room format\"\n                },\n       \
        \         \"senderType\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Opaque sender type\"\n                },\n                \"senderId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Sender entity ID\"\n                },\n                \"displayName\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Sender display name\"\n                }\n            }\n        },\n        \"SendMessageContent\": {\n     \
        \       \"type\": \"object\",\n            \"additionalProperties\": false,\n            \"description\": \"Message
        content discriminated by the room message format. Exactly one content field group must be set, matching the room type
        format.\\n\",\n            \"properties\": {\n                \"text\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Text content (for Text format rooms)\"\
        \n                },\n                \"sentimentCategory\": {\n                    \"allOf\": [\n               \
        \         {\n                            \"type\": \"object\"\n                        }\n                    ],\n\
        \                    \"nullable\": true,\n                    \"description\": \"Sentiment category (for Sentiment
        format rooms)\"\n                },\n                \"sentimentIntensity\": {\n                    \"type\": \"number\"\
        ,\n                    \"format\": \"float\",\n                    \"nullable\": true,\n                    \"minimum\"\
        : 0.0,\n                    \"maximum\": 1.0,\n                    \"description\": \"Sentiment intensity 0.0-1.0
        (for Sentiment format rooms)\"\n                },\n                \"emojiCode\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Emoji code (Unicode
        or custom) for Emoji format rooms\"\n                },\n                \"emojiSetId\": {\n                    \"\
        type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n        \
        \            \"description\": \"Custom emoji set reference (null for Unicode)\"\n                },\n            \
        \    \"customPayload\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n  \
        \                  \"description\": \"JSON string validated against room type validator config (for Custom format
        rooms)\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SendMessageBatchResponse\"\
        ,\n    \"$defs\": {\n        \"SendMessageBatchResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Result of a batch message send operation with per-message failure tracking\"\
        ,\n            \"required\": [\n                \"messageCount\",\n                \"failed\"\n            ],\n  \
        \          \"properties\": {\n                \"messageCount\": {\n                    \"type\": \"integer\",\n  \
        \                  \"description\": \"Number of messages successfully sent\"\n                },\n               \
        \ \"failed\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                    \
        \    \"$ref\": \"#/$defs/BatchMessageFailure\"\n                    },\n                    \"description\": \"Details
        of messages that failed to send (empty array when all succeeded)\"\n                }\n            }\n        },\n\
        \        \"BatchMessageFailure\": {\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"description\": \"Details of a single message that failed in a batch send operation\",\n           \
        \ \"required\": [\n                \"index\",\n                \"error\"\n            ],\n            \"properties\"\
        : {\n                \"index\": {\n                    \"type\": \"integer\",\n                    \"description\"\
        : \"Zero-based index of the failed message in the request messages array\"\n                },\n                \"\
        error\": {\n                    \"type\": \"string\",\n                    \"description\": \"Human-readable error
        reason\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Send multiple messages\",\n    \"description\": \"Sends multiple messages
        to a room atomically. Intended for bulk sentiment pushes from higher-layer services.\",\n    \"tags\": [],\n    \"\
        deprecated\": false,\n    \"operationId\": \"SendMessageBatch\"\n}"
  /chat/message/history:
    post:
      operationId: GetMessageHistory
      summary: Get message history
      description: Returns paginated message history for a room, ordered by timestamp descending. Uses cursor-based 
        pagination.
      x-permissions:
      - role: user
        states:
          chat: in_room
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MessageHistoryRequest'
      responses:
        '200':
          description: Messages returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageHistoryResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/MessageHistoryRequest\"\
        ,\n    \"$defs\": {\n        \"MessageHistoryRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to retrieve message history for a room with cursor pagination\",\n\
        \            \"required\": [\n                \"roomId\"\n            ],\n            \"properties\": {\n        \
        \        \"roomId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n   \
        \                 \"description\": \"Room ID to get history for\"\n                },\n                \"before\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Cursor for pagination (message ID to fetch before)\"\n                },\n                \"limit\": {\n     \
        \               \"type\": \"integer\",\n                    \"default\": 50,\n                    \"minimum\": 1,\n\
        \                    \"maximum\": 200,\n                    \"description\": \"Maximum number of messages to return\"\
        \n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/MessageHistoryResponse\"\
        ,\n    \"$defs\": {\n        \"MessageHistoryResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Paginated message history with cursor for next page\",\n            \"required\"\
        : [\n                \"messages\",\n                \"hasMore\"\n            ],\n            \"properties\": {\n \
        \               \"messages\": {\n                    \"type\": \"array\",\n                    \"description\": \"\
        Messages in reverse chronological order\",\n                    \"items\": {\n                        \"$ref\": \"\
        #/$defs/ChatMessageResponse\"\n                    }\n                },\n                \"hasMore\": {\n       \
        \             \"type\": \"boolean\",\n                    \"description\": \"Whether more messages exist before the
        returned set\"\n                },\n                \"nextCursor\": {\n                    \"type\": \"string\",\n\
        \                    \"nullable\": true,\n                    \"description\": \"Cursor for fetching the next page\"\
        \n                }\n            }\n        },\n        \"ChatMessageResponse\": {\n            \"type\": \"object\"\
        ,\n            \"additionalProperties\": false,\n            \"description\": \"A chat message with metadata and content\"\
        ,\n            \"required\": [\n                \"messageId\",\n                \"roomId\",\n                \"timestamp\"\
        ,\n                \"roomTypeCode\",\n                \"isPinned\"\n            ],\n            \"properties\": {\n\
        \                \"messageId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"Unique message identifier\"\n                },\n                \"roomId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Room the message belongs to\"\n                },\n                \"senderType\": {\n          \
        \          \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Opaque sender type\"\n                },\n                \"senderId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Sender entity ID\"\n                },\n                \"displayName\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Sender display name\"\n       \
        \         },\n                \"timestamp\": {\n                    \"type\": \"string\",\n                    \"\
        format\": \"date-time\",\n                    \"description\": \"When the message was sent\"\n                },\n\
        \                \"roomTypeCode\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Room type code for this message\"\n                },\n                \"content\": {\n                    \"\
        allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/SendMessageContent\"\n    \
        \                    }\n                    ],\n                    \"nullable\": true,\n                    \"description\"\
        : \"Message content (null for deleted messages)\"\n                },\n                \"isPinned\": {\n         \
        \           \"type\": \"boolean\",\n                    \"description\": \"Whether the message is pinned\"\n     \
        \           }\n            }\n        },\n        \"SendMessageContent\": {\n            \"type\": \"object\",\n \
        \           \"additionalProperties\": false,\n            \"description\": \"Message content discriminated by the
        room message format. Exactly one content field group must be set, matching the room type format.\\n\",\n         \
        \   \"properties\": {\n                \"text\": {\n                    \"type\": \"string\",\n                  \
        \  \"nullable\": true,\n                    \"description\": \"Text content (for Text format rooms)\"\n          \
        \      },\n                \"sentimentCategory\": {\n                    \"allOf\": [\n                        {\n\
        \                            \"type\": \"object\"\n                        }\n                    ],\n           \
        \         \"nullable\": true,\n                    \"description\": \"Sentiment category (for Sentiment format rooms)\"\
        \n                },\n                \"sentimentIntensity\": {\n                    \"type\": \"number\",\n     \
        \               \"format\": \"float\",\n                    \"nullable\": true,\n                    \"minimum\":
        0.0,\n                    \"maximum\": 1.0,\n                    \"description\": \"Sentiment intensity 0.0-1.0 (for
        Sentiment format rooms)\"\n                },\n                \"emojiCode\": {\n                    \"type\": \"\
        string\",\n                    \"nullable\": true,\n                    \"description\": \"Emoji code (Unicode or
        custom) for Emoji format rooms\"\n                },\n                \"emojiSetId\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n              \
        \      \"description\": \"Custom emoji set reference (null for Unicode)\"\n                },\n                \"\
        customPayload\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n         \
        \           \"description\": \"JSON string validated against room type validator config (for Custom format rooms)\"\
        \n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get message history\",\n    \"description\": \"Returns paginated message
        history for a room, ordered by timestamp descending. Uses cursor-based pagination.\",\n    \"tags\": [],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"GetMessageHistory\"\n}"
  /chat/message/delete:
    post:
      operationId: DeleteMessage
      summary: Delete a message
      description: Deletes a specific message. Caller must be the message sender, room Owner, or Moderator.
      x-permissions:
      - role: user
        states:
          chat: in_room
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteMessageRequest'
      responses:
        '200':
          description: Message deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatMessageResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeleteMessageRequest\"\
        ,\n    \"$defs\": {\n        \"DeleteMessageRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to delete a message from a room\",\n            \"required\": [\n\
        \                \"roomId\",\n                \"messageId\"\n            ],\n            \"properties\": {\n     \
        \           \"roomId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n\
        \                    \"description\": \"Room the message belongs to\"\n                },\n                \"messageId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Message ID to delete\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChatMessageResponse\"\
        ,\n    \"$defs\": {\n        \"ChatMessageResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"A chat message with metadata and content\",\n            \"required\": [\n\
        \                \"messageId\",\n                \"roomId\",\n                \"timestamp\",\n                \"roomTypeCode\"\
        ,\n                \"isPinned\"\n            ],\n            \"properties\": {\n                \"messageId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique message identifier\"\n                },\n                \"roomId\": {\n                    \"type\":
        \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Room the message belongs
        to\"\n                },\n                \"senderType\": {\n                    \"type\": \"string\",\n         \
        \           \"nullable\": true,\n                    \"description\": \"Opaque sender type\"\n                },\n\
        \                \"senderId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Sender entity ID\"\n          \
        \      },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Sender display name\"\n                },\n                \"timestamp\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\",\n                 \
        \   \"description\": \"When the message was sent\"\n                },\n                \"roomTypeCode\": {\n    \
        \                \"type\": \"string\",\n                    \"description\": \"Room type code for this message\"\n\
        \                },\n                \"content\": {\n                    \"allOf\": [\n                        {\n\
        \                            \"$ref\": \"#/$defs/SendMessageContent\"\n                        }\n               \
        \     ],\n                    \"nullable\": true,\n                    \"description\": \"Message content (null for
        deleted messages)\"\n                },\n                \"isPinned\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether the message is pinned\"\n                }\n            }\n    \
        \    },\n        \"SendMessageContent\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Message content discriminated by the room message format. Exactly one content
        field group must be set, matching the room type format.\\n\",\n            \"properties\": {\n                \"text\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Text content (for Text format rooms)\"\n                },\n                \"sentimentCategory\": {\n       \
        \             \"allOf\": [\n                        {\n                            \"type\": \"object\"\n        \
        \                }\n                    ],\n                    \"nullable\": true,\n                    \"description\"\
        : \"Sentiment category (for Sentiment format rooms)\"\n                },\n                \"sentimentIntensity\"\
        : {\n                    \"type\": \"number\",\n                    \"format\": \"float\",\n                    \"\
        nullable\": true,\n                    \"minimum\": 0.0,\n                    \"maximum\": 1.0,\n                \
        \    \"description\": \"Sentiment intensity 0.0-1.0 (for Sentiment format rooms)\"\n                },\n         \
        \       \"emojiCode\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Emoji code (Unicode or custom) for Emoji format rooms\"\n                },\n\
        \                \"emojiSetId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Custom emoji set reference
        (null for Unicode)\"\n                },\n                \"customPayload\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"JSON string validated against room
        type validator config (for Custom format rooms)\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Delete a message\",\n    \"description\": \"Deletes a specific message.
        Caller must be the message sender, room Owner, or Moderator.\",\n    \"tags\": [],\n    \"deprecated\": false,\n \
        \   \"operationId\": \"DeleteMessage\"\n}"
  /chat/message/pin:
    post:
      operationId: PinMessage
      summary: Pin a message
      description: Pins a message in the room. Caller must be Owner or Moderator. Returns conflict if max pinned 
        messages reached.
      x-permissions:
      - role: user
        states:
          chat: in_room
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PinMessageRequest'
      responses:
        '200':
          description: Message pinned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatMessageResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/PinMessageRequest\"\
        ,\n    \"$defs\": {\n        \"PinMessageRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to pin a message in a room\",\n            \"required\": [\n    \
        \            \"roomId\",\n                \"messageId\"\n            ],\n            \"properties\": {\n         \
        \       \"roomId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n    \
        \                \"description\": \"Room the message belongs to\"\n                },\n                \"messageId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Message ID to pin\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChatMessageResponse\"\
        ,\n    \"$defs\": {\n        \"ChatMessageResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"A chat message with metadata and content\",\n            \"required\": [\n\
        \                \"messageId\",\n                \"roomId\",\n                \"timestamp\",\n                \"roomTypeCode\"\
        ,\n                \"isPinned\"\n            ],\n            \"properties\": {\n                \"messageId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique message identifier\"\n                },\n                \"roomId\": {\n                    \"type\":
        \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Room the message belongs
        to\"\n                },\n                \"senderType\": {\n                    \"type\": \"string\",\n         \
        \           \"nullable\": true,\n                    \"description\": \"Opaque sender type\"\n                },\n\
        \                \"senderId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Sender entity ID\"\n          \
        \      },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Sender display name\"\n                },\n                \"timestamp\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\",\n                 \
        \   \"description\": \"When the message was sent\"\n                },\n                \"roomTypeCode\": {\n    \
        \                \"type\": \"string\",\n                    \"description\": \"Room type code for this message\"\n\
        \                },\n                \"content\": {\n                    \"allOf\": [\n                        {\n\
        \                            \"$ref\": \"#/$defs/SendMessageContent\"\n                        }\n               \
        \     ],\n                    \"nullable\": true,\n                    \"description\": \"Message content (null for
        deleted messages)\"\n                },\n                \"isPinned\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether the message is pinned\"\n                }\n            }\n    \
        \    },\n        \"SendMessageContent\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Message content discriminated by the room message format. Exactly one content
        field group must be set, matching the room type format.\\n\",\n            \"properties\": {\n                \"text\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Text content (for Text format rooms)\"\n                },\n                \"sentimentCategory\": {\n       \
        \             \"allOf\": [\n                        {\n                            \"type\": \"object\"\n        \
        \                }\n                    ],\n                    \"nullable\": true,\n                    \"description\"\
        : \"Sentiment category (for Sentiment format rooms)\"\n                },\n                \"sentimentIntensity\"\
        : {\n                    \"type\": \"number\",\n                    \"format\": \"float\",\n                    \"\
        nullable\": true,\n                    \"minimum\": 0.0,\n                    \"maximum\": 1.0,\n                \
        \    \"description\": \"Sentiment intensity 0.0-1.0 (for Sentiment format rooms)\"\n                },\n         \
        \       \"emojiCode\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Emoji code (Unicode or custom) for Emoji format rooms\"\n                },\n\
        \                \"emojiSetId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Custom emoji set reference
        (null for Unicode)\"\n                },\n                \"customPayload\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"JSON string validated against room
        type validator config (for Custom format rooms)\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Pin a message\",\n    \"description\": \"Pins a message in the room. Caller
        must be Owner or Moderator. Returns conflict if max pinned messages reached.\",\n    \"tags\": [],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"PinMessage\"\n}"
  /chat/message/unpin:
    post:
      operationId: UnpinMessage
      summary: Unpin a message
      description: Unpins a previously pinned message. Caller must be Owner or Moderator.
      x-permissions:
      - role: user
        states:
          chat: in_room
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UnpinMessageRequest'
      responses:
        '200':
          description: Message unpinned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatMessageResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/UnpinMessageRequest\"\
        ,\n    \"$defs\": {\n        \"UnpinMessageRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to unpin a message in a room\",\n            \"required\": [\n  \
        \              \"roomId\",\n                \"messageId\"\n            ],\n            \"properties\": {\n       \
        \         \"roomId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n  \
        \                  \"description\": \"Room the message belongs to\"\n                },\n                \"messageId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Message ID to unpin\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ChatMessageResponse\"\
        ,\n    \"$defs\": {\n        \"ChatMessageResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"A chat message with metadata and content\",\n            \"required\": [\n\
        \                \"messageId\",\n                \"roomId\",\n                \"timestamp\",\n                \"roomTypeCode\"\
        ,\n                \"isPinned\"\n            ],\n            \"properties\": {\n                \"messageId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique message identifier\"\n                },\n                \"roomId\": {\n                    \"type\":
        \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"Room the message belongs
        to\"\n                },\n                \"senderType\": {\n                    \"type\": \"string\",\n         \
        \           \"nullable\": true,\n                    \"description\": \"Opaque sender type\"\n                },\n\
        \                \"senderId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Sender entity ID\"\n          \
        \      },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Sender display name\"\n                },\n                \"timestamp\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\",\n                 \
        \   \"description\": \"When the message was sent\"\n                },\n                \"roomTypeCode\": {\n    \
        \                \"type\": \"string\",\n                    \"description\": \"Room type code for this message\"\n\
        \                },\n                \"content\": {\n                    \"allOf\": [\n                        {\n\
        \                            \"$ref\": \"#/$defs/SendMessageContent\"\n                        }\n               \
        \     ],\n                    \"nullable\": true,\n                    \"description\": \"Message content (null for
        deleted messages)\"\n                },\n                \"isPinned\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether the message is pinned\"\n                }\n            }\n    \
        \    },\n        \"SendMessageContent\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Message content discriminated by the room message format. Exactly one content
        field group must be set, matching the room type format.\\n\",\n            \"properties\": {\n                \"text\"\
        : {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Text content (for Text format rooms)\"\n                },\n                \"sentimentCategory\": {\n       \
        \             \"allOf\": [\n                        {\n                            \"type\": \"object\"\n        \
        \                }\n                    ],\n                    \"nullable\": true,\n                    \"description\"\
        : \"Sentiment category (for Sentiment format rooms)\"\n                },\n                \"sentimentIntensity\"\
        : {\n                    \"type\": \"number\",\n                    \"format\": \"float\",\n                    \"\
        nullable\": true,\n                    \"minimum\": 0.0,\n                    \"maximum\": 1.0,\n                \
        \    \"description\": \"Sentiment intensity 0.0-1.0 (for Sentiment format rooms)\"\n                },\n         \
        \       \"emojiCode\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n   \
        \                 \"description\": \"Emoji code (Unicode or custom) for Emoji format rooms\"\n                },\n\
        \                \"emojiSetId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"nullable\": true,\n                    \"description\": \"Custom emoji set reference
        (null for Unicode)\"\n                },\n                \"customPayload\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"JSON string validated against room
        type validator config (for Custom format rooms)\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Unpin a message\",\n    \"description\": \"Unpins a previously pinned message.
        Caller must be Owner or Moderator.\",\n    \"tags\": [],\n    \"deprecated\": false,\n    \"operationId\": \"UnpinMessage\"\
        \n}"
  /chat/message/search:
    post:
      operationId: SearchMessages
      summary: Full-text search in persistent rooms
      description: Searches message content in persistent rooms using MySQL full-text search. Not available for 
        ephemeral rooms.
      x-permissions:
      - role: user
        states:
          chat: in_room
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchMessagesRequest'
      responses:
        '200':
          description: Search results returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SearchMessagesResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SearchMessagesRequest\"\
        ,\n    \"$defs\": {\n        \"SearchMessagesRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to full-text search messages in a persistent room\",\n          \
        \  \"required\": [\n                \"roomId\",\n                \"query\"\n            ],\n            \"properties\"\
        : {\n                \"roomId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"description\": \"Room ID to search in (must be a persistent room)\"\n             \
        \   },\n                \"query\": {\n                    \"type\": \"string\",\n                    \"minLength\"\
        : 1,\n                    \"maxLength\": 500,\n                    \"description\": \"Full-text search query string\"\
        \n                },\n                \"limit\": {\n                    \"type\": \"integer\",\n                 \
        \   \"default\": 20,\n                    \"minimum\": 1,\n                    \"maximum\": 100,\n               \
        \     \"description\": \"Maximum number of results to return\"\n                }\n            }\n        }\n    }\n\
        }"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SearchMessagesResponse\"\
        ,\n    \"$defs\": {\n        \"SearchMessagesResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Full-text search results with total match count\",\n            \"required\"\
        : [\n                \"messages\",\n                \"totalMatches\"\n            ],\n            \"properties\":
        {\n                \"messages\": {\n                    \"type\": \"array\",\n                    \"description\"\
        : \"Messages matching the search query\",\n                    \"items\": {\n                        \"$ref\": \"\
        #/$defs/ChatMessageResponse\"\n                    }\n                },\n                \"totalMatches\": {\n  \
        \                  \"type\": \"integer\",\n                    \"description\": \"Total number of matching messages\"\
        \n                }\n            }\n        },\n        \"ChatMessageResponse\": {\n            \"type\": \"object\"\
        ,\n            \"additionalProperties\": false,\n            \"description\": \"A chat message with metadata and content\"\
        ,\n            \"required\": [\n                \"messageId\",\n                \"roomId\",\n                \"timestamp\"\
        ,\n                \"roomTypeCode\",\n                \"isPinned\"\n            ],\n            \"properties\": {\n\
        \                \"messageId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"Unique message identifier\"\n                },\n                \"roomId\"\
        : {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"\
        description\": \"Room the message belongs to\"\n                },\n                \"senderType\": {\n          \
        \          \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Opaque sender type\"\n                },\n                \"senderId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Sender entity ID\"\n                },\n                \"displayName\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Sender display name\"\n       \
        \         },\n                \"timestamp\": {\n                    \"type\": \"string\",\n                    \"\
        format\": \"date-time\",\n                    \"description\": \"When the message was sent\"\n                },\n\
        \                \"roomTypeCode\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Room type code for this message\"\n                },\n                \"content\": {\n                    \"\
        allOf\": [\n                        {\n                            \"$ref\": \"#/$defs/SendMessageContent\"\n    \
        \                    }\n                    ],\n                    \"nullable\": true,\n                    \"description\"\
        : \"Message content (null for deleted messages)\"\n                },\n                \"isPinned\": {\n         \
        \           \"type\": \"boolean\",\n                    \"description\": \"Whether the message is pinned\"\n     \
        \           }\n            }\n        },\n        \"SendMessageContent\": {\n            \"type\": \"object\",\n \
        \           \"additionalProperties\": false,\n            \"description\": \"Message content discriminated by the
        room message format. Exactly one content field group must be set, matching the room type format.\\n\",\n         \
        \   \"properties\": {\n                \"text\": {\n                    \"type\": \"string\",\n                  \
        \  \"nullable\": true,\n                    \"description\": \"Text content (for Text format rooms)\"\n          \
        \      },\n                \"sentimentCategory\": {\n                    \"allOf\": [\n                        {\n\
        \                            \"type\": \"object\"\n                        }\n                    ],\n           \
        \         \"nullable\": true,\n                    \"description\": \"Sentiment category (for Sentiment format rooms)\"\
        \n                },\n                \"sentimentIntensity\": {\n                    \"type\": \"number\",\n     \
        \               \"format\": \"float\",\n                    \"nullable\": true,\n                    \"minimum\":
        0.0,\n                    \"maximum\": 1.0,\n                    \"description\": \"Sentiment intensity 0.0-1.0 (for
        Sentiment format rooms)\"\n                },\n                \"emojiCode\": {\n                    \"type\": \"\
        string\",\n                    \"nullable\": true,\n                    \"description\": \"Emoji code (Unicode or
        custom) for Emoji format rooms\"\n                },\n                \"emojiSetId\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n              \
        \      \"description\": \"Custom emoji set reference (null for Unicode)\"\n                },\n                \"\
        customPayload\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n         \
        \           \"description\": \"JSON string validated against room type validator config (for Custom format rooms)\"\
        \n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Full-text search in persistent rooms\",\n    \"description\": \"Searches
        message content in persistent rooms using MySQL full-text search. Not available for ephemeral rooms.\",\n    \"tags\"\
        : [],\n    \"deprecated\": false,\n    \"operationId\": \"SearchMessages\"\n}"
  /chat/admin/rooms:
    post:
      operationId: AdminListRooms
      summary: List all rooms system-wide
      description: Returns all rooms across the system for administrative purposes. Supports filtering by status and 
        type.
      x-permissions:
      - role: developer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminListRoomsRequest'
      responses:
        '200':
          description: Rooms returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListRoomsResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/AdminListRoomsRequest\"\
        ,\n    \"$defs\": {\n        \"AdminListRoomsRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Admin request to list all rooms with filters and pagination\",\n        \
        \    \"properties\": {\n                \"roomTypeCode\": {\n                    \"type\": \"string\",\n         \
        \           \"nullable\": true,\n                    \"maxLength\": 100,\n                    \"description\": \"\
        Filter by room type\"\n                },\n                \"status\": {\n                    \"allOf\": [\n     \
        \                   {\n                            \"$ref\": \"#/$defs/ChatRoomStatus\"\n                        }\n\
        \                    ],\n                    \"nullable\": true,\n                    \"description\": \"Filter by
        status\"\n                },\n                \"page\": {\n                    \"type\": \"integer\",\n          \
        \          \"default\": 0,\n                    \"minimum\": 0,\n                    \"description\": \"Page number
        (zero-based)\"\n                },\n                \"pageSize\": {\n                    \"type\": \"integer\",\n\
        \                    \"default\": 50,\n                    \"minimum\": 1,\n                    \"maximum\": 200,\n\
        \                    \"description\": \"Number of items per page\"\n                }\n            }\n        },\n\
        \        \"ChatRoomStatus\": {\n            \"type\": \"string\",\n            \"description\": \"Current state of
        a chat room\",\n            \"enum\": [\n                \"Active\",\n                \"Locked\",\n              \
        \  \"Archived\"\n            ]\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListRoomsResponse\"\
        ,\n    \"$defs\": {\n        \"ListRoomsResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Paginated list of chat rooms\",\n            \"required\": [\n          \
        \      \"items\",\n                \"totalCount\",\n                \"page\",\n                \"pageSize\"\n    \
        \        ],\n            \"properties\": {\n                \"items\": {\n                    \"type\": \"array\"\
        ,\n                    \"description\": \"Rooms matching the filter\",\n                    \"items\": {\n       \
        \                 \"$ref\": \"#/$defs/ChatRoomResponse\"\n                    }\n                },\n            \
        \    \"totalCount\": {\n                    \"type\": \"integer\",\n                    \"description\": \"Total number
        of matching rooms\"\n                },\n                \"page\": {\n                    \"type\": \"integer\",\n\
        \                    \"description\": \"Current page number\"\n                },\n                \"pageSize\": {\n\
        \                    \"type\": \"integer\",\n                    \"description\": \"Items per page\"\n           \
        \     }\n            }\n        },\n        \"ChatRoomResponse\": {\n            \"type\": \"object\",\n         \
        \   \"additionalProperties\": false,\n            \"description\": \"Chat room details including status and participant
        count\",\n            \"required\": [\n                \"roomId\",\n                \"roomTypeCode\",\n          \
        \      \"status\",\n                \"participantCount\",\n                \"isArchived\",\n                \"createdAt\"\
        \n            ],\n            \"properties\": {\n                \"roomId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Unique room identifier\"\n  \
        \              },\n                \"roomTypeCode\": {\n                    \"type\": \"string\",\n              \
        \      \"description\": \"Room type code\"\n                },\n                \"sessionId\": {\n               \
        \     \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Connect session ID if companion room\"\n                },\n             \
        \   \"contractId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n    \
        \                \"nullable\": true,\n                    \"description\": \"Governing contract ID\"\n           \
        \     },\n                \"displayName\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Human-readable room name\"\n                },\n                \"\
        status\": {\n                    \"$ref\": \"#/$defs/ChatRoomStatus\",\n                    \"description\": \"Current
        room status\"\n                },\n                \"participantCount\": {\n                    \"type\": \"integer\"\
        ,\n                    \"description\": \"Current number of participants\"\n                },\n                \"\
        maxParticipants\": {\n                    \"type\": \"integer\",\n                    \"nullable\": true,\n      \
        \              \"description\": \"Maximum participant limit\"\n                },\n                \"isArchived\"\
        : {\n                    \"type\": \"boolean\",\n                    \"description\": \"Whether the room has been
        archived\"\n                },\n                \"createdAt\": {\n                    \"type\": \"string\",\n    \
        \                \"format\": \"date-time\",\n                    \"description\": \"When the room was created\"\n\
        \                },\n                \"metadata\": {\n                    \"type\": \"string\",\n                \
        \    \"nullable\": true,\n                    \"description\": \"Client-only metadata stored as JSON string. No Bannou
        plugin reads specific keys from this field by convention.\"\n                }\n            }\n        },\n      \
        \  \"ChatRoomStatus\": {\n            \"type\": \"string\",\n            \"description\": \"Current state of a chat
        room\",\n            \"enum\": [\n                \"Active\",\n                \"Locked\",\n                \"Archived\"\
        \n            ]\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"List all rooms system-wide\",\n    \"description\": \"Returns all rooms
        across the system for administrative purposes. Supports filtering by status and type.\",\n    \"tags\": [],\n    \"\
        deprecated\": false,\n    \"operationId\": \"AdminListRooms\"\n}"
  /chat/admin/stats:
    post:
      operationId: AdminGetStats
      summary: Room and message statistics
      description: Returns system-wide chat statistics for monitoring and debugging.
      x-permissions:
      - role: developer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminGetStatsRequest'
      responses:
        '200':
          description: Statistics returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminStatsResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/AdminGetStatsRequest\"\
        ,\n    \"$defs\": {\n        \"AdminGetStatsRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Empty request body for stats endpoint\",\n            \"properties\": {}\n\
        \        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/AdminStatsResponse\"\
        ,\n    \"$defs\": {\n        \"AdminStatsResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"System-wide chat statistics for admin monitoring\",\n            \"required\"\
        : [\n                \"totalRooms\",\n                \"activeRooms\",\n                \"lockedRooms\",\n       \
        \         \"archivedRooms\",\n                \"totalParticipants\",\n                \"totalRoomTypes\"\n       \
        \     ],\n            \"properties\": {\n                \"totalRooms\": {\n                    \"type\": \"integer\"\
        ,\n                    \"description\": \"Total number of rooms in the system\"\n                },\n            \
        \    \"activeRooms\": {\n                    \"type\": \"integer\",\n                    \"description\": \"Number
        of active rooms\"\n                },\n                \"lockedRooms\": {\n                    \"type\": \"integer\"\
        ,\n                    \"description\": \"Number of locked rooms\"\n                },\n                \"archivedRooms\"\
        : {\n                    \"type\": \"integer\",\n                    \"description\": \"Number of archived rooms\"\
        \n                },\n                \"totalParticipants\": {\n                    \"type\": \"integer\",\n     \
        \               \"description\": \"Total participants across all rooms\"\n                },\n                \"totalRoomTypes\"\
        : {\n                    \"type\": \"integer\",\n                    \"description\": \"Total registered room types\"\
        \n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Room and message statistics\",\n    \"description\": \"Returns system-wide
        chat statistics for monitoring and debugging.\",\n    \"tags\": [],\n    \"deprecated\": false,\n    \"operationId\"\
        : \"AdminGetStats\"\n}"
  /chat/admin/cleanup:
    post:
      operationId: AdminForceCleanup
      summary: Force cleanup of idle rooms
      description: Triggers an immediate idle room cleanup cycle, bypassing the normal interval.
      x-permissions:
      - role: developer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminForceCleanupRequest'
      responses:
        '200':
          description: Cleanup executed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminCleanupResponse'
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/AdminForceCleanupRequest\"\
        ,\n    \"$defs\": {\n        \"AdminForceCleanupRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Empty request body for force cleanup\",\n            \"properties\": {}\n\
        \        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/AdminCleanupResponse\"\
        ,\n    \"$defs\": {\n        \"AdminCleanupResponse\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Result of admin-triggered idle room cleanup\",\n            \"required\"\
        : [\n                \"cleanedRooms\",\n                \"archivedRooms\",\n                \"deletedRooms\"\n   \
        \         ],\n            \"properties\": {\n                \"cleanedRooms\": {\n                    \"type\": \"\
        integer\",\n                    \"description\": \"Total rooms processed by cleanup\"\n                },\n      \
        \          \"archivedRooms\": {\n                    \"type\": \"integer\",\n                    \"description\":
        \"Number of rooms archived\"\n                },\n                \"deletedRooms\": {\n                    \"type\"\
        : \"integer\",\n                    \"description\": \"Number of rooms deleted\"\n                }\n            }\n\
        \        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Force cleanup of idle rooms\",\n    \"description\": \"Triggers an immediate
        idle room cleanup cycle, bypassing the normal interval.\",\n    \"tags\": [],\n    \"deprecated\": false,\n    \"\
        operationId\": \"AdminForceCleanup\"\n}"
  /chat/typing:
    post:
      operationId: Typing
      summary: Signal typing activity
      description: >
        Records that the caller is actively typing in the specified room.
        Automatically expires after TypingTimeoutSeconds if not refreshed.
        Accessed via session shortcut published on room join.
        The shortcut's BoundPayload pre-populates roomId and sessionId.
      x-permissions: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TypingRequest'
      responses:
        '200':
          description: Typing state recorded
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/TypingRequest\"\
        ,\n    \"$defs\": {\n        \"TypingRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to signal typing activity in a chat room. Pre-populated via session
        shortcut BoundPayload.\",\n            \"required\": [\n                \"roomId\",\n                \"sessionId\"\
        \n            ],\n            \"properties\": {\n                \"roomId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Room the typing activity applies
        to\"\n                },\n                \"sessionId\": {\n                    \"type\": \"string\",\n          \
        \          \"format\": \"uuid\",\n                    \"description\": \"WebSocket session ID of the typing participant\"\
        \n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: '{}'
      x-endpoint-info-json: "{\n    \"summary\": \"Signal typing activity\",\n    \"description\": \"Records that the caller
        is actively typing in the specified room. Automatically expires after TypingTimeoutSeconds if not refreshed. Accessed
        via session shortcut published on room join. The shortcut's BoundPayload pre-populates roomId and sessionId.\\n\"\
        ,\n    \"tags\": [],\n    \"deprecated\": false,\n    \"operationId\": \"Typing\"\n}"
  /chat/end-typing:
    post:
      operationId: EndTyping
      summary: Signal typing stopped
      description: >
        Immediately clears the caller's typing state in the specified room.
        Accessed via session shortcut published on room join.
        The shortcut's BoundPayload pre-populates roomId and sessionId.
      x-permissions: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EndTypingRequest'
      responses:
        '200':
          description: Typing state cleared
      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/EndTypingRequest\"\
        ,\n    \"$defs\": {\n        \"EndTypingRequest\": {\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"description\": \"Request to signal typing stopped in a chat room. Pre-populated via session
        shortcut BoundPayload.\",\n            \"required\": [\n                \"roomId\",\n                \"sessionId\"\
        \n            ],\n            \"properties\": {\n                \"roomId\": {\n                    \"type\": \"string\"\
        ,\n                    \"format\": \"uuid\",\n                    \"description\": \"Room to clear typing state for\"\
        \n                },\n                \"sessionId\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"uuid\",\n                    \"description\": \"WebSocket session ID of the participant\"\n \
        \               }\n            }\n        }\n    }\n}"
      x-response-schema-json: '{}'
      x-endpoint-info-json: "{\n    \"summary\": \"Signal typing stopped\",\n    \"description\": \"Immediately clears the
        caller's typing state in the specified room. Accessed via session shortcut published on room join. The shortcut's
        BoundPayload pre-populates roomId and sessionId.\\n\",\n    \"tags\": [],\n    \"deprecated\": false,\n    \"operationId\"\
        : \"EndTyping\"\n}"
components:
  schemas:
    MessageFormat:
      type: string
      description: Determines what kind of content a room accepts
      enum:
      - Text
      - Sentiment
      - Emoji
      - Custom
    PersistenceMode:
      type: string
      description: Whether room messages are stored in Redis (TTL) or MySQL (durable)
      enum:
      - Ephemeral
      - Persistent
    RoomTypeStatus:
      type: string
      description: Lifecycle status of a room type definition
      enum:
      - Active
      - Deprecated
    ChatRoomStatus:
      type: string
      description: Current state of a chat room
      enum:
      - Active
      - Locked
      - Archived
    ChatParticipantRole:
      type: string
      description: Participant role within a chat room determining moderation privileges
      enum:
      - Owner
      - Moderator
      - Member
      - ReadOnly
    ContractRoomAction:
      type: string
      description: Action to take on a contract-governed room when contract state changes
      enum:
      - Continue
      - Lock
      - Archive
      - Delete
    ChatRoomLockReason:
      type: string
      description: Reason why a chat room was locked
      enum:
      - ContractFulfilled
      - ContractBreachDetected
      - ContractTerminated
      - ContractExpired
      - Manual
    ValidatorConfig:
      type: object
      additionalProperties: false
      description: Validation rules applied to messages in rooms of this type
      properties:
        maxMessageLength:
          type: integer
          nullable: true
          description: Maximum message length in characters for text and custom formats
        allowedPattern:
          type: string
          nullable: true
          description: Regex pattern for content validation
        allowedValues:
          type: array
          nullable: true
          description: Whitelist of allowed values (emoji codes, etc.)
          items:
            type: string
            description: An allowed value
        requiredFields:
          type: array
          nullable: true
          description: Required JSON fields for Custom format messages
          items:
            type: string
            description: A required field name
        jsonSchema:
          type: string
          nullable: true
          description: Full JSON Schema string for complex Custom format validation
    RegisterRoomTypeRequest:
      type: object
      additionalProperties: false
      description: Request to register a new room type definition
      required:
      - code
      - displayName
      - messageFormat
      - persistenceMode
      - allowAnonymousSenders
      properties:
        code:
          type: string
          minLength: 1
          maxLength: 100
          pattern: '^[a-z][a-z0-9_]*$'
          description: Unique room type code (e.g., "text", "guild_board", "trade_posting")
        displayName:
          type: string
          minLength: 1
          maxLength: 200
          description: Human-readable name for the room type
        description:
          type: string
          nullable: true
          maxLength: 1000
          description: Optional description of the room type
        gameServiceId:
          type: string
          format: uuid
          nullable: true
          description: Game service scope (null for global types)
        messageFormat:
          $ref: '#/components/schemas/MessageFormat'
          description: Content format this room type accepts
        validatorConfig:
          allOf:
          - $ref: '#/components/schemas/ValidatorConfig'
          nullable: true
          description: Validation rules for messages (null uses format defaults)
        persistenceMode:
          $ref: '#/components/schemas/PersistenceMode'
          description: Message storage mode (ephemeral or persistent)
        defaultMaxParticipants:
          type: integer
          nullable: true
          minimum: 1
          description: Default participant limit (null uses service default)
        retentionDays:
          type: integer
          nullable: true
          minimum: 1
          description: Message retention in days (null uses service default)
        defaultContractTemplateId:
          type: string
          format: uuid
          nullable: true
          description: Default contract template for rooms of this type
        allowAnonymousSenders:
          type: boolean
          description: Whether null senderId is allowed in messages
        rateLimitPerMinute:
          type: integer
          nullable: true
          minimum: 1
          description: Messages per minute per participant (null uses service default)
        metadata:
          type: string
          nullable: true
          description: Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field 
            by convention.
    GetRoomTypeRequest:
      type: object
      additionalProperties: false
      description: Request to retrieve a room type by code
      required:
      - code
      properties:
        code:
          type: string
          description: Room type code to look up
        gameServiceId:
          type: string
          format: uuid
          nullable: true
          description: Game service scope (null for global types)
    ListRoomTypesRequest:
      type: object
      additionalProperties: false
      description: Request to list room types with optional filters and pagination
      properties:
        gameServiceId:
          type: string
          format: uuid
          nullable: true
          description: Filter by game service scope
        messageFormat:
          allOf:
          - $ref: '#/components/schemas/MessageFormat'
          nullable: true
          description: Filter by message format
        status:
          allOf:
          - $ref: '#/components/schemas/RoomTypeStatus'
          nullable: true
          description: Filter by status
        page:
          type: integer
          default: 0
          minimum: 0
          description: Page number (zero-based)
        pageSize:
          type: integer
          default: 20
          minimum: 1
          maximum: 100
          description: Number of items per page
    UpdateRoomTypeRequest:
      type: object
      additionalProperties: false
      description: Request to update room type properties (null fields left unchanged)
      required:
      - code
      properties:
        code:
          type: string
          description: Room type code to update
        gameServiceId:
          type: string
          format: uuid
          nullable: true
          description: Game service scope for the type
        displayName:
          type: string
          nullable: true
          description: Updated display name
        description:
          type: string
          nullable: true
          description: Updated description
        validatorConfig:
          allOf:
          - $ref: '#/components/schemas/ValidatorConfig'
          nullable: true
          description: Updated validation rules
        defaultMaxParticipants:
          type: integer
          nullable: true
          description: Updated default participant limit
        retentionDays:
          type: integer
          nullable: true
          description: Updated message retention in days
        defaultContractTemplateId:
          type: string
          format: uuid
          nullable: true
          description: Updated default contract template
        allowAnonymousSenders:
          type: boolean
          nullable: true
          description: Updated anonymous sender policy
        rateLimitPerMinute:
          type: integer
          nullable: true
          description: Updated rate limit
        metadata:
          type: string
          nullable: true
          description: Updated JSON metadata
    DeprecateRoomTypeRequest:
      type: object
      additionalProperties: false
      description: Request to deprecate a room type (prevents new room creation)
      required:
      - code
      properties:
        code:
          type: string
          description: Room type code to deprecate
        gameServiceId:
          type: string
          format: uuid
          nullable: true
          description: Game service scope for the type
    RoomTypeResponse:
      type: object
      additionalProperties: false
      description: Room type definition with current configuration and status
      required:
      - code
      - displayName
      - messageFormat
      - persistenceMode
      - allowAnonymousSenders
      - status
      - createdAt
      properties:
        code:
          type: string
          description: Unique room type code
        displayName:
          type: string
          description: Human-readable name
        description:
          type: string
          nullable: true
          description: Room type description
        gameServiceId:
          type: string
          format: uuid
          nullable: true
          description: Game service scope (null for global)
        messageFormat:
          $ref: '#/components/schemas/MessageFormat'
          description: Content format accepted by this room type
        validatorConfig:
          allOf:
          - $ref: '#/components/schemas/ValidatorConfig'
          nullable: true
          description: Active validation rules
        persistenceMode:
          $ref: '#/components/schemas/PersistenceMode'
          description: Message storage mode
        defaultMaxParticipants:
          type: integer
          nullable: true
          description: Default participant limit
        retentionDays:
          type: integer
          nullable: true
          description: Message retention in days
        defaultContractTemplateId:
          type: string
          format: uuid
          nullable: true
          description: Default contract template ID
        allowAnonymousSenders:
          type: boolean
          description: Whether anonymous senders are allowed
        rateLimitPerMinute:
          type: integer
          nullable: true
          description: Messages per minute limit
        metadata:
          type: string
          nullable: true
          description: Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field 
            by convention.
        status:
          $ref: '#/components/schemas/RoomTypeStatus'
          description: Current lifecycle status of the room type
        createdAt:
          type: string
          format: date-time
          description: When the room type was created
        updatedAt:
          type: string
          format: date-time
          nullable: true
          description: When the room type was last updated
    ListRoomTypesResponse:
      type: object
      additionalProperties: false
      description: Paginated list of room type definitions
      required:
      - items
      - totalCount
      - page
      - pageSize
      properties:
        items:
          type: array
          description: Room type definitions matching the filter
          items:
            $ref: '#/components/schemas/RoomTypeResponse'
        totalCount:
          type: integer
          description: Total number of matching room types
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Items per page
    CreateRoomRequest:
      type: object
      additionalProperties: false
      description: Request to create a new chat room
      required:
      - roomTypeCode
      properties:
        roomTypeCode:
          type: string
          minLength: 1
          maxLength: 100
          description: Room type code determining message format and validation
        sessionId:
          type: string
          format: uuid
          nullable: true
          description: Connect session ID for companion rooms
        contractId:
          type: string
          format: uuid
          nullable: true
          description: Governing contract ID for lifecycle management
        displayName:
          type: string
          nullable: true
          maxLength: 200
          description: Human-readable room name
        maxParticipants:
          type: integer
          nullable: true
          minimum: 1
          description: Participant limit override (null uses type default)
        contractFulfilledAction:
          allOf:
          - $ref: '#/components/schemas/ContractRoomAction'
          nullable: true
          description: Action when governing contract is fulfilled (null uses service default)
        contractBreachAction:
          allOf:
          - $ref: '#/components/schemas/ContractRoomAction'
          nullable: true
          description: Action when governing contract is breached (null uses service default)
        contractTerminatedAction:
          allOf:
          - $ref: '#/components/schemas/ContractRoomAction'
          nullable: true
          description: Action when governing contract is terminated (null uses service default)
        contractExpiredAction:
          allOf:
          - $ref: '#/components/schemas/ContractRoomAction'
          nullable: true
          description: Action when governing contract expires (null uses service default)
        metadata:
          type: string
          nullable: true
          description: Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field 
            by convention.
    GetRoomRequest:
      type: object
      additionalProperties: false
      description: Request to retrieve a room by ID
      required:
      - roomId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID to look up
    ListRoomsRequest:
      type: object
      additionalProperties: false
      description: Request to list rooms with optional filters and pagination
      properties:
        roomTypeCode:
          type: string
          nullable: true
          maxLength: 100
          description: Filter by room type code
        sessionId:
          type: string
          format: uuid
          nullable: true
          description: Filter by Connect session ID
        status:
          allOf:
          - $ref: '#/components/schemas/ChatRoomStatus'
          nullable: true
          description: Filter by room status
        page:
          type: integer
          default: 0
          minimum: 0
          description: Page number (zero-based)
        pageSize:
          type: integer
          default: 20
          minimum: 1
          maximum: 100
          description: Number of items per page
    UpdateRoomRequest:
      type: object
      additionalProperties: false
      description: Request to update room properties (null fields left unchanged)
      required:
      - roomId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID to update
        displayName:
          type: string
          nullable: true
          maxLength: 200
          description: Updated room name
        maxParticipants:
          type: integer
          nullable: true
          minimum: 1
          description: Updated participant limit
        metadata:
          type: string
          nullable: true
          description: Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field 
            by convention.
    DeleteRoomRequest:
      type: object
      additionalProperties: false
      description: Request to permanently delete a room and all its messages
      required:
      - roomId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID to delete
    ArchiveRoomRequest:
      type: object
      additionalProperties: false
      description: Request to archive a room (makes it read-only)
      required:
      - roomId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID to archive
    ChatRoomResponse:
      type: object
      additionalProperties: false
      description: Chat room details including status and participant count
      required:
      - roomId
      - roomTypeCode
      - status
      - participantCount
      - isArchived
      - createdAt
      properties:
        roomId:
          type: string
          format: uuid
          description: Unique room identifier
        roomTypeCode:
          type: string
          description: Room type code
        sessionId:
          type: string
          format: uuid
          nullable: true
          description: Connect session ID if companion room
        contractId:
          type: string
          format: uuid
          nullable: true
          description: Governing contract ID
        displayName:
          type: string
          nullable: true
          description: Human-readable room name
        status:
          $ref: '#/components/schemas/ChatRoomStatus'
          description: Current room status
        participantCount:
          type: integer
          description: Current number of participants
        maxParticipants:
          type: integer
          nullable: true
          description: Maximum participant limit
        isArchived:
          type: boolean
          description: Whether the room has been archived
        createdAt:
          type: string
          format: date-time
          description: When the room was created
        metadata:
          type: string
          nullable: true
          description: Client-only metadata stored as JSON string. No Bannou plugin reads specific keys from this field 
            by convention.
    ListRoomsResponse:
      type: object
      additionalProperties: false
      description: Paginated list of chat rooms
      required:
      - items
      - totalCount
      - page
      - pageSize
      properties:
        items:
          type: array
          description: Rooms matching the filter
          items:
            $ref: '#/components/schemas/ChatRoomResponse'
        totalCount:
          type: integer
          description: Total number of matching rooms
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Items per page
    JoinRoomRequest:
      type: object
      additionalProperties: false
      description: Request to join a chat room as a participant
      required:
      - roomId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID to join
        senderType:
          type: string
          nullable: true
          description: Opaque sender type identifier (e.g., "session", "character", "system")
        senderId:
          type: string
          format: uuid
          nullable: true
          description: Sender entity ID (nullable for anonymous)
        displayName:
          type: string
          nullable: true
          maxLength: 200
          description: Human-readable display name
        role:
          allOf:
          - $ref: '#/components/schemas/ChatParticipantRole'
          nullable: true
          description: Requested role (defaults to Member if not specified)
    LeaveRoomRequest:
      type: object
      additionalProperties: false
      description: Request to leave a chat room
      required:
      - roomId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID to leave
    ListParticipantsRequest:
      type: object
      additionalProperties: false
      description: Request to list participants in a room
      required:
      - roomId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID to list participants for
    ParticipantInfo:
      type: object
      additionalProperties: false
      description: Details about a chat room participant
      required:
      - sessionId
      - role
      - joinedAt
      - isMuted
      properties:
        sessionId:
          type: string
          format: uuid
          description: Participant Connect session ID
        senderType:
          type: string
          nullable: true
          description: Opaque sender type
        senderId:
          type: string
          format: uuid
          nullable: true
          description: Sender entity ID
        displayName:
          type: string
          nullable: true
          description: Display name
        role:
          $ref: '#/components/schemas/ChatParticipantRole'
          description: Participant role in the room
        joinedAt:
          type: string
          format: date-time
          description: When the participant joined
        isMuted:
          type: boolean
          description: Whether the participant is currently muted
    ParticipantsResponse:
      type: object
      additionalProperties: false
      description: List of participants in a room
      required:
      - roomId
      - participants
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID
        participants:
          type: array
          description: Current room participants
          items:
            $ref: '#/components/schemas/ParticipantInfo'
    KickParticipantRequest:
      type: object
      additionalProperties: false
      description: Request to remove a participant from a room
      required:
      - roomId
      - targetSessionId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID
        targetSessionId:
          type: string
          format: uuid
          description: Session ID of participant to kick
        reason:
          type: string
          nullable: true
          description: Optional reason for the kick
    BanParticipantRequest:
      type: object
      additionalProperties: false
      description: Request to ban a participant from a room
      required:
      - roomId
      - targetSessionId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID
        targetSessionId:
          type: string
          format: uuid
          description: Session ID of participant to ban
        reason:
          type: string
          nullable: true
          maxLength: 500
          description: Optional reason for the ban
        durationMinutes:
          type: integer
          nullable: true
          minimum: 1
          description: Ban duration in minutes (null for permanent)
    UnbanParticipantRequest:
      type: object
      additionalProperties: false
      description: Request to remove a ban for a participant
      required:
      - roomId
      - targetSessionId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID
        targetSessionId:
          type: string
          format: uuid
          description: Session ID of participant to unban
    MuteParticipantRequest:
      type: object
      additionalProperties: false
      description: Request to mute a participant in a room
      required:
      - roomId
      - targetSessionId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID
        targetSessionId:
          type: string
          format: uuid
          description: Session ID of participant to mute
        durationMinutes:
          type: integer
          nullable: true
          minimum: 1
          description: Mute duration in minutes (null for permanent)
    SendMessageContent:
      type: object
      additionalProperties: false
      description: >
        Message content discriminated by the room message format.
        Exactly one content field group must be set, matching the room type format.
      properties:
        text:
          type: string
          nullable: true
          description: Text content (for Text format rooms)
        sentimentCategory:
          allOf:
          - $ref: 'common-api.yaml#/components/schemas/SentimentCategory'
          nullable: true
          description: Sentiment category (for Sentiment format rooms)
        sentimentIntensity:
          type: number
          format: float
          nullable: true
          minimum: 0.0
          maximum: 1.0
          description: Sentiment intensity 0.0-1.0 (for Sentiment format rooms)
        emojiCode:
          type: string
          nullable: true
          description: Emoji code (Unicode or custom) for Emoji format rooms
        emojiSetId:
          type: string
          format: uuid
          nullable: true
          description: Custom emoji set reference (null for Unicode)
        customPayload:
          type: string
          nullable: true
          description: JSON string validated against room type validator config (for Custom format rooms)
    SendMessageRequest:
      type: object
      additionalProperties: false
      description: Request to send a message to a chat room
      required:
      - roomId
      - content
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID to send the message to
        content:
          $ref: '#/components/schemas/SendMessageContent'
          description: Message content matching the room format
        senderType:
          type: string
          nullable: true
          description: Opaque sender type for this message
        senderId:
          type: string
          format: uuid
          nullable: true
          description: Sender entity ID
        displayName:
          type: string
          nullable: true
          description: Sender display name for this message
    SendMessageBatchRequest:
      type: object
      additionalProperties: false
      description: Request to send multiple messages to a room atomically
      required:
      - roomId
      - messages
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID to send messages to
        messages:
          type: array
          description: Messages to send atomically
          items:
            $ref: '#/components/schemas/BatchMessageEntry'
    BatchMessageEntry:
      type: object
      additionalProperties: false
      description: Individual message entry in a batch send operation
      required:
      - content
      properties:
        content:
          $ref: '#/components/schemas/SendMessageContent'
          description: Message content matching the room format
        senderType:
          type: string
          nullable: true
          description: Opaque sender type
        senderId:
          type: string
          format: uuid
          nullable: true
          description: Sender entity ID
        displayName:
          type: string
          nullable: true
          description: Sender display name
    SendMessageBatchResponse:
      type: object
      additionalProperties: false
      description: Result of a batch message send operation with per-message failure tracking
      required:
      - messageCount
      - failed
      properties:
        messageCount:
          type: integer
          description: Number of messages successfully sent
        failed:
          type: array
          items:
            $ref: '#/components/schemas/BatchMessageFailure'
          description: Details of messages that failed to send (empty array when all succeeded)
    BatchMessageFailure:
      type: object
      additionalProperties: false
      description: Details of a single message that failed in a batch send operation
      required:
      - index
      - error
      properties:
        index:
          type: integer
          description: Zero-based index of the failed message in the request messages array
        error:
          type: string
          description: Human-readable error reason
    ChatMessageResponse:
      type: object
      additionalProperties: false
      description: A chat message with metadata and content
      required:
      - messageId
      - roomId
      - timestamp
      - roomTypeCode
      - isPinned
      properties:
        messageId:
          type: string
          format: uuid
          description: Unique message identifier
        roomId:
          type: string
          format: uuid
          description: Room the message belongs to
        senderType:
          type: string
          nullable: true
          description: Opaque sender type
        senderId:
          type: string
          format: uuid
          nullable: true
          description: Sender entity ID
        displayName:
          type: string
          nullable: true
          description: Sender display name
        timestamp:
          type: string
          format: date-time
          description: When the message was sent
        roomTypeCode:
          type: string
          description: Room type code for this message
        content:
          allOf:
          - $ref: '#/components/schemas/SendMessageContent'
          nullable: true
          description: Message content (null for deleted messages)
        isPinned:
          type: boolean
          description: Whether the message is pinned
    MessageHistoryRequest:
      type: object
      additionalProperties: false
      description: Request to retrieve message history for a room with cursor pagination
      required:
      - roomId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID to get history for
        before:
          type: string
          nullable: true
          description: Cursor for pagination (message ID to fetch before)
        limit:
          type: integer
          default: 50
          minimum: 1
          maximum: 200
          description: Maximum number of messages to return
    MessageHistoryResponse:
      type: object
      additionalProperties: false
      description: Paginated message history with cursor for next page
      required:
      - messages
      - hasMore
      properties:
        messages:
          type: array
          description: Messages in reverse chronological order
          items:
            $ref: '#/components/schemas/ChatMessageResponse'
        hasMore:
          type: boolean
          description: Whether more messages exist before the returned set
        nextCursor:
          type: string
          nullable: true
          description: Cursor for fetching the next page
    DeleteMessageRequest:
      type: object
      additionalProperties: false
      description: Request to delete a message from a room
      required:
      - roomId
      - messageId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room the message belongs to
        messageId:
          type: string
          format: uuid
          description: Message ID to delete
    PinMessageRequest:
      type: object
      additionalProperties: false
      description: Request to pin a message in a room
      required:
      - roomId
      - messageId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room the message belongs to
        messageId:
          type: string
          format: uuid
          description: Message ID to pin
    UnpinMessageRequest:
      type: object
      additionalProperties: false
      description: Request to unpin a message in a room
      required:
      - roomId
      - messageId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room the message belongs to
        messageId:
          type: string
          format: uuid
          description: Message ID to unpin
    SearchMessagesRequest:
      type: object
      additionalProperties: false
      description: Request to full-text search messages in a persistent room
      required:
      - roomId
      - query
      properties:
        roomId:
          type: string
          format: uuid
          description: Room ID to search in (must be a persistent room)
        query:
          type: string
          minLength: 1
          maxLength: 500
          description: Full-text search query string
        limit:
          type: integer
          default: 20
          minimum: 1
          maximum: 100
          description: Maximum number of results to return
    SearchMessagesResponse:
      type: object
      additionalProperties: false
      description: Full-text search results with total match count
      required:
      - messages
      - totalMatches
      properties:
        messages:
          type: array
          description: Messages matching the search query
          items:
            $ref: '#/components/schemas/ChatMessageResponse'
        totalMatches:
          type: integer
          description: Total number of matching messages
    AdminListRoomsRequest:
      type: object
      additionalProperties: false
      description: Admin request to list all rooms with filters and pagination
      properties:
        roomTypeCode:
          type: string
          nullable: true
          maxLength: 100
          description: Filter by room type
        status:
          allOf:
          - $ref: '#/components/schemas/ChatRoomStatus'
          nullable: true
          description: Filter by status
        page:
          type: integer
          default: 0
          minimum: 0
          description: Page number (zero-based)
        pageSize:
          type: integer
          default: 50
          minimum: 1
          maximum: 200
          description: Number of items per page
    AdminGetStatsRequest:
      type: object
      additionalProperties: false
      description: Empty request body for stats endpoint
      properties: {}
    AdminStatsResponse:
      type: object
      additionalProperties: false
      description: System-wide chat statistics for admin monitoring
      required:
      - totalRooms
      - activeRooms
      - lockedRooms
      - archivedRooms
      - totalParticipants
      - totalRoomTypes
      properties:
        totalRooms:
          type: integer
          description: Total number of rooms in the system
        activeRooms:
          type: integer
          description: Number of active rooms
        lockedRooms:
          type: integer
          description: Number of locked rooms
        archivedRooms:
          type: integer
          description: Number of archived rooms
        totalParticipants:
          type: integer
          description: Total participants across all rooms
        totalRoomTypes:
          type: integer
          description: Total registered room types
    AdminForceCleanupRequest:
      type: object
      additionalProperties: false
      description: Empty request body for force cleanup
      properties: {}
    AdminCleanupResponse:
      type: object
      additionalProperties: false
      description: Result of admin-triggered idle room cleanup
      required:
      - cleanedRooms
      - archivedRooms
      - deletedRooms
      properties:
        cleanedRooms:
          type: integer
          description: Total rooms processed by cleanup
        archivedRooms:
          type: integer
          description: Number of rooms archived
        deletedRooms:
          type: integer
          description: Number of rooms deleted
    TypingRequest:
      type: object
      additionalProperties: false
      description: Request to signal typing activity in a chat room. Pre-populated via session shortcut BoundPayload.
      required:
      - roomId
      - sessionId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room the typing activity applies to
        sessionId:
          type: string
          format: uuid
          description: WebSocket session ID of the typing participant
    EndTypingRequest:
      type: object
      additionalProperties: false
      description: Request to signal typing stopped in a chat room. Pre-populated via session shortcut BoundPayload.
      required:
      - roomId
      - sessionId
      properties:
        roomId:
          type: string
          format: uuid
          description: Room to clear typing state for
        sessionId:
          type: string
          format: uuid
          description: WebSocket session ID of the participant
