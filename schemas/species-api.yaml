openapi: 3.0.0
info:
  title: Bannou Species Service API
  description: |
    Species management service for Arcadia game world.

    **POST-Only API Pattern**: This API uses POST for all operations to support zero-copy
    WebSocket routing. Path parameters are passed in request bodies instead of URLs.
    See docs/BANNOU_DESIGN.md for architectural rationale.

    Species define the playable and NPC races in each realm. Each species has unique
    traits, abilities, and cultural characteristics. Species are realm-specific,
    allowing different realms to have distinct species populations.

    **Realm Association**: Each species belongs to one or more realms, enabling
    cross-realm species (e.g., humans in all realms) and realm-specific species
    (e.g., elves only in Arcadia).

    **Trait System**: Species define base trait modifiers that affect character
    creation and development.

    **Deprecation System**: Species can be deprecated instead of deleted directly.
    Deprecated species remain queryable but cannot be used for new characters.
    Use the merge endpoint to migrate characters from deprecated species to active ones.
    The special VOID species serves as a sink for characters whose species should be removed.

    **Two-Step Deletion**:
    1. Deprecate the species (soft delete, prevents new usage)
    2. Merge deprecated species into another species (or VOID to effectively delete)
    3. Optionally hard-delete the deprecated species after merge

    **NRT Compliance**: AI agents MUST review docs/NRT-SCHEMA-RULES.md before modifying this schema. Optional reference types require `nullable: true`.
  version: 2.0.0
servers:
- url: http://localhost:5012
  description: Bannou service endpoint (internal only)

# NOTE: x-lifecycle moved to species-events.yaml

paths:
  /species/get:
    post:
      summary: Get species by ID
      operationId: getSpecies
      tags:
      - Species
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetSpeciesRequest'
      responses:
        '200':
          description: Species retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpeciesResponse'
        '404':
          description: Species not found

      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetSpeciesRequest\"\
        ,\n    \"$defs\": {\n        \"GetSpeciesRequest\": {\n            \"description\": \"Request to retrieve a single
        species by its unique identifier\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"speciesId\"\n            ],\n            \"properties\": {\n     \
        \           \"speciesId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"Unique identifier of the species\"\n                }\n            }\n \
        \       }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SpeciesResponse\"\
        ,\n    \"$defs\": {\n        \"SpeciesResponse\": {\n            \"description\": \"Complete species data including
        all attributes and realm associations\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"speciesId\",\n                \"code\",\n               \
        \ \"name\",\n                \"isPlayable\",\n                \"isDeprecated\",\n                \"createdAt\",\n\
        \                \"updatedAt\"\n            ],\n            \"properties\": {\n                \"speciesId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier of the species\"\n                },\n                \"code\": {\n                    \"type\"\
        : \"string\",\n                    \"description\": \"Unique code for the species (e.g., \\\"HUMAN\\\", \\\"ELF\\\"\
        )\"\n                },\n                \"name\": {\n                    \"type\": \"string\",\n                \
        \    \"description\": \"Display name for the species\"\n                },\n                \"description\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Description of the species\"\n                },\n                \"category\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Category for grouping
        (e.g., \\\"HUMANOID\\\", \\\"BEAST\\\", \\\"MAGICAL\\\")\"\n                },\n                \"isPlayable\": {\n\
        \                    \"type\": \"boolean\",\n                    \"description\": \"Whether players can create characters
        of this species\"\n                },\n                \"isDeprecated\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether this species is deprecated and cannot be used for new characters\"\
        \n                },\n                \"deprecatedAt\": {\n                    \"type\": \"string\",\n           \
        \         \"format\": \"date-time\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Timestamp when this species was deprecated\"\n                },\n                \"deprecationReason\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Optional reason for deprecation\"\n                },\n                \"baseLifespan\": {\n                 \
        \   \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Base lifespan
        in game years\"\n                },\n                \"maturityAge\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Age at which the species reaches
        maturity\"\n                },\n                \"traitModifiers\": {\n                    \"type\": \"object\",\n\
        \                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Base trait modifiers for this species\"\n                },\n                \"realmIds\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\",\n                        \"format\": \"uuid\"\n                    },\n                    \"description\"\
        : \"Realms where this species is available\"\n                },\n                \"metadata\": {\n              \
        \      \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Additional metadata for the species\"\n                },\n      \
        \          \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was created\"\n                },\n         \
        \       \"updatedAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was last updated\"\n                }\n     \
        \       }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get species by ID\",\n    \"description\": \"\",\n    \"tags\": [\n   \
        \     \"Species\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"getSpecies\"\n}"
  /species/get-by-code:
    post:
      summary: Get species by code
      description: Retrieve a species using its unique code (e.g., "HUMAN", "ELF", "DWARF")
      operationId: getSpeciesByCode
      tags:
      - Species
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetSpeciesByCodeRequest'
      responses:
        '200':
          description: Species retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpeciesResponse'
        '404':
          description: Species not found

      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/GetSpeciesByCodeRequest\"\
        ,\n    \"$defs\": {\n        \"GetSpeciesByCodeRequest\": {\n            \"description\": \"Request to retrieve a
        species by its unique code identifier\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"code\"\n            ],\n            \"properties\": {\n \
        \               \"code\": {\n                    \"type\": \"string\",\n                    \"minLength\": 1,\n  \
        \                  \"maxLength\": 50,\n                    \"pattern\": \"^[A-Z][A-Z0-9_]*$\",\n                 \
        \   \"description\": \"Unique code for the species (e.g., \\\"HUMAN\\\", \\\"ELF\\\", \\\"DWARF\\\")\"\n         \
        \       }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SpeciesResponse\"\
        ,\n    \"$defs\": {\n        \"SpeciesResponse\": {\n            \"description\": \"Complete species data including
        all attributes and realm associations\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"speciesId\",\n                \"code\",\n               \
        \ \"name\",\n                \"isPlayable\",\n                \"isDeprecated\",\n                \"createdAt\",\n\
        \                \"updatedAt\"\n            ],\n            \"properties\": {\n                \"speciesId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier of the species\"\n                },\n                \"code\": {\n                    \"type\"\
        : \"string\",\n                    \"description\": \"Unique code for the species (e.g., \\\"HUMAN\\\", \\\"ELF\\\"\
        )\"\n                },\n                \"name\": {\n                    \"type\": \"string\",\n                \
        \    \"description\": \"Display name for the species\"\n                },\n                \"description\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Description of the species\"\n                },\n                \"category\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Category for grouping
        (e.g., \\\"HUMANOID\\\", \\\"BEAST\\\", \\\"MAGICAL\\\")\"\n                },\n                \"isPlayable\": {\n\
        \                    \"type\": \"boolean\",\n                    \"description\": \"Whether players can create characters
        of this species\"\n                },\n                \"isDeprecated\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether this species is deprecated and cannot be used for new characters\"\
        \n                },\n                \"deprecatedAt\": {\n                    \"type\": \"string\",\n           \
        \         \"format\": \"date-time\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Timestamp when this species was deprecated\"\n                },\n                \"deprecationReason\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Optional reason for deprecation\"\n                },\n                \"baseLifespan\": {\n                 \
        \   \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Base lifespan
        in game years\"\n                },\n                \"maturityAge\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Age at which the species reaches
        maturity\"\n                },\n                \"traitModifiers\": {\n                    \"type\": \"object\",\n\
        \                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Base trait modifiers for this species\"\n                },\n                \"realmIds\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\",\n                        \"format\": \"uuid\"\n                    },\n                    \"description\"\
        : \"Realms where this species is available\"\n                },\n                \"metadata\": {\n              \
        \      \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Additional metadata for the species\"\n                },\n      \
        \          \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was created\"\n                },\n         \
        \       \"updatedAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was last updated\"\n                }\n     \
        \       }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Get species by code\",\n    \"description\": \"Retrieve a species using
        its unique code (e.g., \\\"HUMAN\\\", \\\"ELF\\\", \\\"DWARF\\\")\",\n    \"tags\": [\n        \"Species\"\n    ],\n\
        \    \"deprecated\": false,\n    \"operationId\": \"getSpeciesByCode\"\n}"
  /species/list:
    post:
      summary: List all species
      description: Retrieve all species with optional realm filtering
      operationId: listSpecies
      tags:
      - Species
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListSpeciesRequest'
      responses:
        '200':
          description: Species retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpeciesListResponse'

      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListSpeciesRequest\"\
        ,\n    \"$defs\": {\n        \"ListSpeciesRequest\": {\n            \"description\": \"Request to list species with
        optional filtering and pagination\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"properties\": {\n                \"category\": {\n                    \"type\": \"string\",\n     \
        \               \"nullable\": true,\n                    \"description\": \"Filter by category (e.g., \\\"HUMANOID\\\
        \", \\\"BEAST\\\", \\\"MAGICAL\\\")\"\n                },\n                \"isPlayable\": {\n                   \
        \ \"type\": \"boolean\",\n                    \"nullable\": true,\n                    \"description\": \"Filter by
        playable status\"\n                },\n                \"includeDeprecated\": {\n                    \"type\": \"\
        boolean\",\n                    \"default\": false,\n                    \"description\": \"Whether to include deprecated
        species in the response\"\n                },\n                \"page\": {\n                    \"type\": \"integer\"\
        ,\n                    \"minimum\": 1,\n                    \"default\": 1,\n                    \"description\":
        \"Page number for pagination (1-based)\"\n                },\n                \"pageSize\": {\n                  \
        \  \"type\": \"integer\",\n                    \"minimum\": 1,\n                    \"maximum\": 100,\n          \
        \          \"default\": 20,\n                    \"description\": \"Number of items per page\"\n                }\n\
        \            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SpeciesListResponse\"\
        ,\n    \"$defs\": {\n        \"SpeciesListResponse\": {\n            \"description\": \"Paginated list of species
        with total count for pagination\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"species\",\n                \"totalCount\"\n            ],\n     \
        \       \"properties\": {\n                \"species\": {\n                    \"type\": \"array\",\n            \
        \        \"items\": {\n                        \"$ref\": \"#/$defs/SpeciesResponse\"\n                    },\n   \
        \                 \"description\": \"List of species matching the query\"\n                },\n                \"\
        totalCount\": {\n                    \"type\": \"integer\",\n                    \"description\": \"Total number of
        species matching the query (for pagination)\"\n                },\n                \"page\": {\n                 \
        \   \"type\": \"integer\",\n                    \"description\": \"Current page number\"\n                },\n   \
        \             \"pageSize\": {\n                    \"type\": \"integer\",\n                    \"description\": \"\
        Number of items per page\"\n                }\n            }\n        },\n        \"SpeciesResponse\": {\n       \
        \     \"description\": \"Complete species data including all attributes and realm associations\",\n            \"\
        type\": \"object\",\n            \"additionalProperties\": false,\n            \"required\": [\n                \"\
        speciesId\",\n                \"code\",\n                \"name\",\n                \"isPlayable\",\n            \
        \    \"isDeprecated\",\n                \"createdAt\",\n                \"updatedAt\"\n            ],\n          \
        \  \"properties\": {\n                \"speciesId\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"uuid\",\n                    \"description\": \"Unique identifier of the species\"\n        \
        \        },\n                \"code\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Unique code for the species (e.g., \\\"HUMAN\\\", \\\"ELF\\\")\"\n                },\n                \"name\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Display name for the species\"\
        \n                },\n                \"description\": {\n                    \"type\": \"string\",\n            \
        \        \"nullable\": true,\n                    \"description\": \"Description of the species\"\n              \
        \  },\n                \"category\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Category for grouping (e.g., \\\"HUMANOID\\\", \\\"BEAST\\\", \\\"\
        MAGICAL\\\")\"\n                },\n                \"isPlayable\": {\n                    \"type\": \"boolean\",\n\
        \                    \"description\": \"Whether players can create characters of this species\"\n                },\n\
        \                \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\"\
        : \"Whether this species is deprecated and cannot be used for new characters\"\n                },\n             \
        \   \"deprecatedAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Timestamp when this species was
        deprecated\"\n                },\n                \"deprecationReason\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional reason for deprecation\"\
        \n                },\n                \"baseLifespan\": {\n                    \"type\": \"integer\",\n          \
        \          \"nullable\": true,\n                    \"description\": \"Base lifespan in game years\"\n           \
        \     },\n                \"maturityAge\": {\n                    \"type\": \"integer\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Age at which the species reaches maturity\"\n                },\n\
        \                \"traitModifiers\": {\n                    \"type\": \"object\",\n                    \"additionalProperties\"\
        : true,\n                    \"nullable\": true,\n                    \"description\": \"Base trait modifiers for
        this species\"\n                },\n                \"realmIds\": {\n                    \"type\": \"array\",\n  \
        \                  \"items\": {\n                        \"type\": \"string\",\n                        \"format\"\
        : \"uuid\"\n                    },\n                    \"description\": \"Realms where this species is available\"\
        \n                },\n                \"metadata\": {\n                    \"type\": \"object\",\n               \
        \     \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Additional metadata for the species\"\n                },\n                \"createdAt\": {\n                \
        \    \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"\
        Timestamp when the species was created\"\n                },\n                \"updatedAt\": {\n                 \
        \   \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"\
        Timestamp when the species was last updated\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"List all species\",\n    \"description\": \"Retrieve all species with optional
        realm filtering\",\n    \"tags\": [\n        \"Species\"\n    ],\n    \"deprecated\": false,\n    \"operationId\"\
        : \"listSpecies\"\n}"
  /species/list-by-realm:
    post:
      summary: List species available in a realm
      description: Retrieve all species that are available in a specific realm
      operationId: listSpeciesByRealm
      tags:
      - Species
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListSpeciesByRealmRequest'
      responses:
        '200':
          description: Species retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpeciesListResponse'
        '404':
          description: Realm not found

      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/ListSpeciesByRealmRequest\"\
        ,\n    \"$defs\": {\n        \"ListSpeciesByRealmRequest\": {\n            \"description\": \"Request to list species
        available within a specific realm\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"realmId\"\n            ],\n            \"properties\": {\n       \
        \         \"realmId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n \
        \                   \"description\": \"ID of the realm to filter by\"\n                },\n                \"isPlayable\"\
        : {\n                    \"type\": \"boolean\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Filter by playable status\"\n                },\n                \"page\": {\n                    \"type\": \"\
        integer\",\n                    \"minimum\": 1,\n                    \"default\": 1,\n                    \"description\"\
        : \"Page number for pagination (1-based)\"\n                },\n                \"pageSize\": {\n                \
        \    \"type\": \"integer\",\n                    \"minimum\": 1,\n                    \"maximum\": 100,\n        \
        \            \"default\": 20,\n                    \"description\": \"Number of items per page\"\n               \
        \ }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SpeciesListResponse\"\
        ,\n    \"$defs\": {\n        \"SpeciesListResponse\": {\n            \"description\": \"Paginated list of species
        with total count for pagination\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"species\",\n                \"totalCount\"\n            ],\n     \
        \       \"properties\": {\n                \"species\": {\n                    \"type\": \"array\",\n            \
        \        \"items\": {\n                        \"$ref\": \"#/$defs/SpeciesResponse\"\n                    },\n   \
        \                 \"description\": \"List of species matching the query\"\n                },\n                \"\
        totalCount\": {\n                    \"type\": \"integer\",\n                    \"description\": \"Total number of
        species matching the query (for pagination)\"\n                },\n                \"page\": {\n                 \
        \   \"type\": \"integer\",\n                    \"description\": \"Current page number\"\n                },\n   \
        \             \"pageSize\": {\n                    \"type\": \"integer\",\n                    \"description\": \"\
        Number of items per page\"\n                }\n            }\n        },\n        \"SpeciesResponse\": {\n       \
        \     \"description\": \"Complete species data including all attributes and realm associations\",\n            \"\
        type\": \"object\",\n            \"additionalProperties\": false,\n            \"required\": [\n                \"\
        speciesId\",\n                \"code\",\n                \"name\",\n                \"isPlayable\",\n            \
        \    \"isDeprecated\",\n                \"createdAt\",\n                \"updatedAt\"\n            ],\n          \
        \  \"properties\": {\n                \"speciesId\": {\n                    \"type\": \"string\",\n              \
        \      \"format\": \"uuid\",\n                    \"description\": \"Unique identifier of the species\"\n        \
        \        },\n                \"code\": {\n                    \"type\": \"string\",\n                    \"description\"\
        : \"Unique code for the species (e.g., \\\"HUMAN\\\", \\\"ELF\\\")\"\n                },\n                \"name\"\
        : {\n                    \"type\": \"string\",\n                    \"description\": \"Display name for the species\"\
        \n                },\n                \"description\": {\n                    \"type\": \"string\",\n            \
        \        \"nullable\": true,\n                    \"description\": \"Description of the species\"\n              \
        \  },\n                \"category\": {\n                    \"type\": \"string\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Category for grouping (e.g., \\\"HUMANOID\\\", \\\"BEAST\\\", \\\"\
        MAGICAL\\\")\"\n                },\n                \"isPlayable\": {\n                    \"type\": \"boolean\",\n\
        \                    \"description\": \"Whether players can create characters of this species\"\n                },\n\
        \                \"isDeprecated\": {\n                    \"type\": \"boolean\",\n                    \"description\"\
        : \"Whether this species is deprecated and cannot be used for new characters\"\n                },\n             \
        \   \"deprecatedAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Timestamp when this species was
        deprecated\"\n                },\n                \"deprecationReason\": {\n                    \"type\": \"string\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Optional reason for deprecation\"\
        \n                },\n                \"baseLifespan\": {\n                    \"type\": \"integer\",\n          \
        \          \"nullable\": true,\n                    \"description\": \"Base lifespan in game years\"\n           \
        \     },\n                \"maturityAge\": {\n                    \"type\": \"integer\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Age at which the species reaches maturity\"\n                },\n\
        \                \"traitModifiers\": {\n                    \"type\": \"object\",\n                    \"additionalProperties\"\
        : true,\n                    \"nullable\": true,\n                    \"description\": \"Base trait modifiers for
        this species\"\n                },\n                \"realmIds\": {\n                    \"type\": \"array\",\n  \
        \                  \"items\": {\n                        \"type\": \"string\",\n                        \"format\"\
        : \"uuid\"\n                    },\n                    \"description\": \"Realms where this species is available\"\
        \n                },\n                \"metadata\": {\n                    \"type\": \"object\",\n               \
        \     \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Additional metadata for the species\"\n                },\n                \"createdAt\": {\n                \
        \    \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"\
        Timestamp when the species was created\"\n                },\n                \"updatedAt\": {\n                 \
        \   \"type\": \"string\",\n                    \"format\": \"date-time\",\n                    \"description\": \"\
        Timestamp when the species was last updated\"\n                }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"List species available in a realm\",\n    \"description\": \"Retrieve all
        species that are available in a specific realm\",\n    \"tags\": [\n        \"Species\"\n    ],\n    \"deprecated\"\
        : false,\n    \"operationId\": \"listSpeciesByRealm\"\n}"
  /species/create:
    post:
      summary: Create new species
      operationId: createSpecies
      tags:
      - Species Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSpeciesRequest'
      responses:
        '200':
          description: Species created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpeciesResponse'
        '400':
          description: Invalid species data
        '409':
          description: Species with this code already exists

      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/CreateSpeciesRequest\"\
        ,\n    \"$defs\": {\n        \"CreateSpeciesRequest\": {\n            \"description\": \"Request to create a new species
        with its attributes and realm associations\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"code\",\n                \"name\"\n            ],\n     \
        \       \"properties\": {\n                \"code\": {\n                    \"type\": \"string\",\n              \
        \      \"minLength\": 1,\n                    \"maxLength\": 50,\n                    \"pattern\": \"^[A-Z][A-Z0-9_]*$\"\
        ,\n                    \"description\": \"Unique code for the species (e.g., \\\"HUMAN\\\", \\\"ELF\\\")\"\n     \
        \           },\n                \"name\": {\n                    \"type\": \"string\",\n                    \"minLength\"\
        : 1,\n                    \"maxLength\": 100,\n                    \"description\": \"Display name for the species\"\
        \n                },\n                \"description\": {\n                    \"type\": \"string\",\n            \
        \        \"maxLength\": 1000,\n                    \"nullable\": true,\n                    \"description\": \"Description
        of the species\"\n                },\n                \"category\": {\n                    \"type\": \"string\",\n\
        \                    \"maxLength\": 50,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Category for grouping (e.g., \\\"HUMANOID\\\", \\\"BEAST\\\", \\\"MAGICAL\\\")\"\n                },\n       \
        \         \"isPlayable\": {\n                    \"type\": \"boolean\",\n                    \"default\": true,\n\
        \                    \"description\": \"Whether players can create characters of this species\"\n                },\n\
        \                \"baseLifespan\": {\n                    \"type\": \"integer\",\n                    \"minimum\"\
        : 1,\n                    \"nullable\": true,\n                    \"description\": \"Base lifespan in game years\"\
        \n                },\n                \"maturityAge\": {\n                    \"type\": \"integer\",\n           \
        \         \"minimum\": 0,\n                    \"nullable\": true,\n                    \"description\": \"Age at
        which the species reaches maturity\"\n                },\n                \"traitModifiers\": {\n                \
        \    \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Base trait modifiers for this species (JSON)\"\n                },\n\
        \                \"realmIds\": {\n                    \"type\": \"array\",\n                    \"items\": {\n   \
        \                     \"type\": \"string\",\n                        \"format\": \"uuid\"\n                    },\n\
        \                    \"nullable\": true,\n                    \"description\": \"Initial realms where this species
        is available (null to skip realm assignment)\"\n                },\n                \"metadata\": {\n            \
        \        \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Additional metadata for the species\"\n                }\n       \
        \     }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SpeciesResponse\"\
        ,\n    \"$defs\": {\n        \"SpeciesResponse\": {\n            \"description\": \"Complete species data including
        all attributes and realm associations\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"speciesId\",\n                \"code\",\n               \
        \ \"name\",\n                \"isPlayable\",\n                \"isDeprecated\",\n                \"createdAt\",\n\
        \                \"updatedAt\"\n            ],\n            \"properties\": {\n                \"speciesId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier of the species\"\n                },\n                \"code\": {\n                    \"type\"\
        : \"string\",\n                    \"description\": \"Unique code for the species (e.g., \\\"HUMAN\\\", \\\"ELF\\\"\
        )\"\n                },\n                \"name\": {\n                    \"type\": \"string\",\n                \
        \    \"description\": \"Display name for the species\"\n                },\n                \"description\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Description of the species\"\n                },\n                \"category\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Category for grouping
        (e.g., \\\"HUMANOID\\\", \\\"BEAST\\\", \\\"MAGICAL\\\")\"\n                },\n                \"isPlayable\": {\n\
        \                    \"type\": \"boolean\",\n                    \"description\": \"Whether players can create characters
        of this species\"\n                },\n                \"isDeprecated\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether this species is deprecated and cannot be used for new characters\"\
        \n                },\n                \"deprecatedAt\": {\n                    \"type\": \"string\",\n           \
        \         \"format\": \"date-time\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Timestamp when this species was deprecated\"\n                },\n                \"deprecationReason\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Optional reason for deprecation\"\n                },\n                \"baseLifespan\": {\n                 \
        \   \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Base lifespan
        in game years\"\n                },\n                \"maturityAge\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Age at which the species reaches
        maturity\"\n                },\n                \"traitModifiers\": {\n                    \"type\": \"object\",\n\
        \                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Base trait modifiers for this species\"\n                },\n                \"realmIds\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\",\n                        \"format\": \"uuid\"\n                    },\n                    \"description\"\
        : \"Realms where this species is available\"\n                },\n                \"metadata\": {\n              \
        \      \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Additional metadata for the species\"\n                },\n      \
        \          \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was created\"\n                },\n         \
        \       \"updatedAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was last updated\"\n                }\n     \
        \       }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Create new species\",\n    \"description\": \"\",\n    \"tags\": [\n  \
        \      \"Species Admin\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"createSpecies\"\n}"
  /species/update:
    post:
      summary: Update species
      operationId: updateSpecies
      tags:
      - Species Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSpeciesRequest'
      responses:
        '200':
          description: Species updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpeciesResponse'
        '404':
          description: Species not found
        '400':
          description: Invalid update data

      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/UpdateSpeciesRequest\"\
        ,\n    \"$defs\": {\n        \"UpdateSpeciesRequest\": {\n            \"description\": \"Request to update an existing
        species with partial attribute changes\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"speciesId\"\n            ],\n            \"properties\":
        {\n                \"speciesId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"description\": \"ID of the species to update\"\n                },\n              \
        \  \"name\": {\n                    \"type\": \"string\",\n                    \"minLength\": 1,\n               \
        \     \"maxLength\": 100,\n                    \"nullable\": true,\n                    \"description\": \"Display
        name for the species\"\n                },\n                \"description\": {\n                    \"type\": \"string\"\
        ,\n                    \"maxLength\": 1000,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Description of the species\"\n                },\n                \"category\": {\n                    \"type\"\
        : \"string\",\n                    \"maxLength\": 50,\n                    \"nullable\": true,\n                 \
        \   \"description\": \"Category for grouping\"\n                },\n                \"isPlayable\": {\n          \
        \          \"type\": \"boolean\",\n                    \"nullable\": true,\n                    \"description\": \"\
        Whether players can create characters of this species\"\n                },\n                \"baseLifespan\": {\n\
        \                    \"type\": \"integer\",\n                    \"minimum\": 1,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Base lifespan in game years\"\n                },\n              \
        \  \"maturityAge\": {\n                    \"type\": \"integer\",\n                    \"minimum\": 0,\n         \
        \           \"nullable\": true,\n                    \"description\": \"Age at which the species reaches maturity\"\
        \n                },\n                \"traitModifiers\": {\n                    \"type\": \"object\",\n         \
        \           \"additionalProperties\": true,\n                    \"nullable\": true,\n                    \"description\"\
        : \"Base trait modifiers for this species\"\n                },\n                \"metadata\": {\n               \
        \     \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Additional metadata\"\n                }\n            }\n        }\n\
        \    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SpeciesResponse\"\
        ,\n    \"$defs\": {\n        \"SpeciesResponse\": {\n            \"description\": \"Complete species data including
        all attributes and realm associations\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"speciesId\",\n                \"code\",\n               \
        \ \"name\",\n                \"isPlayable\",\n                \"isDeprecated\",\n                \"createdAt\",\n\
        \                \"updatedAt\"\n            ],\n            \"properties\": {\n                \"speciesId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier of the species\"\n                },\n                \"code\": {\n                    \"type\"\
        : \"string\",\n                    \"description\": \"Unique code for the species (e.g., \\\"HUMAN\\\", \\\"ELF\\\"\
        )\"\n                },\n                \"name\": {\n                    \"type\": \"string\",\n                \
        \    \"description\": \"Display name for the species\"\n                },\n                \"description\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Description of the species\"\n                },\n                \"category\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Category for grouping
        (e.g., \\\"HUMANOID\\\", \\\"BEAST\\\", \\\"MAGICAL\\\")\"\n                },\n                \"isPlayable\": {\n\
        \                    \"type\": \"boolean\",\n                    \"description\": \"Whether players can create characters
        of this species\"\n                },\n                \"isDeprecated\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether this species is deprecated and cannot be used for new characters\"\
        \n                },\n                \"deprecatedAt\": {\n                    \"type\": \"string\",\n           \
        \         \"format\": \"date-time\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Timestamp when this species was deprecated\"\n                },\n                \"deprecationReason\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Optional reason for deprecation\"\n                },\n                \"baseLifespan\": {\n                 \
        \   \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Base lifespan
        in game years\"\n                },\n                \"maturityAge\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Age at which the species reaches
        maturity\"\n                },\n                \"traitModifiers\": {\n                    \"type\": \"object\",\n\
        \                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Base trait modifiers for this species\"\n                },\n                \"realmIds\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\",\n                        \"format\": \"uuid\"\n                    },\n                    \"description\"\
        : \"Realms where this species is available\"\n                },\n                \"metadata\": {\n              \
        \      \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Additional metadata for the species\"\n                },\n      \
        \          \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was created\"\n                },\n         \
        \       \"updatedAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was last updated\"\n                }\n     \
        \       }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Update species\",\n    \"description\": \"\",\n    \"tags\": [\n      \
        \  \"Species Admin\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"updateSpecies\"\n}"
  /species/delete:
    post:
      summary: Delete species
      description: |
        Hard delete a species. This will fail if the species is still in use.
        For safe removal, first deprecate the species, then merge it into another species
        (or VOID), then delete. Only deprecated species with zero references can be deleted.
      operationId: deleteSpecies
      tags:
      - Species Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteSpeciesRequest'
      responses:
        '200':
          description: Species deleted successfully
        '404':
          description: Species not found
        '409':
          description: Cannot delete - species is in use by characters

      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeleteSpeciesRequest\"\
        ,\n    \"$defs\": {\n        \"DeleteSpeciesRequest\": {\n            \"description\": \"Request to hard-delete a
        deprecated species with no remaining references\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"speciesId\"\n            ],\n            \"properties\":
        {\n                \"speciesId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"description\": \"ID of the species to delete\"\n                }\n            }\n\
        \        }\n    }\n}"
      x-response-schema-json: '{}'
      x-endpoint-info-json: "{\n    \"summary\": \"Delete species\",\n    \"description\": \"Hard delete a species. This will
        fail if the species is still in use.\\nFor safe removal, first deprecate the species, then merge it into another species\\
        n(or VOID), then delete. Only deprecated species with zero references can be deleted.\\n\",\n    \"tags\": [\n   \
        \     \"Species Admin\"\n    ],\n    \"deprecated\": false,\n    \"operationId\": \"deleteSpecies\"\n}"
  /species/deprecate:
    post:
      summary: Deprecate a species
      description: |
        Soft-delete a species by marking it as deprecated.
        Deprecated species:
        - Remain queryable for historical data
        - Cannot be used for creating new characters
        - Can be merged into other species using the merge endpoint
        - Can be hard-deleted after all references are removed
      operationId: deprecateSpecies
      tags:
      - Species Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeprecateSpeciesRequest'
      responses:
        '200':
          description: Species deprecated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpeciesResponse'
        '404':
          description: Species not found
        '409':
          description: Species is already deprecated

      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/DeprecateSpeciesRequest\"\
        ,\n    \"$defs\": {\n        \"DeprecateSpeciesRequest\": {\n            \"description\": \"Request to soft-delete
        a species, preventing new character creation\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"speciesId\"\n            ],\n            \"properties\":
        {\n                \"speciesId\": {\n                    \"type\": \"string\",\n                    \"format\": \"\
        uuid\",\n                    \"description\": \"ID of the species to deprecate\"\n                },\n           \
        \     \"reason\": {\n                    \"type\": \"string\",\n                    \"maxLength\": 500,\n        \
        \            \"nullable\": true,\n                    \"description\": \"Optional reason for deprecation (for audit
        purposes)\"\n                }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SpeciesResponse\"\
        ,\n    \"$defs\": {\n        \"SpeciesResponse\": {\n            \"description\": \"Complete species data including
        all attributes and realm associations\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"speciesId\",\n                \"code\",\n               \
        \ \"name\",\n                \"isPlayable\",\n                \"isDeprecated\",\n                \"createdAt\",\n\
        \                \"updatedAt\"\n            ],\n            \"properties\": {\n                \"speciesId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier of the species\"\n                },\n                \"code\": {\n                    \"type\"\
        : \"string\",\n                    \"description\": \"Unique code for the species (e.g., \\\"HUMAN\\\", \\\"ELF\\\"\
        )\"\n                },\n                \"name\": {\n                    \"type\": \"string\",\n                \
        \    \"description\": \"Display name for the species\"\n                },\n                \"description\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Description of the species\"\n                },\n                \"category\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Category for grouping
        (e.g., \\\"HUMANOID\\\", \\\"BEAST\\\", \\\"MAGICAL\\\")\"\n                },\n                \"isPlayable\": {\n\
        \                    \"type\": \"boolean\",\n                    \"description\": \"Whether players can create characters
        of this species\"\n                },\n                \"isDeprecated\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether this species is deprecated and cannot be used for new characters\"\
        \n                },\n                \"deprecatedAt\": {\n                    \"type\": \"string\",\n           \
        \         \"format\": \"date-time\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Timestamp when this species was deprecated\"\n                },\n                \"deprecationReason\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Optional reason for deprecation\"\n                },\n                \"baseLifespan\": {\n                 \
        \   \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Base lifespan
        in game years\"\n                },\n                \"maturityAge\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Age at which the species reaches
        maturity\"\n                },\n                \"traitModifiers\": {\n                    \"type\": \"object\",\n\
        \                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Base trait modifiers for this species\"\n                },\n                \"realmIds\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\",\n                        \"format\": \"uuid\"\n                    },\n                    \"description\"\
        : \"Realms where this species is available\"\n                },\n                \"metadata\": {\n              \
        \      \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Additional metadata for the species\"\n                },\n      \
        \          \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was created\"\n                },\n         \
        \       \"updatedAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was last updated\"\n                }\n     \
        \       }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Deprecate a species\",\n    \"description\": \"Soft-delete a species by
        marking it as deprecated.\\nDeprecated species:\\n- Remain queryable for historical data\\n- Cannot be used for creating
        new characters\\n- Can be merged into other species using the merge endpoint\\n- Can be hard-deleted after all references
        are removed\\n\",\n    \"tags\": [\n        \"Species Admin\"\n    ],\n    \"deprecated\": false,\n    \"operationId\"\
        : \"deprecateSpecies\"\n}"
  /species/undeprecate:
    post:
      summary: Restore a deprecated species
      description: |
        Remove the deprecated status from a species, making it
        available for new characters again.
      operationId: undeprecateSpecies
      tags:
      - Species Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UndeprecateSpeciesRequest'
      responses:
        '200':
          description: Species restored successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpeciesResponse'
        '404':
          description: Species not found
        '400':
          description: Species is not deprecated

      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/UndeprecateSpeciesRequest\"\
        ,\n    \"$defs\": {\n        \"UndeprecateSpeciesRequest\": {\n            \"description\": \"Request to restore a
        deprecated species to active status\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"speciesId\"\n            ],\n            \"properties\": {\n     \
        \           \"speciesId\": {\n                    \"type\": \"string\",\n                    \"format\": \"uuid\"\
        ,\n                    \"description\": \"ID of the species to restore\"\n                }\n            }\n     \
        \   }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SpeciesResponse\"\
        ,\n    \"$defs\": {\n        \"SpeciesResponse\": {\n            \"description\": \"Complete species data including
        all attributes and realm associations\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"speciesId\",\n                \"code\",\n               \
        \ \"name\",\n                \"isPlayable\",\n                \"isDeprecated\",\n                \"createdAt\",\n\
        \                \"updatedAt\"\n            ],\n            \"properties\": {\n                \"speciesId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier of the species\"\n                },\n                \"code\": {\n                    \"type\"\
        : \"string\",\n                    \"description\": \"Unique code for the species (e.g., \\\"HUMAN\\\", \\\"ELF\\\"\
        )\"\n                },\n                \"name\": {\n                    \"type\": \"string\",\n                \
        \    \"description\": \"Display name for the species\"\n                },\n                \"description\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Description of the species\"\n                },\n                \"category\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Category for grouping
        (e.g., \\\"HUMANOID\\\", \\\"BEAST\\\", \\\"MAGICAL\\\")\"\n                },\n                \"isPlayable\": {\n\
        \                    \"type\": \"boolean\",\n                    \"description\": \"Whether players can create characters
        of this species\"\n                },\n                \"isDeprecated\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether this species is deprecated and cannot be used for new characters\"\
        \n                },\n                \"deprecatedAt\": {\n                    \"type\": \"string\",\n           \
        \         \"format\": \"date-time\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Timestamp when this species was deprecated\"\n                },\n                \"deprecationReason\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Optional reason for deprecation\"\n                },\n                \"baseLifespan\": {\n                 \
        \   \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Base lifespan
        in game years\"\n                },\n                \"maturityAge\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Age at which the species reaches
        maturity\"\n                },\n                \"traitModifiers\": {\n                    \"type\": \"object\",\n\
        \                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Base trait modifiers for this species\"\n                },\n                \"realmIds\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\",\n                        \"format\": \"uuid\"\n                    },\n                    \"description\"\
        : \"Realms where this species is available\"\n                },\n                \"metadata\": {\n              \
        \      \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Additional metadata for the species\"\n                },\n      \
        \          \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was created\"\n                },\n         \
        \       \"updatedAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was last updated\"\n                }\n     \
        \       }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Restore a deprecated species\",\n    \"description\": \"Remove the deprecated
        status from a species, making it\\navailable for new characters again.\\n\",\n    \"tags\": [\n        \"Species Admin\"\
        \n    ],\n    \"deprecated\": false,\n    \"operationId\": \"undeprecateSpecies\"\n}"
  /species/merge:
    post:
      summary: Merge a deprecated species into another species
      description: |
        Migrate all characters using a deprecated species to a target species.
        This is the recommended way to handle species removal:
        1. Deprecate the source species
        2. Merge into the target species (or VOID for effective deletion)
        3. Optionally hard-delete the now-empty deprecated species

        The merge operation:
        - Updates all characters using sourceSpeciesId to use targetSpeciesId
        - Publishes events for each affected character
        - Returns count of migrated characters
        - Fails if source is not deprecated (safety check)
      operationId: mergeSpecies
      tags:
      - Species Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MergeSpeciesRequest'
      responses:
        '200':
          description: Merge completed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MergeSpeciesResponse'
        '404':
          description: Source or target species not found
        '400':
          description: Source species must be deprecated before merging
        '409':
          description: Cannot merge into a deprecated species

      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/MergeSpeciesRequest\"\
        ,\n    \"$defs\": {\n        \"MergeSpeciesRequest\": {\n            \"description\": \"Request to migrate all characters
        from a deprecated species to a target species\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"sourceSpeciesId\",\n                \"targetSpeciesId\"\n\
        \            ],\n            \"properties\": {\n                \"sourceSpeciesId\": {\n                    \"type\"\
        : \"string\",\n                    \"format\": \"uuid\",\n                    \"description\": \"ID of the deprecated
        species to merge from (must be deprecated)\"\n                },\n                \"targetSpeciesId\": {\n       \
        \             \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"ID of the species to merge into (can be VOID for effective deletion)\"\n                },\n                \"\
        deleteAfterMerge\": {\n                    \"type\": \"boolean\",\n                    \"default\": false,\n     \
        \               \"description\": \"If true, hard-delete the source species after successful merge\"\n            \
        \    }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/MergeSpeciesResponse\"\
        ,\n    \"$defs\": {\n        \"MergeSpeciesResponse\": {\n            \"description\": \"Result of a species merge
        operation including migration statistics\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"sourceSpeciesId\",\n                \"targetSpeciesId\",\n\
        \                \"charactersMigrated\",\n                \"sourceDeleted\"\n            ],\n            \"properties\"\
        : {\n                \"sourceSpeciesId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"description\": \"ID of the deprecated species that was merged from\"\n        \
        \        },\n                \"targetSpeciesId\": {\n                    \"type\": \"string\",\n                 \
        \   \"format\": \"uuid\",\n                    \"description\": \"ID of the species that characters were merged into\"\
        \n                },\n                \"charactersMigrated\": {\n                    \"type\": \"integer\",\n    \
        \                \"description\": \"Number of characters updated to use the target species\"\n                },\n\
        \                \"sourceDeleted\": {\n                    \"type\": \"boolean\",\n                    \"description\"\
        : \"Whether the source species was hard-deleted after merge\"\n                }\n            }\n        }\n    }\n\
        }"
      x-endpoint-info-json: "{\n    \"summary\": \"Merge a deprecated species into another species\",\n    \"description\"\
        : \"Migrate all characters using a deprecated species to a target species.\\nThis is the recommended way to handle
        species removal:\\n1. Deprecate the source species\\n2. Merge into the target species (or VOID for effective deletion)\\
        n3. Optionally hard-delete the now-empty deprecated species\\n\\nThe merge operation:\\n- Updates all characters using
        sourceSpeciesId to use targetSpeciesId\\n- Publishes events for each affected character\\n- Returns count of migrated
        characters\\n- Fails if source is not deprecated (safety check)\\n\",\n    \"tags\": [\n        \"Species Admin\"\n\
        \    ],\n    \"deprecated\": false,\n    \"operationId\": \"mergeSpecies\"\n}"
  /species/add-to-realm:
    post:
      summary: Add species to a realm
      description: Make a species available in an additional realm
      operationId: addSpeciesToRealm
      tags:
      - Species Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddSpeciesToRealmRequest'
      responses:
        '200':
          description: Species added to realm successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpeciesResponse'
        '404':
          description: Species or realm not found
        '409':
          description: Species already in realm

      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/AddSpeciesToRealmRequest\"\
        ,\n    \"$defs\": {\n        \"AddSpeciesToRealmRequest\": {\n            \"description\": \"Request to make a species
        available for character creation in a realm\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"speciesId\",\n                \"realmId\"\n            ],\n\
        \            \"properties\": {\n                \"speciesId\": {\n                    \"type\": \"string\",\n    \
        \                \"format\": \"uuid\",\n                    \"description\": \"ID of the species\"\n             \
        \   },\n                \"realmId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"description\": \"ID of the realm to add the species to\"\n                }\n \
        \           }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SpeciesResponse\"\
        ,\n    \"$defs\": {\n        \"SpeciesResponse\": {\n            \"description\": \"Complete species data including
        all attributes and realm associations\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"speciesId\",\n                \"code\",\n               \
        \ \"name\",\n                \"isPlayable\",\n                \"isDeprecated\",\n                \"createdAt\",\n\
        \                \"updatedAt\"\n            ],\n            \"properties\": {\n                \"speciesId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier of the species\"\n                },\n                \"code\": {\n                    \"type\"\
        : \"string\",\n                    \"description\": \"Unique code for the species (e.g., \\\"HUMAN\\\", \\\"ELF\\\"\
        )\"\n                },\n                \"name\": {\n                    \"type\": \"string\",\n                \
        \    \"description\": \"Display name for the species\"\n                },\n                \"description\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Description of the species\"\n                },\n                \"category\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Category for grouping
        (e.g., \\\"HUMANOID\\\", \\\"BEAST\\\", \\\"MAGICAL\\\")\"\n                },\n                \"isPlayable\": {\n\
        \                    \"type\": \"boolean\",\n                    \"description\": \"Whether players can create characters
        of this species\"\n                },\n                \"isDeprecated\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether this species is deprecated and cannot be used for new characters\"\
        \n                },\n                \"deprecatedAt\": {\n                    \"type\": \"string\",\n           \
        \         \"format\": \"date-time\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Timestamp when this species was deprecated\"\n                },\n                \"deprecationReason\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Optional reason for deprecation\"\n                },\n                \"baseLifespan\": {\n                 \
        \   \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Base lifespan
        in game years\"\n                },\n                \"maturityAge\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Age at which the species reaches
        maturity\"\n                },\n                \"traitModifiers\": {\n                    \"type\": \"object\",\n\
        \                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Base trait modifiers for this species\"\n                },\n                \"realmIds\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\",\n                        \"format\": \"uuid\"\n                    },\n                    \"description\"\
        : \"Realms where this species is available\"\n                },\n                \"metadata\": {\n              \
        \      \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Additional metadata for the species\"\n                },\n      \
        \          \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was created\"\n                },\n         \
        \       \"updatedAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was last updated\"\n                }\n     \
        \       }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Add species to a realm\",\n    \"description\": \"Make a species available
        in an additional realm\",\n    \"tags\": [\n        \"Species Admin\"\n    ],\n    \"deprecated\": false,\n    \"\
        operationId\": \"addSpeciesToRealm\"\n}"
  /species/remove-from-realm:
    post:
      summary: Remove species from a realm
      description: Remove a species from a realm (species must not have characters in that realm)
      operationId: removeSpeciesFromRealm
      tags:
      - Species Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveSpeciesFromRealmRequest'
      responses:
        '200':
          description: Species removed from realm successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpeciesResponse'
        '404':
          description: Species not found or not in realm
        '409':
          description: Cannot remove - characters of this species exist in realm

      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/RemoveSpeciesFromRealmRequest\"\
        ,\n    \"$defs\": {\n        \"RemoveSpeciesFromRealmRequest\": {\n            \"description\": \"Request to remove
        a species from availability in a realm\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"speciesId\",\n                \"realmId\"\n            ],\n\
        \            \"properties\": {\n                \"speciesId\": {\n                    \"type\": \"string\",\n    \
        \                \"format\": \"uuid\",\n                    \"description\": \"ID of the species\"\n             \
        \   },\n                \"realmId\": {\n                    \"type\": \"string\",\n                    \"format\"\
        : \"uuid\",\n                    \"description\": \"ID of the realm to remove the species from\"\n               \
        \ }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SpeciesResponse\"\
        ,\n    \"$defs\": {\n        \"SpeciesResponse\": {\n            \"description\": \"Complete species data including
        all attributes and realm associations\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"speciesId\",\n                \"code\",\n               \
        \ \"name\",\n                \"isPlayable\",\n                \"isDeprecated\",\n                \"createdAt\",\n\
        \                \"updatedAt\"\n            ],\n            \"properties\": {\n                \"speciesId\": {\n\
        \                    \"type\": \"string\",\n                    \"format\": \"uuid\",\n                    \"description\"\
        : \"Unique identifier of the species\"\n                },\n                \"code\": {\n                    \"type\"\
        : \"string\",\n                    \"description\": \"Unique code for the species (e.g., \\\"HUMAN\\\", \\\"ELF\\\"\
        )\"\n                },\n                \"name\": {\n                    \"type\": \"string\",\n                \
        \    \"description\": \"Display name for the species\"\n                },\n                \"description\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Description of the species\"\n                },\n                \"category\": {\n                    \"type\"\
        : \"string\",\n                    \"nullable\": true,\n                    \"description\": \"Category for grouping
        (e.g., \\\"HUMANOID\\\", \\\"BEAST\\\", \\\"MAGICAL\\\")\"\n                },\n                \"isPlayable\": {\n\
        \                    \"type\": \"boolean\",\n                    \"description\": \"Whether players can create characters
        of this species\"\n                },\n                \"isDeprecated\": {\n                    \"type\": \"boolean\"\
        ,\n                    \"description\": \"Whether this species is deprecated and cannot be used for new characters\"\
        \n                },\n                \"deprecatedAt\": {\n                    \"type\": \"string\",\n           \
        \         \"format\": \"date-time\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Timestamp when this species was deprecated\"\n                },\n                \"deprecationReason\": {\n \
        \                   \"type\": \"string\",\n                    \"nullable\": true,\n                    \"description\"\
        : \"Optional reason for deprecation\"\n                },\n                \"baseLifespan\": {\n                 \
        \   \"type\": \"integer\",\n                    \"nullable\": true,\n                    \"description\": \"Base lifespan
        in game years\"\n                },\n                \"maturityAge\": {\n                    \"type\": \"integer\"\
        ,\n                    \"nullable\": true,\n                    \"description\": \"Age at which the species reaches
        maturity\"\n                },\n                \"traitModifiers\": {\n                    \"type\": \"object\",\n\
        \                    \"additionalProperties\": true,\n                    \"nullable\": true,\n                  \
        \  \"description\": \"Base trait modifiers for this species\"\n                },\n                \"realmIds\": {\n\
        \                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"\
        string\",\n                        \"format\": \"uuid\"\n                    },\n                    \"description\"\
        : \"Realms where this species is available\"\n                },\n                \"metadata\": {\n              \
        \      \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Additional metadata for the species\"\n                },\n      \
        \          \"createdAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was created\"\n                },\n         \
        \       \"updatedAt\": {\n                    \"type\": \"string\",\n                    \"format\": \"date-time\"\
        ,\n                    \"description\": \"Timestamp when the species was last updated\"\n                }\n     \
        \       }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Remove species from a realm\",\n    \"description\": \"Remove a species
        from a realm (species must not have characters in that realm)\",\n    \"tags\": [\n        \"Species Admin\"\n   \
        \ ],\n    \"deprecated\": false,\n    \"operationId\": \"removeSpeciesFromRealm\"\n}"
  /species/seed:
    post:
      summary: Seed species from configuration
      description: |
        Idempotent operation to seed species from provided data.
        Creates species that don't exist, optionally updates existing species.
        Typically called at service startup with YAML-defined species.
      operationId: seedSpecies
      tags:
      - Species Admin
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SeedSpeciesRequest'
      responses:
        '200':
          description: Seed operation completed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SeedSpeciesResponse'
        '400':
          description: Invalid seed data

      x-request-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SeedSpeciesRequest\"\
        ,\n    \"$defs\": {\n        \"SeedSpeciesRequest\": {\n            \"description\": \"Request to bulk-create or update
        species from a predefined list\",\n            \"type\": \"object\",\n            \"additionalProperties\": false,\n\
        \            \"required\": [\n                \"species\"\n            ],\n            \"properties\": {\n       \
        \         \"species\": {\n                    \"type\": \"array\",\n                    \"items\": {\n           \
        \             \"$ref\": \"#/$defs/SeedSpecies\"\n                    },\n                    \"description\": \"List
        of species to seed\"\n                },\n                \"updateExisting\": {\n                    \"type\": \"\
        boolean\",\n                    \"default\": false,\n                    \"description\": \"Whether to update species
        that already exist\"\n                }\n            }\n        },\n        \"SeedSpecies\": {\n            \"description\"\
        : \"Species definition used in bulk seeding operations\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"code\",\n                \"name\"\n            ],\n     \
        \       \"properties\": {\n                \"code\": {\n                    \"type\": \"string\",\n              \
        \      \"description\": \"Unique code for the species\"\n                },\n                \"name\": {\n       \
        \             \"type\": \"string\",\n                    \"description\": \"Display name\"\n                },\n \
        \               \"description\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Description of the species (null if not provided)\"\n                },\n\
        \                \"category\": {\n                    \"type\": \"string\",\n                    \"nullable\": true,\n\
        \                    \"description\": \"Category for grouping (null if not categorized)\"\n                },\n  \
        \              \"isPlayable\": {\n                    \"type\": \"boolean\",\n                    \"default\": true,\n\
        \                    \"description\": \"Whether players can create characters of this species\"\n                },\n\
        \                \"baseLifespan\": {\n                    \"type\": \"integer\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Base lifespan in game years (null for default)\"\n               \
        \ },\n                \"maturityAge\": {\n                    \"type\": \"integer\",\n                    \"nullable\"\
        : true,\n                    \"description\": \"Age at maturity (null for default)\"\n                },\n       \
        \         \"traitModifiers\": {\n                    \"type\": \"object\",\n                    \"additionalProperties\"\
        : true,\n                    \"nullable\": true,\n                    \"description\": \"Base trait modifiers for
        this species (null if none)\"\n                },\n                \"realmCodes\": {\n                    \"type\"\
        : \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\n                   \
        \ },\n                    \"nullable\": true,\n                    \"description\": \"Codes of realms where this species
        is available (null to skip realm assignment)\"\n                },\n                \"metadata\": {\n            \
        \        \"type\": \"object\",\n                    \"additionalProperties\": true,\n                    \"nullable\"\
        : true,\n                    \"description\": \"Additional metadata for the species (null if none)\"\n           \
        \     }\n            }\n        }\n    }\n}"
      x-response-schema-json: "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"$ref\": \"#/$defs/SeedSpeciesResponse\"\
        ,\n    \"$defs\": {\n        \"SeedSpeciesResponse\": {\n            \"description\": \"Summary of a bulk species
        seeding operation with counts and errors\",\n            \"type\": \"object\",\n            \"additionalProperties\"\
        : false,\n            \"required\": [\n                \"created\",\n                \"updated\",\n              \
        \  \"skipped\",\n                \"errors\"\n            ],\n            \"properties\": {\n                \"created\"\
        : {\n                    \"type\": \"integer\",\n                    \"description\": \"Number of new species created\"\
        \n                },\n                \"updated\": {\n                    \"type\": \"integer\",\n               \
        \     \"description\": \"Number of existing species updated\"\n                },\n                \"skipped\": {\n\
        \                    \"type\": \"integer\",\n                    \"description\": \"Number of species skipped (already
        exist, updateExisting=false)\"\n                },\n                \"errors\": {\n                    \"type\": \"\
        array\",\n                    \"items\": {\n                        \"type\": \"string\"\n                    },\n\
        \                    \"description\": \"List of error messages for species that failed to seed\"\n               \
        \ }\n            }\n        }\n    }\n}"
      x-endpoint-info-json: "{\n    \"summary\": \"Seed species from configuration\",\n    \"description\": \"Idempotent operation
        to seed species from provided data.\\nCreates species that don't exist, optionally updates existing species.\\nTypically
        called at service startup with YAML-defined species.\\n\",\n    \"tags\": [\n        \"Species Admin\"\n    ],\n \
        \   \"deprecated\": false,\n    \"operationId\": \"seedSpecies\"\n}"
components:
  schemas:
    # Request schemas
    GetSpeciesRequest:
      description: Request to retrieve a single species by its unique identifier
      type: object
      additionalProperties: false
      required:
      - speciesId
      properties:
        speciesId:
          type: string
          format: uuid
          description: Unique identifier of the species

    GetSpeciesByCodeRequest:
      description: Request to retrieve a species by its unique code identifier
      type: object
      additionalProperties: false
      required:
      - code
      properties:
        code:
          type: string
          minLength: 1
          maxLength: 50
          pattern: '^[A-Z][A-Z0-9_]*$'
          description: Unique code for the species (e.g., "HUMAN", "ELF", "DWARF")

    ListSpeciesRequest:
      description: Request to list species with optional filtering and pagination
      type: object
      additionalProperties: false
      properties:
        category:
          type: string
          nullable: true
          description: Filter by category (e.g., "HUMANOID", "BEAST", "MAGICAL")
        isPlayable:
          type: boolean
          nullable: true
          description: Filter by playable status
        includeDeprecated:
          type: boolean
          default: false
          description: Whether to include deprecated species in the response
        page:
          type: integer
          minimum: 1
          default: 1
          description: Page number for pagination (1-based)
        pageSize:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          description: Number of items per page

    ListSpeciesByRealmRequest:
      description: Request to list species available within a specific realm
      type: object
      additionalProperties: false
      required:
      - realmId
      properties:
        realmId:
          type: string
          format: uuid
          description: ID of the realm to filter by
        isPlayable:
          type: boolean
          nullable: true
          description: Filter by playable status
        page:
          type: integer
          minimum: 1
          default: 1
          description: Page number for pagination (1-based)
        pageSize:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          description: Number of items per page

    CreateSpeciesRequest:
      description: Request to create a new species with its attributes and realm associations
      type: object
      additionalProperties: false
      required:
      - code
      - name
      properties:
        code:
          type: string
          minLength: 1
          maxLength: 50
          pattern: '^[A-Z][A-Z0-9_]*$'
          description: Unique code for the species (e.g., "HUMAN", "ELF")
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: Display name for the species
        description:
          type: string
          maxLength: 1000
          nullable: true
          description: Description of the species
        category:
          type: string
          maxLength: 50
          nullable: true
          description: Category for grouping (e.g., "HUMANOID", "BEAST", "MAGICAL")
        isPlayable:
          type: boolean
          default: true
          description: Whether players can create characters of this species
        baseLifespan:
          type: integer
          minimum: 1
          nullable: true
          description: Base lifespan in game years
        maturityAge:
          type: integer
          minimum: 0
          nullable: true
          description: Age at which the species reaches maturity
        traitModifiers:
          type: object
          additionalProperties: true
          nullable: true
          description: Base trait modifiers for this species (JSON)
        realmIds:
          type: array
          items:
            type: string
            format: uuid
          nullable: true
          description: Initial realms where this species is available (null to skip realm assignment)
        metadata:
          type: object
          additionalProperties: true
          nullable: true
          description: Additional metadata for the species

    UpdateSpeciesRequest:
      description: Request to update an existing species with partial attribute changes
      type: object
      additionalProperties: false
      required:
      - speciesId
      properties:
        speciesId:
          type: string
          format: uuid
          description: ID of the species to update
        name:
          type: string
          minLength: 1
          maxLength: 100
          nullable: true
          description: Display name for the species
        description:
          type: string
          maxLength: 1000
          nullable: true
          description: Description of the species
        category:
          type: string
          maxLength: 50
          nullable: true
          description: Category for grouping
        isPlayable:
          type: boolean
          nullable: true
          description: Whether players can create characters of this species
        baseLifespan:
          type: integer
          minimum: 1
          nullable: true
          description: Base lifespan in game years
        maturityAge:
          type: integer
          minimum: 0
          nullable: true
          description: Age at which the species reaches maturity
        traitModifiers:
          type: object
          additionalProperties: true
          nullable: true
          description: Base trait modifiers for this species
        metadata:
          type: object
          additionalProperties: true
          nullable: true
          description: Additional metadata

    DeleteSpeciesRequest:
      description: Request to hard-delete a deprecated species with no remaining references
      type: object
      additionalProperties: false
      required:
      - speciesId
      properties:
        speciesId:
          type: string
          format: uuid
          description: ID of the species to delete

    DeprecateSpeciesRequest:
      description: Request to soft-delete a species, preventing new character creation
      type: object
      additionalProperties: false
      required:
      - speciesId
      properties:
        speciesId:
          type: string
          format: uuid
          description: ID of the species to deprecate
        reason:
          type: string
          maxLength: 500
          nullable: true
          description: Optional reason for deprecation (for audit purposes)

    UndeprecateSpeciesRequest:
      description: Request to restore a deprecated species to active status
      type: object
      additionalProperties: false
      required:
      - speciesId
      properties:
        speciesId:
          type: string
          format: uuid
          description: ID of the species to restore

    MergeSpeciesRequest:
      description: Request to migrate all characters from a deprecated species to a target species
      type: object
      additionalProperties: false
      required:
      - sourceSpeciesId
      - targetSpeciesId
      properties:
        sourceSpeciesId:
          type: string
          format: uuid
          description: ID of the deprecated species to merge from (must be deprecated)
        targetSpeciesId:
          type: string
          format: uuid
          description: ID of the species to merge into (can be VOID for effective deletion)
        deleteAfterMerge:
          type: boolean
          default: false
          description: If true, hard-delete the source species after successful merge

    AddSpeciesToRealmRequest:
      description: Request to make a species available for character creation in a realm
      type: object
      additionalProperties: false
      required:
      - speciesId
      - realmId
      properties:
        speciesId:
          type: string
          format: uuid
          description: ID of the species
        realmId:
          type: string
          format: uuid
          description: ID of the realm to add the species to

    RemoveSpeciesFromRealmRequest:
      description: Request to remove a species from availability in a realm
      type: object
      additionalProperties: false
      required:
      - speciesId
      - realmId
      properties:
        speciesId:
          type: string
          format: uuid
          description: ID of the species
        realmId:
          type: string
          format: uuid
          description: ID of the realm to remove the species from

    SeedSpeciesRequest:
      description: Request to bulk-create or update species from a predefined list
      type: object
      additionalProperties: false
      required:
      - species
      properties:
        species:
          type: array
          items:
            $ref: '#/components/schemas/SeedSpecies'
          description: List of species to seed
        updateExisting:
          type: boolean
          default: false
          description: Whether to update species that already exist

    SeedSpecies:
      description: Species definition used in bulk seeding operations
      type: object
      additionalProperties: false
      required:
      - code
      - name
      properties:
        code:
          type: string
          description: Unique code for the species
        name:
          type: string
          description: Display name
        description:
          type: string
          nullable: true
          description: Description of the species (null if not provided)
        category:
          type: string
          nullable: true
          description: Category for grouping (null if not categorized)
        isPlayable:
          type: boolean
          default: true
          description: Whether players can create characters of this species
        baseLifespan:
          type: integer
          nullable: true
          description: Base lifespan in game years (null for default)
        maturityAge:
          type: integer
          nullable: true
          description: Age at maturity (null for default)
        traitModifiers:
          type: object
          additionalProperties: true
          nullable: true
          description: Base trait modifiers for this species (null if none)
        realmCodes:
          type: array
          items:
            type: string
          nullable: true
          description: Codes of realms where this species is available (null to skip realm assignment)
        metadata:
          type: object
          additionalProperties: true
          nullable: true
          description: Additional metadata for the species (null if none)

    # Response schemas
    SpeciesResponse:
      description: Complete species data including all attributes and realm associations
      type: object
      additionalProperties: false
      required:
      - speciesId
      - code
      - name
      - isPlayable
      - isDeprecated
      - createdAt
      - updatedAt
      properties:
        speciesId:
          type: string
          format: uuid
          description: Unique identifier of the species
        code:
          type: string
          description: Unique code for the species (e.g., "HUMAN", "ELF")
        name:
          type: string
          description: Display name for the species
        description:
          type: string
          nullable: true
          description: Description of the species
        category:
          type: string
          nullable: true
          description: Category for grouping (e.g., "HUMANOID", "BEAST", "MAGICAL")
        isPlayable:
          type: boolean
          description: Whether players can create characters of this species
        isDeprecated:
          type: boolean
          description: Whether this species is deprecated and cannot be used for new characters
        deprecatedAt:
          type: string
          format: date-time
          nullable: true
          description: Timestamp when this species was deprecated
        deprecationReason:
          type: string
          nullable: true
          description: Optional reason for deprecation
        baseLifespan:
          type: integer
          nullable: true
          description: Base lifespan in game years
        maturityAge:
          type: integer
          nullable: true
          description: Age at which the species reaches maturity
        traitModifiers:
          type: object
          additionalProperties: true
          nullable: true
          description: Base trait modifiers for this species
        realmIds:
          type: array
          items:
            type: string
            format: uuid
          description: Realms where this species is available
        metadata:
          type: object
          additionalProperties: true
          nullable: true
          description: Additional metadata for the species
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the species was created
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the species was last updated

    SpeciesListResponse:
      description: Paginated list of species with total count for pagination
      type: object
      additionalProperties: false
      required:
      - species
      - totalCount
      properties:
        species:
          type: array
          items:
            $ref: '#/components/schemas/SpeciesResponse'
          description: List of species matching the query
        totalCount:
          type: integer
          description: Total number of species matching the query (for pagination)
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page

    SeedSpeciesResponse:
      description: Summary of a bulk species seeding operation with counts and errors
      type: object
      additionalProperties: false
      required:
      - created
      - updated
      - skipped
      - errors
      properties:
        created:
          type: integer
          description: Number of new species created
        updated:
          type: integer
          description: Number of existing species updated
        skipped:
          type: integer
          description: Number of species skipped (already exist, updateExisting=false)
        errors:
          type: array
          items:
            type: string
          description: List of error messages for species that failed to seed

    MergeSpeciesResponse:
      description: Result of a species merge operation including migration statistics
      type: object
      additionalProperties: false
      required:
      - sourceSpeciesId
      - targetSpeciesId
      - charactersMigrated
      - sourceDeleted
      properties:
        sourceSpeciesId:
          type: string
          format: uuid
          description: ID of the deprecated species that was merged from
        targetSpeciesId:
          type: string
          format: uuid
          description: ID of the species that characters were merged into
        charactersMigrated:
          type: integer
          description: Number of characters updated to use the target species
        sourceDeleted:
          type: boolean
          description: Whether the source species was hard-deleted after merge
