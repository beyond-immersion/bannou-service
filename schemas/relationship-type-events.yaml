openapi: 3.0.3
info:
  title: Relationship Type Service Events
  description: |
    Event models for Relationship Type service RabbitMQ pub/sub via MassTransit.
    Lifecycle events are auto-generated from x-lifecycle definition.

    **NRT Compliance**: AI agents MUST review docs/NRT-SCHEMA-RULES.md before
    modifying this schema. Optional reference types require `nullable: true`.
  version: 1.0.0
  x-event-subscriptions: []  # Relationship Type service doesn't subscribe to external events
  x-event-publications:
    # Relationship Type lifecycle events (auto-generated from x-lifecycle)
    - topic: relationship-type.created
      event: RelationshipTypeCreatedEvent
      description: Published when a new relationship type is created
    - topic: relationship-type.updated
      event: RelationshipTypeUpdatedEvent
      description: Published when a relationship type is updated
    - topic: relationship-type.deleted
      event: RelationshipTypeDeletedEvent
      description: Published when a relationship type is soft-deleted

# Lifecycle events auto-generated from this definition
# Output: schemas/Generated/relationship-type-lifecycle-events.yaml
x-lifecycle:
  RelationshipType:
    model:
      relationshipTypeId: { type: string, format: uuid, primary: true, required: true, description: "Unique identifier for the relationship type" }
      code: { type: string, required: true, description: "Machine-readable code for the relationship type" }
      name: { type: string, required: true, description: "Human-readable display name for the relationship type" }
      description: { type: string, nullable: true, description: "Detailed description of the relationship type" }
      category: { type: string, nullable: true, description: "Category grouping for the relationship type" }
      parentTypeId: { type: string, format: uuid, description: "ID of the parent relationship type for hierarchical relationships" }
      parentTypeCode: { type: string, nullable: true, description: "Code of the parent relationship type" }
      inverseTypeId: { type: string, format: uuid, description: "ID of the inverse relationship type for asymmetric relationships" }
      inverseTypeCode: { type: string, nullable: true, description: "Code of the inverse relationship type" }
      isBidirectional: { type: boolean, required: true, description: "Whether the relationship applies equally in both directions" }
      isDeprecated: { type: boolean, required: true, description: "Whether this relationship type is deprecated and should not be used for new relationships" }
      deprecatedAt: { type: string, format: date-time, description: "Timestamp when the relationship type was deprecated" }
      deprecationReason: { type: string, nullable: true, description: "Explanation for why the relationship type was deprecated" }
      depth: { type: integer, required: true, description: "Hierarchy depth level from the root relationship type" }
      metadata: { type: object, additionalProperties: true, description: "Additional custom metadata for the relationship type" }
      createdAt: { type: string, format: date-time, required: true, description: "Timestamp when the relationship type was created" }
      updatedAt: { type: string, format: date-time, required: true, description: "Timestamp when the relationship type was last updated" }

paths: {}  # Events don't have HTTP paths

# NOTE: No components/schemas - lifecycle events are auto-generated to schemas/Generated/
