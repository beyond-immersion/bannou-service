openapi: 3.0.3
info:
  title: License Service Configuration
  description: |
    Configuration schema for License service.
    Properties are bound to environment variables with BANNOU_ prefix.

    **SCHEMA MODIFICATION GATE**: STOP. Before modifying this schema, you MUST:
    1. Read docs/reference/SCHEMA-RULES.md
    2. State which section applies to your change
    3. Only then proceed with edits
    Edits without stating the applicable rule are FORBIDDEN.
  version: 1.0.0
paths: {}
x-service-configuration:
  properties:
    maxBoardsPerCharacter:
      type: integer
      env: LICENSE_MAX_BOARDS_PER_CHARACTER
      default: 10
      description: Maximum number of active boards a single character can have
    maxDefinitionsPerBoard:
      type: integer
      env: LICENSE_MAX_DEFINITIONS_PER_BOARD
      default: 200
      description: Maximum license definitions per board template
    lockTimeoutSeconds:
      type: integer
      env: LICENSE_LOCK_TIMEOUT_SECONDS
      default: 30
      description: Distributed lock TTL for board mutations in seconds
    boardCacheTtlSeconds:
      type: integer
      env: LICENSE_BOARD_CACHE_TTL_SECONDS
      default: 300
      description: Redis TTL for board state cache in seconds
    defaultPageSize:
      type: integer
      env: LICENSE_DEFAULT_PAGE_SIZE
      default: 20
      description: Default page size for paginated queries (min 1, max 100)
    maxConcurrencyRetries:
      type: integer
      env: LICENSE_MAX_CONCURRENCY_RETRIES
      default: 3
      description: Maximum retry attempts for optimistic concurrency conflicts
    defaultAdjacencyMode:
      $ref: 'license-api.yaml#/components/schemas/AdjacencyMode'
      env: LICENSE_DEFAULT_ADJACENCY_MODE
      default: eight_way
      description: Default adjacency mode for new board templates
