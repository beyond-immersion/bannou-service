openapi: 3.0.4
info:
  title: Quest Service Configuration
  description: Configuration schema for Quest service.
  version: 1.0.0

paths: {}

x-service-configuration:
  properties:
    # === Quest Limits ===
    MaxActiveQuestsPerCharacter:
      type: integer
      default: 25
      minimum: 1
      maximum: 100
      env: QUEST_MAX_ACTIVE_QUESTS_PER_CHARACTER
      description: Maximum concurrent active quests per character

    DefaultRewardContainerMaxSlots:
      type: integer
      default: 100
      minimum: 1
      maximum: 1000
      env: QUEST_DEFAULT_REWARD_CONTAINER_MAX_SLOTS
      description: Maximum slots in quest reward inventory containers

    # === Redis Cache Settings ===
    DefinitionCacheTtlSeconds:
      type: integer
      default: 3600
      minimum: 10
      maximum: 86400
      env: QUEST_DEFINITION_CACHE_TTL_SECONDS
      description: TTL for quest definition cache in Redis

    ProgressCacheTtlSeconds:
      type: integer
      default: 300
      minimum: 10
      maximum: 3600
      env: QUEST_PROGRESS_CACHE_TTL_SECONDS
      description: TTL for objective progress cache

    # === In-Memory Cache Settings ===
    QuestDataCacheTtlSeconds:
      type: integer
      default: 120
      minimum: 10
      maximum: 3600
      env: QUEST_DATA_CACHE_TTL_SECONDS
      description: TTL for in-memory quest data cache used by actor behavior expressions (2 minutes default)

    # === Distributed Lock Settings ===
    LockExpirySeconds:
      type: integer
      default: 30
      minimum: 5
      maximum: 300
      env: QUEST_LOCK_EXPIRY_SECONDS
      description: Distributed lock expiry for quest mutations

    # === Concurrency Settings ===
    MaxConcurrencyRetries:
      type: integer
      default: 5
      minimum: 1
      maximum: 20
      env: QUEST_MAX_CONCURRENCY_RETRIES
      description: ETag concurrency retry attempts

    # === Prerequisite Validation Settings ===
    PrerequisiteValidationMode:
      $ref: 'quest-api.yaml#/components/schemas/PrerequisiteValidationMode'
      default: CHECK_ALL
      env: QUEST_PREREQUISITE_VALIDATION_MODE
      description: Controls prerequisite validation behavior (FAIL_FAST stops on first failure, CHECK_ALL evaluates all)
