openapi: 3.0.0
info:
  title: Bannou Accounts Service API
  description: |
    Internal account management service (CRUD operations only, never exposed to internet).

    **POST-Only API Pattern**: This API uses POST for all operations to support zero-copy
    WebSocket routing. Path parameters are passed in request bodies instead of URLs.
    See API-DESIGN.md for architectural rationale.
  version: 2.0.0
servers:
- url: http://localhost:3500/v1.0/invoke/bannou/method
  description: Dapr sidecar endpoint (internal only)

# NOTE: x-lifecycle moved to accounts-events.yaml

paths:
  /accounts/list:
    post:
      summary: List accounts with filtering
      operationId: listAccounts
      tags:
      - Account Management
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListAccountsRequest'
      responses:
        '200':
          description: Accounts retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountListResponse'

      x-request-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/ListAccountsRequest\"\
        ,\n  \"$defs\": {\n    \"ListAccountsRequest\": {\n      \"type\": \"object\",\n      \"description\": \"Request to
        list accounts with optional filtering\",\n      \"properties\": {\n        \"email\": {\n          \"type\": \"string\"\
        ,\n          \"format\": \"email\",\n          \"nullable\": true\n        },\n        \"displayName\": {\n      \
        \    \"type\": \"string\",\n          \"nullable\": true\n        },\n        \"provider\": {\n          \"allOf\"\
        : [\n            {\n              \"$ref\": \"#/$defs/AuthProvider\"\n            }\n          ],\n          \"nullable\"\
        : true\n        },\n        \"verified\": {\n          \"type\": \"boolean\",\n          \"nullable\": true\n    \
        \    },\n        \"page\": {\n          \"type\": \"integer\",\n          \"minimum\": 1,\n          \"default\":
        1\n        },\n        \"pageSize\": {\n          \"type\": \"integer\",\n          \"minimum\": 1,\n          \"\
        maximum\": 100,\n          \"default\": 20\n        }\n      }\n    },\n    \"AuthProvider\": {\n      \"type\": \"\
        string\",\n      \"description\": \"All authentication provider types including email\",\n      \"enum\": [\n    \
        \    \"email\",\n        \"google\",\n        \"discord\",\n        \"twitch\",\n        \"steam\"\n      ]\n    }\n\
        \  }\n}"
      x-response-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/AccountListResponse\"\
        ,\n  \"$defs\": {\n    \"AccountListResponse\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"\
        accounts\",\n        \"totalCount\",\n        \"page\",\n        \"pageSize\"\n      ],\n      \"properties\": {\n\
        \        \"accounts\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"$ref\": \"#/$defs/AccountResponse\"\
        \n          }\n        },\n        \"totalCount\": {\n          \"type\": \"integer\"\n        },\n        \"page\"\
        : {\n          \"type\": \"integer\"\n        },\n        \"pageSize\": {\n          \"type\": \"integer\"\n     \
        \   },\n        \"hasNextPage\": {\n          \"type\": \"boolean\"\n        },\n        \"hasPreviousPage\": {\n\
        \          \"type\": \"boolean\"\n        }\n      }\n    },\n    \"AccountResponse\": {\n      \"type\": \"object\"\
        ,\n      \"required\": [\n        \"accountId\",\n        \"email\",\n        \"createdAt\",\n        \"emailVerified\"\
        ,\n        \"roles\"\n      ],\n      \"properties\": {\n        \"accountId\": {\n          \"type\": \"string\"\
        ,\n          \"format\": \"uuid\"\n        },\n        \"email\": {\n          \"type\": \"string\",\n          \"\
        format\": \"email\"\n        },\n        \"displayName\": {\n          \"type\": \"string\",\n          \"nullable\"\
        : true\n        },\n        \"passwordHash\": {\n          \"type\": \"string\",\n          \"nullable\": true,\n\
        \          \"description\": \"BCrypt hashed password for authentication\"\n        },\n        \"createdAt\": {\n\
        \          \"type\": \"string\",\n          \"format\": \"date-time\"\n        },\n        \"updatedAt\": {\n    \
        \      \"type\": \"string\",\n          \"format\": \"date-time\",\n          \"nullable\": true\n        },\n   \
        \     \"emailVerified\": {\n          \"type\": \"boolean\"\n        },\n        \"roles\": {\n          \"type\"\
        : \"array\",\n          \"items\": {\n            \"type\": \"string\"\n          }\n        },\n        \"authMethods\"\
        : {\n          \"type\": \"array\",\n          \"items\": {\n            \"$ref\": \"#/$defs/AuthMethodInfo\"\n  \
        \        }\n        },\n        \"metadata\": {\n          \"type\": \"object\",\n          \"additionalProperties\"\
        : true,\n          \"nullable\": true\n        }\n      }\n    },\n    \"AuthMethodInfo\": {\n      \"type\": \"object\"\
        ,\n      \"required\": [\n        \"provider\",\n        \"linkedAt\"\n      ],\n      \"properties\": {\n       \
        \ \"methodId\": {\n          \"type\": \"string\",\n          \"format\": \"uuid\"\n        },\n        \"provider\"\
        : {\n          \"$ref\": \"#/$defs/AuthProvider\"\n        },\n        \"externalId\": {\n          \"type\": \"string\"\
        ,\n          \"nullable\": true\n        },\n        \"displayName\": {\n          \"type\": \"string\",\n       \
        \   \"nullable\": true\n        },\n        \"linkedAt\": {\n          \"type\": \"string\",\n          \"format\"\
        : \"date-time\"\n        }\n      }\n    },\n    \"AuthProvider\": {\n      \"type\": \"string\",\n      \"description\"\
        : \"All authentication provider types including email\",\n      \"enum\": [\n        \"email\",\n        \"google\"\
        ,\n        \"discord\",\n        \"twitch\",\n        \"steam\"\n      ]\n    }\n  }\n}"
      x-endpoint-info-json: "{\n  \"summary\": \"List accounts with filtering\",\n  \"description\": \"\",\n  \"tags\": [\n\
        \    \"Account Management\"\n  ],\n  \"deprecated\": false,\n  \"operationId\": \"listAccounts\"\n}"
  /accounts/create:
    post:
      summary: Create new account
      operationId: createAccount
      tags:
      - Account Management
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAccountRequest'
      responses:
        '201':
          description: Account created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountResponse'
        '400':
          description: Invalid account data
        '409':
          description: Account already exists

      x-request-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/CreateAccountRequest\"\
        ,\n  \"$defs\": {\n    \"CreateAccountRequest\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"\
        email\"\n      ],\n      \"properties\": {\n        \"email\": {\n          \"type\": \"string\",\n          \"format\"\
        : \"email\"\n        },\n        \"passwordHash\": {\n          \"type\": \"string\",\n          \"nullable\": true,\n\
        \          \"description\": \"Pre-hashed password from Auth service\"\n        },\n        \"displayName\": {\n  \
        \        \"type\": \"string\",\n          \"nullable\": true,\n          \"maxLength\": 100\n        },\n        \"\
        emailVerified\": {\n          \"type\": \"boolean\",\n          \"default\": false\n        },\n        \"roles\"\
        : {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\n          },\n    \
        \      \"default\": []\n        },\n        \"metadata\": {\n          \"type\": \"object\",\n          \"additionalProperties\"\
        : true,\n          \"nullable\": true\n        }\n      }\n    }\n  }\n}"
      x-response-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/AccountResponse\"\
        ,\n  \"$defs\": {\n    \"AccountResponse\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"accountId\"\
        ,\n        \"email\",\n        \"createdAt\",\n        \"emailVerified\",\n        \"roles\"\n      ],\n      \"properties\"\
        : {\n        \"accountId\": {\n          \"type\": \"string\",\n          \"format\": \"uuid\"\n        },\n     \
        \   \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\"\n        },\n        \"displayName\"\
        : {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n        \"passwordHash\": {\n    \
        \      \"type\": \"string\",\n          \"nullable\": true,\n          \"description\": \"BCrypt hashed password for
        authentication\"\n        },\n        \"createdAt\": {\n          \"type\": \"string\",\n          \"format\": \"\
        date-time\"\n        },\n        \"updatedAt\": {\n          \"type\": \"string\",\n          \"format\": \"date-time\"\
        ,\n          \"nullable\": true\n        },\n        \"emailVerified\": {\n          \"type\": \"boolean\"\n     \
        \   },\n        \"roles\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\
        \n          }\n        },\n        \"authMethods\": {\n          \"type\": \"array\",\n          \"items\": {\n  \
        \          \"$ref\": \"#/$defs/AuthMethodInfo\"\n          }\n        },\n        \"metadata\": {\n          \"type\"\
        : \"object\",\n          \"additionalProperties\": true,\n          \"nullable\": true\n        }\n      }\n    },\n\
        \    \"AuthMethodInfo\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"provider\",\n        \"\
        linkedAt\"\n      ],\n      \"properties\": {\n        \"methodId\": {\n          \"type\": \"string\",\n        \
        \  \"format\": \"uuid\"\n        },\n        \"provider\": {\n          \"$ref\": \"#/$defs/AuthProvider\"\n     \
        \   },\n        \"externalId\": {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n   \
        \     \"displayName\": {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n        \"linkedAt\"\
        : {\n          \"type\": \"string\",\n          \"format\": \"date-time\"\n        }\n      }\n    },\n    \"AuthProvider\"\
        : {\n      \"type\": \"string\",\n      \"description\": \"All authentication provider types including email\",\n\
        \      \"enum\": [\n        \"email\",\n        \"google\",\n        \"discord\",\n        \"twitch\",\n        \"\
        steam\"\n      ]\n    }\n  }\n}"
      x-endpoint-info-json: "{\n  \"summary\": \"Create new account\",\n  \"description\": \"\",\n  \"tags\": [\n    \"Account
        Management\"\n  ],\n  \"deprecated\": false,\n  \"operationId\": \"createAccount\"\n}"
  /accounts/get:
    post:
      summary: Get account by ID
      operationId: getAccount
      tags:
      - Account Management
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetAccountRequest'
      responses:
        '200':
          description: Account retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountResponse'
        '404':
          description: Account not found

      x-request-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/GetAccountRequest\"\
        ,\n  \"$defs\": {\n    \"GetAccountRequest\": {\n      \"type\": \"object\",\n      \"description\": \"Request to
        get a specific account by ID\",\n      \"required\": [\n        \"accountId\"\n      ],\n      \"properties\": {\n\
        \        \"accountId\": {\n          \"type\": \"string\",\n          \"format\": \"uuid\",\n          \"description\"\
        : \"ID of the account to retrieve\"\n        }\n      }\n    }\n  }\n}"
      x-response-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/AccountResponse\"\
        ,\n  \"$defs\": {\n    \"AccountResponse\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"accountId\"\
        ,\n        \"email\",\n        \"createdAt\",\n        \"emailVerified\",\n        \"roles\"\n      ],\n      \"properties\"\
        : {\n        \"accountId\": {\n          \"type\": \"string\",\n          \"format\": \"uuid\"\n        },\n     \
        \   \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\"\n        },\n        \"displayName\"\
        : {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n        \"passwordHash\": {\n    \
        \      \"type\": \"string\",\n          \"nullable\": true,\n          \"description\": \"BCrypt hashed password for
        authentication\"\n        },\n        \"createdAt\": {\n          \"type\": \"string\",\n          \"format\": \"\
        date-time\"\n        },\n        \"updatedAt\": {\n          \"type\": \"string\",\n          \"format\": \"date-time\"\
        ,\n          \"nullable\": true\n        },\n        \"emailVerified\": {\n          \"type\": \"boolean\"\n     \
        \   },\n        \"roles\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\
        \n          }\n        },\n        \"authMethods\": {\n          \"type\": \"array\",\n          \"items\": {\n  \
        \          \"$ref\": \"#/$defs/AuthMethodInfo\"\n          }\n        },\n        \"metadata\": {\n          \"type\"\
        : \"object\",\n          \"additionalProperties\": true,\n          \"nullable\": true\n        }\n      }\n    },\n\
        \    \"AuthMethodInfo\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"provider\",\n        \"\
        linkedAt\"\n      ],\n      \"properties\": {\n        \"methodId\": {\n          \"type\": \"string\",\n        \
        \  \"format\": \"uuid\"\n        },\n        \"provider\": {\n          \"$ref\": \"#/$defs/AuthProvider\"\n     \
        \   },\n        \"externalId\": {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n   \
        \     \"displayName\": {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n        \"linkedAt\"\
        : {\n          \"type\": \"string\",\n          \"format\": \"date-time\"\n        }\n      }\n    },\n    \"AuthProvider\"\
        : {\n      \"type\": \"string\",\n      \"description\": \"All authentication provider types including email\",\n\
        \      \"enum\": [\n        \"email\",\n        \"google\",\n        \"discord\",\n        \"twitch\",\n        \"\
        steam\"\n      ]\n    }\n  }\n}"
      x-endpoint-info-json: "{\n  \"summary\": \"Get account by ID\",\n  \"description\": \"\",\n  \"tags\": [\n    \"Account
        Management\"\n  ],\n  \"deprecated\": false,\n  \"operationId\": \"getAccount\"\n}"
  /accounts/update:
    post:
      summary: Update account
      operationId: updateAccount
      tags:
      - Account Management
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAccountRequest'
      responses:
        '200':
          description: Account updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountResponse'
        '404':
          description: Account not found
        '400':
          description: Invalid update data

      x-request-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/UpdateAccountRequest\"\
        ,\n  \"$defs\": {\n    \"UpdateAccountRequest\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"\
        accountId\"\n      ],\n      \"properties\": {\n        \"accountId\": {\n          \"type\": \"string\",\n      \
        \    \"format\": \"uuid\",\n          \"description\": \"ID of the account to update\"\n        },\n        \"displayName\"\
        : {\n          \"type\": \"string\",\n          \"nullable\": true,\n          \"maxLength\": 100\n        },\n  \
        \      \"roles\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\n  \
        \        }\n        },\n        \"metadata\": {\n          \"type\": \"object\",\n          \"additionalProperties\"\
        : true,\n          \"nullable\": true\n        }\n      }\n    }\n  }\n}"
      x-response-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/AccountResponse\"\
        ,\n  \"$defs\": {\n    \"AccountResponse\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"accountId\"\
        ,\n        \"email\",\n        \"createdAt\",\n        \"emailVerified\",\n        \"roles\"\n      ],\n      \"properties\"\
        : {\n        \"accountId\": {\n          \"type\": \"string\",\n          \"format\": \"uuid\"\n        },\n     \
        \   \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\"\n        },\n        \"displayName\"\
        : {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n        \"passwordHash\": {\n    \
        \      \"type\": \"string\",\n          \"nullable\": true,\n          \"description\": \"BCrypt hashed password for
        authentication\"\n        },\n        \"createdAt\": {\n          \"type\": \"string\",\n          \"format\": \"\
        date-time\"\n        },\n        \"updatedAt\": {\n          \"type\": \"string\",\n          \"format\": \"date-time\"\
        ,\n          \"nullable\": true\n        },\n        \"emailVerified\": {\n          \"type\": \"boolean\"\n     \
        \   },\n        \"roles\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\
        \n          }\n        },\n        \"authMethods\": {\n          \"type\": \"array\",\n          \"items\": {\n  \
        \          \"$ref\": \"#/$defs/AuthMethodInfo\"\n          }\n        },\n        \"metadata\": {\n          \"type\"\
        : \"object\",\n          \"additionalProperties\": true,\n          \"nullable\": true\n        }\n      }\n    },\n\
        \    \"AuthMethodInfo\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"provider\",\n        \"\
        linkedAt\"\n      ],\n      \"properties\": {\n        \"methodId\": {\n          \"type\": \"string\",\n        \
        \  \"format\": \"uuid\"\n        },\n        \"provider\": {\n          \"$ref\": \"#/$defs/AuthProvider\"\n     \
        \   },\n        \"externalId\": {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n   \
        \     \"displayName\": {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n        \"linkedAt\"\
        : {\n          \"type\": \"string\",\n          \"format\": \"date-time\"\n        }\n      }\n    },\n    \"AuthProvider\"\
        : {\n      \"type\": \"string\",\n      \"description\": \"All authentication provider types including email\",\n\
        \      \"enum\": [\n        \"email\",\n        \"google\",\n        \"discord\",\n        \"twitch\",\n        \"\
        steam\"\n      ]\n    }\n  }\n}"
      x-endpoint-info-json: "{\n  \"summary\": \"Update account\",\n  \"description\": \"\",\n  \"tags\": [\n    \"Account
        Management\"\n  ],\n  \"deprecated\": false,\n  \"operationId\": \"updateAccount\"\n}"
  /accounts/delete:
    post:
      summary: Delete account
      operationId: deleteAccount
      tags:
      - Account Management
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteAccountRequest'
      responses:
        '204':
          description: Account deleted successfully
        '404':
          description: Account not found
        '409':
          description: Account cannot be deleted (active sessions exist)

      x-request-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/DeleteAccountRequest\"\
        ,\n  \"$defs\": {\n    \"DeleteAccountRequest\": {\n      \"type\": \"object\",\n      \"description\": \"Request
        to delete a specific account\",\n      \"required\": [\n        \"accountId\"\n      ],\n      \"properties\": {\n\
        \        \"accountId\": {\n          \"type\": \"string\",\n          \"format\": \"uuid\",\n          \"description\"\
        : \"ID of the account to delete\"\n        }\n      }\n    }\n  }\n}"
      x-response-schema-json: '{}'
      x-endpoint-info-json: "{\n  \"summary\": \"Delete account\",\n  \"description\": \"\",\n  \"tags\": [\n    \"Account
        Management\"\n  ],\n  \"deprecated\": false,\n  \"operationId\": \"deleteAccount\"\n}"
  /accounts/by-email:
    post:
      summary: Get account by email
      operationId: getAccountByEmail
      tags:
      - Account Lookup
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetAccountByEmailRequest'
      responses:
        '200':
          description: Account retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountResponse'
        '404':
          description: Account not found

      x-request-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/GetAccountByEmailRequest\"\
        ,\n  \"$defs\": {\n    \"GetAccountByEmailRequest\": {\n      \"type\": \"object\",\n      \"description\": \"Request
        to get account by email address\",\n      \"required\": [\n        \"email\"\n      ],\n      \"properties\": {\n\
        \        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"description\"\
        : \"Email address to look up\"\n        }\n      }\n    }\n  }\n}"
      x-response-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/AccountResponse\"\
        ,\n  \"$defs\": {\n    \"AccountResponse\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"accountId\"\
        ,\n        \"email\",\n        \"createdAt\",\n        \"emailVerified\",\n        \"roles\"\n      ],\n      \"properties\"\
        : {\n        \"accountId\": {\n          \"type\": \"string\",\n          \"format\": \"uuid\"\n        },\n     \
        \   \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\"\n        },\n        \"displayName\"\
        : {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n        \"passwordHash\": {\n    \
        \      \"type\": \"string\",\n          \"nullable\": true,\n          \"description\": \"BCrypt hashed password for
        authentication\"\n        },\n        \"createdAt\": {\n          \"type\": \"string\",\n          \"format\": \"\
        date-time\"\n        },\n        \"updatedAt\": {\n          \"type\": \"string\",\n          \"format\": \"date-time\"\
        ,\n          \"nullable\": true\n        },\n        \"emailVerified\": {\n          \"type\": \"boolean\"\n     \
        \   },\n        \"roles\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\
        \n          }\n        },\n        \"authMethods\": {\n          \"type\": \"array\",\n          \"items\": {\n  \
        \          \"$ref\": \"#/$defs/AuthMethodInfo\"\n          }\n        },\n        \"metadata\": {\n          \"type\"\
        : \"object\",\n          \"additionalProperties\": true,\n          \"nullable\": true\n        }\n      }\n    },\n\
        \    \"AuthMethodInfo\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"provider\",\n        \"\
        linkedAt\"\n      ],\n      \"properties\": {\n        \"methodId\": {\n          \"type\": \"string\",\n        \
        \  \"format\": \"uuid\"\n        },\n        \"provider\": {\n          \"$ref\": \"#/$defs/AuthProvider\"\n     \
        \   },\n        \"externalId\": {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n   \
        \     \"displayName\": {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n        \"linkedAt\"\
        : {\n          \"type\": \"string\",\n          \"format\": \"date-time\"\n        }\n      }\n    },\n    \"AuthProvider\"\
        : {\n      \"type\": \"string\",\n      \"description\": \"All authentication provider types including email\",\n\
        \      \"enum\": [\n        \"email\",\n        \"google\",\n        \"discord\",\n        \"twitch\",\n        \"\
        steam\"\n      ]\n    }\n  }\n}"
      x-endpoint-info-json: "{\n  \"summary\": \"Get account by email\",\n  \"description\": \"\",\n  \"tags\": [\n    \"\
        Account Lookup\"\n  ],\n  \"deprecated\": false,\n  \"operationId\": \"getAccountByEmail\"\n}"
  /accounts/auth-methods/list:
    post:
      summary: Get authentication methods for account
      operationId: getAuthMethods
      tags:
      - Authentication Methods
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetAuthMethodsRequest'
      responses:
        '200':
          description: Authentication methods retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthMethodsResponse'
        '404':
          description: Account not found

      x-request-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/GetAuthMethodsRequest\"\
        ,\n  \"$defs\": {\n    \"GetAuthMethodsRequest\": {\n      \"type\": \"object\",\n      \"description\": \"Request
        to get authentication methods for an account\",\n      \"required\": [\n        \"accountId\"\n      ],\n      \"\
        properties\": {\n        \"accountId\": {\n          \"type\": \"string\",\n          \"format\": \"uuid\",\n    \
        \      \"description\": \"ID of the account\"\n        }\n      }\n    }\n  }\n}"
      x-response-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/AuthMethodsResponse\"\
        ,\n  \"$defs\": {\n    \"AuthMethodsResponse\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"\
        authMethods\"\n      ],\n      \"properties\": {\n        \"authMethods\": {\n          \"type\": \"array\",\n   \
        \       \"items\": {\n            \"$ref\": \"#/$defs/AuthMethodInfo\"\n          }\n        }\n      }\n    },\n\
        \    \"AuthMethodInfo\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"provider\",\n        \"\
        linkedAt\"\n      ],\n      \"properties\": {\n        \"methodId\": {\n          \"type\": \"string\",\n        \
        \  \"format\": \"uuid\"\n        },\n        \"provider\": {\n          \"$ref\": \"#/$defs/AuthProvider\"\n     \
        \   },\n        \"externalId\": {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n   \
        \     \"displayName\": {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n        \"linkedAt\"\
        : {\n          \"type\": \"string\",\n          \"format\": \"date-time\"\n        }\n      }\n    },\n    \"AuthProvider\"\
        : {\n      \"type\": \"string\",\n      \"description\": \"All authentication provider types including email\",\n\
        \      \"enum\": [\n        \"email\",\n        \"google\",\n        \"discord\",\n        \"twitch\",\n        \"\
        steam\"\n      ]\n    }\n  }\n}"
      x-endpoint-info-json: "{\n  \"summary\": \"Get authentication methods for account\",\n  \"description\": \"\",\n  \"\
        tags\": [\n    \"Authentication Methods\"\n  ],\n  \"deprecated\": false,\n  \"operationId\": \"getAuthMethods\"\n\
        }"
  /accounts/auth-methods/add:
    post:
      summary: Add authentication method to account
      operationId: addAuthMethod
      tags:
      - Authentication Methods
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddAuthMethodRequest'
      responses:
        '201':
          description: Authentication method added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthMethodResponse'
        '404':
          description: Account not found
        '409':
          description: Authentication method already exists

      x-request-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/AddAuthMethodRequest\"\
        ,\n  \"$defs\": {\n    \"AddAuthMethodRequest\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"\
        accountId\",\n        \"provider\"\n      ],\n      \"properties\": {\n        \"accountId\": {\n          \"type\"\
        : \"string\",\n          \"format\": \"uuid\",\n          \"description\": \"ID of the account to add auth method
        to\"\n        },\n        \"provider\": {\n          \"$ref\": \"#/$defs/OAuthProvider\"\n        },\n        \"externalId\"\
        : {\n          \"type\": \"string\"\n        },\n        \"displayName\": {\n          \"type\": \"string\",\n   \
        \       \"nullable\": true\n        }\n      }\n    },\n    \"OAuthProvider\": {\n      \"type\": \"string\",\n  \
        \    \"description\": \"OAuth provider types (excludes email)\",\n      \"enum\": [\n        \"google\",\n       \
        \ \"discord\",\n        \"twitch\",\n        \"steam\"\n      ]\n    }\n  }\n}"
      x-response-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/AuthMethodResponse\"\
        ,\n  \"$defs\": {\n    \"AuthMethodResponse\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"methodId\"\
        ,\n        \"provider\",\n        \"linkedAt\"\n      ],\n      \"properties\": {\n        \"methodId\": {\n     \
        \     \"type\": \"string\",\n          \"format\": \"uuid\"\n        },\n        \"provider\": {\n          \"$ref\"\
        : \"#/$defs/OAuthProvider\"\n        },\n        \"externalId\": {\n          \"type\": \"string\"\n        },\n \
        \       \"displayName\": {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n        \"\
        linkedAt\": {\n          \"type\": \"string\",\n          \"format\": \"date-time\"\n        }\n      }\n    },\n\
        \    \"OAuthProvider\": {\n      \"type\": \"string\",\n      \"description\": \"OAuth provider types (excludes email)\"\
        ,\n      \"enum\": [\n        \"google\",\n        \"discord\",\n        \"twitch\",\n        \"steam\"\n      ]\n\
        \    }\n  }\n}"
      x-endpoint-info-json: "{\n  \"summary\": \"Add authentication method to account\",\n  \"description\": \"\",\n  \"tags\"\
        : [\n    \"Authentication Methods\"\n  ],\n  \"deprecated\": false,\n  \"operationId\": \"addAuthMethod\"\n}"
  /accounts/auth-methods/remove:
    post:
      summary: Remove authentication method from account
      operationId: removeAuthMethod
      tags:
      - Authentication Methods
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveAuthMethodRequest'
      responses:
        '204':
          description: Authentication method removed successfully
        '404':
          description: Account or method not found
        '400':
          description: Cannot remove last authentication method

      x-request-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/RemoveAuthMethodRequest\"\
        ,\n  \"$defs\": {\n    \"RemoveAuthMethodRequest\": {\n      \"type\": \"object\",\n      \"description\": \"Request
        to remove an authentication method from an account\",\n      \"required\": [\n        \"accountId\",\n        \"methodId\"\
        \n      ],\n      \"properties\": {\n        \"accountId\": {\n          \"type\": \"string\",\n          \"format\"\
        : \"uuid\",\n          \"description\": \"ID of the account\"\n        },\n        \"methodId\": {\n          \"type\"\
        : \"string\",\n          \"format\": \"uuid\",\n          \"description\": \"ID of the authentication method to remove\"\
        \n        }\n      }\n    }\n  }\n}"
      x-response-schema-json: '{}'
      x-endpoint-info-json: "{\n  \"summary\": \"Remove authentication method from account\",\n  \"description\": \"\",\n\
        \  \"tags\": [\n    \"Authentication Methods\"\n  ],\n  \"deprecated\": false,\n  \"operationId\": \"removeAuthMethod\"\
        \n}"
  /accounts/by-provider:
    post:
      summary: Get account by external provider ID
      operationId: getAccountByProvider
      tags:
      - Account Lookup
      x-permissions:
      - role: admin
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetAccountByProviderRequest'
      responses:
        '200':
          description: Account retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountResponse'
        '404':
          description: Account not found

      x-request-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/GetAccountByProviderRequest\"\
        ,\n  \"$defs\": {\n    \"GetAccountByProviderRequest\": {\n      \"type\": \"object\",\n      \"description\": \"\
        Request to get account by external provider ID\",\n      \"required\": [\n        \"provider\",\n        \"externalId\"\
        \n      ],\n      \"properties\": {\n        \"provider\": {\n          \"$ref\": \"#/$defs/OAuthProvider\",\n   \
        \       \"description\": \"OAuth provider type\"\n        },\n        \"externalId\": {\n          \"type\": \"string\"\
        ,\n          \"description\": \"External ID from the provider\"\n        }\n      }\n    },\n    \"OAuthProvider\"\
        : {\n      \"type\": \"string\",\n      \"description\": \"OAuth provider types (excludes email)\",\n      \"enum\"\
        : [\n        \"google\",\n        \"discord\",\n        \"twitch\",\n        \"steam\"\n      ]\n    }\n  }\n}"
      x-response-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/AccountResponse\"\
        ,\n  \"$defs\": {\n    \"AccountResponse\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"accountId\"\
        ,\n        \"email\",\n        \"createdAt\",\n        \"emailVerified\",\n        \"roles\"\n      ],\n      \"properties\"\
        : {\n        \"accountId\": {\n          \"type\": \"string\",\n          \"format\": \"uuid\"\n        },\n     \
        \   \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\"\n        },\n        \"displayName\"\
        : {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n        \"passwordHash\": {\n    \
        \      \"type\": \"string\",\n          \"nullable\": true,\n          \"description\": \"BCrypt hashed password for
        authentication\"\n        },\n        \"createdAt\": {\n          \"type\": \"string\",\n          \"format\": \"\
        date-time\"\n        },\n        \"updatedAt\": {\n          \"type\": \"string\",\n          \"format\": \"date-time\"\
        ,\n          \"nullable\": true\n        },\n        \"emailVerified\": {\n          \"type\": \"boolean\"\n     \
        \   },\n        \"roles\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\
        \n          }\n        },\n        \"authMethods\": {\n          \"type\": \"array\",\n          \"items\": {\n  \
        \          \"$ref\": \"#/$defs/AuthMethodInfo\"\n          }\n        },\n        \"metadata\": {\n          \"type\"\
        : \"object\",\n          \"additionalProperties\": true,\n          \"nullable\": true\n        }\n      }\n    },\n\
        \    \"AuthMethodInfo\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"provider\",\n        \"\
        linkedAt\"\n      ],\n      \"properties\": {\n        \"methodId\": {\n          \"type\": \"string\",\n        \
        \  \"format\": \"uuid\"\n        },\n        \"provider\": {\n          \"$ref\": \"#/$defs/AuthProvider\"\n     \
        \   },\n        \"externalId\": {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n   \
        \     \"displayName\": {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n        \"linkedAt\"\
        : {\n          \"type\": \"string\",\n          \"format\": \"date-time\"\n        }\n      }\n    },\n    \"AuthProvider\"\
        : {\n      \"type\": \"string\",\n      \"description\": \"All authentication provider types including email\",\n\
        \      \"enum\": [\n        \"email\",\n        \"google\",\n        \"discord\",\n        \"twitch\",\n        \"\
        steam\"\n      ]\n    }\n  }\n}"
      x-endpoint-info-json: "{\n  \"summary\": \"Get account by external provider ID\",\n  \"description\": \"\",\n  \"tags\"\
        : [\n    \"Account Lookup\"\n  ],\n  \"deprecated\": false,\n  \"operationId\": \"getAccountByProvider\"\n}"
  /accounts/profile/update:
    post:
      summary: Update account profile
      operationId: updateProfile
      tags:
      - Profile Management
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileRequest'
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountResponse'
        '404':
          description: Account not found

      x-request-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/UpdateProfileRequest\"\
        ,\n  \"$defs\": {\n    \"UpdateProfileRequest\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"\
        accountId\"\n      ],\n      \"properties\": {\n        \"accountId\": {\n          \"type\": \"string\",\n      \
        \    \"format\": \"uuid\",\n          \"description\": \"ID of the account to update\"\n        },\n        \"displayName\"\
        : {\n          \"type\": \"string\",\n          \"nullable\": true,\n          \"maxLength\": 100\n        },\n  \
        \      \"metadata\": {\n          \"type\": \"object\",\n          \"additionalProperties\": true,\n          \"nullable\"\
        : true\n        }\n      }\n    }\n  }\n}"
      x-response-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/AccountResponse\"\
        ,\n  \"$defs\": {\n    \"AccountResponse\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"accountId\"\
        ,\n        \"email\",\n        \"createdAt\",\n        \"emailVerified\",\n        \"roles\"\n      ],\n      \"properties\"\
        : {\n        \"accountId\": {\n          \"type\": \"string\",\n          \"format\": \"uuid\"\n        },\n     \
        \   \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\"\n        },\n        \"displayName\"\
        : {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n        \"passwordHash\": {\n    \
        \      \"type\": \"string\",\n          \"nullable\": true,\n          \"description\": \"BCrypt hashed password for
        authentication\"\n        },\n        \"createdAt\": {\n          \"type\": \"string\",\n          \"format\": \"\
        date-time\"\n        },\n        \"updatedAt\": {\n          \"type\": \"string\",\n          \"format\": \"date-time\"\
        ,\n          \"nullable\": true\n        },\n        \"emailVerified\": {\n          \"type\": \"boolean\"\n     \
        \   },\n        \"roles\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\"\
        \n          }\n        },\n        \"authMethods\": {\n          \"type\": \"array\",\n          \"items\": {\n  \
        \          \"$ref\": \"#/$defs/AuthMethodInfo\"\n          }\n        },\n        \"metadata\": {\n          \"type\"\
        : \"object\",\n          \"additionalProperties\": true,\n          \"nullable\": true\n        }\n      }\n    },\n\
        \    \"AuthMethodInfo\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"provider\",\n        \"\
        linkedAt\"\n      ],\n      \"properties\": {\n        \"methodId\": {\n          \"type\": \"string\",\n        \
        \  \"format\": \"uuid\"\n        },\n        \"provider\": {\n          \"$ref\": \"#/$defs/AuthProvider\"\n     \
        \   },\n        \"externalId\": {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n   \
        \     \"displayName\": {\n          \"type\": \"string\",\n          \"nullable\": true\n        },\n        \"linkedAt\"\
        : {\n          \"type\": \"string\",\n          \"format\": \"date-time\"\n        }\n      }\n    },\n    \"AuthProvider\"\
        : {\n      \"type\": \"string\",\n      \"description\": \"All authentication provider types including email\",\n\
        \      \"enum\": [\n        \"email\",\n        \"google\",\n        \"discord\",\n        \"twitch\",\n        \"\
        steam\"\n      ]\n    }\n  }\n}"
      x-endpoint-info-json: "{\n  \"summary\": \"Update account profile\",\n  \"description\": \"\",\n  \"tags\": [\n    \"\
        Profile Management\"\n  ],\n  \"deprecated\": false,\n  \"operationId\": \"updateProfile\"\n}"
  /accounts/password/update:
    post:
      summary: Update account password hash
      operationId: updatePasswordHash
      tags:
      - Account Management
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePasswordRequest'
      responses:
        '200':
          description: Password hash updated successfully
        '404':
          description: Account not found

      x-request-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/UpdatePasswordRequest\"\
        ,\n  \"$defs\": {\n    \"UpdatePasswordRequest\": {\n      \"type\": \"object\",\n      \"required\": [\n        \"\
        accountId\",\n        \"passwordHash\"\n      ],\n      \"properties\": {\n        \"accountId\": {\n          \"\
        type\": \"string\",\n          \"format\": \"uuid\",\n          \"description\": \"ID of the account to update\"\n\
        \        },\n        \"passwordHash\": {\n          \"type\": \"string\",\n          \"description\": \"New pre-hashed
        password from Auth service\"\n        }\n      }\n    }\n  }\n}"
      x-response-schema-json: '{}'
      x-endpoint-info-json: "{\n  \"summary\": \"Update account password hash\",\n  \"description\": \"\",\n  \"tags\": [\n\
        \    \"Account Management\"\n  ],\n  \"deprecated\": false,\n  \"operationId\": \"updatePasswordHash\"\n}"
  /accounts/verification/update:
    post:
      summary: Update email verification status
      operationId: updateVerificationStatus
      tags:
      - Account Management
      x-permissions:
      - role: user
        states: {}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateVerificationRequest'
      responses:
        '200':
          description: Verification status updated successfully
        '404':
          description: Account not found

      x-request-schema-json: "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$ref\": \"#/$defs/UpdateVerificationRequest\"\
        ,\n  \"$defs\": {\n    \"UpdateVerificationRequest\": {\n      \"type\": \"object\",\n      \"required\": [\n    \
        \    \"accountId\",\n        \"emailVerified\"\n      ],\n      \"properties\": {\n        \"accountId\": {\n    \
        \      \"type\": \"string\",\n          \"format\": \"uuid\",\n          \"description\": \"ID of the account to update\"\
        \n        },\n        \"emailVerified\": {\n          \"type\": \"boolean\"\n        }\n      }\n    }\n  }\n}"
      x-response-schema-json: '{}'
      x-endpoint-info-json: "{\n  \"summary\": \"Update email verification status\",\n  \"description\": \"\",\n  \"tags\"\
        : [\n    \"Account Management\"\n  ],\n  \"deprecated\": false,\n  \"operationId\": \"updateVerificationStatus\"\n\
        }"
components:
  schemas:
    # Shared Enum Definitions (consolidated to avoid duplication)
    AuthProvider:
      type: string
      description: All authentication provider types including email
      enum: [email, google, discord, twitch, steam]

    OAuthProvider:
      type: string
      description: OAuth provider types (excludes email)
      enum: [google, discord, twitch, steam]

    # Request Models for POST-only pattern
    ListAccountsRequest:
      type: object
      description: Request to list accounts with optional filtering
      properties:
        email:
          type: string
          format: email
          nullable: true
        displayName:
          type: string
          nullable: true
        provider:
          allOf:
          - $ref: '#/components/schemas/AuthProvider'
          nullable: true
        verified:
          type: boolean
          nullable: true
        page:
          type: integer
          minimum: 1
          default: 1
        pageSize:
          type: integer
          minimum: 1
          maximum: 100
          default: 20

    GetAccountRequest:
      type: object
      description: Request to get a specific account by ID
      required:
      - accountId
      properties:
        accountId:
          type: string
          format: uuid
          description: ID of the account to retrieve

    DeleteAccountRequest:
      type: object
      description: Request to delete a specific account
      required:
      - accountId
      properties:
        accountId:
          type: string
          format: uuid
          description: ID of the account to delete

    GetAccountByEmailRequest:
      type: object
      description: Request to get account by email address
      required:
      - email
      properties:
        email:
          type: string
          format: email
          description: Email address to look up

    GetAuthMethodsRequest:
      type: object
      description: Request to get authentication methods for an account
      required:
      - accountId
      properties:
        accountId:
          type: string
          format: uuid
          description: ID of the account

    RemoveAuthMethodRequest:
      type: object
      description: Request to remove an authentication method from an account
      required:
      - accountId
      - methodId
      properties:
        accountId:
          type: string
          format: uuid
          description: ID of the account
        methodId:
          type: string
          format: uuid
          description: ID of the authentication method to remove

    GetAccountByProviderRequest:
      type: object
      description: Request to get account by external provider ID
      required:
      - provider
      - externalId
      properties:
        provider:
          $ref: '#/components/schemas/OAuthProvider'
          description: OAuth provider type
        externalId:
          type: string
          description: External ID from the provider

    CreateAccountRequest:
      type: object
      required:
      - email
      properties:
        email:
          type: string
          format: email
        passwordHash:
          type: string
          nullable: true
          description: Pre-hashed password from Auth service
        displayName:
          type: string
          nullable: true
          maxLength: 100
        emailVerified:
          type: boolean
          default: false
        roles:
          type: array
          items:
            type: string
          default: []
        metadata:
          type: object
          additionalProperties: true
          nullable: true

    UpdateAccountRequest:
      type: object
      required:
      - accountId
      properties:
        accountId:
          type: string
          format: uuid
          description: ID of the account to update
        displayName:
          type: string
          nullable: true
          maxLength: 100
        roles:
          type: array
          items:
            type: string
        metadata:
          type: object
          additionalProperties: true
          nullable: true

    UpdateProfileRequest:
      type: object
      required:
      - accountId
      properties:
        accountId:
          type: string
          format: uuid
          description: ID of the account to update
        displayName:
          type: string
          nullable: true
          maxLength: 100
        metadata:
          type: object
          additionalProperties: true
          nullable: true

    UpdatePasswordRequest:
      type: object
      required:
      - accountId
      - passwordHash
      properties:
        accountId:
          type: string
          format: uuid
          description: ID of the account to update
        passwordHash:
          type: string
          description: New pre-hashed password from Auth service

    UpdateVerificationRequest:
      type: object
      required:
      - accountId
      - emailVerified
      properties:
        accountId:
          type: string
          format: uuid
          description: ID of the account to update
        emailVerified:
          type: boolean

    AddAuthMethodRequest:
      type: object
      required:
      - accountId
      - provider
      properties:
        accountId:
          type: string
          format: uuid
          description: ID of the account to add auth method to
        provider:
          $ref: '#/components/schemas/OAuthProvider'
        externalId:
          type: string
        displayName:
          type: string
          nullable: true

    # Response Models
    AccountResponse:
      type: object
      required:
      - accountId
      - email
      - createdAt
      - emailVerified
      - roles
      properties:
        accountId:
          type: string
          format: uuid
        email:
          type: string
          format: email
        displayName:
          type: string
          nullable: true
        passwordHash:
          type: string
          nullable: true
          description: BCrypt hashed password for authentication
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
          nullable: true
        emailVerified:
          type: boolean
        roles:
          type: array
          items:
            type: string
        authMethods:
          type: array
          items:
            $ref: '#/components/schemas/AuthMethodInfo'
        metadata:
          type: object
          additionalProperties: true
          nullable: true

    AuthMethodInfo:
      type: object
      required:
      - provider
      - linkedAt
      properties:
        methodId:
          type: string
          format: uuid
        provider:
          $ref: '#/components/schemas/AuthProvider'
        externalId:
          type: string
          nullable: true
        displayName:
          type: string
          nullable: true
        linkedAt:
          type: string
          format: date-time

    AuthMethodResponse:
      type: object
      required:
      - methodId
      - provider
      - linkedAt
      properties:
        methodId:
          type: string
          format: uuid
        provider:
          $ref: '#/components/schemas/OAuthProvider'
        externalId:
          type: string
        displayName:
          type: string
          nullable: true
        linkedAt:
          type: string
          format: date-time

    AuthMethodsResponse:
      type: object
      required:
      - authMethods
      properties:
        authMethods:
          type: array
          items:
            $ref: '#/components/schemas/AuthMethodInfo'

    AccountListResponse:
      type: object
      required:
      - accounts
      - totalCount
      - page
      - pageSize
      properties:
        accounts:
          type: array
          items:
            $ref: '#/components/schemas/AccountResponse'
        totalCount:
          type: integer
        page:
          type: integer
        pageSize:
          type: integer
        hasNextPage:
          type: boolean
        hasPreviousPage:
          type: boolean

