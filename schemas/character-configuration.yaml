openapi: 3.0.3
info:
  title: Character Service Configuration
  description: |
    Configuration schema for Character service.
    Properties are bound to environment variables with BANNOU_ prefix.

    **Schema Rules**: AI agents MUST review docs/reference/SCHEMA-RULES.md before
    modifying this schema. Optional reference types require `nullable: true`.
  version: 1.0.0
paths: {}
x-service-configuration:
  properties:
    # Pagination Configuration
    MaxPageSize:
      type: integer
      description: Maximum page size for list queries
      env: CHARACTER_MAX_PAGE_SIZE
      default: 100
    DefaultPageSize:
      type: integer
      description: Default page size when not specified
      env: CHARACTER_DEFAULT_PAGE_SIZE
      default: 20

    # Character Lifecycle
    CharacterRetentionDays:
      type: integer
      description: Number of days to retain deleted characters before permanent removal
      env: CHARACTER_RETENTION_DAYS
      default: 90
    # Concurrency Configuration
    RealmIndexUpdateMaxRetries:
      type: integer
      description: Maximum retry attempts when updating realm character index (optimistic concurrency)
      env: CHARACTER_REALM_INDEX_UPDATE_MAX_RETRIES
      default: 3
    # Cleanup Configuration
    CleanupGracePeriodDays:
      type: integer
      description: Grace period in days before cleanup of dead character references (default 30 days)
      env: CHARACTER_CLEANUP_GRACE_PERIOD_DAYS
      default: 30

    # Compression Configuration
    CompressionMaxBackstoryPoints:
      type: integer
      description: Maximum number of backstory points to include in character compression summary
      env: CHARACTER_COMPRESSION_MAX_BACKSTORY_POINTS
      default: 5
    CompressionMaxLifeEvents:
      type: integer
      description: Maximum number of major life events to include in character compression summary
      env: CHARACTER_COMPRESSION_MAX_LIFE_EVENTS
      default: 10

    # Personality Summary Configuration
    PersonalityTraitThreshold:
      type: number
      format: double
      description: Threshold for personality trait classification (values above this are positive, below negative are opposite)
      env: CHARACTER_PERSONALITY_TRAIT_THRESHOLD
      default: 0.3
