openapi: 3.0.3
info:
  title: Game Session Service Configuration
  description: |
    Configuration schema for Game Session service.
    Properties are bound to environment variables with BANNOU_ prefix.

    **NRT Compliance**: AI agents MUST review docs/NRT-SCHEMA-RULES.md before
    modifying this schema. Optional reference types require `nullable: true`.
  version: 1.0.0
paths: {}
x-service-configuration:
  properties:
    ServerSalt:
      type: string
      description: Server salt for GUID generation. Must be shared across all instances for session GUIDs to work correctly. Change in production.
      env: GAME_SESSION_SERVER_SALT
      default: "bannou-dev-game-session-salt-change-in-production"
    MaxPlayersPerSession:
      type: integer
      description: Maximum players allowed per session
      default: 16
      env: GAME_SESSION_MAX_PLAYERS_PER_SESSION
    DefaultSessionTimeoutSeconds:
      type: integer
      description: Default session timeout in seconds (0 = no timeout)
      default: 0
      env: GAME_SESSION_DEFAULT_SESSION_TIMEOUT_SECONDS
    DefaultReservationTtlSeconds:
      type: integer
      description: Default TTL for player reservations when not specified in request
      default: 60
      env: GAME_SESSION_DEFAULT_RESERVATION_TTL_SECONDS
    DefaultLobbyMaxPlayers:
      type: integer
      description: Default maximum players for game lobbies
      default: 100
      env: GAME_SESSION_DEFAULT_LOBBY_MAX_PLAYERS
    CleanupIntervalSeconds:
      type: integer
      description: Interval between reservation cleanup cycles
      default: 30
      env: GAME_SESSION_CLEANUP_INTERVAL_SECONDS
    CleanupServiceStartupDelaySeconds:
      type: integer
      description: Delay before cleanup service starts (allows other services to initialize)
      default: 10
      env: GAME_SESSION_CLEANUP_SERVICE_STARTUP_DELAY_SECONDS
    StartupServiceDelaySeconds:
      type: integer
      description: Delay before startup service initializes subscription caches
      default: 2
      env: GAME_SESSION_STARTUP_SERVICE_DELAY_SECONDS
    SubscriberSessionRetryMaxAttempts:
      type: integer
      description: Maximum retry attempts for optimistic concurrency on subscriber session state
      default: 3
      env: GAME_SESSION_SUBSCRIBER_SESSION_RETRY_MAX_ATTEMPTS
    LockTimeoutSeconds:
      type: integer
      description: Timeout in seconds for distributed session locks
      default: 60
      env: GAME_SESSION_LOCK_TIMEOUT_SECONDS
    SupportedGameServices:
      type: string
      description: Comma-separated list of supported game service stub names
      default: "arcadia,generic"
      env: GAME_SESSION_SUPPORTED_GAME_SERVICES
