openapi: 3.0.3
info:
  title: Seed Service Configuration
  description: |
    Configuration schema for Seed service.
    Properties are bound to environment variables with BANNOU_ prefix.

    **SCHEMA MODIFICATION GATE**: STOP. Before modifying this schema, you MUST:
    1. Read docs/reference/SCHEMA-RULES.md
    2. State which section applies to your change
    3. Only then proceed with edits
    Edits without stating the applicable rule are FORBIDDEN.
  version: 1.0.0
paths: {}
x-service-configuration:
  properties:
    capabilityRecomputeDebounceMs:
      type: integer
      env: SEED_CAPABILITY_RECOMPUTE_DEBOUNCE_MS
      default: 5000
      description: Debounce interval in milliseconds before recomputing capability manifest after growth changes
    growthDecayEnabled:
      type: boolean
      env: SEED_GROWTH_DECAY_ENABLED
      default: false
      description: Global toggle for growth domain decay. Per-type overrides can enable or disable decay independently.
    growthDecayRatePerDay:
      type: number
      format: float
      env: SEED_GROWTH_DECAY_RATE_PER_DAY
      default: 0.01
      description: Global daily decay rate applied to unused growth domains. Per-type overrides take precedence.
    decayWorkerIntervalSeconds:
      type: integer
      env: SEED_DECAY_WORKER_INTERVAL_SECONDS
      default: 900
      minimum: 60
      maximum: 86400
      description: Interval in seconds between growth decay worker cycles (default 15 minutes)
    decayWorkerStartupDelaySeconds:
      type: integer
      env: SEED_DECAY_WORKER_STARTUP_DELAY_SECONDS
      default: 30
      minimum: 0
      maximum: 300
      description: Delay in seconds before the decay worker starts its first cycle
    bondSharedGrowthMultiplier:
      type: number
      format: float
      env: SEED_BOND_SHARED_GROWTH_MULTIPLIER
      default: 1.5
      description: Growth multiplier applied when bonded seeds grow together in the same context
    maxSeedTypesPerGameService:
      type: integer
      env: SEED_MAX_SEED_TYPES_PER_GAME_SERVICE
      default: 50
      description: Maximum number of seed types that can be registered per game service
    defaultMaxSeedsPerOwner:
      type: integer
      env: SEED_DEFAULT_MAX_SEEDS_PER_OWNER
      default: 3
      description: Default maximum seeds of any single type per owner when not specified in type definition
    bondStrengthGrowthRate:
      type: number
      format: float
      env: SEED_BOND_STRENGTH_GROWTH_RATE
      default: 0.1
      description: Rate at which bond strength increases per unit of shared growth recorded
    defaultQueryPageSize:
      type: integer
      env: SEED_DEFAULT_QUERY_PAGE_SIZE
      default: 100
      description: Default page size for queries that do not expose pagination parameters
    seedDataCacheTtlSeconds:
      type: integer
      env: SEED_SEED_DATA_CACHE_TTL_SECONDS
      default: 60
      minimum: 5
      maximum: 3600
      description: TTL in seconds for the seed data cache used by the variable provider factory
