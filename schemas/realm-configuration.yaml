openapi: 3.0.4
info:
  title: Realm Service Configuration
  description: |
    Configuration schema for Realm service.
    Properties are bound to environment variables with BANNOU_ prefix.

    **SCHEMA MODIFICATION GATE**: STOP. Before modifying this schema, you MUST:
    1. Read docs/reference/SCHEMA-RULES.md
    2. State which section applies to your change
    3. Only then proceed with edits
    Edits without stating the applicable rule are FORBIDDEN.
  version: 1.0.0
paths: {}
x-service-configuration:
  properties:
    MergePageSize:
      type: integer
      env: REALM_MERGE_PAGE_SIZE
      default: 50
      minimum: 1
      maximum: 100
      description: Page size for paginated entity migration during realm merge operations
    OptimisticRetryAttempts:
      type: integer
      env: REALM_OPTIMISTIC_RETRY_ATTEMPTS
      default: 3
      minimum: 1
      maximum: 10
      description: Number of retry attempts for ETag-based optimistic concurrency operations
    MergeLockTimeoutSeconds:
      type: integer
      env: REALM_MERGE_LOCK_TIMEOUT_SECONDS
      default: 120
      minimum: 10
      maximum: 600
      description: Timeout in seconds for distributed lock during realm merge operations
    AutoInitializeWorldstateClock:
      type: boolean
      env: REALM_AUTO_INITIALIZE_WORLDSTATE_CLOCK
      default: false
      description: When true, automatically initializes a worldstate realm clock after creating a new realm. If initialization fails, realm creation still succeeds (warning logged). Env var REALM_AUTO_INITIALIZE_WORLDSTATE_CLOCK.
    DefaultCalendarTemplateCode:
      type: string
      nullable: true
      env: REALM_DEFAULT_CALENDAR_TEMPLATE_CODE
      description: Default calendar template code passed to worldstate when auto-initializing realm clocks. Required when AutoInitializeWorldstateClock is true. Env var REALM_DEFAULT_CALENDAR_TEMPLATE_CODE.
