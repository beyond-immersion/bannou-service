openapi: 3.0.3
info:
  title: Orchestrator Service Events
  description: |
    Event models for Orchestrator service RabbitMQ pub/sub.
    Used for internal health checks and orchestration events.
  version: 1.0.0
  x-event-subscriptions:
    # Service heartbeats from all bannou instances - used for deployment validation
    - topic: bannou-service-heartbeats
      event: ServiceHeartbeatEvent
      handler: HandleServiceHeartbeat

paths: {}

components:
  schemas:
    # Base event schema for $ref resolution
    BaseServiceEvent:
      type: object
      required:
        - eventId
        - timestamp
      properties:
        eventId:
          type: string
          description: Unique identifier for this event instance
        timestamp:
          type: string
          format: date-time
          description: When the event was created (UTC)

    # =========================================================================
    # Health Check Events
    # =========================================================================
    OrchestratorHealthPingEvent:
      allOf:
        - $ref: '#/components/schemas/BaseServiceEvent'
      type: object
      description: |
        Simple health ping event published to verify pub/sub path is active.
        Used by infrastructure health checks.
      required:
        - status
      properties:
        status:
          type: string
          enum: [ok, degraded, checking]
          description: Current health status
          default: ok
