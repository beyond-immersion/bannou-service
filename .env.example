# Bannou Service Configuration Template
# Copy this file to .env and update with your actual values

# Database Configuration
ACCOUNT_DB_USER=your_db_user
ACCOUNT_DB_PASSWORD=your_db_password

# Auth Token Keys (base64 encoded)
# Generate new keys using: ssh-keygen -t rsa -b 1024 -m PEM -f temp_key && base64 -w 0 temp_key.pub && base64 -w 0 temp_key
AUTH_TOKEN_PUBLIC_KEY=your_base64_public_key
AUTH_TOKEN_PRIVATE_KEY=your_base64_private_key

# Service Domain (your domain or localhost for development)
SERVICE_DOMAIN=localhost

# Auth Service Configuration
AUTH_JWT_SECRET=your-jwt-secret-key-change-in-production
AUTH_JWT_ISSUER=bannou-auth-dev
AUTH_JWT_AUDIENCE=bannou-api-dev
AUTH_JWT_EXPIRATION_MINUTES=60
AUTH_OAUTH_CALLBACK_BASE_URL=https://localhost:5001/auth/callback
AUTH_MAX_LOGIN_ATTEMPTS=5
AUTH_RATE_LIMIT_WINDOW_MINUTES=15

# Services Configuration
AUTH_SERVICE_ENABLED=true
ACCOUNTS_SERVICE_ENABLED=true
PERMISSIONS_SERVICE_ENABLED=true
CONNECT_SERVICE_ENABLED=true

# Local Development Port Configuration
# OpenResty edge proxy uses standard ports 80/443, bannou internal on 8080/8443
HTTP_Web_Host_Port=8080
HTTPS_Web_Host_Port=8443
BANNOU_HTTP_Web_Host_Port=8080
BANNOU_HTTPS_Web_Host_Port=8443

# HTTP Tester Configuration (via OpenResty)
Http_Base_Url=http://localhost:80
Register_Endpoint=localhost:80/api/accounts/create
Login_Credentials_Endpoint=localhost:80/api/auth/login
Login_Token_Endpoint=localhost:80/api/auth/refresh
Client_Username=testuser
Client_Password=TestPassword123!

# Edge Tester (WebSocket) Configuration (via OpenResty)
Connect_Endpoint=localhost:80/connect

# Logging Configuration
BANNOU_App_Logging_Level=Information

# Infrastructure Backend Configuration
# Controls hybrid Dapr/native mode for gradual migration
# Options for MESSAGING_BACKEND: dapr, masstransit, rabbitmq
# Options for STATE_BACKEND: dapr, native
BANNOU_MESSAGING_BACKEND=dapr
BANNOU_STATE_BACKEND=dapr
BANNOU_DAPR_ENABLED=true

# MinIO/Asset Storage Configuration
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
ASSET_STORAGE_PROVIDER=minio
ASSET_STORAGE_BUCKET=bannou-assets
ASSET_STORAGE_ENDPOINT=http://minio:9000
ASSET_STORAGE_ACCESS_KEY=minioadmin
ASSET_STORAGE_SECRET_KEY=minioadmin
ASSET_TOKEN_TTL_SECONDS=3600
ASSET_MAX_UPLOAD_SIZE_MB=500
ASSET_MULTIPART_THRESHOLD_MB=50