# Bannou Service Configuration Template
# Copy this file to .env and update with your actual values
#
# This file is AUTO-GENERATED from schemas/*-configuration.yaml
# Do not edit manually - regenerate with: python3 scripts/generate-env-example.py
#
# Environment variable naming follows FOUNDATION TENETS:
#   - Service prefix: {SERVICE}_ (e.g., AUTH_, CONNECT_, ACCOUNT_)
#   - Property names: UPPER_SNAKE_CASE with underscores between words
#   - Example: AUTH_JWT_SECRET -> JwtSecret property in AuthServiceConfiguration
#

# =============================================================================
# Database Configuration (Third-party Infrastructure)
# =============================================================================
ACCOUNT_DB_USER=your_db_user
ACCOUNT_DB_PASSWORD=your_db_password

# =============================================================================
# Auth Service Configuration (AUTH_*)
# =============================================================================
AUTH_CONNECT_URL=ws://localhost:5014/connect
# Base URL for password reset page
AUTH_PASSWORD_RESET_BASE_URL=https://your-domain.com/reset-password

# JWT Configuration
AUTH_JWT_EXPIRATION_MINUTES=60

# Mock Providers (Development)
AUTH_MOCK_PROVIDERS=false

# OAuth Configuration
AUTH_MOCK_DISCORD_ID=mock-discord-123456
AUTH_MOCK_GOOGLE_ID=mock-google-123456
AUTH_MOCK_STEAM_ID=76561198000000000
AUTH_DISCORD_CLIENT_ID=your-client-id
AUTH_DISCORD_CLIENT_SECRET=your-client-secret
AUTH_DISCORD_REDIRECT_URI=https://your-domain.com/auth/oauth/discord/callback
AUTH_GOOGLE_CLIENT_ID=your-client-id
AUTH_GOOGLE_CLIENT_SECRET=your-client-secret
AUTH_GOOGLE_REDIRECT_URI=https://your-domain.com/auth/oauth/google/callback
AUTH_TWITCH_CLIENT_ID=your-client-id
AUTH_TWITCH_CLIENT_SECRET=your-client-secret
AUTH_TWITCH_REDIRECT_URI=https://your-domain.com/auth/oauth/twitch/callback
AUTH_STEAM_API_KEY=your-api-key
AUTH_STEAM_APP_ID=480

# Timing/TTL Configuration
AUTH_PASSWORD_RESET_TOKEN_TTL_MINUTES=30
AUTH_SESSION_TOKEN_TTL_DAYS=7

# =============================================================================
# Account Service Configuration (ACCOUNT_*)
# =============================================================================
# Comma-separated list of admin email addresses
ACCOUNT_ADMIN_EMAILS=admin@example.com,devops@example.com
# Email domain that grants admin access (e.g., "@company.com")
ACCOUNT_ADMIN_EMAIL_DOMAIN=@admin.example.com
# Maximum retry attempts for account index update operations
ACCOUNT_INDEX_UPDATE_MAX_RETRIES=3
# Number of accounts to process per batch in list operations
ACCOUNT_LIST_BATCH_SIZE=100

# =============================================================================
# Connect Service Configuration (CONNECT_*)
# =============================================================================
# Maximum number of concurrent WebSocket connections
CONNECT_MAX_CONCURRENT_CONNECTIONS=10000
# Interval between heartbeat messages
CONNECT_HEARTBEAT_INTERVAL_SECONDS=30
# Maximum number of queued messages per connection
CONNECT_MESSAGE_QUEUE_SIZE=1000
# Binary protocol version identifier
CONNECT_BINARY_PROTOCOL_VERSION=2.0
# Size of message buffers in bytes
CONNECT_BUFFER_SIZE=65536
# Services available to unauthenticated connections
CONNECT_DEFAULT_SERVICES=auth,website
# Additional services available to authenticated connections
CONNECT_AUTHENTICATED_SERVICES=account,behavior,permission,gamesession
# Enable routing messages between WebSocket clients
CONNECT_ENABLE_CLIENT_TO_CLIENT_ROUTING=true
# Rate limit for messages per minute per client
CONNECT_MAX_MESSAGES_PER_MINUTE=1000
# Rate limit window in minutes
CONNECT_RATE_LIMIT_WINDOW_MINUTES=1
# RabbitMQ connection string for client event subscriptions
CONNECT_RABBITMQ_CONNECTION_STRING=amqp://guest:guest@rabbitmq:5672
CONNECT_SERVER_SALT=bannou-dev-connect-salt-change-in-production
CONNECT_URL=ws://localhost:5014/connect
CONNECT_CONNECTION_MODE=external
CONNECT_INTERNAL_AUTH_MODE=service-token
# Secret for X-Service-Token validation when InternalAuthMode is service-token
CONNECT_INTERNAL_SERVICE_TOKEN=your-internal-service-token-secret
# Window for client reconnection after disconnect in seconds (default 5 minutes)
CONNECT_RECONNECTION_WINDOW_SECONDS=300
# Interval in seconds for WebSocket keep-alive ping/pong
CONNECT_WEBSOCKET_KEEP_ALIVE_INTERVAL_SECONDS=30
# Additional minutes added to reconnection window on each extension
CONNECT_RECONNECTION_WINDOW_EXTENSION_MINUTES=1

# Timing/TTL Configuration
CONNECT_CONNECTION_TIMEOUT_SECONDS=300
CONNECT_SESSION_TTL_SECONDS=86400
CONNECT_HEARTBEAT_TTL_SECONDS=300
CONNECT_HTTP_CLIENT_TIMEOUT_SECONDS=120
CONNECT_CONNECTION_SHUTDOWN_TIMEOUT_SECONDS=5

# =============================================================================
# Game Session Service Configuration (GAME_SESSION_*)
# =============================================================================
GAME_SESSION_SERVER_SALT=bannou-dev-game-session-salt-change-in-production
# Maximum players allowed per session
GAME_SESSION_MAX_PLAYERS_PER_SESSION=16
# Default maximum players for game lobbies
GAME_SESSION_DEFAULT_LOBBY_MAX_PLAYERS=100
# Interval between reservation cleanup cycles
GAME_SESSION_CLEANUP_INTERVAL_SECONDS=30
# Delay before cleanup service starts (allows other services to initialize)
GAME_SESSION_CLEANUP_SERVICE_STARTUP_DELAY_SECONDS=10
# Delay before startup service initializes subscription caches
GAME_SESSION_STARTUP_SERVICE_DELAY_SECONDS=2
# Comma-separated list of supported game service stub names
GAME_SESSION_SUPPORTED_GAME_SERVICES=arcadia,generic

# Timing/TTL Configuration
GAME_SESSION_DEFAULT_SESSION_TIMEOUT_SECONDS=0
GAME_SESSION_DEFAULT_RESERVATION_TTL_SECONDS=60

# =============================================================================
# Orchestrator Service Configuration (ORCHESTRATOR_*)
# =============================================================================
ORCHESTRATOR_SECURE_WEBSOCKET=true
# Default container orchestration backend when not specified in deploy request
ORCHESTRATOR_DEFAULT_BACKEND=compose
# Time in minutes before a service is marked as degraded
ORCHESTRATOR_DEGRADATION_THRESHOLD_MINUTES=5
# Portainer API URL
ORCHESTRATOR_PORTAINER_URL=https://portainer.example.com:9443
# Portainer API key
ORCHESTRATOR_PORTAINER_API_KEY=ptr_your-portainer-api-key-here
# Portainer endpoint ID
ORCHESTRATOR_PORTAINER_ENDPOINT_ID=1
# Docker host for direct Docker API access
ORCHESTRATOR_DOCKER_HOST=unix:///var/run/docker.sock
# Docker network name for deployed containers
ORCHESTRATOR_DOCKER_NETWORK=bannou_default
# Host path for TLS certificates
ORCHESTRATOR_CERTIFICATES_HOST_PATH=/app/provisioning/certificates
# Host path for orchestrator deployment presets
ORCHESTRATOR_PRESETS_HOST_PATH=/app/provisioning/orchestrator/presets
# Docker volume name for logs
ORCHESTRATOR_LOGS_VOLUME=logs-data
# OpenResty hostname for cache invalidation calls
ORCHESTRATOR_OPENRESTY_HOST=openresty
# OpenResty port for cache invalidation calls
ORCHESTRATOR_OPENRESTY_PORT=80
# Kubernetes namespace for deployments
ORCHESTRATOR_KUBERNETES_NAMESPACE=default
# Path to kubeconfig file (null uses default ~/.kube/config)
ORCHESTRATOR_KUBECONFIG_PATH=/path/to/.kube/config
# Interval in seconds for polling container status during deploy
ORCHESTRATOR_CONTAINER_STATUS_POLL_INTERVAL_SECONDS=2
# Redis connection string for orchestrator state.
ORCHESTRATOR_REDIS_CONNECTION_STRING=bannou-redis:6379

# Timing/TTL Configuration
ORCHESTRATOR_CACHE_TTL_MINUTES=5
ORCHESTRATOR_HEARTBEAT_TIMEOUT_SECONDS=90
ORCHESTRATOR_OPENRESTY_REQUEST_TIMEOUT_SECONDS=5

# =============================================================================
# Actor Service Configuration (ACTOR_*)
# =============================================================================
ACTOR_DEPLOYMENT_MODE=bannou
ACTOR_POOL_NODE_ID=
ACTOR_POOL_NODE_APP_ID=
ACTOR_POOL_NODE_TYPE=shared
# Maximum actors this pool node can run. Overrides DefaultActorsPerNode when set.
ACTOR_POOL_NODE_CAPACITY=100
# App-id of control plane for pool node registration. Pool nodes only.
ACTOR_CONTROL_PLANE_APP_ID=bannou
# Docker image for pool nodes (pool-per-type, shared-pool, auto-scale modes)
ACTOR_POOL_NODE_IMAGE=bannou-actor-pool:latest
# Minimum pool nodes to maintain (auto-scale mode)
ACTOR_MIN_POOL_NODES=1
# Maximum pool nodes allowed (auto-scale mode)
ACTOR_MAX_POOL_NODES=10
# Default capacity per pool node
ACTOR_DEFAULT_ACTORS_PER_NODE=100
# Pool node heartbeat frequency
ACTOR_HEARTBEAT_INTERVAL_SECONDS=10
# Default behavior loop interval in milliseconds
ACTOR_DEFAULT_TICK_INTERVAL_MS=100
# Default interval for periodic state saves (0 to disable)
ACTOR_DEFAULT_AUTOSAVE_INTERVAL_SECONDS=60
# Max perceptions queued per actor before dropping oldest
ACTOR_PERCEPTION_QUEUE_SIZE=100
# Max messages queued per actor before dropping oldest
ACTOR_MESSAGE_QUEUE_SIZE=50
ACTOR_STATE_UPDATE_TRANSPORT=messaging
ACTOR_GOAP_REPLAN_THRESHOLD=0.3
# Maximum depth for GOAP planning search
ACTOR_GOAP_MAX_PLAN_DEPTH=10
# Node ID used when running in local/bannou deployment mode
ACTOR_LOCAL_MODE_NODE_ID=bannou-local
# App ID used when running in local/bannou deployment mode
ACTOR_LOCAL_MODE_APP_ID=bannou
# Minimum urgency for perception to be processed (0.0-1.0)
ACTOR_PERCEPTION_FILTER_THRESHOLD=0.1
# Minimum urgency for perception to become a memory (0.0-1.0)
ACTOR_PERCEPTION_MEMORY_THRESHOLD=0.7
ACTOR_SHORT_TERM_MEMORY_MINUTES=5
# Interval in seconds between pool health check operations
ACTOR_POOL_HEALTH_CHECK_INTERVAL_SECONDS=15
# Interval in milliseconds for checking scheduled events
ACTOR_SCHEDULED_EVENT_CHECK_INTERVAL_MS=100
# Maximum encounter results returned per query
ACTOR_MAX_ENCOUNTER_RESULTS_PER_QUERY=50
# Maximum retry attempts for memory store operations
ACTOR_MEMORY_STORE_MAX_RETRIES=3

# Timing/TTL Configuration
ACTOR_HEARTBEAT_TIMEOUT_SECONDS=30
ACTOR_GOAP_PLAN_TIMEOUT_MS=50
ACTOR_DEFAULT_MEMORY_EXPIRATION_MINUTES=60
ACTOR_OPERATION_TIMEOUT_SECONDS=5
ACTOR_PERSONALITY_CACHE_TTL_MINUTES=5
ACTOR_ENCOUNTER_CACHE_TTL_MINUTES=5

# =============================================================================
# Behavior Service Configuration (BEHAVIOR_*)
# =============================================================================
# Threshold below which urgency is considered low (0.0-1.0)
BEHAVIOR_LOW_URGENCY_THRESHOLD=0.3
# Threshold above which urgency is considered high (0.0-1.0)
BEHAVIOR_HIGH_URGENCY_THRESHOLD=0.7
# Maximum depth for GOAP planning search at low urgency
BEHAVIOR_LOW_URGENCY_MAX_PLAN_DEPTH=10
# Maximum nodes to explore during GOAP planning at low urgency
BEHAVIOR_LOW_URGENCY_MAX_PLAN_NODES=1000
# Maximum depth for GOAP planning search at medium urgency
BEHAVIOR_MEDIUM_URGENCY_MAX_PLAN_DEPTH=6
# Maximum nodes to explore during GOAP planning at medium urgency
BEHAVIOR_MEDIUM_URGENCY_MAX_PLAN_NODES=500
# Maximum depth for GOAP planning search at high urgency
BEHAVIOR_HIGH_URGENCY_MAX_PLAN_DEPTH=3
# Maximum nodes to explore during GOAP planning at high urgency
BEHAVIOR_HIGH_URGENCY_MAX_PLAN_NODES=200
# Attention priority weight for threat perceptions
BEHAVIOR_DEFAULT_THREAT_WEIGHT=10.0
# Attention priority weight for novel perceptions
BEHAVIOR_DEFAULT_NOVELTY_WEIGHT=5.0
# Attention priority weight for social perceptions
BEHAVIOR_DEFAULT_SOCIAL_WEIGHT=3.0
# Attention priority weight for routine perceptions
BEHAVIOR_DEFAULT_ROUTINE_WEIGHT=1.0
# Urgency threshold for fast-tracking threat perceptions (0.0-1.0)
BEHAVIOR_DEFAULT_THREAT_FAST_TRACK_THRESHOLD=0.8
# Weight for emotional significance in perception scoring
BEHAVIOR_DEFAULT_EMOTIONAL_WEIGHT=0.4
# Weight for goal relevance in perception scoring
BEHAVIOR_DEFAULT_GOAL_RELEVANCE_WEIGHT=0.4
# Weight for relationship significance in perception scoring
BEHAVIOR_DEFAULT_RELATIONSHIP_WEIGHT=0.2
# Maximum memory entries per actor
BEHAVIOR_DEFAULT_MEMORY_LIMIT=100
# Max retries for memory store operations
BEHAVIOR_MEMORY_STORE_MAX_RETRIES=3
# Minimum relevance score for memory retrieval (0.0-1.0)
BEHAVIOR_MEMORY_MINIMUM_RELEVANCE_THRESHOLD=0.1
# Significance score threshold for storing memories (0.0-1.0)
BEHAVIOR_DEFAULT_STORAGE_THRESHOLD=0.7
# Weight for category match in memory relevance scoring
BEHAVIOR_MEMORY_CATEGORY_MATCH_WEIGHT=0.3
# Weight for content keyword overlap in memory relevance scoring
BEHAVIOR_MEMORY_CONTENT_OVERLAP_WEIGHT=0.4
# Weight for metadata key overlap in memory relevance scoring
BEHAVIOR_MEMORY_METADATA_OVERLAP_WEIGHT=0.2
# Maximum recency bonus for memories less than 1 hour old
BEHAVIOR_MEMORY_RECENCY_BONUS_WEIGHT=0.1
# Weight for memory significance in relevance scoring
BEHAVIOR_MEMORY_SIGNIFICANCE_BONUS_WEIGHT=0.1
# Maximum constants in behavior constant pool
BEHAVIOR_COMPILER_MAX_CONSTANTS=256
# Maximum strings in behavior string table
BEHAVIOR_COMPILER_MAX_STRINGS=65536

# Key Prefixes
BEHAVIOR_BUNDLE_MEMBERSHIP_KEY_PREFIX=bundle-membership:
BEHAVIOR_METADATA_KEY_PREFIX=behavior-metadata:
BEHAVIOR_GOAP_METADATA_KEY_PREFIX=goap-metadata:
BEHAVIOR_MEMORY_KEY_PREFIX=memory:
BEHAVIOR_MEMORY_INDEX_KEY_PREFIX=memory-index:

# Timing/TTL Configuration
BEHAVIOR_LOW_URGENCY_PLAN_TIMEOUT_MS=100
BEHAVIOR_MEDIUM_URGENCY_PLAN_TIMEOUT_MS=50
BEHAVIOR_HIGH_URGENCY_PLAN_TIMEOUT_MS=20

# =============================================================================
# Permission Service Configuration (PERMISSION_*)
# =============================================================================
# Distributed Lock Configuration
PERMISSION_LOCK_MAX_RETRIES=10
PERMISSION_LOCK_BASE_DELAY_MS=100
PERMISSION_LOCK_EXPIRY_SECONDS=30

# =============================================================================
# Achievement Service Configuration (ACHIEVEMENT_*)
# =============================================================================
# Xbox Live client ID (optional - not implemented)
ACHIEVEMENT_XBOX_CLIENT_ID=your-client-id
# Xbox Live client secret (optional - not implemented)
ACHIEVEMENT_XBOX_CLIENT_SECRET=your-client-secret
# PlayStation Network client ID (optional - not implemented)
ACHIEVEMENT_PLAYSTATION_CLIENT_ID=your-client-id
# PlayStation Network client secret (optional - not implemented)
ACHIEVEMENT_PLAYSTATION_CLIENT_SECRET=your-client-secret
# Number of retry attempts for failed platform syncs
ACHIEVEMENT_SYNC_RETRY_ATTEMPTS=3
# Delay between sync retry attempts in seconds
ACHIEVEMENT_SYNC_RETRY_DELAY_SECONDS=60
# How often to recalculate achievement rarity percentages
ACHIEVEMENT_RARITY_CALCULATION_INTERVAL_MINUTES=60
# Threshold percentage below which an achievement is considered rare
ACHIEVEMENT_RARE_THRESHOLD_PERCENT=5.0
ACHIEVEMENT_RARITY_THRESHOLD_EARNED_COUNT=100

# Distributed Lock Configuration
ACHIEVEMENT_AUTO_SYNC_ON_UNLOCK=true

# Mock Providers (Development)
ACHIEVEMENT_MOCK_PLATFORM_SYNC=false

# OAuth Configuration
ACHIEVEMENT_STEAM_API_KEY=your-api-key
ACHIEVEMENT_STEAM_APP_ID=

# Timing/TTL Configuration
ACHIEVEMENT_PROGRESS_CACHE_TTL_SECONDS=300

# =============================================================================
# Analytics Service Configuration (ANALYTICS_*)
# =============================================================================
# Maximum events to buffer before flushing to storage
ANALYTICS_EVENT_BUFFER_SIZE=1000
# Interval in seconds to flush event buffer
ANALYTICS_EVENT_BUFFER_FLUSH_INTERVAL_SECONDS=5
# Default Glicko-2 rating for new entities
ANALYTICS_GLICKO2_DEFAULT_RATING=1500.0
# Default rating deviation for new entities (higher = less certain)
ANALYTICS_GLICKO2_DEFAULT_DEVIATION=350.0
# Default volatility for new entities (0.06 is standard)
ANALYTICS_GLICKO2_DEFAULT_VOLATILITY=0.06
# Glicko-2 system constant (tau) - controls volatility change speed
ANALYTICS_GLICKO2_SYSTEM_CONSTANT=0.5
ANALYTICS_GLICKO2_VOLATILITY_CONVERGENCE_TOLERANCE=1e-06

# Distributed Lock Configuration
ANALYTICS_EVENT_BUFFER_LOCK_EXPIRY_BASE_SECONDS=10

# Timing/TTL Configuration
ANALYTICS_SUMMARY_CACHE_TTL_SECONDS=300

# =============================================================================
# Asset Service Configuration (ASSET_*)
# =============================================================================
# Storage backend type
ASSET_STORAGE_PROVIDER=minio
# Primary bucket/container name for assets
ASSET_STORAGE_BUCKET=bannou-assets
ASSET_STORAGE_ENDPOINT=minio:9000
ASSET_STORAGE_PUBLIC_ENDPOINT=localhost:9000
# Storage access key/username
ASSET_STORAGE_ACCESS_KEY=minioadmin
# Storage secret key/password
ASSET_STORAGE_SECRET_KEY=minioadmin
# Storage region (for S3/R2)
ASSET_STORAGE_REGION=us-east-1
# Force path-style URLs (required for MinIO)
ASSET_STORAGE_FORCE_PATH_STYLE=true
# Use SSL/TLS for storage connections
ASSET_STORAGE_USE_SSL=false
# Maximum upload size in megabytes
ASSET_MAX_UPLOAD_SIZE_MB=500
# File size threshold for multipart uploads in megabytes
ASSET_MULTIPART_THRESHOLD_MB=50
# Size of each part in multipart uploads in megabytes
ASSET_MULTIPART_PART_SIZE_MB=16
# Maximum number of asset IDs allowed in a single bundle resolution request
ASSET_MAX_RESOLUTION_ASSETS=500
# Maximum number of asset IDs allowed in a single bulk get request
ASSET_MAX_BULK_GET_ASSETS=100
# File size threshold for delegating to processing pool
ASSET_LARGE_FILE_THRESHOLD_MB=50
# Processing pool identifier for orchestrator
ASSET_PROCESSING_POOL_TYPE=asset-processor
# Service mode
ASSET_PROCESSING_MODE=both
# Worker pool identifier when running in worker mode
ASSET_WORKER_POOL=texture-processor-pool
# Unique processor node ID (set by orchestrator when spawning worker)
ASSET_PROCESSOR_NODE_ID=processor-node-001
# Heartbeat emission interval in seconds
ASSET_PROCESSOR_HEARTBEAT_INTERVAL_SECONDS=30
# Maximum concurrent jobs per processor node
ASSET_PROCESSOR_MAX_CONCURRENT_JOBS=10
# Path to FFmpeg binary (empty = use system PATH)
ASSET_FFMPEG_PATH=/usr/bin/ffmpeg
# Working directory for FFmpeg temporary files
ASSET_FFMPEG_WORKING_DIR=/tmp/bannou-ffmpeg
# Default audio output format
ASSET_AUDIO_OUTPUT_FORMAT=mp3
# Default audio bitrate in kbps
ASSET_AUDIO_BITRATE_KBPS=192
# Keep original lossless file alongside transcoded version
ASSET_AUDIO_PRESERVE_LOSSLESS=true
# Default compression for bundles
ASSET_BUNDLE_COMPRESSION_DEFAULT=lz4
ASSET_DELETED_BUNDLE_RETENTION_DAYS=30
# Secret for validating MinIO webhook requests
ASSET_MINIO_WEBHOOK_SECRET=your-minio-webhook-secret
# Path prefix for temporary upload staging in storage bucket
ASSET_TEMP_UPLOAD_PATH_PREFIX=temp
# Path prefix for final asset storage in bucket
ASSET_FINAL_ASSET_PATH_PREFIX=assets
# Path prefix for finalized bundles in storage bucket
ASSET_BUNDLE_CURRENT_PATH_PREFIX=bundles/current
# Path prefix for ZIP conversion cache in storage bucket
ASSET_BUNDLE_ZIP_CACHE_PATH_PREFIX=bundles/zip-cache
# Path prefix for bundle upload staging in storage bucket
ASSET_BUNDLE_UPLOAD_PATH_PREFIX=bundles/uploads
# Maximum seconds to wait for processor availability
ASSET_PROCESSOR_AVAILABILITY_MAX_WAIT_SECONDS=60
# Polling interval in seconds when waiting for processor
ASSET_PROCESSOR_AVAILABILITY_POLL_INTERVAL_SECONDS=2
# Maximum retry attempts for asset processing
ASSET_PROCESSING_MAX_RETRIES=5
# Delay in seconds between processing retries
ASSET_PROCESSING_RETRY_DELAY_SECONDS=30
# Pool type name for texture processing
ASSET_TEXTURE_PROCESSOR_POOL_TYPE=texture-processor
# Pool type name for 3D model processing
ASSET_MODEL_PROCESSOR_POOL_TYPE=model-processor
# Pool type name for audio processing
ASSET_AUDIO_PROCESSOR_POOL_TYPE=audio-processor
# Default pool type name for general asset processing
ASSET_DEFAULT_PROCESSOR_POOL_TYPE=asset-processor
# Comma-separated list of additional processable content types beyond defaults
ASSET_ADDITIONAL_PROCESSABLE_CONTENT_TYPES=
ASSET_ADDITIONAL_EXTENSION_MAPPINGS=
# Comma-separated list of additional forbidden content types
ASSET_ADDITIONAL_FORBIDDEN_CONTENT_TYPES=
ASSET_METABUNDLE_ASYNC_SOURCE_BUNDLE_THRESHOLD=3
ASSET_METABUNDLE_ASYNC_ASSET_COUNT_THRESHOLD=50
# Estimated total size in bytes that triggers async processing. Default 100MB.
ASSET_METABUNDLE_ASYNC_SIZE_BYTES_THRESHOLD=104857600
ASSET_STREAMING_MAX_MEMORY_MB=100
ASSET_STREAMING_PART_SIZE_MB=50
ASSET_STREAMING_MAX_CONCURRENT_SOURCE_STREAMS=2
ASSET_STREAMING_COMPRESSION_BUFFER_KB=16384
ASSET_STREAMING_PROGRESS_UPDATE_INTERVAL_ASSETS=10
# Maximum seconds to wait for a synchronous processing job to complete
ASSET_PROCESSING_JOB_MAX_WAIT_SECONDS=60
# Interval in seconds to poll for job completion during synchronous wait
ASSET_PROCESSING_JOB_POLL_INTERVAL_SECONDS=2
# Interval in seconds to check processing queue when no jobs are available
ASSET_PROCESSING_QUEUE_CHECK_INTERVAL_SECONDS=30
# Delay in seconds between batch processing attempts
ASSET_PROCESSING_BATCH_INTERVAL_SECONDS=5
# Interval in seconds between shutdown drain checks
ASSET_SHUTDOWN_DRAIN_INTERVAL_SECONDS=2

# Key Prefixes
ASSET_UPLOAD_SESSION_KEY_PREFIX=upload:
ASSET_KEY_PREFIX=asset:
ASSET_INDEX_KEY_PREFIX=asset-index:
ASSET_BUNDLE_KEY_PREFIX=bundle:
ASSET_METABUNDLE_JOB_KEY_PREFIX=metabundle-job:

# Timing/TTL Configuration
ASSET_TOKEN_TTL_SECONDS=3600
ASSET_DOWNLOAD_TOKEN_TTL_SECONDS=900
ASSET_PROCESSOR_IDLE_TIMEOUT_SECONDS=300
ASSET_PROCESSOR_HEARTBEAT_TIMEOUT_SECONDS=90
ASSET_ZIP_CACHE_TTL_HOURS=24
ASSET_METABUNDLE_JOB_TTL_SECONDS=86400
ASSET_METABUNDLE_JOB_TIMEOUT_SECONDS=3600
ASSET_SHUTDOWN_DRAIN_TIMEOUT_MINUTES=2
ASSET_DEFAULT_BUNDLE_CACHE_TTL_HOURS=24

# =============================================================================
# Character Service Configuration (CHARACTER_*)
# =============================================================================
# Maximum page size for list queries
CHARACTER_MAX_PAGE_SIZE=100
# Default page size when not specified
CHARACTER_DEFAULT_PAGE_SIZE=20
# Number of days to retain deleted characters before permanent removal
CHARACTER_RETENTION_DAYS=90
CHARACTER_REALM_INDEX_UPDATE_MAX_RETRIES=3
CHARACTER_LIST_UPDATE_MAX_RETRIES=3
CHARACTER_CLEANUP_GRACE_PERIOD_DAYS=30

# =============================================================================
# Character Encounter Service Configuration (CHARACTER_ENCOUNTER_*)
# =============================================================================
CHARACTER_ENCOUNTER_SERVER_SALT=bannou-dev-encounter-salt-change-in-production
# Enable time-based memory decay for encounter perspectives
CHARACTER_ENCOUNTER_MEMORY_DECAY_ENABLED=true
CHARACTER_ENCOUNTER_MEMORY_DECAY_MODE=lazy
# Hours between decay checks (used for calculating decay amount)
CHARACTER_ENCOUNTER_MEMORY_DECAY_INTERVAL_HOURS=24
# Memory strength reduction per decay interval (0.0-1.0)
CHARACTER_ENCOUNTER_MEMORY_DECAY_RATE=0.05
# Memory strength below which encounters are considered forgotten (0.0-1.0)
CHARACTER_ENCOUNTER_MEMORY_FADE_THRESHOLD=0.1
# Maximum encounters stored per character before oldest are pruned
CHARACTER_ENCOUNTER_MAX_PER_CHARACTER=1000
# Maximum encounters stored per character pair before oldest are pruned
CHARACTER_ENCOUNTER_MAX_PER_PAIR=100
# Default page size for query results
CHARACTER_ENCOUNTER_DEFAULT_PAGE_SIZE=20
# Maximum allowed page size for query results
CHARACTER_ENCOUNTER_MAX_PAGE_SIZE=100
# Maximum items in bulk operations (batch-get, etc.)
CHARACTER_ENCOUNTER_MAX_BATCH_SIZE=100
# Default initial memory strength for new perspectives (0.0-1.0)
CHARACTER_ENCOUNTER_DEFAULT_MEMORY_STRENGTH=1.0
# Default memory strength boost when refreshing (0.0-1.0)
CHARACTER_ENCOUNTER_MEMORY_REFRESH_BOOST=0.2
# Automatically seed built-in encounter types on service startup
CHARACTER_ENCOUNTER_SEED_BUILTIN_TYPES_ON_STARTUP=true

# =============================================================================
# Contract Service Configuration (CONTRACT_*)
# =============================================================================
CONTRACT_DEFAULT_ENFORCEMENT_MODE=event_only
# Maximum number of parties allowed in a single contract
CONTRACT_MAX_PARTIES_PER_CONTRACT=20
# Maximum number of milestones allowed in a template
CONTRACT_MAX_MILESTONES_PER_TEMPLATE=50
# Maximum number of prebound APIs per milestone
CONTRACT_MAX_PREBOUND_APIS_PER_MILESTONE=10
# Maximum active contracts per entity (0 for unlimited)
CONTRACT_MAX_ACTIVE_CONTRACTS_PER_ENTITY=100
# Number of prebound APIs to execute in parallel
CONTRACT_PREBOUND_API_BATCH_SIZE=10

# Timing/TTL Configuration
CONTRACT_DEFAULT_CONSENT_TIMEOUT_DAYS=7
CONTRACT_PREBOUND_API_TIMEOUT_MS=30000

# =============================================================================
# Currency Service Configuration (CURRENCY_*)
# =============================================================================
# Default for currencies that do not specify allowNegative
CURRENCY_DEFAULT_ALLOW_NEGATIVE=false
# Default precision for currencies that do not specify
CURRENCY_DEFAULT_PRECISION=decimal_2
CURRENCY_AUTOGAIN_PROCESSING_MODE=lazy
# For task mode - how often to process autogain in milliseconds
CURRENCY_AUTOGAIN_TASK_INTERVAL_MS=60000
# For task mode - batch size per processing cycle
CURRENCY_AUTOGAIN_BATCH_SIZE=1000
# How many days to retain detailed transaction history
CURRENCY_TRANSACTION_RETENTION_DAYS=365
# Maximum duration for authorization holds in days
CURRENCY_HOLD_MAX_DURATION_DAYS=7

# Timing/TTL Configuration
CURRENCY_IDEMPOTENCY_TTL_SECONDS=3600
CURRENCY_BALANCE_CACHE_TTL_SECONDS=60
CURRENCY_HOLD_CACHE_TTL_SECONDS=120

# =============================================================================
# Documentation Service Configuration (DOCUMENTATION_*)
# =============================================================================
# Whether to rebuild search index on service startup
DOCUMENTATION_SEARCH_INDEX_REBUILD_ON_STARTUP=true
# Maximum document content size in bytes (500KB default)
DOCUMENTATION_MAX_CONTENT_SIZE_BYTES=524288
# Maximum characters for voice summaries
DOCUMENTATION_VOICE_SUMMARY_MAX_LENGTH=200
# Default minimum relevance score for search results
DOCUMENTATION_MIN_RELEVANCE_SCORE=0.3
# Maximum search results to return
DOCUMENTATION_MAX_SEARCH_RESULTS=20
# Maximum documents per import (0 = unlimited)
DOCUMENTATION_MAX_IMPORT_DOCUMENTS=0
# Enable AI-powered semantic search (future feature)
DOCUMENTATION_AI_ENHANCEMENTS_ENABLED=false
# Model for generating embeddings (when AI enabled)
DOCUMENTATION_AI_EMBEDDINGS_MODEL=
# Local path for cloned git repositories
DOCUMENTATION_GIT_STORAGE_PATH=/tmp/bannou-git-repos
# Hours before inactive repos are cleaned up
DOCUMENTATION_GIT_STORAGE_CLEANUP_HOURS=24
# Enable background sync scheduler
DOCUMENTATION_SYNC_SCHEDULER_ENABLED=true
# How often to check for repos needing sync
DOCUMENTATION_SYNC_SCHEDULER_CHECK_INTERVAL_MINUTES=5
# Maximum concurrent sync operations
DOCUMENTATION_MAX_CONCURRENT_SYNCS=3
# Maximum documents per sync operation
DOCUMENTATION_MAX_DOCUMENTS_PER_SYNC=1000
# Interval in seconds between repository sync opportunity checks
DOCUMENTATION_REPOSITORY_SYNC_CHECK_INTERVAL_SECONDS=30
# Maximum documents processed per bulk operation
DOCUMENTATION_BULK_OPERATION_BATCH_SIZE=10

# Timing/TTL Configuration
DOCUMENTATION_SESSION_TTL_SECONDS=86400
DOCUMENTATION_TRASHCAN_TTL_DAYS=7
DOCUMENTATION_SEARCH_CACHE_TTL_SECONDS=300
DOCUMENTATION_GIT_CLONE_TIMEOUT_SECONDS=300

# =============================================================================
# Escrow Service Configuration (ESCROW_*)
# =============================================================================
# Algorithm used for token generation
ESCROW_TOKEN_ALGORITHM=hmac_sha256
# Token length in bytes (before encoding)
ESCROW_TOKEN_LENGTH=32
# Token secret for HMAC (must be set in production)
ESCROW_TOKEN_SECRET=your-secret-here
# How often to validate held assets (ISO 8601 duration)
ESCROW_VALIDATION_CHECK_INTERVAL=PT5M
# Maximum parties per escrow
ESCROW_MAX_PARTIES=10
# Maximum asset lines per deposit
ESCROW_MAX_ASSETS_PER_DEPOSIT=50
# Maximum concurrent pending escrows per party
ESCROW_MAX_PENDING_PER_PARTY=100

# Timing/TTL Configuration
ESCROW_DEFAULT_TIMEOUT=P7D
ESCROW_MAX_TIMEOUT=P30D
ESCROW_EXPIRATION_GRACE_PERIOD=PT1H
ESCROW_EXPIRATION_CHECK_INTERVAL=PT1M
ESCROW_EXPIRATION_BATCH_SIZE=100

# =============================================================================
# Inventory Service Configuration (INVENTORY_*)
# =============================================================================
# Default maximum nesting depth for containers
INVENTORY_DEFAULT_MAX_NESTING_DEPTH=3
# Default weight contribution mode for containers
INVENTORY_DEFAULT_WEIGHT_CONTRIBUTION=self_plus_contents
# Whether to enable lazy container creation for characters
INVENTORY_ENABLE_LAZY_CONTAINER_CREATION=true
# Default max slots for new slot-based containers
INVENTORY_DEFAULT_MAX_SLOTS=20
# Default max weight for new weight-based containers
INVENTORY_DEFAULT_MAX_WEIGHT=100.0
# Maximum items to scan when counting items across containers
INVENTORY_MAX_COUNT_QUERY_LIMIT=10000
# Number of items to fetch per query page for inventory operations
INVENTORY_QUERY_PAGE_SIZE=200

# Distributed Lock Configuration
INVENTORY_LOCK_TIMEOUT_SECONDS=30

# Timing/TTL Configuration
INVENTORY_CONTAINER_CACHE_TTL_SECONDS=300

# =============================================================================
# Item Service Configuration (ITEM_*)
# =============================================================================
# Default max stack size for new templates when not specified
ITEM_DEFAULT_MAX_STACK_SIZE=99
ITEM_DEFAULT_WEIGHT_PRECISION=decimal_2
# Maximum item instances returned in a single query
ITEM_MAX_INSTANCES_PER_QUERY=1000
# Whether admins can unbind soulbound items
ITEM_BINDING_ALLOW_ADMIN_OVERRIDE=true
ITEM_DEFAULT_RARITY=common
# Default soulbound type for new templates (none, on_pickup, on_equip, on_use)
ITEM_DEFAULT_SOULBOUND_TYPE=none
# Maximum retry attempts for optimistic concurrency on list operations
ITEM_LIST_OPERATION_MAX_RETRIES=3

# Timing/TTL Configuration
ITEM_TEMPLATE_CACHE_TTL_SECONDS=3600
ITEM_INSTANCE_CACHE_TTL_SECONDS=900

# =============================================================================
# Leaderboard Service Configuration (LEADERBOARD_*)
# =============================================================================
# Maximum entries returned per rank query
LEADERBOARD_MAX_ENTRIES_PER_QUERY=1000
# Maximum scores to process in a single batch
LEADERBOARD_SCORE_UPDATE_BATCH_SIZE=1000
# Automatically archive leaderboard data when season ends
LEADERBOARD_AUTO_ARCHIVE_ON_SEASON_END=true

# Timing/TTL Configuration
LEADERBOARD_RANK_CACHE_TTL_SECONDS=60

# =============================================================================
# Mapping Service Configuration (MAPPING_*)
# =============================================================================
# Grace period in seconds after missed heartbeat before authority released
MAPPING_AUTHORITY_GRACE_PERIOD_SECONDS=30
# Recommended heartbeat interval for authorities (for client guidance)
MAPPING_AUTHORITY_HEARTBEAT_INTERVAL_SECONDS=30
# Size of spatial index cells in world units (default 64)
MAPPING_SPATIAL_CELL_SIZE=64.0
# Maximum objects returned in a single query
MAPPING_MAX_OBJECTS_PER_QUERY=5000
# Maximum payloads in single publish or ingest event
MAPPING_MAX_PAYLOADS_PER_PUBLISH=100
# Maximum candidate points to evaluate in affordance queries
MAPPING_MAX_AFFORDANCE_CANDIDATES=1000
# Payloads larger than this are stored via lib-asset reference
MAPPING_INLINE_PAYLOAD_MAX_BYTES=65536
# Maximum duration for authoring checkout locks
MAPPING_MAX_CHECKOUT_DURATION_SECONDS=1800
MAPPING_EVENT_AGGREGATION_WINDOW_MS=100
# Maximum results returned for spatial queries (bounding box, etc)
MAPPING_MAX_SPATIAL_QUERY_RESULTS=5

# Timing/TTL Configuration
MAPPING_AUTHORITY_TIMEOUT_SECONDS=60
MAPPING_AFFORDANCE_CACHE_TIMEOUT_SECONDS=60
MAPPING_DEFAULT_LAYER_CACHE_TTL_SECONDS=3600
MAPPING_TTL_TERRAIN=-1
MAPPING_TTL_STATIC_GEOMETRY=-1
MAPPING_TTL_NAVIGATION=-1
MAPPING_TTL_RESOURCES=3600
MAPPING_TTL_SPAWN_POINTS=3600
MAPPING_TTL_POINTS_OF_INTEREST=3600
MAPPING_TTL_DYNAMIC_OBJECTS=3600
MAPPING_TTL_HAZARDS=300
MAPPING_TTL_WEATHER_EFFECTS=600
MAPPING_TTL_OWNERSHIP=-1
MAPPING_TTL_COMBAT_EFFECTS=30
MAPPING_TTL_VISUAL_EFFECTS=60

# =============================================================================
# Matchmaking Service Configuration (MATCHMAKING_*)
# =============================================================================
MATCHMAKING_SERVER_SALT=bannou-dev-matchmaking-salt-change-in-production
# Default interval between match processing cycles
MATCHMAKING_PROCESSING_INTERVAL_SECONDS=15
# Default maximum intervals before timeout/relaxation
MATCHMAKING_DEFAULT_MAX_INTERVALS=6
# Maximum number of concurrent tickets a player can have
MATCHMAKING_MAX_CONCURRENT_TICKETS_PER_PLAYER=3
# Interval between stats event publications
MATCHMAKING_STATS_PUBLISH_INTERVAL_SECONDS=60
# Enable immediate match check on ticket creation (quick matches)
MATCHMAKING_IMMEDIATE_MATCH_CHECK_ENABLED=true
# Automatically requeue non-declining players when a match is declined
MATCHMAKING_AUTO_REQUEUE_ON_DECLINE=true
MATCHMAKING_BACKGROUND_SERVICE_STARTUP_DELAY_SECONDS=5
# Default deadline for players to join the game session after match confirmation
MATCHMAKING_DEFAULT_JOIN_DEADLINE_SECONDS=120

# Timing/TTL Configuration
MATCHMAKING_DEFAULT_MATCH_ACCEPT_TIMEOUT_SECONDS=30
MATCHMAKING_PENDING_MATCH_REDIS_KEY_TTL_SECONDS=300
MATCHMAKING_DEFAULT_RESERVATION_TTL_SECONDS=120

# =============================================================================
# Mesh Service Configuration (MESH_*)
# =============================================================================
MESH_USE_LOCAL_ROUTING=false
MESH_ENDPOINT_HOST=bannou-service
# Port for mesh endpoint registration.
MESH_ENDPOINT_PORT=80
# Recommended interval between heartbeats
MESH_HEARTBEAT_INTERVAL_SECONDS=30
# Time without heartbeat before marking endpoint as degraded
MESH_DEGRADATION_THRESHOLD_SECONDS=60
# Default load balancing algorithm
MESH_DEFAULT_LOAD_BALANCER=RoundRobin
# Load percentage above which an endpoint is considered high-load
MESH_LOAD_THRESHOLD_PERCENT=80
# Whether to subscribe to FullServiceMappingsEvent for routing updates
MESH_ENABLE_SERVICE_MAPPING_SYNC=true
# Whether to perform active health checks on endpoints
MESH_HEALTH_CHECK_ENABLED=false
# Interval between active health checks
MESH_HEALTH_CHECK_INTERVAL_SECONDS=60
# Whether to enable circuit breaker for failed endpoints
MESH_CIRCUIT_BREAKER_ENABLED=true
# Number of consecutive failures before opening circuit
MESH_CIRCUIT_BREAKER_THRESHOLD=5
# Seconds before attempting to close circuit
MESH_CIRCUIT_BREAKER_RESET_SECONDS=30
# Maximum retry attempts for failed service calls
MESH_MAX_RETRIES=3
# Initial delay between retries (doubles on each retry)
MESH_RETRY_DELAY_MILLISECONDS=100
# Whether to log detailed routing decisions
MESH_ENABLE_DETAILED_LOGGING=false
# Whether to collect routing metrics
MESH_METRICS_ENABLED=true
# How long to keep pooled HTTP connections alive in minutes
MESH_POOLED_CONNECTION_LIFETIME_MINUTES=2
# Maximum top endpoints returned in health status queries
MESH_MAX_TOP_ENDPOINTS_RETURNED=2
# Maximum service mappings shown in diagnostic logs
MESH_MAX_SERVICE_MAPPINGS_DISPLAYED=10

# Timing/TTL Configuration
MESH_ENDPOINT_TTL_SECONDS=90
MESH_HEALTH_CHECK_TIMEOUT_SECONDS=5
MESH_CONNECT_TIMEOUT_SECONDS=10
MESH_ENDPOINT_CACHE_TTL_SECONDS=5

# =============================================================================
# Messaging Service Configuration (MESSAGING_*)
# =============================================================================
MESSAGING_USE_INMEMORY=false
# RabbitMQ server hostname
MESSAGING_RABBITMQ_HOST=rabbitmq
# RabbitMQ server port
MESSAGING_RABBITMQ_PORT=5672
# RabbitMQ username
MESSAGING_RABBITMQ_USERNAME=guest
# RabbitMQ password
MESSAGING_RABBITMQ_PASSWORD=guest
# RabbitMQ virtual host
MESSAGING_RABBITMQ_VHOST=/
# Default exchange name for publishing
MESSAGING_DEFAULT_EXCHANGE=bannou
# Enable RabbitMQ publisher confirms for reliability
MESSAGING_ENABLE_CONFIRMS=true
# Number of connection retry attempts
MESSAGING_CONNECTION_RETRY_COUNT=5
# Delay between connection retry attempts in milliseconds
MESSAGING_CONNECTION_RETRY_DELAY_MS=1000
# Default prefetch count for subscriptions
MESSAGING_DEFAULT_PREFETCH_COUNT=10
# Default auto-acknowledge setting for subscriptions
MESSAGING_DEFAULT_AUTO_ACK=false
# Dead letter exchange name for failed messages
MESSAGING_DEAD_LETTER_EXCHANGE=bannou-dlx
# Maximum retry attempts before dead-lettering
MESSAGING_RETRY_MAX_ATTEMPTS=3
# Delay between retry attempts in milliseconds
MESSAGING_RETRY_DELAY_MS=5000
# Enable retry buffer for failed event publishes
MESSAGING_RETRY_BUFFER_ENABLED=true
# Maximum number of messages in retry buffer before node crash
MESSAGING_RETRY_BUFFER_MAX_SIZE=10000
# Maximum age of buffered messages before node crash (prevents stale events)
MESSAGING_RETRY_BUFFER_MAX_AGE_SECONDS=300
# Interval between retry attempts for buffered messages
MESSAGING_RETRY_BUFFER_INTERVAL_SECONDS=5
# Maximum retry attempts for HTTP callback delivery (network failures only)
MESSAGING_CALLBACK_RETRY_MAX_ATTEMPTS=3
# Delay between HTTP callback retry attempts in milliseconds
MESSAGING_CALLBACK_RETRY_DELAY_MS=1000
# Use MassTransit wrapper (true) or direct RabbitMQ.Client (false)
MESSAGING_USE_MASSTRANSIT=true
# Enable message bus metrics collection
MESSAGING_ENABLE_METRICS=true
# Enable distributed tracing for messages
MESSAGING_ENABLE_TRACING=true
# Delay in seconds before starting subscription recovery service
MESSAGING_SUBSCRIPTION_RECOVERY_STARTUP_DELAY_SECONDS=2
# Interval in seconds between RabbitMQ connection recovery attempts
MESSAGING_RABBITMQ_NETWORK_RECOVERY_INTERVAL_SECONDS=10

# Timing/TTL Configuration
MESSAGING_CONNECTION_TIMEOUT_SECONDS=60
MESSAGING_REQUEST_TIMEOUT_SECONDS=30
MESSAGING_SUBSCRIPTION_TTL_REFRESH_INTERVAL_HOURS=6
MESSAGING_EXTERNAL_SUBSCRIPTION_TTL_SECONDS=86400

# =============================================================================
# Relationship Type Service Configuration (RELATIONSHIP_TYPE_*)
# =============================================================================
# Number of records to process per page during seed operations
RELATIONSHIP_TYPE_SEED_PAGE_SIZE=100

# =============================================================================
# Save Load Service Configuration (SAVE_LOAD_*)
# =============================================================================
# Maximum size for a single save in bytes (default 100MB)
SAVE_LOAD_MAX_SAVE_SIZE_BYTES=104857600
# Auto-compress saves larger than this (default 1MB)
SAVE_LOAD_AUTO_COMPRESS_THRESHOLD_BYTES=1048576
# Default compression algorithm (NONE, GZIP, BROTLI)
SAVE_LOAD_DEFAULT_COMPRESSION_TYPE=GZIP
# MinIO bucket for save assets
SAVE_LOAD_ASSET_BUCKET=game-saves
# Default max versions for QUICK_SAVE category
SAVE_LOAD_DEFAULT_MAX_VERSIONS_QUICK_SAVE=1
# Default max versions for AUTO_SAVE category
SAVE_LOAD_DEFAULT_MAX_VERSIONS_AUTO_SAVE=5
# Default max versions for MANUAL_SAVE category
SAVE_LOAD_DEFAULT_MAX_VERSIONS_MANUAL_SAVE=10
# Default max versions for CHECKPOINT category
SAVE_LOAD_DEFAULT_MAX_VERSIONS_CHECKPOINT=20
# Default max versions for STATE_SNAPSHOT category
SAVE_LOAD_DEFAULT_MAX_VERSIONS_STATE_SNAPSHOT=3
# Interval for automatic cleanup task
SAVE_LOAD_CLEANUP_INTERVAL_MINUTES=60
# Delay in seconds before cleanup service starts processing
SAVE_LOAD_CLEANUP_STARTUP_DELAY_SECONDS=30
SAVE_LOAD_CLEANUP_CONTROL_PLANE_ONLY=true
SAVE_LOAD_SESSION_CLEANUP_GRACE_PERIOD_MINUTES=5
# Enable/disable schema migrations entirely
SAVE_LOAD_MIGRATIONS_ENABLED=true
# Maximum JSON Patch operations per migration (safety limit)
SAVE_LOAD_MIGRATION_MAX_PATCH_OPERATIONS=1000
# Maximum save slots per owner entity
SAVE_LOAD_MAX_SLOTS_PER_OWNER=100
# Rate limit - maximum saves per owner per minute
SAVE_LOAD_MAX_SAVES_PER_MINUTE=10
# Maximum total storage per owner (default 1GB)
SAVE_LOAD_MAX_TOTAL_SIZE_BYTES_PER_OWNER=1073741824
# Brotli compression level (0-11, higher = better compression, slower)
SAVE_LOAD_BROTLI_COMPRESSION_LEVEL=6
# GZIP compression level (1-9, higher = better compression, slower)
SAVE_LOAD_GZIP_COMPRESSION_LEVEL=6
SAVE_LOAD_DEFAULTCOMPRESSIONBYCATEGORY=
# Maximum thumbnail size in bytes (default 256KB)
SAVE_LOAD_THUMBNAIL_MAX_SIZE_BYTES=262144
# Comma-separated list of allowed thumbnail MIME types
SAVE_LOAD_THUMBNAIL_ALLOWED_FORMATS=image/jpeg,image/webp,image/png
# Enable delta/incremental save support
SAVE_LOAD_DELTA_SAVES_ENABLED=true
# Default algorithm for delta computation (JSON_PATCH, BSDIFF, XDELTA)
SAVE_LOAD_DEFAULT_DELTA_ALGORITHM=JSON_PATCH
SAVE_LOAD_MAX_DELTA_CHAIN_LENGTH=10
# Automatically collapse delta chains during cleanup
SAVE_LOAD_AUTO_COLLAPSE_ENABLED=true
SAVE_LOAD_DELTA_SIZE_THRESHOLD_PERCENT=50
SAVE_LOAD_MIN_BASE_SIZE_FOR_DELTA_THRESHOLD_BYTES=1024
SAVE_LOAD_CONFLICT_DETECTION_ENABLED=true
SAVE_LOAD_CONFLICT_DETECTION_WINDOW_MINUTES=5
SAVE_LOAD_ASYNC_UPLOAD_ENABLED=true
SAVE_LOAD_MAX_CONCURRENT_UPLOADS=10
# Number of pending uploads to process per batch cycle
SAVE_LOAD_UPLOAD_BATCH_SIZE=5
# Interval between upload batch processing cycles
SAVE_LOAD_UPLOAD_BATCH_INTERVAL_MS=100
# Number of retry attempts for failed uploads before giving up
SAVE_LOAD_UPLOAD_RETRY_ATTEMPTS=3
# Base delay between retry attempts (exponential backoff applied)
SAVE_LOAD_UPLOAD_RETRY_DELAY_MS=1000
SAVE_LOAD_STORAGE_CIRCUIT_BREAKER_ENABLED=true
# Number of consecutive failures before circuit opens
SAVE_LOAD_STORAGE_CIRCUIT_BREAKER_THRESHOLD=5
# Seconds before attempting to close circuit (half-open state)
SAVE_LOAD_STORAGE_CIRCUIT_BREAKER_RESET_SECONDS=30
# Successful uploads needed in half-open state to close circuit
SAVE_LOAD_STORAGE_CIRCUIT_BREAKER_HALF_OPEN_ATTEMPTS=2

# Timing/TTL Configuration
SAVE_LOAD_HOT_CACHE_TTL_MINUTES=60
SAVE_LOAD_THUMBNAIL_URL_TTL_MINUTES=60
SAVE_LOAD_PENDING_UPLOAD_TTL_MINUTES=60

# =============================================================================
# Scene Service Configuration (SCENE_*)
# =============================================================================
# lib-asset bucket for storing scene documents
SCENE_ASSET_BUCKET=scenes
# Content type for scene assets (YAML format)
SCENE_ASSET_CONTENT_TYPE=application/x-bannou-scene+yaml
# Expected heartbeat interval for checkout locks
SCENE_CHECKOUT_HEARTBEAT_INTERVAL_SECONDS=30
# Maximum number of times a checkout can be extended
SCENE_MAX_CHECKOUT_EXTENSIONS=10
# Default maximum depth for reference resolution (prevents infinite recursion)
SCENE_DEFAULT_MAX_REFERENCE_DEPTH=3
# Hard limit on reference depth that cannot be exceeded by requests
SCENE_MAX_REFERENCE_DEPTH_LIMIT=10
# Default number of versions to retain per scene
SCENE_DEFAULT_VERSION_RETENTION_COUNT=3
# Maximum versions that can be retained (configurable per game)
SCENE_MAX_VERSION_RETENTION_COUNT=100
# Maximum nodes allowed in a single scene
SCENE_MAX_NODE_COUNT=10000
# Maximum scene document size in bytes (default 10MB)
SCENE_MAX_SCENE_SIZE_BYTES=10485760
# Maximum tags allowed per scene
SCENE_MAX_TAGS_PER_SCENE=50
# Maximum tags allowed per node
SCENE_MAX_TAGS_PER_NODE=20
# Maximum results returned in a single list query
SCENE_MAX_LIST_RESULTS=200
# Maximum results returned in a single search query
SCENE_MAX_SEARCH_RESULTS=100

# Timing/TTL Configuration
SCENE_DEFAULT_CHECKOUT_TTL_MINUTES=60
SCENE_CHECKOUT_EXPIRATION_CHECK_INTERVAL_SECONDS=60

# =============================================================================
# Species Service Configuration (SPECIES_*)
# =============================================================================
# Number of records to process per page during seed operations
SPECIES_SEED_PAGE_SIZE=100

# =============================================================================
# State Service Configuration (STATE_*)
# =============================================================================
STATE_USE_INMEMORY=false
# Redis connection string (host:port format) for Redis-backed state stores
STATE_REDIS_CONNECTION_STRING=bannou-redis:6379
# MySQL connection string for MySQL-backed state stores
STATE_MYSQL_CONNECTION_STRING=server=bannou-mysql;database=bannou;user=guest;password=guest
# Maximum number of connection retry attempts
STATE_CONNECT_RETRY_COUNT=5
# Default consistency level for state operations
STATE_DEFAULT_CONSISTENCY=strong
# Enable metrics collection for state operations
STATE_ENABLE_METRICS=true
# Enable distributed tracing for state operations
STATE_ENABLE_TRACING=true

# Timing/TTL Configuration
STATE_CONNECTION_TIMEOUT_SECONDS=60

# =============================================================================
# Subscription Service Configuration (SUBSCRIPTION_*)
# =============================================================================
# Suffix for authorization keys in state store
SUBSCRIPTION_AUTHORIZATION_SUFFIX=authorized
# Delay in seconds before background service starts processing
SUBSCRIPTION_STARTUP_DELAY_SECONDS=30

# Timing/TTL Configuration
SUBSCRIPTION_EXPIRATION_CHECK_INTERVAL_MINUTES=5
SUBSCRIPTION_EXPIRATION_GRACE_PERIOD_SECONDS=30

# =============================================================================
# Voice Service Configuration (VOICE_*)
# =============================================================================
# Enable scaled tier voice communication (SIP-based)
VOICE_SCALED_TIER_ENABLED=false
# Enable automatic tier upgrade from P2P to scaled
VOICE_TIER_UPGRADE_ENABLED=false
# Migration deadline in milliseconds when upgrading tiers
VOICE_TIER_UPGRADE_MIGRATION_DEADLINE_MS=30000
# Maximum participants in P2P voice sessions
VOICE_P2P_MAX_PARTICIPANTS=8
# Maximum participants in scaled tier voice sessions
VOICE_SCALED_MAX_PARTICIPANTS=100
# Comma-separated list of STUN server URLs for WebRTC
VOICE_STUN_SERVERS=stun:stun.l.google.com:19302
VOICE_SIP_PASSWORD_SALT=your-sip-password-salt-for-voice
# SIP domain for voice communication
VOICE_SIP_DOMAIN=voice.bannou.local
# Kamailio SIP server host
VOICE_KAMAILIO_HOST=localhost
# Kamailio JSON-RPC port (typically 5080, not SIP port 5060)
VOICE_KAMAILIO_RPC_PORT=5080
# RTPEngine media relay host
VOICE_RTPENGINE_HOST=localhost
# RTPEngine control port
VOICE_RTPENGINE_PORT=22222

# Timing/TTL Configuration
VOICE_KAMAILIO_REQUEST_TIMEOUT_SECONDS=5

# =============================================================================
# Service Enable/Disable Flags (Loading Control)
# These control which services are loaded at startup
# =============================================================================
SERVICES_ENABLED=true
AUTH_SERVICE_ENABLED=true
ACCOUNT_SERVICE_ENABLED=true
PERMISSION_SERVICE_ENABLED=true
CONNECT_SERVICE_ENABLED=true
ORCHESTRATOR_SERVICE_ENABLED=true
BEHAVIOR_SERVICE_ENABLED=true
ACTOR_SERVICE_ENABLED=true
# Add {SERVICE}_SERVICE_DISABLED=true to explicitly disable a service

# =============================================================================
# Local Development Configuration
# =============================================================================
BANNOU_SERVICE_DOMAIN=localhost
HTTP_WEB_HOST_PORT=8080
HTTPS_WEB_HOST_PORT=8443
