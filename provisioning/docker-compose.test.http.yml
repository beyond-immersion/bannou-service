# HTTP Integration Test Configuration
# Service-to-service testing using lib-mesh for service routing

services:

  bannou:
    env_file: ../.env.test.http
    volumes:
      - "/var/run/docker.sock:/var/run/docker.sock"  # Docker socket for orchestrator
      - "/tmp/bannou-test-fixtures:/fixtures:ro"  # Test fixtures prepared by scripts/prepare-test-fixtures.sh (dot_git -> .git)

  # HTTP integration tester - simulates another service in datacenter
  bannou-http-tester:
    build:
      context: ..
      dockerfile: tools/http-tester/Dockerfile
    env_file: ../.env.test.http
    environment:
      - PLUGIN=${PLUGIN}
      - BANNOU_APP_ID=bannou-http-tester
    ports:
      - "9000:80"
      - "9001:443"
