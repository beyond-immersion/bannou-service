# Infrastructure Test Configuration
# Minimal service setup (TESTING service only) for infrastructure validation

services:

  bannou:
    env_file: ../.env.test.infrastructure

  # Infrastructure tester - uses Docker DNS to reach bannou
  bannou-infra-tester:
    image: curlimages/curl:latest
    volumes:
      - "../scripts/wait-for-health.sh:/wait-for-health.sh"
      - "../scripts/infrastructure-tests.sh:/infrastructure-tests.sh"
    environment:
      - BANNOU_HOST=bannou
    stdin_open: false
    command: sh -c "/wait-for-health.sh && /infrastructure-tests.sh"
