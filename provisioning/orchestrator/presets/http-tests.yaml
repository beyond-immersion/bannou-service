# HTTP Integration Testing Preset
# Tests service-to-service HTTP communication via generated clients
# Used by: http-tester project, make test-http

name: http-tests
description: HTTP integration testing preset with all core services enabled for service-to-service validation
category: testing

topology:
  nodes:
    - name: bannou-test
      services:
        - accounts
        - auth
        - behavior
        - connect
        - game-session
        - permissions
        - orchestrator
        - website
        - testing
      replicas: 1
      environment:
        ASPNETCORE_ENVIRONMENT: Development
        TESTING_SERVICE_ENABLED: "true"

  infrastructure:
    mysql:
      enabled: true
      version: "8.0"
    redis:
      enabled: true
      version: "7"
    rabbitmq:
      enabled: true
      version: "3.12-management"

environment:
  # Logging
  APP_LOGGING_LEVEL: Debug
  WEB_HOST_LOGGING_LEVEL: Warning

  # Admin configuration for orchestrator API tests
  BANNOU_AdminEmailDomain: "@admin.test.local"

  # Test user credentials
  Admin_Username: admin@admin.test.local
  Admin_Password: admin-test-password-2025

requiredBackends:
  - docker-compose
