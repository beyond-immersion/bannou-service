# RTPEngine Configuration for Bannou Voice Service
# Selective Forwarding Unit (SFU) for scaled tier voice conferencing
# Part of Phase 2: Scaled Tier Implementation

[rtpengine]

# Network interfaces
# For development with Docker host networking:
# - Uses localhost for single-machine deployment
# For production, configure public/private interfaces:
# interface = internal/10.0.0.50;external/203.0.113.50
interface = 127.0.0.1

# NG control protocol - UDP port for Kamailio/Bannou commands
listen-ng = 22222

# CLI interface for debugging (optional)
listen-cli = 127.0.0.1:9901

# RTP port range
# 10,000 ports = 5,000 concurrent streams (2 ports per stream: RTP + RTCP)
port-min = 10000
port-max = 20000

# Timeouts (seconds)
# timeout: no media activity before considering stream dead
# silent-timeout: no media at all (hold scenario)
# final-timeout: absolute maximum session duration
timeout = 60
silent-timeout = 3600
final-timeout = 7200

# Kernel forwarding table
# Using table = 0 enables kernel-space forwarding (10x performance)
# Requires privileged container and xt_RTPENGINE kernel module
# Set to -1 to disable kernel forwarding (user-space only)
table = 0

# Logging
log-level = 5
log-facility = daemon

# Delete all sessions at startup (clean slate for development)
delete-delay = 0

# Codec handling
# Don't transcode - clients should use Opus
# no-fallback = yes

# DTLS for WebRTC (if needed in future)
# dtls-cert = /etc/rtpengine/cert.pem
# dtls-key = /etc/rtpengine/key.pem

# Recording (optional - useful for debugging)
# Uncomment to enable call recording
# recording-dir = /var/spool/rtpengine
# recording-method = pcap

# SFU / Publish-Subscribe mode settings
# These are enabled via ng protocol commands, not config

# STUN/TURN integration (if using external TURN server)
# stun-server = stun.example.com:3478

# ICE handling
# ice-lite = yes

# Prometheus metrics (optional)
# homer = 127.0.0.1:9060
