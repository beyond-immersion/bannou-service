//----------------------
// <auto-generated>
//     Generated from OpenAPI schema: schemas/actor-configuration.yaml
//
//     WARNING: DO NOT EDIT THIS FILE (TENETS T1/T2)
//     This file is auto-generated from configuration schema.
//     Any manual changes will be overwritten on next generation.
//
//     To add/modify configuration:
//     1. Edit the source schema (schemas/actor-configuration.yaml)
//     2. Run: scripts/generate-all-services.sh
//
//     USAGE (IMPLEMENTATION TENETS - Configuration-First):
//     Access configuration via dependency injection, never Environment.GetEnvironmentVariable.
//     Example: public MyService(ActorServiceConfiguration config) { _config = config; }
//
//     See: docs/reference/tenets/FOUNDATION.md
//     See: docs/reference/tenets/IMPLEMENTATION.md
// </auto-generated>
//----------------------

using System.ComponentModel.DataAnnotations;
using BeyondImmersion.BannouService;
using BeyondImmersion.BannouService.Attributes;
using BeyondImmersion.BannouService.Configuration;

#nullable enable

namespace BeyondImmersion.BannouService.Actor;

/// <summary>
/// Configuration class for Actor service.
/// Properties are automatically bound from environment variables.
/// </summary>
/// <remarks>
/// <para>
/// <b>IMPLEMENTATION TENETS - Configuration-First:</b> Access configuration via dependency injection.
/// Never use <c>Environment.GetEnvironmentVariable()</c> directly in service code.
/// </para>
/// <para>
/// Environment variable names follow the pattern: {SERVICE}_{PROPERTY} (e.g., AUTH_JWT_SECRET).
/// </para>
/// </remarks>
[ServiceConfiguration(typeof(ActorService))]
public class ActorServiceConfiguration : IServiceConfiguration
{
    /// <inheritdoc />
    public string? ForceServiceId { get; set; }

    /// <summary>
    /// Actor deployment mode: bannou (local dev), pool-per-type, shared-pool, or auto-scale
    /// Environment variable: ACTOR_DEPLOYMENT_MODE
    /// </summary>
    public string DeploymentMode { get; set; } = "bannou";

    /// <summary>
    /// If set, this instance runs as a pool node (not control plane). Unique identifier for this node.
    /// Environment variable: ACTOR_POOL_NODE_ID
    /// </summary>
    public string? PoolNodeId { get; set; }

    /// <summary>
    /// Mesh app-id for routing commands to this pool node. Required when PoolNodeId is set.
    /// Environment variable: ACTOR_POOL_NODE_APP_ID
    /// </summary>
    public string? PoolNodeAppId { get; set; }

    /// <summary>
    /// Pool type this node belongs to: shared, npc-brain, event-coordinator, or custom category
    /// Environment variable: ACTOR_POOL_NODE_TYPE
    /// </summary>
    public string PoolNodeType { get; set; } = "shared";

    /// <summary>
    /// Maximum actors this pool node can run. Overrides DefaultActorsPerNode when set.
    /// Environment variable: ACTOR_POOL_NODE_CAPACITY
    /// </summary>
    public int PoolNodeCapacity { get; set; } = 100;

    /// <summary>
    /// App-id of control plane for pool node registration. Pool nodes only.
    /// Environment variable: ACTOR_CONTROL_PLANE_APP_ID
    /// </summary>
    public string ControlPlaneAppId { get; set; } = "bannou";

    /// <summary>
    /// Docker image for pool nodes (pool-per-type, shared-pool, auto-scale modes)
    /// Environment variable: ACTOR_POOL_NODE_IMAGE
    /// </summary>
    public string PoolNodeImage { get; set; } = "bannou-actor-pool:latest";

    /// <summary>
    /// Minimum pool nodes to maintain (auto-scale mode)
    /// Environment variable: ACTOR_MIN_POOL_NODES
    /// </summary>
    public int MinPoolNodes { get; set; } = 1;

    /// <summary>
    /// Maximum pool nodes allowed (auto-scale mode)
    /// Environment variable: ACTOR_MAX_POOL_NODES
    /// </summary>
    public int MaxPoolNodes { get; set; } = 10;

    /// <summary>
    /// Default capacity per pool node
    /// Environment variable: ACTOR_DEFAULT_ACTORS_PER_NODE
    /// </summary>
    public int DefaultActorsPerNode { get; set; } = 100;

    /// <summary>
    /// Pool node heartbeat frequency
    /// Environment variable: ACTOR_HEARTBEAT_INTERVAL_SECONDS
    /// </summary>
    public int HeartbeatIntervalSeconds { get; set; } = 10;

    /// <summary>
    /// Mark node unhealthy after this many seconds without heartbeat
    /// Environment variable: ACTOR_HEARTBEAT_TIMEOUT_SECONDS
    /// </summary>
    public int HeartbeatTimeoutSeconds { get; set; } = 30;

    /// <summary>
    /// Default behavior loop interval in milliseconds
    /// Environment variable: ACTOR_DEFAULT_TICK_INTERVAL_MS
    /// </summary>
    public int DefaultTickIntervalMs { get; set; } = 100;

    /// <summary>
    /// Default interval for periodic state saves (0 to disable)
    /// Environment variable: ACTOR_DEFAULT_AUTOSAVE_INTERVAL_SECONDS
    /// </summary>
    public int DefaultAutoSaveIntervalSeconds { get; set; } = 60;

    /// <summary>
    /// Max perceptions queued per actor before dropping oldest
    /// Environment variable: ACTOR_PERCEPTION_QUEUE_SIZE
    /// </summary>
    public int PerceptionQueueSize { get; set; } = 100;

    /// <summary>
    /// Max messages queued per actor before dropping oldest
    /// Environment variable: ACTOR_MESSAGE_QUEUE_SIZE
    /// </summary>
    public int MessageQueueSize { get; set; } = 50;

    /// <summary>
    /// State update transport: messaging (default, works in bannou mode) or internal-connect (production)
    /// Environment variable: ACTOR_STATE_UPDATE_TRANSPORT
    /// </summary>
    public string StateUpdateTransport { get; set; } = "messaging";

    /// <summary>
    /// Threshold for triggering GOAP replanning when goal relevance drops below this value
    /// Environment variable: ACTOR_GOAP_REPLAN_THRESHOLD
    /// </summary>
    public double GoapReplanThreshold { get; set; } = 0.3;

    /// <summary>
    /// Maximum depth for GOAP planning search
    /// Environment variable: ACTOR_GOAP_MAX_PLAN_DEPTH
    /// </summary>
    public int GoapMaxPlanDepth { get; set; } = 10;

    /// <summary>
    /// Maximum time allowed for GOAP planning in milliseconds
    /// Environment variable: ACTOR_GOAP_PLAN_TIMEOUT_MS
    /// </summary>
    public int GoapPlanTimeoutMs { get; set; } = 50;

    /// <summary>
    /// Node ID used when running in local/bannou deployment mode
    /// Environment variable: ACTOR_LOCAL_MODE_NODE_ID
    /// </summary>
    public string LocalModeNodeId { get; set; } = "bannou-local";

    /// <summary>
    /// App ID used when running in local/bannou deployment mode
    /// Environment variable: ACTOR_LOCAL_MODE_APP_ID
    /// </summary>
    public string LocalModeAppId { get; set; } = "bannou";

    /// <summary>
    /// Minimum urgency for perception to be processed (0.0-1.0)
    /// Environment variable: ACTOR_PERCEPTION_FILTER_THRESHOLD
    /// </summary>
    public double PerceptionFilterThreshold { get; set; } = 0.1;

    /// <summary>
    /// Minimum urgency for perception to become a memory (0.0-1.0)
    /// Environment variable: ACTOR_PERCEPTION_MEMORY_THRESHOLD
    /// </summary>
    public double PerceptionMemoryThreshold { get; set; } = 0.7;

    /// <summary>
    /// Expiration time in minutes for short-term memories from high-urgency perceptions
    /// Environment variable: ACTOR_SHORT_TERM_MEMORY_MINUTES
    /// </summary>
    public int ShortTermMemoryMinutes { get; set; } = 5;

    /// <summary>
    /// Default expiration time in minutes for actor memories
    /// Environment variable: ACTOR_DEFAULT_MEMORY_EXPIRATION_MINUTES
    /// </summary>
    public int DefaultMemoryExpirationMinutes { get; set; } = 60;

    /// <summary>
    /// Name of the state store for actor templates
    /// Environment variable: ACTOR_TEMPLATE_STATESTORE_NAME
    /// </summary>
    public string TemplateStatestoreName { get; set; } = "actor-templates";

    /// <summary>
    /// Name of the state store for actor instance tracking
    /// Environment variable: ACTOR_INSTANCE_STATESTORE_NAME
    /// </summary>
    public string InstanceStatestoreName { get; set; } = "actor-instances";

    /// <summary>
    /// Name of the state store for actor state persistence
    /// Environment variable: ACTOR_STATE_STORE_NAME
    /// </summary>
    public string ActorStateStoreName { get; set; } = "actor-state";

}
