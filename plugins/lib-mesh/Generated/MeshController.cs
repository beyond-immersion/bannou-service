//----------------------
// <auto-generated>
//     Generated using the NSwag toolchain v14.5.0.0 (NJsonSchema v11.4.0.0 (Newtonsoft.Json v13.0.0.0)) (http://NSwag.org)
//
//     WARNING: DO NOT EDIT THIS FILE (TENETS T1/T2)
//     This file is auto-generated from OpenAPI schemas in /schemas/.
//     Any manual changes will be overwritten on next generation.
//
//     To modify behavior:
//     1. Edit the source schema (schemas/*-api.yaml or schemas/*-events.yaml)
//     2. Run: scripts/generate-all-services.sh
//     3. Implement business logic in the service class (e.g., *Service.cs)
//
//     See: docs/reference/tenets/FOUNDATION.md (T1: Schema-First, T2: Code Generation)
// </auto-generated>
//----------------------

#nullable enable

#pragma warning disable 108 // Disable "CS0108 '{derivedDto}.ToJson()' hides inherited member '{dtoBase}.ToJson()'. Use the new keyword if hiding was intended."
#pragma warning disable 114 // Disable "CS0114 '{derivedDto}.RaisePropertyChanged(String)' hides inherited member 'dtoBase.RaisePropertyChanged(String)'. To make the current member override that implementation, add the override keyword. Otherwise add the new keyword."
#pragma warning disable 472 // Disable "CS0472 The result of the expression is always 'false' since a value of type 'Int32' is never equal to 'null' of type 'Int32?'
#pragma warning disable 612 // Disable "CS0612 '...' is obsolete"
#pragma warning disable 649 // Disable "CS0649 Field is never assigned to, and will always have its default value null"
#pragma warning disable 1573 // Disable "CS1573 Parameter '...' has no matching param tag in the XML comment for ...
#pragma warning disable 1591 // Disable "CS1591 Missing XML comment for publicly visible type or member ..."
#pragma warning disable 8073 // Disable "CS8073 The result of the expression is always 'false' since a value of type 'T' is never equal to 'null' of type 'T?'"
#pragma warning disable 3016 // Disable "CS3016 Arrays as attribute arguments is not CLS-compliant"
#pragma warning disable 8600 // Disable "CS8600 Converting null literal or possible null value to non-nullable type"
#pragma warning disable 8602 // Disable "CS8602 Dereference of a possibly null reference"
#pragma warning disable 8603 // Disable "CS8603 Possible null reference return"
#pragma warning disable 8604 // Disable "CS8604 Possible null reference argument for parameter"
#pragma warning disable 8625 // Disable "CS8625 Cannot convert null literal to non-nullable reference type"
#pragma warning disable 8765 // Disable "CS8765 Nullability of type of parameter doesn't match overridden member (possibly because of nullability attributes)."

namespace BeyondImmersion.BannouService.Mesh;

using System = global::System;

[System.CodeDom.Compiler.GeneratedCode("NSwag", "14.5.0.0 (NJsonSchema v11.4.0.0 (Newtonsoft.Json v13.0.0.0))")]
public interface IMeshController : BeyondImmersion.BannouService.Controllers.IBannouController
{

    /// <summary>
    /// Get endpoints for a service
    /// </summary>

    /// <remarks>
    /// Returns all healthy endpoints for the specified app-id.
    /// <br/>Used by IMeshClient to resolve target hosts for service invocation.
    /// </remarks>

    /// <returns>Endpoints retrieved successfully</returns>

    System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.ActionResult<GetEndpointsResponse>> GetEndpointsAsync(GetEndpointsRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken));

    /// <summary>
    /// List all registered endpoints
    /// </summary>

    /// <remarks>
    /// Returns all registered service endpoints across all app-ids.
    /// <br/>Admin-only endpoint for monitoring and debugging.
    /// </remarks>

    /// <returns>All endpoints retrieved</returns>

    System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.ActionResult<ListEndpointsResponse>> ListEndpointsAsync(ListEndpointsRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken));

    /// <summary>
    /// Register a service endpoint
    /// </summary>

    /// <remarks>
    /// Registers this instance's endpoint in the service mesh.
    /// <br/>Called during service startup to announce availability.
    /// <br/>Endpoint TTL is refreshed on each heartbeat.
    /// </remarks>

    /// <returns>Endpoint registered successfully</returns>

    System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.ActionResult<RegisterEndpointResponse>> RegisterEndpointAsync(RegisterEndpointRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken));

    /// <summary>
    /// Deregister a service endpoint
    /// </summary>

    /// <remarks>
    /// Removes this instance's endpoint from the service mesh.
    /// <br/>Called during graceful shutdown.
    /// </remarks>

    /// <returns>Endpoint deregistered successfully</returns>

    System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.IActionResult> DeregisterEndpointAsync(DeregisterEndpointRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken));

    /// <summary>
    /// Update endpoint health and load
    /// </summary>

    /// <remarks>
    /// Refreshes endpoint TTL and updates health/load metrics.
    /// <br/>Should be called periodically (default: every 30 seconds).
    /// </remarks>

    /// <returns>Heartbeat processed successfully</returns>

    System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.ActionResult<HeartbeatResponse>> HeartbeatAsync(HeartbeatRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken));

    /// <summary>
    /// Get optimal endpoint for routing
    /// </summary>

    /// <remarks>
    /// Returns a single endpoint for the specified app-id, selected by the
    /// <br/>configured load balancing algorithm (round-robin, least-connections, weighted).
    /// </remarks>

    /// <returns>Route selected successfully</returns>

    System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.ActionResult<GetRouteResponse>> GetRouteAsync(GetRouteRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken));

    /// <summary>
    /// Get service-to-app-id mappings
    /// </summary>

    /// <remarks>
    /// Returns the current service name to app-id mapping table.
    /// <br/>Used by ServiceAppMappingResolver for distributed deployment.
    /// </remarks>

    /// <returns>Mappings retrieved successfully</returns>

    System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.ActionResult<GetMappingsResponse>> GetMappingsAsync(GetMappingsRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken));

    /// <summary>
    /// Get mesh health status
    /// </summary>

    /// <remarks>
    /// Returns overall health of the service mesh including:
    /// <br/>- Total registered endpoints
    /// <br/>- Healthy/degraded/unavailable counts
    /// <br/>- Redis connectivity status
    /// </remarks>

    /// <returns>Health status retrieved</returns>

    System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.ActionResult<MeshHealthResponse>> GetHealthAsync(GetHealthRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken));

}

[System.CodeDom.Compiler.GeneratedCode("NSwag", "14.5.0.0 (NJsonSchema v11.4.0.0 (Newtonsoft.Json v13.0.0.0))")]

public partial class MeshController : Microsoft.AspNetCore.Mvc.ControllerBase
{
    private IMeshService _implementation;

    public MeshController(IMeshService implementation)
    {
        _implementation = implementation;
    }

    /// <summary>
    /// Converts service tuple response to ActionResult format
    /// </summary>
    private Microsoft.AspNetCore.Mvc.ActionResult<T> ConvertToActionResult<T>(BeyondImmersion.BannouService.StatusCodes statusCode, T? result)
    {
        return statusCode switch
        {
            BeyondImmersion.BannouService.StatusCodes.OK => Ok(result),
            BeyondImmersion.BannouService.StatusCodes.BadRequest => BadRequest(result),
            BeyondImmersion.BannouService.StatusCodes.Unauthorized => Unauthorized(result),
            BeyondImmersion.BannouService.StatusCodes.Forbidden => Forbid(),
            BeyondImmersion.BannouService.StatusCodes.NotFound => NotFound(result),
            BeyondImmersion.BannouService.StatusCodes.Conflict => Conflict(result),
            BeyondImmersion.BannouService.StatusCodes.InternalServerError => StatusCode(500, result),
            _ => StatusCode(500, result)
        };
    }

    /// <summary>
    /// Converts service tuple response to IActionResult format (for void-like responses)
    /// </summary>
    private Microsoft.AspNetCore.Mvc.IActionResult ConvertToActionResult(BeyondImmersion.BannouService.StatusCodes statusCode, object? result = null)
    {
        return statusCode switch
        {
            BeyondImmersion.BannouService.StatusCodes.OK => result != null ? Ok(result) : Ok(),
            BeyondImmersion.BannouService.StatusCodes.BadRequest => result != null ? BadRequest(result) : BadRequest(),
            BeyondImmersion.BannouService.StatusCodes.Unauthorized => result != null ? Unauthorized(result) : Unauthorized(),
            BeyondImmersion.BannouService.StatusCodes.Forbidden => Forbid(),
            BeyondImmersion.BannouService.StatusCodes.NotFound => result != null ? NotFound(result) : NotFound(),
            BeyondImmersion.BannouService.StatusCodes.Conflict => result != null ? Conflict(result) : Conflict(),
            BeyondImmersion.BannouService.StatusCodes.InternalServerError => StatusCode(500, result),
            _ => StatusCode(500, result)
        };
    }

    /// <summary>
    /// Get endpoints for a service
    /// </summary>
    /// <remarks>
    /// Returns all healthy endpoints for the specified app-id.
    /// <br/>Used by IMeshClient to resolve target hosts for service invocation.
    /// </remarks>
    /// <returns>Endpoints retrieved successfully</returns>
    [Microsoft.AspNetCore.Mvc.HttpPost, Microsoft.AspNetCore.Mvc.Route("mesh/endpoints/get")]

    public async System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.ActionResult<GetEndpointsResponse>> GetEndpoints([Microsoft.AspNetCore.Mvc.FromBody] [Microsoft.AspNetCore.Mvc.ModelBinding.BindRequired] GetEndpointsRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken))
    {

        var (statusCode, result) = await _implementation.GetEndpointsAsync(body, cancellationToken);
        return ConvertToActionResult(statusCode, result);
    }

    /// <summary>
    /// List all registered endpoints
    /// </summary>
    /// <remarks>
    /// Returns all registered service endpoints across all app-ids.
    /// <br/>Admin-only endpoint for monitoring and debugging.
    /// </remarks>
    /// <returns>All endpoints retrieved</returns>
    [Microsoft.AspNetCore.Mvc.HttpPost, Microsoft.AspNetCore.Mvc.Route("mesh/endpoints/list")]

    public async System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.ActionResult<ListEndpointsResponse>> ListEndpoints([Microsoft.AspNetCore.Mvc.FromBody] [Microsoft.AspNetCore.Mvc.ModelBinding.BindRequired] ListEndpointsRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken))
    {

        var (statusCode, result) = await _implementation.ListEndpointsAsync(body, cancellationToken);
        return ConvertToActionResult(statusCode, result);
    }

    /// <summary>
    /// Register a service endpoint
    /// </summary>
    /// <remarks>
    /// Registers this instance's endpoint in the service mesh.
    /// <br/>Called during service startup to announce availability.
    /// <br/>Endpoint TTL is refreshed on each heartbeat.
    /// </remarks>
    /// <returns>Endpoint registered successfully</returns>
    [Microsoft.AspNetCore.Mvc.HttpPost, Microsoft.AspNetCore.Mvc.Route("mesh/register")]

    public async System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.ActionResult<RegisterEndpointResponse>> RegisterEndpoint([Microsoft.AspNetCore.Mvc.FromBody] [Microsoft.AspNetCore.Mvc.ModelBinding.BindRequired] RegisterEndpointRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken))
    {

        var (statusCode, result) = await _implementation.RegisterEndpointAsync(body, cancellationToken);
        return ConvertToActionResult(statusCode, result);
    }

    /// <summary>
    /// Deregister a service endpoint
    /// </summary>
    /// <remarks>
    /// Removes this instance's endpoint from the service mesh.
    /// <br/>Called during graceful shutdown.
    /// </remarks>
    /// <returns>Endpoint deregistered successfully</returns>
    [Microsoft.AspNetCore.Mvc.HttpPost, Microsoft.AspNetCore.Mvc.Route("mesh/deregister")]

    public async System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.IActionResult> DeregisterEndpoint([Microsoft.AspNetCore.Mvc.FromBody] [Microsoft.AspNetCore.Mvc.ModelBinding.BindRequired] DeregisterEndpointRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken))
    {

        var statusCode = await _implementation.DeregisterEndpointAsync(body, cancellationToken);
        return ConvertToActionResult(statusCode);
    }

    /// <summary>
    /// Update endpoint health and load
    /// </summary>
    /// <remarks>
    /// Refreshes endpoint TTL and updates health/load metrics.
    /// <br/>Should be called periodically (default: every 30 seconds).
    /// </remarks>
    /// <returns>Heartbeat processed successfully</returns>
    [Microsoft.AspNetCore.Mvc.HttpPost, Microsoft.AspNetCore.Mvc.Route("mesh/heartbeat")]

    public async System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.ActionResult<HeartbeatResponse>> Heartbeat([Microsoft.AspNetCore.Mvc.FromBody] [Microsoft.AspNetCore.Mvc.ModelBinding.BindRequired] HeartbeatRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken))
    {

        var (statusCode, result) = await _implementation.HeartbeatAsync(body, cancellationToken);
        return ConvertToActionResult(statusCode, result);
    }

    /// <summary>
    /// Get optimal endpoint for routing
    /// </summary>
    /// <remarks>
    /// Returns a single endpoint for the specified app-id, selected by the
    /// <br/>configured load balancing algorithm (round-robin, least-connections, weighted).
    /// </remarks>
    /// <returns>Route selected successfully</returns>
    [Microsoft.AspNetCore.Mvc.HttpPost, Microsoft.AspNetCore.Mvc.Route("mesh/route")]

    public async System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.ActionResult<GetRouteResponse>> GetRoute([Microsoft.AspNetCore.Mvc.FromBody] [Microsoft.AspNetCore.Mvc.ModelBinding.BindRequired] GetRouteRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken))
    {

        var (statusCode, result) = await _implementation.GetRouteAsync(body, cancellationToken);
        return ConvertToActionResult(statusCode, result);
    }

    /// <summary>
    /// Get service-to-app-id mappings
    /// </summary>
    /// <remarks>
    /// Returns the current service name to app-id mapping table.
    /// <br/>Used by ServiceAppMappingResolver for distributed deployment.
    /// </remarks>
    /// <returns>Mappings retrieved successfully</returns>
    [Microsoft.AspNetCore.Mvc.HttpPost, Microsoft.AspNetCore.Mvc.Route("mesh/mappings")]

    public async System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.ActionResult<GetMappingsResponse>> GetMappings([Microsoft.AspNetCore.Mvc.FromBody] [Microsoft.AspNetCore.Mvc.ModelBinding.BindRequired] GetMappingsRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken))
    {

        var (statusCode, result) = await _implementation.GetMappingsAsync(body, cancellationToken);
        return ConvertToActionResult(statusCode, result);
    }

    /// <summary>
    /// Get mesh health status
    /// </summary>
    /// <remarks>
    /// Returns overall health of the service mesh including:
    /// <br/>- Total registered endpoints
    /// <br/>- Healthy/degraded/unavailable counts
    /// <br/>- Redis connectivity status
    /// </remarks>
    /// <returns>Health status retrieved</returns>
    [Microsoft.AspNetCore.Mvc.HttpPost, Microsoft.AspNetCore.Mvc.Route("mesh/health")]

    public async System.Threading.Tasks.Task<Microsoft.AspNetCore.Mvc.ActionResult<MeshHealthResponse>> GetHealth([Microsoft.AspNetCore.Mvc.FromBody] [Microsoft.AspNetCore.Mvc.ModelBinding.BindRequired] GetHealthRequest body, System.Threading.CancellationToken cancellationToken = default(System.Threading.CancellationToken))
    {

        var (statusCode, result) = await _implementation.GetHealthAsync(body, cancellationToken);
        return ConvertToActionResult(statusCode, result);
    }



    #region Meta Endpoints for GetEndpoints

    private static readonly string _GetEndpoints_RequestSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/GetEndpointsRequest",
    "$defs": {
        "GetEndpointsRequest": {
            "type": "object",
            "description": "Request to get endpoints for a service",
            "additionalProperties": false,
            "required": [
                "appId"
            ],
            "properties": {
                "appId": {
                    "type": "string",
                    "description": "App-id to get endpoints for"
                },
                "includeUnhealthy": {
                    "type": "boolean",
                    "default": false,
                    "description": "If true, include degraded/unavailable endpoints"
                },
                "serviceName": {
                    "type": "string",
                    "nullable": true,
                    "description": "Optional filter by specific service name (null for all services)"
                }
            }
        }
    }
}
""";

    private static readonly string _GetEndpoints_ResponseSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/GetEndpointsResponse",
    "$defs": {
        "GetEndpointsResponse": {
            "type": "object",
            "description": "Response containing endpoints for a service",
            "additionalProperties": false,
            "required": [
                "appId",
                "endpoints"
            ],
            "properties": {
                "appId": {
                    "type": "string",
                    "description": "The app-id that was queried"
                },
                "endpoints": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/MeshEndpoint"
                    },
                    "description": "List of endpoints for the requested app-id"
                },
                "healthyCount": {
                    "type": "integer",
                    "description": "Number of healthy endpoints"
                },
                "totalCount": {
                    "type": "integer",
                    "description": "Total number of endpoints (including unhealthy)"
                }
            }
        },
        "MeshEndpoint": {
            "type": "object",
            "description": "A service endpoint in the mesh",
            "additionalProperties": false,
            "required": [
                "instanceId",
                "appId",
                "host",
                "port",
                "status"
            ],
            "properties": {
                "instanceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Unique identifier for this instance"
                },
                "appId": {
                    "type": "string",
                    "description": "Bannou app-id (e.g., \"bannou\", \"bannou-npc-01\")"
                },
                "host": {
                    "type": "string",
                    "description": "Hostname or IP address"
                },
                "port": {
                    "type": "integer",
                    "description": "Service port (typically 80)"
                },
                "status": {
                    "$ref": "#/$defs/EndpointStatus",
                    "description": "Current health status of the endpoint"
                },
                "loadPercent": {
                    "type": "number",
                    "format": "float",
                    "description": "Current load as percentage (0-100)",
                    "default": 0
                },
                "maxConnections": {
                    "type": "integer",
                    "description": "Maximum concurrent connections"
                },
                "currentConnections": {
                    "type": "integer",
                    "description": "Current active connections"
                },
                "services": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "List of service names hosted on this endpoint"
                },
                "lastSeen": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Last heartbeat timestamp"
                },
                "registeredAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "When endpoint was first registered"
                }
            }
        },
        "EndpointStatus": {
            "type": "string",
            "description": "Health status of an endpoint",
            "enum": [
                "Healthy",
                "Degraded",
                "Unavailable",
                "ShuttingDown"
            ]
        }
    }
}
""";

    private static readonly string _GetEndpoints_Info = """
{
    "summary": "Get endpoints for a service",
    "description": "Returns all healthy endpoints for the specified app-id.\nUsed by IMeshClient to resolve target hosts for service invocation.\n",
    "tags": [
        "Service Discovery"
    ],
    "deprecated": false,
    "operationId": "getEndpoints"
}
""";

    /// <summary>Returns endpoint information for GetEndpoints</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/endpoints/get/meta/info")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetEndpoints_MetaInfo()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildInfoResponse(
            "Mesh",
            "Post",
            "mesh/endpoints/get",
            _GetEndpoints_Info));

    /// <summary>Returns request schema for GetEndpoints</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/endpoints/get/meta/request-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetEndpoints_MetaRequestSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/endpoints/get",
            "request-schema",
            _GetEndpoints_RequestSchema));

    /// <summary>Returns response schema for GetEndpoints</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/endpoints/get/meta/response-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetEndpoints_MetaResponseSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/endpoints/get",
            "response-schema",
            _GetEndpoints_ResponseSchema));

    /// <summary>Returns full schema for GetEndpoints</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/endpoints/get/meta/schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetEndpoints_MetaFullSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildFullSchemaResponse(
            "Mesh",
            "Post",
            "mesh/endpoints/get",
            _GetEndpoints_Info,
            _GetEndpoints_RequestSchema,
            _GetEndpoints_ResponseSchema));

    #endregion

    #region Meta Endpoints for ListEndpoints

    private static readonly string _ListEndpoints_RequestSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/ListEndpointsRequest",
    "$defs": {
        "ListEndpointsRequest": {
            "type": "object",
            "description": "Request to list all endpoints",
            "additionalProperties": false,
            "properties": {
                "statusFilter": {
                    "$ref": "#/$defs/EndpointStatus",
                    "nullable": true,
                    "description": "Filter endpoints by health status (null for all statuses)"
                },
                "appIdFilter": {
                    "type": "string",
                    "nullable": true,
                    "description": "Optional filter by app-id prefix (null for all app IDs)"
                }
            }
        },
        "EndpointStatus": {
            "type": "string",
            "description": "Health status of an endpoint",
            "enum": [
                "Healthy",
                "Degraded",
                "Unavailable",
                "ShuttingDown"
            ]
        }
    }
}
""";

    private static readonly string _ListEndpoints_ResponseSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/ListEndpointsResponse",
    "$defs": {
        "ListEndpointsResponse": {
            "type": "object",
            "description": "Response containing all endpoints",
            "additionalProperties": false,
            "required": [
                "endpoints",
                "summary"
            ],
            "properties": {
                "endpoints": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/MeshEndpoint"
                    },
                    "description": "List of all registered endpoints"
                },
                "summary": {
                    "$ref": "#/$defs/EndpointSummary",
                    "description": "Summary statistics for the endpoints"
                }
            }
        },
        "MeshEndpoint": {
            "type": "object",
            "description": "A service endpoint in the mesh",
            "additionalProperties": false,
            "required": [
                "instanceId",
                "appId",
                "host",
                "port",
                "status"
            ],
            "properties": {
                "instanceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Unique identifier for this instance"
                },
                "appId": {
                    "type": "string",
                    "description": "Bannou app-id (e.g., \"bannou\", \"bannou-npc-01\")"
                },
                "host": {
                    "type": "string",
                    "description": "Hostname or IP address"
                },
                "port": {
                    "type": "integer",
                    "description": "Service port (typically 80)"
                },
                "status": {
                    "$ref": "#/$defs/EndpointStatus",
                    "description": "Current health status of the endpoint"
                },
                "loadPercent": {
                    "type": "number",
                    "format": "float",
                    "description": "Current load as percentage (0-100)",
                    "default": 0
                },
                "maxConnections": {
                    "type": "integer",
                    "description": "Maximum concurrent connections"
                },
                "currentConnections": {
                    "type": "integer",
                    "description": "Current active connections"
                },
                "services": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "List of service names hosted on this endpoint"
                },
                "lastSeen": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Last heartbeat timestamp"
                },
                "registeredAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "When endpoint was first registered"
                }
            }
        },
        "EndpointStatus": {
            "type": "string",
            "description": "Health status of an endpoint",
            "enum": [
                "Healthy",
                "Degraded",
                "Unavailable",
                "ShuttingDown"
            ]
        },
        "EndpointSummary": {
            "type": "object",
            "description": "Summary statistics for endpoints",
            "additionalProperties": false,
            "properties": {
                "totalEndpoints": {
                    "type": "integer",
                    "description": "Total number of registered endpoints"
                },
                "healthyCount": {
                    "type": "integer",
                    "description": "Number of endpoints with Healthy status"
                },
                "degradedCount": {
                    "type": "integer",
                    "description": "Number of endpoints with Degraded status"
                },
                "unavailableCount": {
                    "type": "integer",
                    "description": "Number of endpoints with Unavailable status"
                },
                "uniqueAppIds": {
                    "type": "integer",
                    "description": "Number of unique app-ids across all endpoints"
                }
            }
        }
    }
}
""";

    private static readonly string _ListEndpoints_Info = """
{
    "summary": "List all registered endpoints",
    "description": "Returns all registered service endpoints across all app-ids.\nAdmin-only endpoint for monitoring and debugging.\n",
    "tags": [
        "Service Discovery"
    ],
    "deprecated": false,
    "operationId": "listEndpoints"
}
""";

    /// <summary>Returns endpoint information for ListEndpoints</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/endpoints/list/meta/info")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> ListEndpoints_MetaInfo()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildInfoResponse(
            "Mesh",
            "Post",
            "mesh/endpoints/list",
            _ListEndpoints_Info));

    /// <summary>Returns request schema for ListEndpoints</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/endpoints/list/meta/request-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> ListEndpoints_MetaRequestSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/endpoints/list",
            "request-schema",
            _ListEndpoints_RequestSchema));

    /// <summary>Returns response schema for ListEndpoints</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/endpoints/list/meta/response-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> ListEndpoints_MetaResponseSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/endpoints/list",
            "response-schema",
            _ListEndpoints_ResponseSchema));

    /// <summary>Returns full schema for ListEndpoints</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/endpoints/list/meta/schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> ListEndpoints_MetaFullSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildFullSchemaResponse(
            "Mesh",
            "Post",
            "mesh/endpoints/list",
            _ListEndpoints_Info,
            _ListEndpoints_RequestSchema,
            _ListEndpoints_ResponseSchema));

    #endregion

    #region Meta Endpoints for RegisterEndpoint

    private static readonly string _RegisterEndpoint_RequestSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/RegisterEndpointRequest",
    "$defs": {
        "RegisterEndpointRequest": {
            "type": "object",
            "description": "Request to register a service endpoint",
            "additionalProperties": false,
            "required": [
                "instanceId",
                "appId",
                "host",
                "port"
            ],
            "properties": {
                "instanceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Unique identifier for this instance"
                },
                "appId": {
                    "type": "string",
                    "description": "App-id for this instance"
                },
                "host": {
                    "type": "string",
                    "description": "Hostname or IP address to register"
                },
                "port": {
                    "type": "integer",
                    "default": 80,
                    "description": "Service port"
                },
                "services": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "nullable": true,
                    "description": "List of service names hosted on this endpoint (null for none)"
                },
                "maxConnections": {
                    "type": "integer",
                    "default": 1000,
                    "description": "Maximum concurrent connections"
                },
                "metadata": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "string"
                    },
                    "nullable": true,
                    "description": "Optional metadata key-value pairs (null if none)"
                }
            }
        }
    }
}
""";

    private static readonly string _RegisterEndpoint_ResponseSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/RegisterEndpointResponse",
    "$defs": {
        "RegisterEndpointResponse": {
            "type": "object",
            "description": "Response after registering endpoint",
            "additionalProperties": false,
            "required": [
                "success",
                "endpoint"
            ],
            "properties": {
                "success": {
                    "type": "boolean",
                    "description": "Whether the registration was successful"
                },
                "endpoint": {
                    "$ref": "#/$defs/MeshEndpoint",
                    "description": "The registered endpoint details"
                },
                "ttlSeconds": {
                    "type": "integer",
                    "description": "TTL for the registration (requires heartbeat refresh)"
                }
            }
        },
        "MeshEndpoint": {
            "type": "object",
            "description": "A service endpoint in the mesh",
            "additionalProperties": false,
            "required": [
                "instanceId",
                "appId",
                "host",
                "port",
                "status"
            ],
            "properties": {
                "instanceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Unique identifier for this instance"
                },
                "appId": {
                    "type": "string",
                    "description": "Bannou app-id (e.g., \"bannou\", \"bannou-npc-01\")"
                },
                "host": {
                    "type": "string",
                    "description": "Hostname or IP address"
                },
                "port": {
                    "type": "integer",
                    "description": "Service port (typically 80)"
                },
                "status": {
                    "$ref": "#/$defs/EndpointStatus",
                    "description": "Current health status of the endpoint"
                },
                "loadPercent": {
                    "type": "number",
                    "format": "float",
                    "description": "Current load as percentage (0-100)",
                    "default": 0
                },
                "maxConnections": {
                    "type": "integer",
                    "description": "Maximum concurrent connections"
                },
                "currentConnections": {
                    "type": "integer",
                    "description": "Current active connections"
                },
                "services": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "List of service names hosted on this endpoint"
                },
                "lastSeen": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Last heartbeat timestamp"
                },
                "registeredAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "When endpoint was first registered"
                }
            }
        },
        "EndpointStatus": {
            "type": "string",
            "description": "Health status of an endpoint",
            "enum": [
                "Healthy",
                "Degraded",
                "Unavailable",
                "ShuttingDown"
            ]
        }
    }
}
""";

    private static readonly string _RegisterEndpoint_Info = """
{
    "summary": "Register a service endpoint",
    "description": "Registers this instance's endpoint in the service mesh.\nCalled during service startup to announce availability.\nEndpoint TTL is refreshed on each heartbeat.\n",
    "tags": [
        "Registration"
    ],
    "deprecated": false,
    "operationId": "registerEndpoint"
}
""";

    /// <summary>Returns endpoint information for RegisterEndpoint</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/register/meta/info")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> RegisterEndpoint_MetaInfo()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildInfoResponse(
            "Mesh",
            "Post",
            "mesh/register",
            _RegisterEndpoint_Info));

    /// <summary>Returns request schema for RegisterEndpoint</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/register/meta/request-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> RegisterEndpoint_MetaRequestSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/register",
            "request-schema",
            _RegisterEndpoint_RequestSchema));

    /// <summary>Returns response schema for RegisterEndpoint</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/register/meta/response-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> RegisterEndpoint_MetaResponseSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/register",
            "response-schema",
            _RegisterEndpoint_ResponseSchema));

    /// <summary>Returns full schema for RegisterEndpoint</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/register/meta/schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> RegisterEndpoint_MetaFullSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildFullSchemaResponse(
            "Mesh",
            "Post",
            "mesh/register",
            _RegisterEndpoint_Info,
            _RegisterEndpoint_RequestSchema,
            _RegisterEndpoint_ResponseSchema));

    #endregion

    #region Meta Endpoints for DeregisterEndpoint

    private static readonly string _DeregisterEndpoint_RequestSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/DeregisterEndpointRequest",
    "$defs": {
        "DeregisterEndpointRequest": {
            "type": "object",
            "description": "Request to deregister an endpoint",
            "additionalProperties": false,
            "required": [
                "instanceId"
            ],
            "properties": {
                "instanceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Instance to deregister"
                }
            }
        }
    }
}
""";

    private static readonly string _DeregisterEndpoint_ResponseSchema = """
{}
""";

    private static readonly string _DeregisterEndpoint_Info = """
{
    "summary": "Deregister a service endpoint",
    "description": "Removes this instance's endpoint from the service mesh.\nCalled during graceful shutdown.\n",
    "tags": [
        "Registration"
    ],
    "deprecated": false,
    "operationId": "deregisterEndpoint"
}
""";

    /// <summary>Returns endpoint information for DeregisterEndpoint</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/deregister/meta/info")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> DeregisterEndpoint_MetaInfo()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildInfoResponse(
            "Mesh",
            "Post",
            "mesh/deregister",
            _DeregisterEndpoint_Info));

    /// <summary>Returns request schema for DeregisterEndpoint</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/deregister/meta/request-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> DeregisterEndpoint_MetaRequestSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/deregister",
            "request-schema",
            _DeregisterEndpoint_RequestSchema));

    /// <summary>Returns response schema for DeregisterEndpoint</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/deregister/meta/response-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> DeregisterEndpoint_MetaResponseSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/deregister",
            "response-schema",
            _DeregisterEndpoint_ResponseSchema));

    /// <summary>Returns full schema for DeregisterEndpoint</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/deregister/meta/schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> DeregisterEndpoint_MetaFullSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildFullSchemaResponse(
            "Mesh",
            "Post",
            "mesh/deregister",
            _DeregisterEndpoint_Info,
            _DeregisterEndpoint_RequestSchema,
            _DeregisterEndpoint_ResponseSchema));

    #endregion

    #region Meta Endpoints for Heartbeat

    private static readonly string _Heartbeat_RequestSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/HeartbeatRequest",
    "$defs": {
        "HeartbeatRequest": {
            "type": "object",
            "description": "Heartbeat to refresh endpoint TTL and update metrics",
            "additionalProperties": false,
            "required": [
                "instanceId"
            ],
            "properties": {
                "instanceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Unique identifier for the instance sending the heartbeat"
                },
                "status": {
                    "allOf": [
                        {
                            "$ref": "#/$defs/EndpointStatus"
                        }
                    ],
                    "nullable": true,
                    "description": "Current health status of the endpoint (null defaults to Healthy)"
                },
                "loadPercent": {
                    "type": "number",
                    "format": "float",
                    "nullable": true,
                    "description": "Current load 0-100 (null defaults to 0)"
                },
                "currentConnections": {
                    "type": "integer",
                    "nullable": true,
                    "description": "Current active connections (null defaults to 0)"
                },
                "issues": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "nullable": true,
                    "description": "List of non-critical issues (null if none)"
                }
            }
        },
        "EndpointStatus": {
            "type": "string",
            "description": "Health status of an endpoint",
            "enum": [
                "Healthy",
                "Degraded",
                "Unavailable",
                "ShuttingDown"
            ]
        }
    }
}
""";

    private static readonly string _Heartbeat_ResponseSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/HeartbeatResponse",
    "$defs": {
        "HeartbeatResponse": {
            "type": "object",
            "description": "Response after heartbeat processed",
            "additionalProperties": false,
            "required": [
                "success"
            ],
            "properties": {
                "success": {
                    "type": "boolean",
                    "description": "Whether the heartbeat was processed successfully"
                },
                "nextHeartbeatSeconds": {
                    "type": "integer",
                    "description": "Recommended seconds until next heartbeat"
                },
                "ttlSeconds": {
                    "type": "integer",
                    "description": "Remaining TTL for registration"
                }
            }
        }
    }
}
""";

    private static readonly string _Heartbeat_Info = """
{
    "summary": "Update endpoint health and load",
    "description": "Refreshes endpoint TTL and updates health/load metrics.\nShould be called periodically (default: every 30 seconds).\n",
    "tags": [
        "Registration"
    ],
    "deprecated": false,
    "operationId": "heartbeat"
}
""";

    /// <summary>Returns endpoint information for Heartbeat</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/heartbeat/meta/info")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> Heartbeat_MetaInfo()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildInfoResponse(
            "Mesh",
            "Post",
            "mesh/heartbeat",
            _Heartbeat_Info));

    /// <summary>Returns request schema for Heartbeat</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/heartbeat/meta/request-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> Heartbeat_MetaRequestSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/heartbeat",
            "request-schema",
            _Heartbeat_RequestSchema));

    /// <summary>Returns response schema for Heartbeat</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/heartbeat/meta/response-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> Heartbeat_MetaResponseSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/heartbeat",
            "response-schema",
            _Heartbeat_ResponseSchema));

    /// <summary>Returns full schema for Heartbeat</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/heartbeat/meta/schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> Heartbeat_MetaFullSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildFullSchemaResponse(
            "Mesh",
            "Post",
            "mesh/heartbeat",
            _Heartbeat_Info,
            _Heartbeat_RequestSchema,
            _Heartbeat_ResponseSchema));

    #endregion

    #region Meta Endpoints for GetRoute

    private static readonly string _GetRoute_RequestSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/GetRouteRequest",
    "$defs": {
        "GetRouteRequest": {
            "type": "object",
            "description": "Request to get optimal route for a service call",
            "additionalProperties": false,
            "required": [
                "appId"
            ],
            "properties": {
                "appId": {
                    "type": "string",
                    "description": "Target app-id to route to"
                },
                "serviceName": {
                    "type": "string",
                    "nullable": true,
                    "description": "Optional service name for affinity routing (null for no affinity)"
                },
                "algorithm": {
                    "$ref": "#/$defs/LoadBalancerAlgorithm",
                    "description": "Load balancing algorithm to use for endpoint selection"
                }
            }
        },
        "LoadBalancerAlgorithm": {
            "type": "string",
            "description": "Load balancing algorithm",
            "enum": [
                "RoundRobin",
                "LeastConnections",
                "Weighted",
                "Random"
            ]
        }
    }
}
""";

    private static readonly string _GetRoute_ResponseSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/GetRouteResponse",
    "$defs": {
        "GetRouteResponse": {
            "type": "object",
            "description": "Selected route for service call",
            "additionalProperties": false,
            "required": [
                "endpoint"
            ],
            "properties": {
                "endpoint": {
                    "$ref": "#/$defs/MeshEndpoint",
                    "description": "The selected optimal endpoint for routing"
                },
                "alternates": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/MeshEndpoint"
                    },
                    "description": "Alternative endpoints if primary fails"
                }
            }
        },
        "MeshEndpoint": {
            "type": "object",
            "description": "A service endpoint in the mesh",
            "additionalProperties": false,
            "required": [
                "instanceId",
                "appId",
                "host",
                "port",
                "status"
            ],
            "properties": {
                "instanceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Unique identifier for this instance"
                },
                "appId": {
                    "type": "string",
                    "description": "Bannou app-id (e.g., \"bannou\", \"bannou-npc-01\")"
                },
                "host": {
                    "type": "string",
                    "description": "Hostname or IP address"
                },
                "port": {
                    "type": "integer",
                    "description": "Service port (typically 80)"
                },
                "status": {
                    "$ref": "#/$defs/EndpointStatus",
                    "description": "Current health status of the endpoint"
                },
                "loadPercent": {
                    "type": "number",
                    "format": "float",
                    "description": "Current load as percentage (0-100)",
                    "default": 0
                },
                "maxConnections": {
                    "type": "integer",
                    "description": "Maximum concurrent connections"
                },
                "currentConnections": {
                    "type": "integer",
                    "description": "Current active connections"
                },
                "services": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "List of service names hosted on this endpoint"
                },
                "lastSeen": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Last heartbeat timestamp"
                },
                "registeredAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "When endpoint was first registered"
                }
            }
        },
        "EndpointStatus": {
            "type": "string",
            "description": "Health status of an endpoint",
            "enum": [
                "Healthy",
                "Degraded",
                "Unavailable",
                "ShuttingDown"
            ]
        }
    }
}
""";

    private static readonly string _GetRoute_Info = """
{
    "summary": "Get optimal endpoint for routing",
    "description": "Returns a single endpoint for the specified app-id, selected by the\nconfigured load balancing algorithm (round-robin, least-connections, weighted).\n",
    "tags": [
        "Routing"
    ],
    "deprecated": false,
    "operationId": "getRoute"
}
""";

    /// <summary>Returns endpoint information for GetRoute</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/route/meta/info")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetRoute_MetaInfo()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildInfoResponse(
            "Mesh",
            "Post",
            "mesh/route",
            _GetRoute_Info));

    /// <summary>Returns request schema for GetRoute</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/route/meta/request-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetRoute_MetaRequestSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/route",
            "request-schema",
            _GetRoute_RequestSchema));

    /// <summary>Returns response schema for GetRoute</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/route/meta/response-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetRoute_MetaResponseSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/route",
            "response-schema",
            _GetRoute_ResponseSchema));

    /// <summary>Returns full schema for GetRoute</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/route/meta/schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetRoute_MetaFullSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildFullSchemaResponse(
            "Mesh",
            "Post",
            "mesh/route",
            _GetRoute_Info,
            _GetRoute_RequestSchema,
            _GetRoute_ResponseSchema));

    #endregion

    #region Meta Endpoints for GetMappings

    private static readonly string _GetMappings_RequestSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/GetMappingsRequest",
    "$defs": {
        "GetMappingsRequest": {
            "type": "object",
            "description": "Request to get service-to-app-id mappings",
            "additionalProperties": false,
            "properties": {
                "serviceNameFilter": {
                    "type": "string",
                    "nullable": true,
                    "description": "Optional filter by service name prefix (null for all services)"
                }
            }
        }
    }
}
""";

    private static readonly string _GetMappings_ResponseSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/GetMappingsResponse",
    "$defs": {
        "GetMappingsResponse": {
            "type": "object",
            "description": "Current service mappings",
            "additionalProperties": false,
            "required": [
                "mappings",
                "version"
            ],
            "properties": {
                "mappings": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "string"
                    },
                    "description": "Map of serviceName -> appId"
                },
                "defaultAppId": {
                    "type": "string",
                    "default": "bannou",
                    "description": "Default app-id when no mapping exists"
                },
                "version": {
                    "type": "integer",
                    "format": "int64",
                    "description": "Mapping version for change detection"
                }
            }
        }
    }
}
""";

    private static readonly string _GetMappings_Info = """
{
    "summary": "Get service-to-app-id mappings",
    "description": "Returns the current service name to app-id mapping table.\nUsed by ServiceAppMappingResolver for distributed deployment.\n",
    "tags": [
        "Routing"
    ],
    "deprecated": false,
    "operationId": "getMappings"
}
""";

    /// <summary>Returns endpoint information for GetMappings</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/mappings/meta/info")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetMappings_MetaInfo()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildInfoResponse(
            "Mesh",
            "Post",
            "mesh/mappings",
            _GetMappings_Info));

    /// <summary>Returns request schema for GetMappings</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/mappings/meta/request-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetMappings_MetaRequestSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/mappings",
            "request-schema",
            _GetMappings_RequestSchema));

    /// <summary>Returns response schema for GetMappings</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/mappings/meta/response-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetMappings_MetaResponseSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/mappings",
            "response-schema",
            _GetMappings_ResponseSchema));

    /// <summary>Returns full schema for GetMappings</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/mappings/meta/schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetMappings_MetaFullSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildFullSchemaResponse(
            "Mesh",
            "Post",
            "mesh/mappings",
            _GetMappings_Info,
            _GetMappings_RequestSchema,
            _GetMappings_ResponseSchema));

    #endregion

    #region Meta Endpoints for GetHealth

    private static readonly string _GetHealth_RequestSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/GetHealthRequest",
    "$defs": {
        "GetHealthRequest": {
            "type": "object",
            "description": "Request for mesh health status",
            "additionalProperties": false,
            "properties": {
                "includeEndpoints": {
                    "type": "boolean",
                    "default": false,
                    "description": "Include full endpoint list in response"
                }
            }
        }
    }
}
""";

    private static readonly string _GetHealth_ResponseSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/MeshHealthResponse",
    "$defs": {
        "MeshHealthResponse": {
            "type": "object",
            "description": "Overall mesh health status",
            "additionalProperties": false,
            "required": [
                "status",
                "summary"
            ],
            "properties": {
                "status": {
                    "$ref": "#/$defs/EndpointStatus",
                    "description": "Overall health status of the mesh"
                },
                "summary": {
                    "$ref": "#/$defs/EndpointSummary",
                    "description": "Summary statistics for all endpoints"
                },
                "redisConnected": {
                    "type": "boolean",
                    "description": "Whether Redis connection is healthy"
                },
                "lastUpdateTime": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Timestamp of the last health status update"
                },
                "uptime": {
                    "type": "string",
                    "description": "Mesh service uptime (e.g., \"2d 5h 30m\")"
                },
                "endpoints": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/MeshEndpoint"
                    },
                    "description": "Full endpoint list (only if includeEndpoints=true)"
                }
            }
        },
        "EndpointStatus": {
            "type": "string",
            "description": "Health status of an endpoint",
            "enum": [
                "Healthy",
                "Degraded",
                "Unavailable",
                "ShuttingDown"
            ]
        },
        "EndpointSummary": {
            "type": "object",
            "description": "Summary statistics for endpoints",
            "additionalProperties": false,
            "properties": {
                "totalEndpoints": {
                    "type": "integer",
                    "description": "Total number of registered endpoints"
                },
                "healthyCount": {
                    "type": "integer",
                    "description": "Number of endpoints with Healthy status"
                },
                "degradedCount": {
                    "type": "integer",
                    "description": "Number of endpoints with Degraded status"
                },
                "unavailableCount": {
                    "type": "integer",
                    "description": "Number of endpoints with Unavailable status"
                },
                "uniqueAppIds": {
                    "type": "integer",
                    "description": "Number of unique app-ids across all endpoints"
                }
            }
        },
        "MeshEndpoint": {
            "type": "object",
            "description": "A service endpoint in the mesh",
            "additionalProperties": false,
            "required": [
                "instanceId",
                "appId",
                "host",
                "port",
                "status"
            ],
            "properties": {
                "instanceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Unique identifier for this instance"
                },
                "appId": {
                    "type": "string",
                    "description": "Bannou app-id (e.g., \"bannou\", \"bannou-npc-01\")"
                },
                "host": {
                    "type": "string",
                    "description": "Hostname or IP address"
                },
                "port": {
                    "type": "integer",
                    "description": "Service port (typically 80)"
                },
                "status": {
                    "$ref": "#/$defs/EndpointStatus",
                    "description": "Current health status of the endpoint"
                },
                "loadPercent": {
                    "type": "number",
                    "format": "float",
                    "description": "Current load as percentage (0-100)",
                    "default": 0
                },
                "maxConnections": {
                    "type": "integer",
                    "description": "Maximum concurrent connections"
                },
                "currentConnections": {
                    "type": "integer",
                    "description": "Current active connections"
                },
                "services": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "List of service names hosted on this endpoint"
                },
                "lastSeen": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Last heartbeat timestamp"
                },
                "registeredAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "When endpoint was first registered"
                }
            }
        }
    }
}
""";

    private static readonly string _GetHealth_Info = """
{
    "summary": "Get mesh health status",
    "description": "Returns overall health of the service mesh including:\n- Total registered endpoints\n- Healthy/degraded/unavailable counts\n- Redis connectivity status\n",
    "tags": [
        "Diagnostics"
    ],
    "deprecated": false,
    "operationId": "getHealth"
}
""";

    /// <summary>Returns endpoint information for GetHealth</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/health/meta/info")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetHealth_MetaInfo()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildInfoResponse(
            "Mesh",
            "Post",
            "mesh/health",
            _GetHealth_Info));

    /// <summary>Returns request schema for GetHealth</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/health/meta/request-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetHealth_MetaRequestSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/health",
            "request-schema",
            _GetHealth_RequestSchema));

    /// <summary>Returns response schema for GetHealth</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/health/meta/response-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetHealth_MetaResponseSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Mesh",
            "Post",
            "mesh/health",
            "response-schema",
            _GetHealth_ResponseSchema));

    /// <summary>Returns full schema for GetHealth</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("mesh/health/meta/schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetHealth_MetaFullSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildFullSchemaResponse(
            "Mesh",
            "Post",
            "mesh/health",
            _GetHealth_Info,
            _GetHealth_RequestSchema,
            _GetHealth_ResponseSchema));

    #endregion

}



#pragma warning restore  108
#pragma warning restore  114
#pragma warning restore  472
#pragma warning restore  612
#pragma warning restore  649
#pragma warning restore 1573
#pragma warning restore 1591
#pragma warning restore 8073
#pragma warning restore 3016
#pragma warning restore 8600
#pragma warning restore 8602
#pragma warning restore 8603
#pragma warning restore 8604
#pragma warning restore 8625
#pragma warning restore 8765