//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace BeyondImmersion.BannouService.Storyline;

/// <summary>
/// Meta/introspection endpoints for runtime schema access.
/// Generated from schemas/Generated/storyline-api-meta.yaml
/// </summary>
public partial class StorylineController
{
    #region Meta Endpoints for Compose

    private static readonly string _Compose_RequestSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/ComposeRequest",
    "$defs": {
        "ComposeRequest": {
            "type": "object",
            "additionalProperties": false,
            "description": "Request to compose a storyline plan",
            "required": [
                "seedSources",
                "goal"
            ],
            "properties": {
                "seedSources": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/SeedSource"
                    },
                    "minItems": 1,
                    "maxItems": 10,
                    "description": "Archive or snapshot sources to seed the storyline.\nAt least one source is required. Mix of archives and snapshots allowed.\n"
                },
                "goal": {
                    "$ref": "#/$defs/StorylineGoal",
                    "description": "The high-level goal driving arc selection"
                },
                "constraints": {
                    "$ref": "#/$defs/ComposeConstraints",
                    "nullable": true,
                    "description": "Optional constraints on composition"
                },
                "genre": {
                    "type": "string",
                    "nullable": true,
                    "description": "Genre filter (e.g., \"crime\", \"action\", \"romance\").\nIf omitted, inferred from archive data.\n"
                },
                "arcType": {
                    "$ref": "#/$defs/ArcType",
                    "nullable": true,
                    "description": "Specific arc type to use. If omitted, selected based on goal.\n"
                },
                "urgency": {
                    "$ref": "#/$defs/PlanningUrgency",
                    "nullable": true,
                    "description": "Planning urgency level. Defaults to configuration value.\n"
                },
                "seed": {
                    "type": "integer",
                    "nullable": true,
                    "description": "Random seed for deterministic output (enables caching)"
                }
            }
        },
        "SeedSource": {
            "type": "object",
            "additionalProperties": false,
            "description": "A source of seed data (archive or snapshot)",
            "properties": {
                "archiveId": {
                    "type": "string",
                    "format": "uuid",
                    "nullable": true,
                    "description": "ID of a compressed archive (dead entity)"
                },
                "snapshotId": {
                    "type": "string",
                    "format": "uuid",
                    "nullable": true,
                    "description": "ID of a live snapshot (living entity)"
                },
                "role": {
                    "type": "string",
                    "nullable": true,
                    "description": "Optional actant role hint (e.g., \"protagonist\", \"antagonist\", \"helper\").\nUsed for Greimas actant assignment if provided.\n"
                }
            }
        },
        "StorylineGoal": {
            "type": "string",
            "enum": [
                "revenge",
                "resurrection",
                "legacy",
                "mystery",
                "peace",
                "redemption",
                "conquest",
                "survival"
            ],
            "description": "High-level story goal that drives arc selection.\ nrevenge: Character seeks vengeance for past wrongs\nresurrection: Restoring something/someone lost\nlegacy: Creating or continuing a lasting impact\nmystery: Uncovering hidden truths\npeace: Resolving conflicts and finding harmony\ nredemption: Atoning for past mistakes\nconquest: Achieving dominion or victory\nsurvival: Overcoming threats to existence\n"
        },
        "ComposeConstraints": {
            "type": "object",
            "additionalProperties": false,
            "description": "Constraints on storyline composition",
            "properties": {
                "realmId": {
                    "type": "string",
                    "format": "uuid",
                    "nullable": true,
                    "description": "Realm to anchor the storyline in"
                },
                "locationId": {
                    "type": "string",
                    "format": "uuid",
                    "nullable": true,
                    "description": "Optional starting location"
                },
                "maxEntities": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 50,
                    "nullable": true,
                    "description": "Maximum entities the plan can require (default from config)"
                },
                "maxPhases": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 10,
                    "nullable": true,
                    "description": "Maximum phases in the plan (default unlimited)"
                }
            }
        },
        "ArcType": {
            "type": "string",
            "enum": [
                "rags_to_riches",
                "tragedy",
                "man_in_hole",
                "icarus",
                "cinderella",
                "oedipus"
            ],
            "description": "Emotional arc shapes from Reagan et al. research.\nrags_to_riches: Rise (1)\ntragedy: Fall (2)\nman_in_hole: Fall then rise (3)\nicarus: Rise then fall (4)\ncinderella: Rise, fall, rise (5)\noedipus: Fall, rise, fall (6)\n"
        },
        "PlanningUrgency": {
            "type": "string",
            "enum": [
                "low",
                "medium",
                "high"
            ],
            "description": "GOAP planning urgency level affecting search parameters.\nlow: More iterations, wider beam (1000/20)\nmedium: Balanced (500/15)\nhigh: Fewer iterations, narrower beam (200/10)\n"
        }
    }
}
""";

    private static readonly string _Compose_ResponseSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/ComposeResponse",
    "$defs": {
        "ComposeResponse": {
            "type": "object",
            "additionalProperties": false,
            "description": "Composed storyline plan",
            "required": [
                "planId",
                "confidence",
                "goal",
                "arcType",
                "primarySpectrum",
                "phases",
                "generationTimeMs",
                "cached"
            ],
            "properties": {
                "planId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Unique plan identifier"
                },
                "confidence": {
                    "type": "number",
                    "format": "double",
                    "minimum": 0,
                    "maximum": 1,
                    "description": "Plan viability score (0-1)"
                },
                "goal": {
                    "$ref": "#/$defs/StorylineGoal",
                    "description": "The goal that was used"
                },
                "genre": {
                    "type": "string",
                    "nullable": true,
                    "description": "Inferred or specified genre"
                },
                "arcType": {
                    "$ref": "#/$defs/ArcType",
                    "description": "Emotional arc type used"
                },
                "primarySpectrum": {
                    "$ref": "#/$defs/SpectrumType",
                    "description": "Primary Life Value spectrum"
                },
                "themes": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "nullable": true,
                    "description": "Inferred thematic elements"
                },
                "phases": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/StorylinePlanPhase"
                    },
                    "description": "Planned phases with actions"
                },
                "entitiesToSpawn": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/EntityRequirement"
                    },
                    "nullable": true,
                    "description": "Entities required for this storyline (descriptions only).\nCallers decide whether to spawn them.\n"
                },
                "links": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/StorylineLink"
                    },
                    "nullable": true,
                    "description": "Links between entities in the plan"
                },
                "risks": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/StorylineRisk"
                    },
                    "nullable": true,
                    "description": "Identified risks or weak points in the plan"
                },
                "generationTimeMs": {
                    "type": "integer",
                    "description": "Time taken to generate in milliseconds"
                },
                "cached": {
                    "type": "boolean",
                    "description": "Whether this was returned from cache"
                }
            }
        },
        "StorylineGoal": {
            "type": "string",
            "enum": [
                "revenge",
                "resurrection",
                "legacy",
                "mystery",
                "peace",
                "redemption",
                "conquest",
                "survival"
            ],
            "description": "High-level story goal that drives arc selection.\nrevenge: Character seeks vengeance for past wrongs\nresurrection: Restoring something/someone lost\ nlegacy: Creating or continuing a lasting impact\nmystery: Uncovering hidden truths\npeace: Resolving conflicts and finding harmony\nredemption: Atoning for past mistakes\nconquest: Achieving dominion or victory\nsurvival: Overcoming threats to existence\n"
        },
        "ArcType": {
            "type": "string",
            "enum": [
                "rags_to_riches",
                "tragedy",
                "man_in_hole",
                "icarus",
                "cinderella",
                "oedipus"
            ],
            "description": "Emotional arc shapes from Reagan et al. research.\nrags_to_riches: Rise (1)\ntragedy: Fall (2)\nman_in_hole: Fall then rise (3)\nicarus: Rise then fall (4)\ncinderella: Rise, fall, rise (5)\noedipus: Fall, rise, fall (6)\n"
        },
        "SpectrumType": {
            "type": "string",
            "enum": [
                "life_death",
                "honor_dishonor",
                "justice_injustice",
                "freedom_subjugation",
                "love_hate",
                "respect_shame",
                "power_impotence",
                "success_failure",
                "altruism_selfishness",
                "wisdom_ignorance"
            ],
            "description": "The 10 Story Grid Life Value spectrums.\nThese are bipolar axes for emotional progression.\n"
        },
        "StorylinePlanPhase": {
            "type": "object",
            "additionalProperties": false,
            "description": "A phase in the storyline plan",
            "required": [
                "phaseNumber",
                "name",
                "actions"
            ],
            "properties": {
                "phaseNumber": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "1-based phase number"
                },
                "name": {
                    "type": "string",
                    "description": "Phase name (e.g., \"discovery\", \"confrontation\", \"resolution\")"
                },
                "actions": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/StorylinePlanAction"
                    },
                    "description": "Actions in this phase"
                },
                "targetState": {
                    "$ref": "#/$defs/PhaseTargetState",
                    "nullable": true,
                    "description": "Target emotional/world state for phase completion"
                },
                "positionBounds": {
                    "$ref": "#/$defs/PhasePosition",
                    "nullable": true,
                    "description": "Position bounds for this phase (0-1 story progress)"
                }
            }
        },
        "StorylinePlanAction": {
            "type": "object",
            "additionalProperties": false,
            "description": "An action in the storyline plan",
            "required": [
                "actionId",
                "category",
                "description"
            ],
            "properties": {
                "actionId": {
                    "type": "string",
                    "description": "Action identifier from action registry"
                },
                "category": {
                    "type": "string",
                    "description": "Action category (e.g., \"conflict\", \"relationship\", \"mystery\")"
                },
                "description": {
                    "type": "string",
                    "description": "Human-readable action description"
                },
                "isCoreEvent": {
                    "type": "boolean",
                    "description": "Whether this is an obligatory scene"
                },
                "participants": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "nullable": true,
                    "description": "Character/entity roles involved"
                },
                "effects": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/ActionEffect"
                    },
                    "nullable": true,
                    "description": "World state effects of this action"
                }
            }
        },
        "ActionEffect": {
            "type": "object",
            "additionalProperties": false,
            "description": "Effect of an action on world state",
            "required": [
                "key",
                "value"
            ],
            "properties": {
                "key": {
                    "type": "string",
                    "description": "State key affected"
                },
                "value": {
                    "type": "string",
                    "description": "New value (as string, caller interprets type)"
                },
                "cardinality": {
                    "type": "string",
                    "enum": [
                        "set",
                        "add",
                        "remove",
                        "increment",
                        "decrement"
                    ],
                    "description": "How to apply the effect"
                }
            }
        },
        "PhaseTargetState": {
            "type": "object",
            "additionalProperties": false,
            "description": "Target state for phase completion",
            "properties": {
                "narrativeState": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "number",
                        "format": "double"
                    },
                    "nullable": true,
                    "description": "Target spectrum values (spectrum name -> value)"
                },
                "facts": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "string"
                    },
                    "nullable": true,
                    "description": "Required world state facts"
                },
                "position": {
                    "type": "number",
                    "format": "double",
                    "minimum": 0,
                    "maximum": 1,
                    "nullable": true,
                    "description": "Target story position (0-1)"
                }
            }
        },
        "PhasePosition": {
            "type": "object",
            "additionalProperties": false,
            "description": "Position bounds for a phase",
            "required": [
                "start",
                "end"
            ],
            "properties": {
                "start": {
                    "type": "number",
                    "format": "double",
                    "minimum": 0,
                    "maximum": 1,
                    "description": "Start position (0-1)"
                },
                "end": {
                    "type": "number",
                    "format": "double",
                    "minimum": 0,
                    "maximum": 1,
                    "description": "End position (0-1)"
                }
            }
        },
        "EntityRequirement": {
            "type": "object",
            "additionalProperties": false,
            "description": "An entity required for the storyline",
            "required": [
                "role",
                "entityType",
                "description"
            ],
            "properties": {
                "role": {
                    "type": "string",
                    "description": "Role in the story (e.g., \"witness\", \"informant\", \"target\")"
                },
                "entityType": {
                    "type": "string",
                    "description": "Type of entity needed (e.g., \"character\", \"location\", \"item\")"
                },
                "description": {
                    "type": "string",
                    "description": "Description of what's needed"
                },
                "constraints": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "string"
                    },
                    "nullable": true,
                    "description": "Constraints on entity selection/creation"
                },
                "sourceArchiveId": {
                    "type": "string",
                    "format": "uuid",
                    "nullable": true,
                    "description": "If derived from an archive, that archive's ID"
                }
            }
        },
        "StorylineLink": {
            "type": "object",
            "additionalProperties": false,
            "description": "A relationship link in the storyline",
            "required": [
                "sourceRole",
                "targetRole",
                "linkType"
            ],
            "properties": {
                "sourceRole": {
                    "type": "string",
                    "description": "Source entity role"
                },
                "targetRole": {
                    "type": "string",
                    "description": "Target entity role"
                },
                "linkType": {
                    "type": "string",
                    "description": "Type of relationship (e.g., \"opposes\", \"allies_with\", \"seeks\")"
                }
            }
        },
        "StorylineRisk": {
            "type": "object",
            "additionalProperties": false,
            "description": "Identified risk in the plan",
            "required": [
                "riskType",
                "description",
                "severity"
            ],
            "properties": {
                "riskType": {
                    "type": "string",
                    "description": "Risk category (e.g., \"missing_entity\", \"low_tension\", \"weak_climax\")"
                },
                "description": {
                    "type": "string",
                    "description": "Risk description"
                },
                "severity": {
                    "type": "string",
                    "enum": [
                        "low",
                        "medium",
                        "high"
                    ],
                    "description": "Risk severity"
                },
                "mitigation": {
                    "type": "string",
                    "nullable": true,
                    "description": "Suggested mitigation"
                }
            }
        }
    }
}
""";

    private static readonly string _Compose_Info = """
{
    "summary": "Compose a storyline plan from archive seeds",
    "description": "Generates a storyline plan using data from compressed archives and/or\nlive snapshots. The plan describes phases, actions, and entity requirements\nbut does NOT create any entities - callers decide whether to instantiate.\n\n**Workflow**:\n1. Fetch archive/snapshot data via IResourceClient\n2. Extract world state from archive bundle\ n3. Select template based on goal and constraints\n4. Run GOAP planner to generate action sequences\n5. Cache plan and publish storyline.composed event\n",
    "tags": [
        "Composition"
    ],
    "deprecated": false,
    "operationId": "Compose"
}
""";

    /// <summary>Returns endpoint information for Compose</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("/storyline/compose/meta/info")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> Compose_MetaInfo()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildInfoResponse(
            "Storyline",
            "POST",
            "/storyline/compose",
            _Compose_Info));

    /// <summary>Returns request schema for Compose</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("/storyline/compose/meta/request-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> Compose_MetaRequestSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Storyline",
            "POST",
            "/storyline/compose",
            "request-schema",
            _Compose_RequestSchema));

    /// <summary>Returns response schema for Compose</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("/storyline/compose/meta/response-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> Compose_MetaResponseSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Storyline",
            "POST",
            "/storyline/compose",
            "response-schema",
            _Compose_ResponseSchema));

    /// <summary>Returns full schema for Compose</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("/storyline/compose/meta/schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> Compose_MetaFullSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildFullSchemaResponse(
            "Storyline",
            "POST",
            "/storyline/compose",
            _Compose_Info,
            _Compose_RequestSchema,
            _Compose_ResponseSchema));

    #endregion

    #region Meta Endpoints for GetPlan

    private static readonly string _GetPlan_RequestSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/GetPlanRequest",
    "$defs": {
        "GetPlanRequest": {
            "type": "object",
            "additionalProperties": false,
            "description": "Request to retrieve a cached plan",
            "required": [
                "planId"
            ],
            "properties": {
                "planId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID of the plan to retrieve"
                }
            }
        }
    }
}
""";

    private static readonly string _GetPlan_ResponseSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/GetPlanResponse",
    "$defs": {
        "GetPlanResponse": {
            "type": "object",
            "additionalProperties": false,
            "description": "Retrieved plan",
            "required": [
                "found"
            ],
            "properties": {
                "found": {
                    "type": "boolean",
                    "description": "Whether the plan was found"
                },
                "plan": {
                    "$ref": "#/$defs/ComposeResponse",
                    "nullable": true,
                    "description": "The plan (null if not found)"
                }
            }
        },
        "ComposeResponse": {
            "type": "object",
            "additionalProperties": false,
            "description": "Composed storyline plan",
            "required": [
                "planId",
                "confidence",
                "goal",
                "arcType",
                "primarySpectrum",
                "phases",
                "generationTimeMs",
                "cached"
            ],
            "properties": {
                "planId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Unique plan identifier"
                },
                "confidence": {
                    "type": "number",
                    "format": "double",
                    "minimum": 0,
                    "maximum": 1,
                    "description": "Plan viability score (0-1)"
                },
                "goal": {
                    "$ref": "#/$defs/StorylineGoal",
                    "description": "The goal that was used"
                },
                "genre": {
                    "type": "string",
                    "nullable": true,
                    "description": "Inferred or specified genre"
                },
                "arcType": {
                    "$ref": "#/$defs/ArcType",
                    "description": "Emotional arc type used"
                },
                "primarySpectrum": {
                    "$ref": "#/$defs/SpectrumType",
                    "description": "Primary Life Value spectrum"
                },
                "themes": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "nullable": true,
                    "description": "Inferred thematic elements"
                },
                "phases": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/StorylinePlanPhase"
                    },
                    "description": "Planned phases with actions"
                },
                "entitiesToSpawn": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/EntityRequirement"
                    },
                    "nullable": true,
                    "description": "Entities required for this storyline (descriptions only).\ nCallers decide whether to spawn them.\n"
                },
                "links": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/StorylineLink"
                    },
                    "nullable": true,
                    "description": "Links between entities in the plan"
                },
                "risks": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/StorylineRisk"
                    },
                    "nullable": true,
                    "description": "Identified risks or weak points in the plan"
                },
                "generationTimeMs": {
                    "type": "integer",
                    "description": "Time taken to generate in milliseconds"
                },
                "cached": {
                    "type": "boolean",
                    "description": "Whether this was returned from cache"
                }
            }
        },
        "StorylineGoal": {
            "type": "string",
            "enum": [
                "revenge",
                "resurrection",
                "legacy",
                "mystery",
                "peace",
                "redemption",
                "conquest",
                "survival"
            ],
            "description": "High-level story goal that drives arc selection.\nrevenge: Character seeks vengeance for past wrongs\nresurrection: Restoring something/someone lost\nlegacy: Creating or continuing a lasting impact\nmystery: Uncovering hidden truths\npeace: Resolving conflicts and finding harmony\nredemption: Atoning for past mistakes\nconquest: Achieving dominion or victory\nsurvival: Overcoming threats to existence\n"
        },
        "ArcType": {
            "type": "string",
            "enum": [
                "rags_to_riches",
                "tragedy",
                "man_in_hole",
                "icarus",
                "cinderella",
                "oedipus"
            ],
            "description": "Emotional arc shapes from Reagan et al. research.\nrags_to_riches: Rise (1)\ntragedy: Fall (2)\nman_in_hole: Fall then rise (3)\nicarus: Rise then fall (4)\ncinderella: Rise, fall, rise (5)\noedipus: Fall, rise, fall (6)\n"
        },
        "SpectrumType": {
            "type": "string",
            "enum": [
                "life_death",
                "honor_dishonor",
                "justice_injustice",
                "freedom_subjugation",
                "love_hate",
                "respect_shame",
                "power_impotence",
                "success_failure",
                "altruism_selfishness",
                "wisdom_ignorance"
            ],
            "description": "The 10 Story Grid Life Value spectrums.\nThese are bipolar axes for emotional progression.\n"
        },
        "StorylinePlanPhase": {
            "type": "object",
            "additionalProperties": false,
            "description": "A phase in the storyline plan",
            "required": [
                "phaseNumber",
                "name",
                "actions"
            ],
            "properties": {
                "phaseNumber": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "1-based phase number"
                },
                "name": {
                    "type": "string",
                    "description": "Phase name (e.g., \"discovery\", \"confrontation\", \"resolution\")"
                },
                "actions": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/StorylinePlanAction"
                    },
                    "description": "Actions in this phase"
                },
                "targetState": {
                    "$ref": "#/$defs/PhaseTargetState",
                    "nullable": true,
                    "description": "Target emotional/world state for phase completion"
                },
                "positionBounds": {
                    "$ref": "#/$defs/PhasePosition",
                    "nullable": true,
                    "description": "Position bounds for this phase (0-1 story progress)"
                }
            }
        },
        "StorylinePlanAction": {
            "type": "object",
            "additionalProperties": false,
            "description": "An action in the storyline plan",
            "required": [
                "actionId",
                "category",
                "description"
            ],
            "properties": {
                "actionId": {
                    "type": "string",
                    "description": "Action identifier from action registry"
                },
                "category": {
                    "type": "string",
                    "description": "Action category (e.g., \"conflict\", \"relationship\", \"mystery\")"
                },
                "description": {
                    "type": "string",
                    "description": "Human-readable action description"
                },
                "isCoreEvent": {
                    "type": "boolean",
                    "description": "Whether this is an obligatory scene"
                },
                "participants": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "nullable": true,
                    "description": "Character/entity roles involved"
                },
                "effects": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/ActionEffect"
                    },
                    "nullable": true,
                    "description": "World state effects of this action"
                }
            }
        },
        "ActionEffect": {
            "type": "object",
            "additionalProperties": false,
            "description": "Effect of an action on world state",
            "required": [
                "key",
                "value"
            ],
            "properties": {
                "key": {
                    "type": "string",
                    "description": "State key affected"
                },
                "value": {
                    "type": "string",
                    "description": "New value (as string, caller interprets type)"
                },
                "cardinality": {
                    "type": "string",
                    "enum": [
                        "set",
                        "add",
                        "remove",
                        "increment",
                        "decrement"
                    ],
                    "description": "How to apply the effect"
                }
            }
        },
        "PhaseTargetState": {
            "type": "object",
            "additionalProperties": false,
            "description": "Target state for phase completion",
            "properties": {
                "narrativeState": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "number",
                        "format": "double"
                    },
                    "nullable": true,
                    "description": "Target spectrum values (spectrum name -> value)"
                },
                "facts": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "string"
                    },
                    "nullable": true,
                    "description": "Required world state facts"
                },
                "position": {
                    "type": "number",
                    "format": "double",
                    "minimum": 0,
                    "maximum": 1,
                    "nullable": true,
                    "description": "Target story position (0-1)"
                }
            }
        },
        "PhasePosition": {
            "type": "object",
            "additionalProperties": false,
            "description": "Position bounds for a phase",
            "required": [
                "start",
                "end"
            ],
            "properties": {
                "start": {
                    "type": "number",
                    "format": "double",
                    "minimum": 0,
                    "maximum": 1,
                    "description": "Start position (0-1)"
                },
                "end": {
                    "type": "number",
                    "format": "double",
                    "minimum": 0,
                    "maximum": 1,
                    "description": "End position (0-1)"
                }
            }
        },
        "EntityRequirement": {
            "type": "object",
            "additionalProperties": false,
            "description": "An entity required for the storyline",
            "required": [
                "role",
                "entityType",
                "description"
            ],
            "properties": {
                "role": {
                    "type": "string",
                    "description": "Role in the story (e.g., \"witness\", \"informant\", \"target\")"
                },
                "entityType": {
                    "type": "string",
                    "description": "Type of entity needed (e.g., \"character\", \"location\", \"item\")"
                },
                "description": {
                    "type": "string",
                    "description": "Description of what's needed"
                },
                "constraints": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "string"
                    },
                    "nullable": true,
                    "description": "Constraints on entity selection/creation"
                },
                "sourceArchiveId": {
                    "type": "string",
                    "format": "uuid",
                    "nullable": true,
                    "description": "If derived from an archive, that archive's ID"
                }
            }
        },
        "StorylineLink": {
            "type": "object",
            "additionalProperties": false,
            "description": "A relationship link in the storyline",
            "required": [
                "sourceRole",
                "targetRole",
                "linkType"
            ],
            "properties": {
                "sourceRole": {
                    "type": "string",
                    "description": "Source entity role"
                },
                "targetRole": {
                    "type": "string",
                    "description": "Target entity role"
                },
                "linkType": {
                    "type": "string",
                    "description": "Type of relationship (e.g., \"opposes\", \"allies_with\", \"seeks\")"
                }
            }
        },
        "StorylineRisk": {
            "type": "object",
            "additionalProperties": false,
            "description": "Identified risk in the plan",
            "required": [
                "riskType",
                "description",
                "severity"
            ],
            "properties": {
                "riskType": {
                    "type": "string",
                    "description": "Risk category (e.g., \"missing_entity\", \"low_tension\", \"weak_climax\")"
                },
                "description": {
                    "type": "string",
                    "description": "Risk description"
                },
                "severity": {
                    "type": "string",
                    "enum": [
                        "low",
                        "medium",
                        "high"
                    ],
                    "description": "Risk severity"
                },
                "mitigation": {
                    "type": "string",
                    "nullable": true,
                    "description": "Suggested mitigation"
                }
            }
        }
    }
}
""";

    private static readonly string _GetPlan_Info = """
{
    "summary": "Retrieve a cached storyline plan",
    "description": "Retrieves a previously generated storyline plan by its ID.\nReturns 404 if the plan has expired from cache or doesn't exist.\n",
    "tags": [
        "Plans"
    ],
    "deprecated": false,
    "operationId": "GetPlan"
}
""";

    /// <summary>Returns endpoint information for GetPlan</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("/storyline/plan/get/meta/info")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetPlan_MetaInfo()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildInfoResponse(
            "Storyline",
            "POST",
            "/storyline/plan/get",
            _GetPlan_Info));

    /// <summary>Returns request schema for GetPlan</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("/storyline/plan/get/meta/request-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetPlan_MetaRequestSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Storyline",
            "POST",
            "/storyline/plan/get",
            "request-schema",
            _GetPlan_RequestSchema));

    /// <summary>Returns response schema for GetPlan</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("/storyline/plan/get/meta/response-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetPlan_MetaResponseSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Storyline",
            "POST",
            "/storyline/plan/get",
            "response-schema",
            _GetPlan_ResponseSchema));

    /// <summary>Returns full schema for GetPlan</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("/storyline/plan/get/meta/schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> GetPlan_MetaFullSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildFullSchemaResponse(
            "Storyline",
            "POST",
            "/storyline/plan/get",
            _GetPlan_Info,
            _GetPlan_RequestSchema,
            _GetPlan_ResponseSchema));

    #endregion

    #region Meta Endpoints for ListPlans

    private static readonly string _ListPlans_RequestSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/ListPlansRequest",
    "$defs": {
        "ListPlansRequest": {
            "type": "object",
            "additionalProperties": false,
            "description": "Request to list cached plans",
            "properties": {
                "realmId": {
                    "type": "string",
                    "format": "uuid",
                    "nullable": true,
                    "description": "Filter by realm (optional)"
                },
                "limit": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 100,
                    "default": 20,
                    "description": "Maximum plans to return"
                },
                "offset": {
                    "type": "integer",
                    "minimum": 0,
                    "default": 0,
                    "description": "Pagination offset"
                }
            }
        }
    }
}
""";

    private static readonly string _ListPlans_ResponseSchema = """
{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/$defs/ListPlansResponse",
    "$defs": {
        "ListPlansResponse": {
            "type": "object",
            "additionalProperties": false,
            "description": "List of plans",
            "required": [
                "plans",
                "totalCount"
            ],
            "properties": {
                "plans": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/PlanSummary"
                    },
                    "description": "Plan summaries"
                },
                "totalCount": {
                    "type": "integer",
                    "description": "Total matching plans"
                }
            }
        },
        "PlanSummary": {
            "type": "object",
            "additionalProperties": false,
            "description": "Summary of a cached plan",
            "required": [
                "planId",
                "goal",
                "arcType",
                "confidence",
                "createdAt"
            ],
            "properties": {
                "planId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Plan identifier"
                },
                "goal": {
                    "$ref": "#/$defs/StorylineGoal",
                    "description": "Story goal"
                },
                "arcType": {
                    "$ref": "#/$defs/ArcType",
                    "description": "Arc type"
                },
                "confidence": {
                    "type": "number",
                    "format": "double",
                    "description": "Viability score"
                },
                "realmId": {
                    "type": "string",
                    "format": "uuid",
                    "nullable": true,
                    "description": "Anchored realm (if any)"
                },
                "createdAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "When plan was created"
                },
                "expiresAt": {
                    "type": "string",
                    "format": "date-time",
                    "nullable": true,
                    "description": "When plan expires from cache"
                }
            }
        },
        "StorylineGoal": {
            "type": "string",
            "enum": [
                "revenge",
                "resurrection",
                "legacy",
                "mystery",
                "peace",
                "redemption",
                "conquest",
                "survival"
            ],
            "description": "High-level story goal that drives arc selection.\nrevenge: Character seeks vengeance for past wrongs\nresurrection: Restoring something/someone lost\nlegacy: Creating or continuing a lasting impact\nmystery: Uncovering hidden truths\npeace: Resolving conflicts and finding harmony\nredemption: Atoning for past mistakes\nconquest: Achieving dominion or victory\nsurvival: Overcoming threats to existence\n"
        },
        "ArcType": {
            "type": "string",
            "enum": [
                "rags_to_riches",
                "tragedy",
                "man_in_hole",
                "icarus",
                "cinderella",
                "oedipus"
            ],
            "description": "Emotional arc shapes from Reagan et al. research.\nrags_to_riches: Rise (1)\ntragedy: Fall (2)\nman_in_hole: Fall then rise (3)\nicarus: Rise then fall (4)\ncinderella: Rise, fall, rise (5)\noedipus: Fall, rise, fall (6)\n"
        }
    }
}
""";

    private static readonly string _ListPlans_Info = """
{
    "summary": "List cached storyline plans",
    "description": "Lists storyline plans in the cache, optionally filtered by realm.\nPlans are ordered by creation time (newest first).\n",
    "tags": [
        "Plans"
    ],
    "deprecated": false,
    "operationId": "ListPlans"
}
""";

    /// <summary>Returns endpoint information for ListPlans</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("/storyline/plan/list/meta/info")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> ListPlans_MetaInfo()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildInfoResponse(
            "Storyline",
            "POST",
            "/storyline/plan/list",
            _ListPlans_Info));

    /// <summary>Returns request schema for ListPlans</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("/storyline/plan/list/meta/request-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> ListPlans_MetaRequestSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Storyline",
            "POST",
            "/storyline/plan/list",
            "request-schema",
            _ListPlans_RequestSchema));

    /// <summary>Returns response schema for ListPlans</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("/storyline/plan/list/meta/response-schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> ListPlans_MetaResponseSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildSchemaResponse(
            "Storyline",
            "POST",
            "/storyline/plan/list",
            "response-schema",
            _ListPlans_ResponseSchema));

    /// <summary>Returns full schema for ListPlans</summary>
    [Microsoft.AspNetCore.Mvc.HttpGet, Microsoft.AspNetCore.Mvc.Route("/storyline/plan/list/meta/schema")]
    public Microsoft.AspNetCore.Mvc.ActionResult<BeyondImmersion.BannouService.Meta.MetaResponse> ListPlans_MetaFullSchema()
        => Ok(BeyondImmersion.BannouService.Meta.MetaResponseBuilder.BuildFullSchemaResponse(
            "Storyline",
            "POST",
            "/storyline/plan/list",
            _ListPlans_Info,
            _ListPlans_RequestSchema,
            _ListPlans_ResponseSchema));

    #endregion
}
