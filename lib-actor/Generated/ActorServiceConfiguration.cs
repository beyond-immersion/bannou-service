//----------------------
// <auto-generated>
//     Generated from OpenAPI schema: schemas/actor-configuration.yaml
//
//     WARNING: DO NOT EDIT THIS FILE (TENETS T1/T2)
//     This file is auto-generated from configuration schema.
//     Any manual changes will be overwritten on next generation.
//
//     To add/modify configuration:
//     1. Edit the source schema (schemas/actor-configuration.yaml)
//     2. Run: scripts/generate-all-services.sh
//
//     USAGE (TENET T21 - Configuration-First):
//     Access configuration via dependency injection, never Environment.GetEnvironmentVariable.
//     Example: public MyService(ActorServiceConfiguration config) { _config = config; }
//
//     See: docs/reference/tenets/FOUNDATION.md (T1, T2)
//     See: docs/reference/tenets/IMPLEMENTATION.md (T21: Configuration-First)
// </auto-generated>
//----------------------

using System.ComponentModel.DataAnnotations;
using BeyondImmersion.BannouService;
using BeyondImmersion.BannouService.Attributes;
using BeyondImmersion.BannouService.Configuration;

#nullable enable

namespace BeyondImmersion.BannouService.Actor;

/// <summary>
/// Configuration class for Actor service.
/// Properties are automatically bound from environment variables.
/// </summary>
/// <remarks>
/// <para>
/// <b>TENET T21 - Configuration-First:</b> Access configuration via dependency injection.
/// Never use <c>Environment.GetEnvironmentVariable()</c> directly in service code.
/// </para>
/// <para>
/// Environment variable names follow the pattern: {SERVICE}_{PROPERTY} (e.g., AUTH_JWT_SECRET).
/// </para>
/// </remarks>
[ServiceConfiguration(typeof(ActorService))]
public class ActorServiceConfiguration : IServiceConfiguration
{
    /// <inheritdoc />
    public string? ForceServiceId { get; set; }

    /// <summary>
    /// Actor deployment mode: bannou (local dev), pool-per-type, shared-pool, or auto-scale
    /// Environment variable: ACTOR_DEPLOYMENT_MODE
    /// </summary>
    public string DeploymentMode { get; set; } = "bannou";

    /// <summary>
    /// Docker image for pool nodes (pool-per-type, shared-pool, auto-scale modes)
    /// Environment variable: ACTOR_POOL_NODE_IMAGE
    /// </summary>
    public string PoolNodeImage { get; set; } = "bannou-actor-pool:latest";

    /// <summary>
    /// Minimum pool nodes to maintain (auto-scale mode)
    /// Environment variable: ACTOR_MIN_POOL_NODES
    /// </summary>
    public int MinPoolNodes { get; set; } = 1;

    /// <summary>
    /// Maximum pool nodes allowed (auto-scale mode)
    /// Environment variable: ACTOR_MAX_POOL_NODES
    /// </summary>
    public int MaxPoolNodes { get; set; } = 10;

    /// <summary>
    /// Default capacity per pool node
    /// Environment variable: ACTOR_DEFAULT_ACTORS_PER_NODE
    /// </summary>
    public int DefaultActorsPerNode { get; set; } = 100;

    /// <summary>
    /// Pool node heartbeat frequency
    /// Environment variable: ACTOR_HEARTBEAT_INTERVAL_SECONDS
    /// </summary>
    public int HeartbeatIntervalSeconds { get; set; } = 10;

    /// <summary>
    /// Mark node unhealthy after this many seconds without heartbeat
    /// Environment variable: ACTOR_HEARTBEAT_TIMEOUT_SECONDS
    /// </summary>
    public int HeartbeatTimeoutSeconds { get; set; } = 30;

    /// <summary>
    /// Default behavior loop interval in milliseconds
    /// Environment variable: ACTOR_DEFAULT_TICK_INTERVAL_MS
    /// </summary>
    public int DefaultTickIntervalMs { get; set; } = 100;

    /// <summary>
    /// Default interval for periodic state saves (0 to disable)
    /// Environment variable: ACTOR_DEFAULT_AUTOSAVE_INTERVAL_SECONDS
    /// </summary>
    public int DefaultAutoSaveIntervalSeconds { get; set; } = 60;

    /// <summary>
    /// Max perceptions queued per actor before dropping oldest
    /// Environment variable: ACTOR_PERCEPTION_QUEUE_SIZE
    /// </summary>
    public int PerceptionQueueSize { get; set; } = 100;

    /// <summary>
    /// Max messages queued per actor before dropping oldest
    /// Environment variable: ACTOR_MESSAGE_QUEUE_SIZE
    /// </summary>
    public int MessageQueueSize { get; set; } = 50;

    /// <summary>
    /// State update transport: messaging (default, works in bannou mode) or internal-connect (production)
    /// Environment variable: ACTOR_STATE_UPDATE_TRANSPORT
    /// </summary>
    public string StateUpdateTransport { get; set; } = "messaging";

    /// <summary>
    /// Threshold for triggering GOAP replanning when goal relevance drops below this value
    /// Environment variable: ACTOR_GOAP_REPLAN_THRESHOLD
    /// </summary>
    public double GoapReplanThreshold { get; set; } = 0.3;

    /// <summary>
    /// Maximum depth for GOAP planning search
    /// Environment variable: ACTOR_GOAP_MAX_PLAN_DEPTH
    /// </summary>
    public int GoapMaxPlanDepth { get; set; } = 10;

    /// <summary>
    /// Maximum time allowed for GOAP planning in milliseconds
    /// Environment variable: ACTOR_GOAP_PLAN_TIMEOUT_MS
    /// </summary>
    public int GoapPlanTimeoutMs { get; set; } = 50;

}
