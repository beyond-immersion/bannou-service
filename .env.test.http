# CI Environment Configuration for HTTP Integration Testing
# This file configures the coordinator service and test environment

# Database Configuration (CI-safe test values)
ACCOUNT_DB_USER=guest
ACCOUNT_DB_PASSWORD=guest

# Auth Configuration (CI-safe test keys)
AUTH_TOKEN_PUBLIC_KEY=ci_http_public_key
AUTH_TOKEN_PRIVATE_KEY=ci_http_private_key

# Auth Service Configuration (BANNOU_ prefix for auto-binding)
BANNOU_JWTSECRET=ci-http-test-jwt-secret-key-2025
BANNOU_JWTISSUER=bannou-auth-ci
BANNOU_JWTAUDIENCE=bannou-api-ci
BANNOU_JWTEXPIRATIONMINUTES=60
BANNOU_ACCESSTOKENEXPIRATIONMINUTES=60

# OAuth/Steam Mock Providers (for CI testing without real credentials)
BANNOU_MOCKPROVIDERS=true
BANNOU_MOCKSTEAMID=76561198000000001
BANNOU_MOCKDISCORDID=123456789012345678
BANNOU_MOCKGOOGLEID=mock-google-user-id-12345

# OAuth Provider Configuration (dummy values for mock mode)
BANNOU_DISCORDCLIENTID=test-discord-client-id
BANNOU_DISCORDCLIENTSECRET=test-discord-client-secret
BANNOU_GOOGLECLIENTID=test-google-client-id
BANNOU_GOOGLECLIENTSECRET=test-google-client-secret
BANNOU_TWITCHCLIENTID=test-twitch-client-id
BANNOU_TWITCHCLIENTSECRET=test-twitch-client-secret
BANNOU_STEAMAPIKEY=test-steam-api-key
BANNOU_STEAMAPPID=123456

# Fallback Auth Configuration (AUTH_ prefix)
AUTH_JWT_SECRET=ci-http-test-jwt-secret-key-2025
AUTH_JWT_ISSUER=bannou-auth-ci
AUTH_JWT_AUDIENCE=bannou-api-ci
AUTH_JWT_EXPIRATION_MINUTES=60

# Legacy Auth Configuration (no prefix)
JWTSECRET=ci-http-test-jwt-secret-key-2025
JWTISSUER=bannou-auth-ci
JWTAUDIENCE=bannou-api-ci
JWTEXPIRATIONMINUTES=60

# Service Configuration
ASPNETCORE_ENVIRONMENT=Development
BANNOU_APP_LOGGING_LEVEL=Debug
BANNOU_WEB_HOST_LOGGING_LEVEL=Warning

# Coordinator Service Mode Configuration
SERVICE_DOMAIN=ci-http-test
SERVICES_ENABLED=true
BANNOU_MODE=bannou
COORDINATOR_ENABLED=true
DAEMON_MODE=true

# HTTP Testing Specific Configuration
HTTP_INTEGRATION_TESTING=true

# Orchestrator Service Configuration
ORCHESTRATOR_SERVICE_ENABLED=true
BANNOU_RedisConnectionString=bannou-redis:6379
# Direct RabbitMQ connection (used by Orchestrator and Connect service)
BANNOU_RabbitMqConnectionString=amqp://guest:guest@rabbitmq:5672

# Connection Strings
AUTHORIZATION_REDIS_CONNECTION_STRING=bannou-redis:6379
CONNECT_REDIS_CONNECTION_STRING=bannou-redis:6379

# Service Endpoints for Coordinator
COORDINATOR_TARGET_HOST=bannou-test-subject
COORDINATOR_TARGET_PORT=8080

# Admin Role Configuration (for orchestrator API tests)
# Emails matching this domain pattern get admin role on registration
BANNOU_ADMINEMAILDOMAIN=@admin.test.local

# Service Heartbeat Configuration (faster for testing)
# Default is 30 seconds, but in testing we want fast convergence
HEARTBEAT_INTERVAL_SECONDS=5
# Enable permission re-registration on each heartbeat (solves late-subscriber issues)
PERMISSION_HEARTBEAT_ENABLED=true
