# CI Environment Configuration for HTTP Integration Testing
# This file configures the coordinator service and test environment
# Uses canonical environment variable naming per Tenet 21

# =============================================================================
# Database Configuration
# =============================================================================
ACCOUNT_DB_USER=guest
ACCOUNT_DB_PASSWORD=guest

# =============================================================================
# Auth Service Configuration (canonical AUTH_* prefix)
# =============================================================================
AUTH_JWT_SECRET=ci-http-test-jwt-secret-key-2025
AUTH_JWT_ISSUER=bannou-auth-ci
AUTH_JWT_AUDIENCE=bannou-api-ci
AUTH_JWT_EXPIRATION_MINUTES=60

# Main App JWT Configuration (required for JWT validation in Program.cs)
BANNOU_JWTSECRET=ci-http-test-jwt-secret-key-2025
BANNOU_JWTISSUER=bannou-auth-ci
BANNOU_JWTAUDIENCE=bannou-api-ci

# OAuth/Steam Mock Providers (for CI testing without real credentials)
AUTH_MOCK_PROVIDERS=true
AUTH_MOCK_STEAM_ID=76561198000000001
AUTH_MOCK_DISCORD_ID=123456789012345678
AUTH_MOCK_GOOGLE_ID=mock-google-user-id-12345

# OAuth Provider Configuration (dummy values for mock mode)
AUTH_DISCORD_CLIENT_ID=test-discord-client-id
AUTH_DISCORD_CLIENT_SECRET=test-discord-client-secret
AUTH_GOOGLE_CLIENT_ID=test-google-client-id
AUTH_GOOGLE_CLIENT_SECRET=test-google-client-secret
AUTH_TWITCH_CLIENT_ID=test-twitch-client-id
AUTH_TWITCH_CLIENT_SECRET=test-twitch-client-secret
AUTH_STEAM_API_KEY=test-steam-api-key
AUTH_STEAM_APP_ID=123456

# Admin Role Configuration (for orchestrator API tests)
# NOTE: Admin role assignment is handled by Accounts service, not Auth service
ACCOUNTS_ADMIN_EMAIL_DOMAIN=@admin.test.local

# =============================================================================
# Connect Service Configuration (canonical CONNECT_* prefix)
# =============================================================================
CONNECT_RABBITMQ_CONNECTION_STRING=amqp://guest:guest@rabbitmq:5672
CONNECT_SERVER_SALT=ci-http-test-server-salt

# =============================================================================
# Game Session Service Configuration (canonical GAMESESSION_* prefix)
# =============================================================================
GAMESESSION_SERVERSALT=ci-http-test-server-salt

# =============================================================================
# Orchestrator Service Configuration (canonical ORCHESTRATOR_* prefix)
# =============================================================================
ORCHESTRATOR_SERVICE_ENABLED=true
ORCHESTRATOR_REDIS_CONNECTION_STRING=bannou-redis:6379
ORCHESTRATOR_RABBITMQ_CONNECTION_STRING=amqp://guest:guest@rabbitmq:5672

# =============================================================================
# State Service Configuration (canonical STATE_* prefix)
# =============================================================================
STATE_REDIS_CONNECTION_STRING=bannou-redis:6379
STATE_MYSQL_CONNECTION_STRING=Server=account-db;Port=3306;Database=bannou_state;User=guest;Password=guest;

# =============================================================================
# Mesh Service Configuration (canonical MESH_* prefix)
# =============================================================================
MESH_REDIS_CONNECTION_STRING=bannou-redis:6379

# =============================================================================
# Messaging Service Configuration (canonical MESSAGING_* prefix)
# =============================================================================
# Disable MassTransit/NativeEventConsumerBackend - use Dapr pub/sub for now
MESSAGING_USE_MASSTRANSIT=false

# =============================================================================
# Asset Service Configuration (canonical ASSET_* prefix)
# =============================================================================
ASSET_STORAGE_ENDPOINT=minio:9000
ASSET_STORAGE_ACCESS_KEY=minioadmin
ASSET_STORAGE_SECRET_KEY=minioadmin
ASSET_STORAGE_BUCKET=bannou-assets

# =============================================================================
# Service Configuration
# =============================================================================
ASPNETCORE_ENVIRONMENT=Development
BANNOU_APP_ID=bannou
SERVICE_DOMAIN=ci-http-test
SERVICES_ENABLED=true

# Test harness control (read directly by Program.cs)
DAEMON_MODE=true

# =============================================================================
# Service Heartbeat Configuration (faster for testing)
# =============================================================================
# HEARTBEAT_ENABLED is read directly by Program.cs (not via configuration system)
HEARTBEAT_ENABLED=true
# These use AppConfiguration with BANNOU_ prefix requirement
BANNOU_HEARTBEAT_INTERVAL_SECONDS=5
BANNOU_PERMISSION_HEARTBEAT_ENABLED=true
