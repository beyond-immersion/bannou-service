// <auto-generated>
// This code was generated by generate-client-proxies.py
// Do not edit this file manually.
// </auto-generated>

#nullable enable

using BeyondImmersion.Bannou.Core;
using BeyondImmersion.BannouService.Connect;

namespace BeyondImmersion.Bannou.Client.Proxies;

/// <summary>
/// Typed proxy for Bannou Connect API API endpoints.
/// </summary>
public sealed class ConnectProxy
{
    private readonly IBannouClient _client;

    /// <summary>
    /// Creates a new ConnectProxy instance.
    /// </summary>
    /// <param name="client">The underlying Bannou client.</param>
    internal ConnectProxy(IBannouClient client)
    {
        _client = client ?? throw new ArgumentNullException(nameof(client));
    }

    /// <summary>
    /// Internal API proxy for stateless requests
    /// </summary>
    /// <param name="request">The request payload.</param>
    /// <param name="channel">Message channel for ordering (default 0).</param>
    /// <param name="timeout">Request timeout.</param>
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>ApiResponse containing InternalProxyResponse on success.</returns>
    public Task<ApiResponse<InternalProxyResponse>> ProxyInternalRequestAsync(
        InternalProxyRequest request,
        ushort channel = 0,
        TimeSpan? timeout = null,
        CancellationToken cancellationToken = default)
    {
        return _client.InvokeAsync<InternalProxyRequest, InternalProxyResponse>(
            "/internal/proxy", request, channel, timeout, cancellationToken);
    }

    /// <summary>
    /// Get client capability manifest (GUID â†’ API mappings)
    /// </summary>
    /// <param name="request">The request payload.</param>
    /// <param name="channel">Message channel for ordering (default 0).</param>
    /// <param name="timeout">Request timeout.</param>
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>ApiResponse containing ClientCapabilitiesResponse on success.</returns>
    public Task<ApiResponse<ClientCapabilitiesResponse>> GetClientCapabilitiesAsync(
        GetClientCapabilitiesRequest request,
        ushort channel = 0,
        TimeSpan? timeout = null,
        CancellationToken cancellationToken = default)
    {
        return _client.InvokeAsync<GetClientCapabilitiesRequest, ClientCapabilitiesResponse>(
            "/client-capabilities", request, channel, timeout, cancellationToken);
    }

    /// <summary>
    /// Establish WebSocket connection (POST variant)
    /// </summary>
    /// <param name="request">The request payload.</param>
    /// <param name="channel">Message channel for ordering (default 0).</param>
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>Task that completes when the event is sent.</returns>
    public Task ConnectWebSocketPostEventAsync(
        ConnectRequest request,
        ushort channel = 0,
        CancellationToken cancellationToken = default)
    {
        return _client.SendEventAsync<ConnectRequest>(
            "/connect", request, channel, cancellationToken);
    }

    /// <summary>
    /// Permission-gated proxy for endpoint metadata
    /// </summary>
    /// <param name="request">The request payload.</param>
    /// <param name="channel">Message channel for ordering (default 0).</param>
    /// <param name="timeout">Request timeout.</param>
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>ApiResponse containing GetEndpointMetaResponse on success.</returns>
    public Task<ApiResponse<GetEndpointMetaResponse>> GetEndpointMetaAsync(
        GetEndpointMetaRequest request,
        ushort channel = 0,
        TimeSpan? timeout = null,
        CancellationToken cancellationToken = default)
    {
        return _client.InvokeAsync<GetEndpointMetaRequest, GetEndpointMetaResponse>(
            "/connect/get-endpoint-meta", request, channel, timeout, cancellationToken);
    }

    /// <summary>
    /// Get all active WebSocket sessions for an account
    /// </summary>
    /// <param name="request">The request payload.</param>
    /// <param name="channel">Message channel for ordering (default 0).</param>
    /// <param name="timeout">Request timeout.</param>
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>ApiResponse containing GetAccountSessionsResponse on success.</returns>
    public Task<ApiResponse<GetAccountSessionsResponse>> GetAccountSessionsAsync(
        GetAccountSessionsRequest request,
        ushort channel = 0,
        TimeSpan? timeout = null,
        CancellationToken cancellationToken = default)
    {
        return _client.InvokeAsync<GetAccountSessionsRequest, GetAccountSessionsResponse>(
            "/connect/get-account-sessions", request, channel, timeout, cancellationToken);
    }
}
