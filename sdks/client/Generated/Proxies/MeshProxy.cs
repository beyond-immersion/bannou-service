// <auto-generated>
// This code was generated by generate-client-proxies.py
// Do not edit this file manually.
// </auto-generated>

#nullable enable

using BeyondImmersion.Bannou.Core;
using BeyondImmersion.BannouService.Mesh;

namespace BeyondImmersion.Bannou.Client.Proxies;

/// <summary>
/// Typed proxy for Bannou Mesh Service API API endpoints.
/// </summary>
public sealed class MeshProxy
{
    private readonly IBannouClient _client;

    /// <summary>
    /// Creates a new MeshProxy instance.
    /// </summary>
    /// <param name="client">The underlying Bannou client.</param>
    internal MeshProxy(IBannouClient client)
    {
        _client = client ?? throw new ArgumentNullException(nameof(client));
    }

    /// <summary>
    /// Get endpoints for a service
    /// </summary>
    /// <param name="request">The request payload.</param>
    /// <param name="channel">Message channel for ordering (default 0).</param>
    /// <param name="timeout">Request timeout.</param>
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>ApiResponse containing GetEndpointsResponse on success.</returns>
    public Task<ApiResponse<GetEndpointsResponse>> GetEndpointsAsync(
        GetEndpointsRequest request,
        ushort channel = 0,
        TimeSpan? timeout = null,
        CancellationToken cancellationToken = default)
    {
        return _client.InvokeAsync<GetEndpointsRequest, GetEndpointsResponse>(
            "POST", "/mesh/endpoints/get", request, channel, timeout, cancellationToken);
    }

    /// <summary>
    /// List all registered endpoints
    /// </summary>
    /// <param name="request">The request payload.</param>
    /// <param name="channel">Message channel for ordering (default 0).</param>
    /// <param name="timeout">Request timeout.</param>
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>ApiResponse containing ListEndpointsResponse on success.</returns>
    public Task<ApiResponse<ListEndpointsResponse>> ListEndpointsAsync(
        ListEndpointsRequest request,
        ushort channel = 0,
        TimeSpan? timeout = null,
        CancellationToken cancellationToken = default)
    {
        return _client.InvokeAsync<ListEndpointsRequest, ListEndpointsResponse>(
            "POST", "/mesh/endpoints/list", request, channel, timeout, cancellationToken);
    }

    /// <summary>
    /// Register a service endpoint
    /// </summary>
    /// <param name="request">The request payload.</param>
    /// <param name="channel">Message channel for ordering (default 0).</param>
    /// <param name="timeout">Request timeout.</param>
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>ApiResponse containing RegisterEndpointResponse on success.</returns>
    public Task<ApiResponse<RegisterEndpointResponse>> RegisterEndpointAsync(
        RegisterEndpointRequest request,
        ushort channel = 0,
        TimeSpan? timeout = null,
        CancellationToken cancellationToken = default)
    {
        return _client.InvokeAsync<RegisterEndpointRequest, RegisterEndpointResponse>(
            "POST", "/mesh/register", request, channel, timeout, cancellationToken);
    }

    /// <summary>
    /// Deregister a service endpoint
    /// </summary>
    /// <param name="request">The request payload.</param>
    /// <param name="channel">Message channel for ordering (default 0).</param>
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>Task that completes when the event is sent.</returns>
    public Task DeregisterendpointEventAsync(
        DeregisterEndpointRequest request,
        ushort channel = 0,
        CancellationToken cancellationToken = default)
    {
        return _client.SendEventAsync<DeregisterEndpointRequest>(
            "POST", "/mesh/deregister", request, channel, cancellationToken);
    }

    /// <summary>
    /// Update endpoint health and load
    /// </summary>
    /// <param name="request">The request payload.</param>
    /// <param name="channel">Message channel for ordering (default 0).</param>
    /// <param name="timeout">Request timeout.</param>
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>ApiResponse containing HeartbeatResponse on success.</returns>
    public Task<ApiResponse<HeartbeatResponse>> HeartbeatAsync(
        HeartbeatRequest request,
        ushort channel = 0,
        TimeSpan? timeout = null,
        CancellationToken cancellationToken = default)
    {
        return _client.InvokeAsync<HeartbeatRequest, HeartbeatResponse>(
            "POST", "/mesh/heartbeat", request, channel, timeout, cancellationToken);
    }

    /// <summary>
    /// Get optimal endpoint for routing
    /// </summary>
    /// <param name="request">The request payload.</param>
    /// <param name="channel">Message channel for ordering (default 0).</param>
    /// <param name="timeout">Request timeout.</param>
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>ApiResponse containing GetRouteResponse on success.</returns>
    public Task<ApiResponse<GetRouteResponse>> GetRouteAsync(
        GetRouteRequest request,
        ushort channel = 0,
        TimeSpan? timeout = null,
        CancellationToken cancellationToken = default)
    {
        return _client.InvokeAsync<GetRouteRequest, GetRouteResponse>(
            "POST", "/mesh/route", request, channel, timeout, cancellationToken);
    }

    /// <summary>
    /// Get service-to-app-id mappings
    /// </summary>
    /// <param name="request">The request payload.</param>
    /// <param name="channel">Message channel for ordering (default 0).</param>
    /// <param name="timeout">Request timeout.</param>
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>ApiResponse containing GetMappingsResponse on success.</returns>
    public Task<ApiResponse<GetMappingsResponse>> GetMappingsAsync(
        GetMappingsRequest request,
        ushort channel = 0,
        TimeSpan? timeout = null,
        CancellationToken cancellationToken = default)
    {
        return _client.InvokeAsync<GetMappingsRequest, GetMappingsResponse>(
            "POST", "/mesh/mappings", request, channel, timeout, cancellationToken);
    }

    /// <summary>
    /// Get mesh health status
    /// </summary>
    /// <param name="request">The request payload.</param>
    /// <param name="channel">Message channel for ordering (default 0).</param>
    /// <param name="timeout">Request timeout.</param>
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>ApiResponse containing MeshHealthResponse on success.</returns>
    public Task<ApiResponse<MeshHealthResponse>> GetHealthAsync(
        GetHealthRequest request,
        ushort channel = 0,
        TimeSpan? timeout = null,
        CancellationToken cancellationToken = default)
    {
        return _client.InvokeAsync<GetHealthRequest, MeshHealthResponse>(
            "POST", "/mesh/health", request, channel, timeout, cancellationToken);
    }
}
