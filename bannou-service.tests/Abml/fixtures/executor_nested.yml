version: "2.0"
metadata:
  id: nested
flows:
  start:
    actions:
      - set:
          variable: total
          value: "0"
      - for_each:
          variable: row
          collection: "${rows}"
          do:
            - for_each:
                variable: col
                collection: "${cols}"
                do:
                  - cond:
                      - when: "${row == col}"
                        then:
                          - increment:
                              variable: total
      - log: { message: "Diagonal count: ${total}" }
